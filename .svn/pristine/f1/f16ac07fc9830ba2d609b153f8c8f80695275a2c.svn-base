webpackJsonp([33,43],{3:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,'.mint-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:4px;border:0;box-sizing:border-box;color:inherit;display:block;font-size:18px;height:41px;outline:0;overflow:hidden;position:relative;text-align:center}.mint-button:after{background-color:#000;content:" ";opacity:0;top:0;right:0;bottom:0;left:0;position:absolute}.mint-button:not(.is-disabled):active:after{opacity:.4}.mint-button.is-disabled{opacity:.6}.mint-button-icon{vertical-align:middle;display:inline-block}.mint-button--default{color:#656b79;background-color:#f6f8fa;box-shadow:0 0 1px #b8bbbf}.mint-button--default.is-plain{border:1px solid #5a5a5a;background-color:transparent;box-shadow:none;color:#5a5a5a}.mint-button--primary{color:#fff;background-color:#26a2ff}.mint-button--primary.is-plain{border:1px solid #26a2ff;background-color:transparent;color:#26a2ff}.mint-button--danger{color:#fff;background-color:#ef4f4f}.mint-button--danger.is-plain{border:1px solid #ef4f4f;background-color:transparent;color:#ef4f4f}.mint-button--large{display:block;width:100%}.mint-button--normal,.mint-button--small{display:inline-block;padding:0 12px}.mint-button--small{font-size:14px;height:33px}',""])},4:function(e,t,i){var a=i(3);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)},5:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".mint-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#26a2ff;box-sizing:border-box;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;height:40px;line-height:1;padding:0 10px;position:relative;text-align:center;white-space:nowrap}.mint-header .mint-button{background-color:transparent;border:0;box-shadow:none;color:inherit;display:inline-block;padding:0;font-size:inherit}.mint-header .mint-button:after{content:none}.mint-header.is-fixed{top:0;right:0;left:0;position:fixed;z-index:1}.mint-header-button{-webkit-box-flex:.5;-ms-flex:.5;flex:.5}.mint-header-button>a{color:inherit}.mint-header-button.is-right{text-align:right}.mint-header-button.is-left{text-align:left}.mint-header-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:inherit;font-weight:400;-webkit-box-flex:1;-ms-flex:1;flex:1}",""])},6:function(e,t,i){var a=i(5);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)},11:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".mint-field{display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field .mint-cell-title{width:105px;-webkit-box-flex:0;-ms-flex:none;flex:none}.mint-field .mint-cell-value{-webkit-box-flex:1;-ms-flex:1;flex:1;color:inherit;display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field.is-nolabel .mint-cell-title{display:none}.mint-field.is-textarea{-webkit-box-align:inherit;-ms-flex-align:inherit;-ms-grid-row-align:inherit;align-items:inherit}.mint-field.is-textarea .mint-cell-title{padding:10px 0}.mint-field.is-textarea .mint-cell-value{padding:5px 0}.mint-field-core{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;border:0;-webkit-box-flex:1;-ms-flex:1;flex:1;outline:0;line-height:1.6;font-size:inherit;width:100%}.mint-field-clear{opacity:.2}.mint-field-state{color:inherit;margin-left:20px}.mint-field-state .mintui{font-size:20px}.mint-field-state.is-default{margin-left:0}.mint-field-state.is-success{color:#4caf50}.mint-field-state.is-warning{color:#ffc107}.mint-field-state.is-error{color:#f44336}.mint-field-other{top:0;right:0;position:absolute}",""])},12:function(e,t,i){var a=i(11);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)},241:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".page_wrap{width:100%;height:100%;background:#f0f1f5}.page_wrap .deliver_page{padding:2.5rem 0 1rem;background:#f0f1f5}.page_wrap .deliver_page label.mint-checklist-title{margin:0}.page_wrap .deliver_page .mint-cell-wrapper{padding:0 22px}.page_wrap .deliver_page .p_text{font-size:12px;color:#878787;padding:14px 10px 5px}.page_wrap .deliver_page .mint-checklist .mint-cell{min-height:36px}.page_wrap .deliver_page .mint-checklist .mint-cell .mint-cell-wrapper{font-size:14px;color:#878787}.page_wrap .deliver_page .mint-checkbox-core{width:16px;height:16px}.page_wrap .deliver_page .mint-cell:last-child{background-image:none}.page_wrap .deliver_page .mint-checkbox-core:after{top:2px;left:5px}.page_wrap .deliver_page .button{margin-top:1rem;padding:0 1rem 1rem}.page_wrap .deliver_page .mint-checklist-label{height:18px;line-height:18px}.page_wrap .deliver_page .forwardTime{overflow:hidden;padding-top:15px}.page_wrap .deliver_page .forwardTime .oaTimeLimitUnit{padding-right:22px;box-sizing:border-box;float:left;width:30%;height:48px;overflow:hidden}.page_wrap .deliver_page .forwardTime .oaTimeLimitUnit select{width:80px;height:100%;line-height:48px;direction:rtl;padding-right:22px;box-sizing:border-box;font-size:16px}.page_wrap .deliver_page .forwardTime .oaTimeLimitUnit select option{direction:ltr}.page_wrap .deliver_page .forwardTime .mint-cell.mint-field{width:70%;float:left}.page_wrap .deliver_page .forwardTime .mint-cell.mint-field .mint-cell-wrapper{background-image:none}.page_wrap .deliver_page .mint-checkbox-input[disabled]+.mint-checkbox-core{background-color:#888;border-color:#666}.page_wrap .mint-header-title{font-size:18px}",""])},250:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,'.mint-checklist .mint-cell{padding:0}.mint-checklist.is-limit .mint-checkbox-core:not(:checked){background-color:#d9d9d9;border-color:#d9d9d9}.mint-checklist-label{display:block;padding:0 10px}.mint-checklist-title{color:#888;display:block;font-size:12px;margin:8px}.mint-checkbox.is-right{float:right}.mint-checkbox-label{vertical-align:middle;margin-left:6px}.mint-checkbox-input{display:none}.mint-checkbox-input:checked+.mint-checkbox-core{background-color:#26a2ff;border-color:#26a2ff}.mint-checkbox-input:checked+.mint-checkbox-core:after{border-color:#fff;-webkit-transform:rotate(45deg) scale(1);transform:rotate(45deg) scale(1)}.mint-checkbox-input[disabled]+.mint-checkbox-core{background-color:#d9d9d9;border-color:#ccc}.mint-checkbox-core{display:inline-block;background-color:#fff;border-radius:100%;border:1px solid #ccc;position:relative;width:20px;height:20px;vertical-align:middle}.mint-checkbox-core:after{border:2px solid transparent;border-left:0;border-top:0;content:" ";top:3px;left:6px;position:absolute;width:4px;height:8px;-webkit-transform:rotate(45deg) scale(0);transform:rotate(45deg) scale(0);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}',""])},373:function(e,t,i){var a=i(241);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)},382:function(e,t,i){var a=i(250);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)},431:function(e,t,i){i(373);var a=i(8)(i(598),i(474),null,null);e.exports=a.exports},474:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page_wrap"},[i("mt-header",{attrs:{title:e.pageTitle,fixed:""}},[i("div",{slot:"left"},[i("mt-button",{attrs:{icon:"back"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)]),e._v(" "),i("div",{staticClass:"page_cont deliver_page"},[i("p",{staticClass:"p_text",staticStyle:{color:"#000"}},[e._v("当前步骤："),i("span",{staticStyle:{color:"#ed6d6d"}},[e._v(e._s(e.currNodeName))])]),e._v(" "),i("mt-field",{attrs:{placeholder:"请输入审批意见",type:"textarea",rows:"4"},model:{value:e.deliverance,callback:function(t){e.deliverance=t},expression:"deliverance"}}),e._v(" "),e.showForwardTime?i("div",{staticClass:"forwardTime"},[i("mt-field",{attrs:{label:"办理时限",placeholder:"输入实数",type:"number"},model:{value:e.oaTimeLimit,callback:function(t){e.oaTimeLimit=t},expression:"oaTimeLimit"}}),e._v(" "),i("div",{staticClass:"oaTimeLimitUnit mint-cell"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.oaTimeLimitUnit,expression:"oaTimeLimitUnit"}],attrs:{name:"oaTimeLimitUnit"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.oaTimeLimitUnit=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"0"}},[e._v("天")]),e._v(" "),i("option",{attrs:{value:"1"}},[e._v("时")]),e._v(" "),i("option",{attrs:{value:"2"}},[e._v("分")])]),e._v(" "),i("i",{staticClass:"mint-cell-allow-right"})])],1):e._e(),e._v(" "),i("p",{staticClass:"p_text"},[e._v("选择"+e._s(e.pageTitle)+"步骤")]),e._v(" "),i("p",{staticClass:"p_text",staticStyle:{padding:"5px 10px 5px"}},[e._v("下一步骤："),i("span",{staticStyle:{color:"#26a2ff"}},[e._v(e._s(e.nextNodeName))])]),e._v(" "),e._l(e.dataList,function(t,a){return t.isopTypeNode?i("div",{staticClass:"parent_cell",attrs:{keyId:t.keyId}},[i("mt-cell",{attrs:{title:t.name,"is-link":"",value:e.changeFormat(t.cellValue)},nativeOn:{click:function(t){e.showSelect(a)}}}),e._v(" "),t.show?i("mt-checklist",{attrs:{options:t.options,align:"right"},nativeOn:{click:function(t){e.selectChecker(a,t)}},model:{value:t.cellValue,callback:function(e){t.cellValue=e},expression:"item.cellValue"}}):e._e()],1):e._e()}),e._v(" "),i("div",{staticClass:"button"},[i("mt-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(t){e.deliverToU(t)}}},[e._v("确定")])],1)],2)],1)},staticRenderFns:[]}},598:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(10),n=a(o),r=i(7);i(4),i(6),i(14),i(12),i(382),i(13);var l=i(9);t.default={name:"deliver",components:{"mt-button":r.Button,"mt-header":r.Header,"mt-cell":r.Cell,"mt-field":r.Field,"mt-checklist":r.Checklist},data:function(){return{deliverance:"",currNodeName:"",currNode:"",designId:"",dataList:[],nextStep:"",index:-1,showForwardTime:!1,oaTimeLimit:"",oaTimeLimitUnit:"0",nextNodeName:"请选择步骤",pageTitle:""}},methods:(0,n.default)({},(0,l.mapActions)(["deliverPre"]),(0,l.mapActions)(["deliverTo"]),{showSelect:function(e){if(this.dataList[e].forwardTime?this.showForwardTime=!0:this.showForwardTime=!1,this.dataList[e].show===!1)for(var t=0;t<this.dataList.length;t++)this.dataList[t].show=!1;if(this.dataList[e].show=!this.dataList[e].show,this.index=e,0===this.dataList[e].cellValue.length)for(var i=0;i<this.dataList.length;i++)i===e?this.dataList[e].cellValue=this.dataList[e].allCellValue:this.dataList[i].cellValue=[];this.nextNodeName=this.dataList[e].name},selectChecker:function(e,t){for(var i=0;i<this.dataList.length;i++)i!==e&&this.dataList[i].cellValue.splice(0,this.dataList[i].cellValue.length)},changeFormat:function(e){var t=e.map(function(e){return e});return t.length>2?(t.splice(2,t.length-2),t.join(",")+"..."):t.join(",")},deliverToU:function(){if(this.index===-1)return void(0,r.Toast)({message:"请先选择审核步骤！",duration:1e3});var e=this.$route.params.prevRouteName,t={deliverance:this.deliverance,currNode:this.currNode,designId:this.designId,tableName:this.$route.params.tableName,keyId:this.$route.params.keyId,nextStep:this.dataList[this.index].keyId};this.showForwardTime&&(t.oaTimeLimit=""===this.oaTimeLimit?0:Number(this.oaTimeLimit),t.oaTimeLimitUnit=parseInt(this.oaTimeLimitUnit));for(var i=[],a=this.dataList[this.index].cellValue,o=this.dataList[this.index].nodeDatas,n=0;n<a.length;n++)for(var l=0;l<o.length;l++)a[n]===o[l].checkerName&&i.push(o[l].checkerCode);if(0===i.length)return void(0,r.Toast)({message:"请选择审核人！",duration:1e3});t.checkPerson=i.join(";"),console.log(t);var s=/^\d*\.{0,1}\d+$/g;if(void 0!==t.oaTimeLimit&&0===t.oaTimeLimit&&s.test(t.oaTimeLimit)===!0)(0,r.Toast)({message:"请输入正确格式的时限",duration:1e3});else{var d=this;d.deliverTo(t).then(function(t){console.log(t),(0,r.Toast)({message:"转交成功",duration:1e3}),console.log(e),"SalesOrder"===e?setTimeout(function(){d.$router.replace({name:"SalesOrder"})},1e3):setTimeout(function(){d.$router.replace({name:"approve"})},1e3)}).catch(function(e){var t=e.message;(0,r.Toast)({message:t,duration:1e3})})}},getDeliverPre:function(){var e=this,t={tableName:this.$route.params.tableName,keyId:this.$route.params.keyId},i=this.$route.params.opType,a=this;this.showForwardTime=!1,this.nextNodeName="请选择步骤",a.deliverPre(t).then(function(t){if(console.log(t),a.currNodeName=t.currNode.display,a.currNode=t.currNode.keyId,a.designId=t.designId,a.dataList.splice(0,a.dataList.length),t.nextNodes.forEach(function(e,t,i){var o,n=[],r=[],l=[],s=[];o="fix"===e.approvePeople;for(var d=0;d<e.checkPeople.length;d++){var c={label:e.checkPeople[d][1],value:e.checkPeople[d][1],disabled:o};n.push(c),r.push(e.checkPeople[d][1]),l.push(e.checkPeople[d][0]);var p={checkerCode:e.checkPeople[d][0],checkerName:e.checkPeople[d][1]};s.push(p)}var m={name:e.display,keyId:e.keyId,show:!1,options:n,allCellValue:r,cellValue:[],checkPersonArr:l,nodeDatas:s,forwardTime:e.forwardTime,isopTypeNode:!0};a.dataList.push(m)}),"send"===i){e.pageTitle="转交";for(var o=0;o<e.dataList.length;o++)e.dataList[o].keyId.indexOf("back")>=0?e.dataList[o].isopTypeNode=!1:e.dataList[o].isopTypeNode=!0}else if("fallback"===i){e.pageTitle="回退";for(var n=0;n<e.dataList.length;n++)e.dataList[n].keyId.indexOf("back")<0?e.dataList[n].isopTypeNode=!1:e.dataList[n].isopTypeNode=!0}}).catch(function(e){var t=e.message;(0,r.Toast)({message:t,duration:1e3})})}}),beforeRouteEnter:function(e,t,i){i(function(e){e.getDeliverPre(),e.deliverance="",e.oaTimeLimit=""})}}}});