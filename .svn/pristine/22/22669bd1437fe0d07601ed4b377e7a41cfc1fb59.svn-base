webpackJsonp([29,43],{3:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,'.mint-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:4px;border:0;box-sizing:border-box;color:inherit;display:block;font-size:18px;height:41px;outline:0;overflow:hidden;position:relative;text-align:center}.mint-button:after{background-color:#000;content:" ";opacity:0;top:0;right:0;bottom:0;left:0;position:absolute}.mint-button:not(.is-disabled):active:after{opacity:.4}.mint-button.is-disabled{opacity:.6}.mint-button-icon{vertical-align:middle;display:inline-block}.mint-button--default{color:#656b79;background-color:#f6f8fa;box-shadow:0 0 1px #b8bbbf}.mint-button--default.is-plain{border:1px solid #5a5a5a;background-color:transparent;box-shadow:none;color:#5a5a5a}.mint-button--primary{color:#fff;background-color:#26a2ff}.mint-button--primary.is-plain{border:1px solid #26a2ff;background-color:transparent;color:#26a2ff}.mint-button--danger{color:#fff;background-color:#ef4f4f}.mint-button--danger.is-plain{border:1px solid #ef4f4f;background-color:transparent;color:#ef4f4f}.mint-button--large{display:block;width:100%}.mint-button--normal,.mint-button--small{display:inline-block;padding:0 12px}.mint-button--small{font-size:14px;height:33px}',""])},4:function(e,t,a){var i=a(3);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},5:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#26a2ff;box-sizing:border-box;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;height:40px;line-height:1;padding:0 10px;position:relative;text-align:center;white-space:nowrap}.mint-header .mint-button{background-color:transparent;border:0;box-shadow:none;color:inherit;display:inline-block;padding:0;font-size:inherit}.mint-header .mint-button:after{content:none}.mint-header.is-fixed{top:0;right:0;left:0;position:fixed;z-index:1}.mint-header-button{-webkit-box-flex:.5;-ms-flex:.5;flex:.5}.mint-header-button>a{color:inherit}.mint-header-button.is-right{text-align:right}.mint-header-button.is-left{text-align:left}.mint-header-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:inherit;font-weight:400;-webkit-box-flex:1;-ms-flex:1;flex:1}",""])},6:function(e,t,a){var i=a(5);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},11:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-field{display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field .mint-cell-title{width:105px;-webkit-box-flex:0;-ms-flex:none;flex:none}.mint-field .mint-cell-value{-webkit-box-flex:1;-ms-flex:1;flex:1;color:inherit;display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field.is-nolabel .mint-cell-title{display:none}.mint-field.is-textarea{-webkit-box-align:inherit;-ms-flex-align:inherit;-ms-grid-row-align:inherit;align-items:inherit}.mint-field.is-textarea .mint-cell-title{padding:10px 0}.mint-field.is-textarea .mint-cell-value{padding:5px 0}.mint-field-core{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;border:0;-webkit-box-flex:1;-ms-flex:1;flex:1;outline:0;line-height:1.6;font-size:inherit;width:100%}.mint-field-clear{opacity:.2}.mint-field-state{color:inherit;margin-left:20px}.mint-field-state .mintui{font-size:20px}.mint-field-state.is-default{margin-left:0}.mint-field-state.is-success{color:#4caf50}.mint-field-state.is-warning{color:#ffc107}.mint-field-state.is-error{color:#f44336}.mint-field-other{top:0;right:0;position:absolute}",""])},12:function(e,t,a){var i=a(11);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},16:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-datetime{width:100%}.mint-datetime .picker-item,.mint-datetime .picker-slot-wrapper{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mint-datetime .picker-toolbar{border-bottom:1px solid #eaeaea}.mint-datetime-action{display:inline-block;width:50%;text-align:center;line-height:40px;font-size:16px;color:#26a2ff}.mint-datetime-cancel{float:left}.mint-datetime-confirm{float:right}",""])},17:function(e,t,a){var i=a(16);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},202:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".CRMServiceAdd_page .mint-cell-wrapper,.CRMServiceAdd_page .mint-cell:last-child{background-image:none;padding:0}.CRMServiceAdd_page input{color:#98979d}.CRMServiceAdd_page input::-webkit-input-placeholder{color:#ddd}.CRMServiceAdd_page input::-moz-placeholder{color:#ddd}.CRMServiceAdd_page input:-ms-input-placeholder{color:#ddd}",""])},203:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".page_wrap[data-v-3ae30516]{width:100%;height:100%;overflow:hidden;background:#f0f1f5}.page_wrap .page_cont.CRMServiceAdd_page[data-v-3ae30516]{padding:40px 10px 12px;height:100%;box-sizing:border-box;overflow-y:auto;overflow-x:hidden;background:#f0f1f5}.page_wrap .page_cont.CRMServiceAdd_page .mint-cell[data-v-3ae30516],.page_wrap .page_cont.CRMServiceAdd_page .mint-field[data-v-3ae30516]{min-height:38px;color:#98979d}.page_wrap .page_cont.CRMServiceAdd_page .fillTimeData[data-v-3ae30516]{min-height:38px;line-height:38px;overflow:hidden}.page_wrap .page_cont.CRMServiceAdd_page .fillTimeData label[data-v-3ae30516]{width:105px;display:block;color:#98979d;float:left}.page_wrap .page_cont.CRMServiceAdd_page .fillTimeData input[data-v-3ae30516]{border:none;outline:none;font-size:16px;float:left;display:inline-block;min-height:38px;line-height:38px;width:160px}.page_wrap .page_cont.CRMServiceAdd_page .main_info[data-v-3ae30516]{padding:0 1rem;background:#fff;margin-bottom:1rem;margin-bottom:0;border-radius:3px;padding:12px 16px;box-shadow:1px 1px 7px #d6d6d6;position:relative}.page_wrap .page_cont.CRMServiceAdd_page p.info_text[data-v-3ae30516]{font-size:14px;color:#bababa;padding:.6rem 0 .5rem;position:relative}.page_wrap .page_cont.CRMServiceAdd_page p.info_text span[data-v-3ae30516]{position:absolute;right:1.5rem;color:#26a2ff}.page_wrap .page_cont.CRMServiceAdd_page .select_enum[data-v-3ae30516]{line-height:38px;position:relative}.page_wrap .page_cont.CRMServiceAdd_page .select_enum label[data-v-3ae30516]{width:105px;display:inline-block}.page_wrap .page_cont.CRMServiceAdd_page .select_enum select[data-v-3ae30516]{position:absolute;border:none;outline:none;height:100%;width:50%;color:#98979d;background:#fff;font-size:16px;appearance:none;-moz-appearance:none;-webkit-appearance:none;right:2.1rem}.page_wrap .mint-header-title[data-v-3ae30516]{font-size:18px}",""])},333:function(e,t,a){var i=a(202);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},334:function(e,t,a){var i=a(203);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},400:function(e,t,a){a(333),a(334);var i=a(8)(a(567),a(448),"data-v-3ae30516",null);e.exports=i.exports},448:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_wrap"},[a("mt-header",{attrs:{title:"添加服务记录",fixed:""}},[a("div",{slot:"left"},[a("mt-button",{attrs:{icon:"back"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)]),e._v(" "),a("div",{staticClass:"page_cont CRMServiceAdd_page"},[a("p",{staticClass:"info_text"},[e._v("主表信息")]),e._v(" "),a("div",{staticClass:"main_info"},[e._l(e.fieldList,function(t){return[0!=t.inputType&&8!=t.inputType||5==t.fieldType||6==t.fieldType||14==t.fieldType?e._e():a("mt-field",{attrs:{label:t.display,disableClear:"",placeholder:"请输入"+t.display},model:{value:e.values[t.fieldName],callback:function(a){var i=e.values,n=t.fieldName;Array.isArray(i)?i.splice(n,1,a):e.values[t.fieldName]=a},expression:"values[field.fieldName]"}}),e._v(" "),0==t.inputType&&5==t.fieldType?a("div",[a("div",{staticClass:"fillTimeData"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],ref:t.fieldName+"timeData",refInFor:!0,attrs:{type:"text",readonly:"",placeholder:"选择日期"},domProps:{value:e.values[t.fieldName]},on:{click:function(a){e.openDateTimePicker(t.fieldName)},input:function(a){if(!a.target.composing){var i=e.values,n=t.fieldName;Array.isArray(i)?i.splice(n,1,a.target.value):e.values[t.fieldName]=a.target.value}}}})]),e._v(" "),a("mt-datetime-picker",{ref:t.fieldName,refInFor:!0,attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:e.getDate},model:{value:e.nowDate,callback:function(t){e.nowDate=t},expression:"nowDate"}})],1):e._e(),e._v(" "),0==t.inputType&&6==t.fieldType?a("div",[a("div",{staticClass:"fillTimeData"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],ref:t.fieldName+"timeData",refInFor:!0,attrs:{type:"text",readonly:"",placeholder:"选择日期"},domProps:{value:e.values[t.fieldName]},on:{click:function(a){e.openDateTimePicker(t.fieldName)},input:function(a){if(!a.target.composing){var i=e.values,n=t.fieldName;Array.isArray(i)?i.splice(n,1,a.target.value):e.values[t.fieldName]=a.target.value}}}})]),e._v(" "),a("mt-datetime-picker",{ref:t.fieldName,refInFor:!0,attrs:{type:"datetime","date-format":"{value} 日",hourFormat:"{value} 时",minuteFormat:"{value} 分"},on:{confirm:e.getDate2},model:{value:e.nowDate,callback:function(t){e.nowDate=t},expression:"nowDate"}})],1):e._e(),e._v(" "),1==t.inputType?a("div",{staticClass:"select_enum mint-cell"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t}),n=e.values,l=t.fieldName;Array.isArray(n)?n.splice(l,1,a.target.multiple?i:i[0]):e.values[t.fieldName]=a.target.multiple?i:i[0]}}},e._l(t.EnumItem,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.name))])})),e._v(" "),a("i",{staticClass:"mint-cell-allow-right"})]):e._e(),e._v(" "),2==t.inputType&&"ClientId"==t.fieldName?[a("mt-field",{attrs:{label:t.display,disableClear:"",readonly:"",value:e.CRMClientInfo_ClientName,placeholder:"请选择"+t.display},nativeOn:{click:function(a){e.openPopup(t.fieldName)}}})]:e._e(),e._v(" "),15==t.inputType?[a("mt-field",{attrs:{label:t.display,disableClear:"",readonly:"",value:e.EmployeeName,placeholder:"请选择"+t.display},nativeOn:{click:function(a){e.openPopup(t.fieldName)}}})]:e._e()]})],2),e._v(" "),a("div",{staticClass:"button",staticStyle:{"margin-top":"16px"}},[a("mt-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(t){e.save(t)}}},[e._v("保存")])],1)])],1)},staticRenderFns:[]}},567:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(28),l=i(n),o=a(10),r=i(o),d=a(9),p=a(32),s=a(7);a(4),a(12),a(6),a(17),a(14),a(13),a(15),t.default={name:"CRMClientServiceAdd",components:{"mt-button":s.Button,"mt-field":s.Field,"mt-header":s.Header,"mt-datetime-picker":s.DatetimePicker,"mt-cell":s.Cell},data:function(){return{fieldList:[],values:{},nowDate:new Date,EmployeeName:"",CRMClientInfo_ClientName:""}},methods:(0,r.default)({},(0,d.mapActions)(["addPre","add","getEnum"]),{addPreList:function(){var e=this;s.Indicator.open({text:"加载中...",spinnerType:"snake"}),this.addPre({tableName:"CRMClientService",parentTableName:"CRMClientInfo"}).then(function(t){s.Indicator.close();var a=e;t.fieldList.forEach(function(e,i,n){"ClientId"===e.fieldName?t.values[e.fieldName]="":t.values[e.fieldName]=e.defaultValue,1===e.inputType&&""!==e.refEnumerationName&&a.getEnum(e.refEnumerationName).then(function(t){t.unshift({name:"请选择",value:""}),e.EnumItem=t})});for(var i in a.$data)a.$data[i]=t[i];a.$data.nowDate=new Date,a.$data.EmployeeName="",a.CRMClientInfo_ClientName="",a.fieldList=a.fieldList.filter(function(e){return 100!==e.inputType&&e.display!==e.fieldName})})},save:function(){var e=this,t=(0,l.default)({},this.$data.values);t=window.JSON.stringify(t),s.Indicator.open({text:"数据提交中...",spinnerType:"snake"}),this.add({tableName:"CRMClientService",values:t}).then(function(t){t.keyId,t.tableName;s.Indicator.close(),(0,s.Toast)({message:"提交成功",duration:1e3}),setTimeout(function(){e.$router.replace({name:"CRMClientServiceList"})},1e3)}).catch(function(e){var t=e.message;s.Indicator.close(),(0,s.Toast)({message:t,duration:1e3})})},openDateTimePicker:function(e){this.$refs[e][0].open(),this.$data.main_fieldName=e},getDate:function(e){var t=(0,p.dateformat)(e,"yyyy-MM-dd"),a=this.$data.main_fieldName;this.$data.values[a]=t,this.$refs[a+"timeData"][0].value=t},getDate2:function(e){var t=(0,p.dateformat)(e,"yyyy-MM-dd hh:mm:ss"),a=this.$data.main_fieldName;this.$refs[a+"timeData"][0].value=t,this.$data.values[a]=t},openPopup:function(e){"EmployeeId"===e&&this.$router.push({name:"popupEmployee",params:{prevRouteName:this.$route.name}}),"ClientId"===e&&this.$router.push({name:"SelectCRMClient",params:{prevRouteName:this.$route.name}})}}),watch:{$route:function(e,t){var a=this;if("popupEmployee"===t.name){if(e.params.checked){var i=e.params.checked;a.$data.values.EmployeeId=i.EmployeeID,a.$data.EmployeeName=i.tblEmployee_EmpFullName}}else if("SelectCRMClient"===t.name&&e.params.checked){var n=e.params.checked;a.$data.values.ClientId=n.ClientId,a.$data.values.f_brother=n.f_brother,a.$data.values["CRMClientInfo.ClientName"]=n.CRMClientInfo_ClientName,a.$data.CRMClientInfo_ClientName=n.CRMClientInfo_ClientName}}},beforeRouteEnter:function(e,t,a){a(function(e){"popupEmployee"!==t.name&&"SelectCRMClient"!==t.name&&e.addPreList()})}}}});