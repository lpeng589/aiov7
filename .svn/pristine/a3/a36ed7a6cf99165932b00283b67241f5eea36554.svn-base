webpackJsonp([17,43],{3:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,'.mint-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:4px;border:0;box-sizing:border-box;color:inherit;display:block;font-size:18px;height:41px;outline:0;overflow:hidden;position:relative;text-align:center}.mint-button:after{background-color:#000;content:" ";opacity:0;top:0;right:0;bottom:0;left:0;position:absolute}.mint-button:not(.is-disabled):active:after{opacity:.4}.mint-button.is-disabled{opacity:.6}.mint-button-icon{vertical-align:middle;display:inline-block}.mint-button--default{color:#656b79;background-color:#f6f8fa;box-shadow:0 0 1px #b8bbbf}.mint-button--default.is-plain{border:1px solid #5a5a5a;background-color:transparent;box-shadow:none;color:#5a5a5a}.mint-button--primary{color:#fff;background-color:#26a2ff}.mint-button--primary.is-plain{border:1px solid #26a2ff;background-color:transparent;color:#26a2ff}.mint-button--danger{color:#fff;background-color:#ef4f4f}.mint-button--danger.is-plain{border:1px solid #ef4f4f;background-color:transparent;color:#ef4f4f}.mint-button--large{display:block;width:100%}.mint-button--normal,.mint-button--small{display:inline-block;padding:0 12px}.mint-button--small{font-size:14px;height:33px}',""])},4:function(e,t,a){var i=a(3);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},5:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#26a2ff;box-sizing:border-box;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;height:40px;line-height:1;padding:0 10px;position:relative;text-align:center;white-space:nowrap}.mint-header .mint-button{background-color:transparent;border:0;box-shadow:none;color:inherit;display:inline-block;padding:0;font-size:inherit}.mint-header .mint-button:after{content:none}.mint-header.is-fixed{top:0;right:0;left:0;position:fixed;z-index:1}.mint-header-button{-webkit-box-flex:.5;-ms-flex:.5;flex:.5}.mint-header-button>a{color:inherit}.mint-header-button.is-right{text-align:right}.mint-header-button.is-left{text-align:left}.mint-header-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:inherit;font-weight:400;-webkit-box-flex:1;-ms-flex:1;flex:1}",""])},6:function(e,t,a){var i=a(5);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},11:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-field{display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field .mint-cell-title{width:105px;-webkit-box-flex:0;-ms-flex:none;flex:none}.mint-field .mint-cell-value{-webkit-box-flex:1;-ms-flex:1;flex:1;color:inherit;display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field.is-nolabel .mint-cell-title{display:none}.mint-field.is-textarea{-webkit-box-align:inherit;-ms-flex-align:inherit;-ms-grid-row-align:inherit;align-items:inherit}.mint-field.is-textarea .mint-cell-title{padding:10px 0}.mint-field.is-textarea .mint-cell-value{padding:5px 0}.mint-field-core{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;border:0;-webkit-box-flex:1;-ms-flex:1;flex:1;outline:0;line-height:1.6;font-size:inherit;width:100%}.mint-field-clear{opacity:.2}.mint-field-state{color:inherit;margin-left:20px}.mint-field-state .mintui{font-size:20px}.mint-field-state.is-default{margin-left:0}.mint-field-state.is-success{color:#4caf50}.mint-field-state.is-warning{color:#ffc107}.mint-field-state.is-error{color:#f44336}.mint-field-other{top:0;right:0;position:absolute}",""])},12:function(e,t,a){var i=a(11);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},16:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-datetime{width:100%}.mint-datetime .picker-item,.mint-datetime .picker-slot-wrapper{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mint-datetime .picker-toolbar{border-bottom:1px solid #eaeaea}.mint-datetime-action{display:inline-block;width:50%;text-align:center;line-height:40px;font-size:16px;color:#26a2ff}.mint-datetime-cancel{float:left}.mint-datetime-confirm{float:right}",""])},17:function(e,t,a){var i=a(16);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},35:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAA3tJREFUSA2tls9PE0EUx9+bgly8gnQ56L/gWQ9sMQr+QqEtB8Egv/xx8qAYEw9cjKiJ3lQQFeSgbAvqQUCFtibiycS7Mf5I7LaJXoweQOg+3yssLHVtd9E5dGfm/fjsd97MdAH+UwsZ5mHdSH/RjczZYimxmNGrrS5uHsrlwACgcolRiOcTUa3fLV65TfqZs2H85gEGXQTEHxbRpdqx9Dm3PP8E1GPpRlEmMERoZ1UXFAbqBcqwfrb3FkI3DNSN7EGyMOaAjUryRGTLawxQg0DJgsuF0A3VMA8jKy4wLtixZCR4v1CJPp7eQTmcBqLNiKo3GQ1eFR/fCkPx7AGAXF4ZAXa4wSRxsrlmrgxAlP4ksq6ExjJnZN6XQoGRlYsDYZnAUi3BEUkirecNlb/7YB4tr9g09aKx0lyeBdhlmDuXAKZEKcNPe1ZYF8vut2GI2OmESfL3H7LbgWBocX5xLjRubrWBM1HtFQJdkzES9XpSyId5H4A1IcpQYVciErxnJ7SfRIShWGaEn22c+pMqg9pEs/a5zsiEc0APGIQE6khJoA3jJSznc9bpBrOhfUTqZSwznIciflSszAK8LjCFqnU2Uv2wKFCPZ/aCZU0wbBOS6kq2VN+1k//tKdBUPDMCFrWKDy9/zobJ+K813AhMEvYhWpUUbOftOMzDea5bmygTmzRXhVyLBt7Kj0QZ34/dqWjNnWV3f78Nk1QxtRcXnFF/KKwzzHobphB6/MD6ksRHb60VwsSyDigwC+ixKFMExxMRbWgtvHgvNGaeePk1810u82Keq0A9bu5ZB2vRbhcLdNoEZiHc4N3Ji1L22Wkr7OeBAqPcsjIu6omED1htzDwuML5JFpTCxplw1dtCiHMcCMXM3WTRE96/FbyFTqai2qDToVhfYHy73LRhXILnxfzFpohgVGBcs1OpiDZQKsC264bZY8MwgIe8wFaAVMWdT7yMt+xkpZ4CI4BbfEf+ElgyrD0rFWPb8zXkunG8t8YbpNuGKfAHE8LqLvWC43p38QYZEGUCm41q017inD7rDqrTUNjPwwgG88uI6vBsJOgbJjk9AWuNdKe1AgOlmhLh4FThC3kdl1xSfSzbwVfubVEmsGQ4OOk1uZsf8vcj32S4xNvmi5sDn82tDFvkcjfxh9BTVx8fk7ykmOSDq3PMNtc4wm/899n+P2CS/zcc5ZVtnu55ogAAAABJRU5ErkJggg=="},105:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAehJREFUSA29Vr1OwzAQvkvSJ+hWJhZgBQmpDBUTCxMIJh6Dn05QSmEqP4/BBIKJhQl1oBISrHRiokx5gqY9znaaJmkah2DFUlT/fHef7Z7vPoQMja5byzAcbgFQDRDn2KTim/WB6BsAO2Dbj3jQ+NC5wzQAXTV3YTS6YMxiGi601gPLOsbD5l1oLtJNJKTL83kg75ZPVI2gMw+wC+js4dHJV9xkipBuWuvgefcMLMfBfxy74Dg7uN94CdtFCCXZ0HsGglIYlLuPMADb2QiTBoTqGgdv7Py/J4vvzwUsrY6v1wpW5X9mnEy4L6t4UEySUEZj7gAJtpzSoariAFAnVKGfYmBgyedA9ai9dwMu9S5sZ8VSGUSPNYLgbMVXyumqsEY1y8+NxVByHnaYaZyIp0k3t6fnssw8PcxCVSbvcBbE5DwRiRP2+VtI9Dt7p4lw7STij6XqmRZqBsC1k6+Ui2dhDTuWqNSF8QlVIMio3fjkn6xVPe/+elhvLakoZVmQ10tmO59jUg/bp6/5JYWOFrtYP1sTqMk7ZA3CY1dnmmOdC7D0LU0DQlmRWYOAkAWmmvAldE1ITAWEgkNqD9Yg3DVxUjeuZwRHhFBMSFLWINzrinG+JmQi65iYYhO+gqBJclyYEI6Tm5T6v6IWm7zZeOQ5AAAAAElFTkSuQmCC"},110:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAA0RJREFUSA29ll1IVEEUx/9z966bun2oq2hGYFFGD4ZCsX3hRxY9RsoWQa+9VPQQJFEvRkFBENlrb1HRZtRjVGZm4JKRQZBKRIHYmrq1Ztuq695pzl3nct297ldb87Bz5syZ87uzc2bOYUijNXeO10a1yAHO2W4GXskZW03LGOdfOdgoY7zXptgfPWstG0jljiUz2OP1t2rQLnKO6mR2co4xDCtQznd5KjqlLr63BO7zjlXN8egdYeyOX5Dm2JfHbEeeeMo/x9snABu9/npAeyB2VRJvnMlY7DYAKC3dnooe87pFQIJxzp8C3G42yl5mEcbYXjPUANLfGEG0/293Fv9xtFM7bFvl36tIAzqzXMPIN/lciAcdpQMpGsUo2wDRHaX4cS8woAMp9FMsSGt6/UoVHU0lKC+0JdhLBqNLPR+NvE2wyFBRV5aHCzuLUWhXMPE7iuNdE5gIa4u8qDZ7nUovyCJtFoPmtflo27YKqhKLwVejYUzGwcgtsVR6rsTRZoGJLTlc7cSxmuUQ4a8rbr7/iduDvyz9EUvV30bL6eRKcn+idgUObnDqhlGN4+qbIB5/CS+5kFiq/hCL2LVqW0rzMBaK4ps4E3MTx4Rz7iLUr8nX1TPzGtr7fsDnnzWbJcjEUhO0Cwp3hQPtO4oxNavhdM8kRqZjUKed4dKuYtSUOnRLmj/bG8Dg98hSrsx6rlCKMWuk3CQCIc/GUFpgw/VGF9aJkC8T8o0mlwEbC83j5POJdGGUzvwq5TMRNBslSPaXXwdFVAH7qwpQtMyGaw0uzIlzcuXH7tinYARtLwMIzCwOfbneqieWQsnTalL4xpX+IB5+DOnTKxyKAXs3PotT3ZMZwcgJsRTK1FZAqesYmMLdoWk5RM9IGGfEzkIR60AzDC0EYumXp9E7OiQCNWlWP7rZiSKHOEPxAZmjaHcY7vZUbtKjlMqCKLT7Fh9lqG59sL7MhkEKgRhkEnsehNBwb7RPdP8qY/heHKrcTkAjH1INEisLSJ27Rj7Jt/RoAGMZWWkRm07rBksHyXvypbTIbE+2BpAGVHtQDZKLnZKP+HomASihVIMI2UfjLJuPfJiLJ+nHCBqpMPf/rRA2Q0nOZan/B/9ZQoe+wkyaAAAAAElFTkSuQmCC"},226:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".CRM_detail_list .mint-cell-wrapper{background-image:none}.CRM_detail_list .mint-cell-wrapper .mint-cell-value{max-width:160px}",""])},227:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".page_wrap[data-v-9994c27a]{width:100%;height:100%;background:#f0f0f0}.page_wrap .mint-header .mint-button[data-v-9994c27a]{font-size:14px!important}.page_wrap .mint-header[data-v-9994c27a]{font-size:18px}.page_wrap .page_cont.CRMDet_detail[data-v-9994c27a]{padding-top:2.5rem;background:#f0f0f0}.page_wrap .page_cont.CRMDet_detail .part[data-v-9994c27a]{padding:0 12px;background:#fff}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .mint-cell[data-v-9994c27a]{min-height:55px}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .select_enum[data-v-9994c27a]{line-height:55px;position:relative;padding:0 10px}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .select_enum label[data-v-9994c27a]{width:105px;display:inline-block}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .select_enum select[data-v-9994c27a]{border:none;outline:none;height:99%;width:160px;color:#98979d;background:#fff;font-size:16px;appearance:none;-moz-appearance:none;-webkit-appearance:none}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .fillTimeData[data-v-9994c27a]{min-height:55px;line-height:55px;padding:0 10px;overflow:hidden}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .fillTimeData label[data-v-9994c27a]{width:105px;display:block;float:left}.page_wrap .page_cont.CRMDet_detail .part .CRM_detail_list .fillTimeData input[data-v-9994c27a]{border:none;outline:none;font-size:16px;float:left;display:inline-block;min-height:55px;line-height:55px;width:160px}.page_wrap .page_cont.CRMDet_detail .delete_button[data-v-9994c27a]{text-align:center;padding:20px 10px}.page_wrap .page_cont.CRMDet_detail .delete_button button.mint-button--default[data-v-9994c27a]{color:#ff8a7e;background:#fff}.page_wrap .page_cont.CRMDet_detail .delete_button .mint-button[data-v-9994c27a]:after{background:#eee}.page_wrap .page_cont.CRMDet_detail .childDetail .detail_info_wrap[data-v-9994c27a],.page_wrap .page_cont.CRMDet_detail .childDetail[data-v-9994c27a]{position:relative}.page_wrap .page_cont.CRMDet_detail .childDetail .detail_info_wrap .detDetail[data-v-9994c27a]{position:absolute;right:72px;top:11px;font-size:14px;color:#ff8a7e;z-index:1}.page_wrap .page_cont.CRMDet_detail .childDetail .detail_info_wrap .detDetail em[data-v-9994c27a]{position:absolute;width:18px;height:18px;background:url("+a(105)+");background-size:100% 100%;left:-22px}.page_wrap .page_cont.CRMDet_detail .childDetail span.childDetailEdit[data-v-9994c27a]{position:absolute;right:12px;top:12px;font-size:14px;color:#40a9e5}.page_wrap .page_cont.CRMDet_detail .childDetail span.childDetailEdit em[data-v-9994c27a]{position:absolute;display:block;width:18px;height:18px;left:-22px;top:-1px}.page_wrap .page_cont.CRMDet_detail .childDetail span.childDetailEdit .editIcon[data-v-9994c27a]{background:url("+a(35)+");background-size:100% 100%}.page_wrap .page_cont.CRMDet_detail .childDetail span.childDetailEdit .saveIcon[data-v-9994c27a]{background:url("+a(110)+");background-size:100% 100%}.page_wrap .page_cont.CRMDet_detail .childDetail .marBo26[data-v-9994c27a]{padding-bottom:38px;border-bottom:1px solid #e8e8e8}.page_wrap .mint-header-title[data-v-9994c27a]{font-size:18px}",""])},358:function(e,t,a){var i=a(226);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},359:function(e,t,a){var i=a(227);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},404:function(e,t,a){a(358),a(359);var i=a(8)(a(571),a(465),"data-v-9994c27a",null);e.exports=i.exports},465:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_wrap"},[a("mt-header",{attrs:{title:"联系记录详情",fixed:""}},[a("div",{slot:"left"},[a("mt-button",{attrs:{icon:"back"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),a("div",{slot:"right"},[a("mt-button",{on:{click:e.save}},[e._v("保存")])],1)]),e._v(" "),a("div",{staticClass:"page_cont CRMDet_detail"},[a("div",{staticClass:"part"},e._l(e.fieldList,function(t){return a("div",{staticClass:"CRM_detail_list"},[2!=t.fieldType&&0!=t.inputType||1==t.inputType||"关联自定义1"===t.display||"关联自定义2"===t.display||"客户名称"===t.display||"跟单人"===t.display||"跟进时间"===t.display||"下次跟进时间"===t.display?e._e():a("mt-field",{attrs:{label:t.display,value:e.values[t.fieldName]}}),e._v(" "),1==t.inputType&&void 0!==t.EnumItem&&t.EnumItem.filter(function(a){return a.value==e.values[t.fieldName]}).length>0?a("div",{staticClass:"select_enum mint-cell"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t}),l=e.values,n=t.fieldName;Array.isArray(l)?l.splice(n,1,a.target.multiple?i:i[0]):e.values[t.fieldName]=a.target.multiple?i:i[0]}}},e._l(t.EnumItem,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.name))])})),e._v(" "),a("i",{staticClass:"mint-cell-allow-right"})]):e._e(),e._v(" "),2==t.inputType?a("div",{staticClass:"CRM_detail_list",on:{click:e.chooseClient}},e._l(t.PopupDis,function(t){return 2==t.inputType&&e.values[t.fieldName]?a("mt-field",{attrs:{label:t.display,readonly:"",disableClear:"",value:e.values[t.fieldName]}}):e._e()})):e._e(),e._v(" "),15==t.inputType?a("div",{staticClass:"select_enum mint-cell",on:{click:e.chooseEmployee}},[a("label",[e._v("跟单人")]),e._v(" "),a("span",[e._v(e._s(e.tblEmployee_EmpFullName?e.tblEmployee_EmpFullName:"请选择"))]),e._v(" "),a("i",{staticClass:"mint-cell-allow-right"})]):e._e(),e._v(" "),0==t.inputType&&5==t.fieldType?a("div",[a("div",{staticClass:"fillTimeData"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],ref:t.fieldName+"timeData",refInFor:!0,attrs:{type:"text",readonly:"",placeholder:"选择日期"},domProps:{value:e.values[t.fieldName]},on:{click:function(a){e.openDateTimePicker(t.fieldName)},input:function(a){if(!a.target.composing){var i=e.values,l=t.fieldName;Array.isArray(i)?i.splice(l,1,a.target.value):e.values[t.fieldName]=a.target.value}}}})]),e._v(" "),a("mt-datetime-picker",{ref:t.fieldName,refInFor:!0,attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:e.getDate}})],1):e._e()],1)})),e._v(" "),a("div",{staticClass:"childDetail"},[e._l(e.childTableList,function(t){return e._l(e.values["TABLENAME_"+t.name],function(i,l){return a("div",{staticClass:"detail_info_wrap"},[a("p",{staticClass:"info_text"},[e._v(e._s(t.display)+e._s(l+1))]),e._v(" "),a("div",{staticClass:"detail_info"},[e._l(e.childShowField[t.name],function(t){return[0!=t.inputType&&8!=t.inputType||!i[t.fieldName]?e._e():a("mt-field",{attrs:{label:t.display,readonly:"",disableClear:"",value:i[t.fieldName]}}),e._v(" "),1==t.inputType&&void 0!==t.EnumItem&&t.EnumItem.filter(function(e){return e.value==i[t.fieldName]}).length>0&&t.EnumItem.filter(function(e){return e.value==i[t.fieldName]})[0].name&&"请选择"!=t.EnumItem.filter(function(e){return e.value==i[t.fieldName]})[0].name?a("mt-field",{attrs:{label:t.display,readonly:"",disableClear:"",value:t.EnumItem.filter(function(e){return e.value==i[t.fieldName]})[0].name}}):e._e(),e._v(" "),2==t.inputType?e._l(t.PopupDis,function(t){return 2==t.inputType&&i[t.fieldName]?a("mt-field",{attrs:{label:t.display,readonly:"",disableClear:"",value:i[t.fieldName]}}):e._e()}):e._e()]})],2)])})})],2),e._v(" "),a("div",{staticClass:"delete_button"},[a("mt-button",{attrs:{type:"default",size:"large"},nativeOn:{click:function(t){e.deleteService(t)}}},[e._v("删除服务记录")])],1)])],1)},staticRenderFns:[]}},571:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(10),n=i(l),o=a(9),r=a(7),d=a(32);a(4),a(6),a(15),a(12),a(14),a(17),a(13),a(36),t.default={name:"CRMSaleFollowUpDetail",components:{"mt-button":r.Button,"mt-header":r.Header,"mt-field":r.Field,"mt-cell":r.Cell,"mt-datetime-picker":r.DatetimePicker},data:function(){return{EmpFullName:"",tblEmployee_EmpFullName:"",fieldList:[],values:{},nowDate:new Date,ClientName:"",main_fieldName:"",keyId:"",childShowField:{},childTableList:[],EmployeeID:""}},computed:{},methods:(0,n.default)({},(0,o.mapActions)(["detail","reportQuery","update","del"]),{listData:function(){this.$data.keyId=this.$route.params.keyId,this.EmpFullName=this.$route.params.EmpFullName,console.log(this.$data.keyId);var e=this;r.Indicator.open({text:"加载中...",spinnerType:"snake"}),this.detail({tableName:"CRMSaleFollowUp",keyId:this.$data.keyId}).then(function(t){r.Indicator.close(),console.log(t);for(var a in e.$data)e.$data[a]=t[a];e.$data.ClientName=e.$route.params.ClientName_edit,e.$data.tblEmployee_EmpFullName=e.$data.values["tblEmployee.EmpFullName"],e.$data.nowDate=new Date,e.$data.main_fieldName="",console.log(e.$data),e.fieldList=e.fieldList.filter(function(t){return 100!==t.inputType&&3!==t.inputType&&14!==t.fieldType&&t.fieldName in e.$data.values}),e.fieldList.forEach(function(e,t,a){1===e.inputType&&void 0!==e.EnumItem&&e.EnumItem.unshift({name:" ",value:""})}),console.log(e.$data)})},chooseEmployee:function(){this.$router.push({name:"popupEmployee",params:{prevRouteName:this.$route.name,keyId:this.$data.keyId}})},chooseClient:function(){this.$router.push({name:"SelectCRMClient",params:{prevRouteName:this.$route.name}})},openDateTimePicker:function(e){this.$refs[e][0].open(),this.$data.main_fieldName=e},getDate:function(e){var t=(0,d.dateformat)(e,"yyyy-MM-dd"),a=this.$data.main_fieldName;this.$refs[a+"timeData"][0].value=t,this.$data.values[a]=t},save:function(){var e=this.dataToString(this.values);console.log(e);var t=this;this.update({tableName:"CRMSaleFollowUp",values:e}).then(function(e){(0,r.Toast)({message:"保存成功",duration:1e3}),setTimeout(function(){t.$router.push({name:"CRMSaleFollowUpList"})},1e3)}).catch(function(e){var t=e.message;r.Indicator.close(),(0,r.Toast)({message:t,duration:1e3})})},deleteService:function(){var e=this;r.MessageBox.confirm("确定要删除该服务记录?").then(function(t){r.Indicator.open({text:"删除中...",spinnerType:"snake"});var a=e.$route.params.keyId;e.del({tableName:"CRMSaleFollowUp",keyId:a,defineInfo:"是否删除"}).then(function(t){r.Indicator.close(),e.$router.replace({name:"CRMSaleFollowUpList"})})})},dataToString:function(e){for(var t in e)e[t]instanceof Object||t.indexOf("TABLENAME")>=0?e[t].length>0&&e[t].forEach(function(e){for(var t in e)e[t]=e[t].toString()}):e[t]=e[t].toString();return e=window.JSON.stringify(e)}}),watch:{$route:function(e,t){var a=this;if("popupEmployee"===t.name){if(e.params.checked){var i=e.params.checked;console.log(i),a.$data.values.EmployeeID=i.EmployeeID,a.$data.tblEmployee_EmpFullName=i.tblEmployee_EmpFullName,a.$data.values["tblEmployee.EmpFullName"]=i.tblEmployee_EmpFullName}}else if("SelectCRMClient"===t.name&&e.params.checked){var l=e.params.checked;a.$data.values.ClientId=l.ClientId,a.$data.values.f_brother=l.f_brother,a.$data.values["CRMClientInfo.ClientName"]=l.CRMClientInfo_ClientName}}},beforeRouteEnter:function(e,t,a){a(function(e){"popupEmployee"!==t.name&&"SelectCRMClient"!==t.name&&e.listData()})}}}});