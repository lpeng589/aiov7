<?xml version="1.0" encoding="UTF-8" ?>
<ReportDataSource><Report reporteId="" reportName="同价调拨单"/><fieldInfo><field fieldname="tblAllot.BillDate" AsfieldName="BillDate" groupByFlag="0" displayFlag="1" condition="" conditionJoin="and" orderbyFlag="降" display="单据日期" fieldType="5" inputType="" popUpName="" width="70" classCode="1" linkAdd="" order="1" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="单据日期"/><Display localStr="en" display="Document date"/><Display localStr="zh_TW" display="單據日期"/></Displays><groupNames/></field><field fieldname="tblAllot.BillDate" AsfieldName="BillDate1" groupByFlag="0" displayFlag="0" condition="&gt;= ?" conditionJoin="and" orderbyFlag="" display="单据日期≥" fieldType="5" inputType="0" popUpName="" width="0" classCode="1" linkAdd="" order="2" isStat="0" defaultValue="@MEM:defaultTime" fieldSysType="" fixColName="1" isNull="1" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="单据日期≥"/><Display localStr="en" display="Start date≥"/><Display localStr="zh_TW" display="單據日期≥"/></Displays><groupNames/></field><field fieldname="tblAllot.BillDate" AsfieldName="BillDate2" groupByFlag="0" displayFlag="0" condition="&lt;= ?" conditionJoin="and" orderbyFlag="" display="单据日期≤" fieldType="5" inputType="0" popUpName="" width="0" classCode="1" linkAdd="" order="3" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="单据日期≤"/><Display localStr="en" display="End date≤"/><Display localStr="zh_TW" display="單據日期≤"/></Displays><groupNames/></field><field fieldname="tblAllot.BillNo" AsfieldName="BillNo" groupByFlag="0" displayFlag="1" condition="like '%'+?+ '%'" conditionJoin="and" orderbyFlag="降" display="单据编号" fieldType="2" inputType="0" popUpName="" width="100" classCode="1" linkAdd="UserFunctionAction.do?tableName=tblAllot&amp;keyId=@ValueofDB:id&amp;operation=5" order="4" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="单据编号"/><Display localStr="en" display="Document No."/><Display localStr="zh_TW" display="單據編號"/></Displays><groupNames/></field><field fieldname="tblBuyApplication.BillNo" AsfieldName="BillNo1" groupByFlag="0" displayFlag="0" condition="" conditionJoin="  " orderbyFlag="" display="申请单号" fieldType="2" inputType="0" popUpName="" width="0" classCode="1" linkAdd="" order="5" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="申请单号"/></Displays><groupNames/></field><field fieldname="tblBuyApplicationDet.Qty" AsfieldName="Qty" groupByFlag="0" displayFlag="0" condition="" conditionJoin="  " orderbyFlag="" display="申请数量" fieldType="1" inputType="0" popUpName="" width="0" classCode="1" linkAdd="" order="6" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="申请数量"/></Displays><groupNames/></field><field fieldname="isnull(tblStock.StockFullName,s1.StockFullName)" AsfieldName="StockCode" groupByFlag="0" displayFlag="1" condition="like '%'+?+'%'" conditionJoin="and" orderbyFlag="" display="出库仓库" fieldType="2" inputType="2" popUpName="ReportSelectStock" width="75" classCode="1" linkAdd="" order="7" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="出库仓库"/><Display localStr="en" display="Delivery warehouse"/><Display localStr="zh_TW" display="出庫倉庫"/></Displays><groupNames/></field><field fieldname="isnull(tblStock2.StockFullName,s2.StockFullName)" AsfieldName="InStockCode" groupByFlag="0" displayFlag="1" condition="like '%'+?+'%'" conditionJoin="and" orderbyFlag="" display="入库仓库" fieldType="2" inputType="2" popUpName="ReportSelectStockIn" width="75" classCode="1" linkAdd="" order="8" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="入库仓库"/><Display localStr="en" display="Warehousing destination"/><Display localStr="zh_TW" display="入庫倉庫"/></Displays><groupNames/></field><field fieldname="tblAllot.BillAmt" AsfieldName="BillAmt" groupByFlag="0" displayFlag="0" condition="" conditionJoin="  " orderbyFlag="" display="合计金额" fieldType="1" inputType="" popUpName="" width="0" classCode="1" linkAdd="" order="9" isStat="1" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="AmountIdentifier" analysis="0"><Displays><Display localStr="zh_CN" display="合计金额"/><Display localStr="en" display="Amount (tax included)"/><Display localStr="zh_TW" display="合計金額"/></Displays><groupNames/></field><field fieldname="tblEmployee1.EmpFullName" AsfieldName="EmpFullName" groupByFlag="0" displayFlag="1" condition="like '%'+?+'%'" conditionJoin="and" orderbyFlag="" display="经手人" fieldType="2" inputType="2" popUpName="ReportSelectEmployee" width="50" classCode="1" linkAdd="" order="10" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="经手人"/><Display localStr="en" display="Handler"/><Display localStr="zh_TW" display="經手人"/></Displays><groupNames/></field><field fieldname="tblDepartment.DeptFullName" AsfieldName="DeptFullName" groupByFlag="0" displayFlag="1" condition="like '%'+?+'%'" conditionJoin="and" orderbyFlag="" display="部门" fieldType="2" inputType="2" popUpName="ReportSelectDepartment" width="75" classCode="1" linkAdd="" order="11" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="部门"/><Display localStr="en" display="Department"/><Display localStr="zh_TW" display="部門"/></Displays><groupNames/></field><field fieldname="tblEmployee2.EmpFullName" AsfieldName="EmpFullName1" groupByFlag="0" displayFlag="1" condition="like '%'+?+'%'" conditionJoin="and" orderbyFlag="" display="制单人" fieldType="2" inputType="2" popUpName="ReportSelectUser" width="50" classCode="1" linkAdd="" order="12" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="制单人"/><Display localStr="en" display="Created by"/><Display localStr="zh_TW" display="制單人"/></Displays><groupNames/></field><field fieldname="tblAllot.id" AsfieldName="id" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="" fieldType="" inputType="" popUpName="" width="0" classCode="1" linkAdd="" order="13" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays/><groupNames/></field></fieldInfo><SQL text="select vbCrLf    tblAllot.BillDate as BillDate,vbCrLf    tblAllot.BillNo as BillNo,vbCrLf    isnull(tblStock.StockFullName,s1.StockFullName) as StockCode,vbCrLf    isnull(tblStock2.StockFullName,s2.StockFullName) as InStockCode,vbCrLf    tblEmployee1.EmpFullName as EmpFullName,vbCrLf    tblDepartment.DeptFullName as DeptFullName,vbCrLf    tblEmployee2.EmpFullName as EmpFullName1,vbCrLf    tblAllot.id as idvbCrLffrom tblAllot vbCrLf left join tblAllotDet on (tblAllot.id=tblAllotDet.f_ref and tblAllotDet.id=(select top 1 a.id from tblAllotDet a where a.f_ref=tblAllot.id and a.StockCode in (select classCode from tblStock where StockFullName like '%'+@condition:StockCode+'%') and a.InStockCode in (select classCode from tblStock where StockFullName like '%'+@condition:InStockCode+'%')))vbCrLf left join tblDepartment on tblDepartment.classCode=tblAllot.DepartmentCodevbCrLf left join tblEmployee tblEmployee1 on tblEmployee1.id=tblAllot.EmployeeID vbCrLf left join tblEmployee tblEmployee2 on tblEmployee2.id=tblAllot.createBy vbCrLf left join tblStock tblStock on tblStock.classCode=tblAllotDet.StockCode  vbCrLf left join tblStock tblStock2 on tblStock2.classCode=tblAllotDet.InStockCode vbCrLf left join tblStock s1 on s1.classCode=tblAllot.StockCode  vbCrLf left join tblStock s2 on s2.classCode=tblAllot.InStockCodevbCrLf left join tblBuyApplicationDet on tblBuyApplicationDet.id=tblAllotDet.SourceIDvbCrLf left join tblBuyApplication on tblBuyApplication.id=tblBuyApplicationDet.f_ref  vbCrLfwhere 1=1 vbCrLf      and (tblAllot.BillDate &gt;= ?)vbCrLf      and (tblAllot.BillDate &lt;= ?)vbCrLf      and (tblAllot.BillNo like '%'+?+ '%')vbCrLf      and (isnull(tblStock.StockFullName,s1.StockFullName) like '%'+?+'%')vbCrLf      and (isnull(tblStock2.StockFullName,s2.StockFullName) like '%'+?+'%')vbCrLf      and (tblEmployee1.EmpFullName like '%'+?+'%')vbCrLf      and (tblDepartment.DeptFullName like '%'+?+'%')vbCrLf      and (tblEmployee2.EmpFullName like '%'+?+'%')vbCrLfvbCrLforder by vbCrLf   tblAllot.BillDate desc,vbCrLf   tblAllot.BillNo descvbCrLfvbCrLf"/><charts/></ReportDataSource>
