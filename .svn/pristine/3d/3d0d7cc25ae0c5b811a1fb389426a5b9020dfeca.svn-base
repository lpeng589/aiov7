webpackJsonp([30,43],{3:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,'.mint-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:4px;border:0;box-sizing:border-box;color:inherit;display:block;font-size:18px;height:41px;outline:0;overflow:hidden;position:relative;text-align:center}.mint-button:after{background-color:#000;content:" ";opacity:0;top:0;right:0;bottom:0;left:0;position:absolute}.mint-button:not(.is-disabled):active:after{opacity:.4}.mint-button.is-disabled{opacity:.6}.mint-button-icon{vertical-align:middle;display:inline-block}.mint-button--default{color:#656b79;background-color:#f6f8fa;box-shadow:0 0 1px #b8bbbf}.mint-button--default.is-plain{border:1px solid #5a5a5a;background-color:transparent;box-shadow:none;color:#5a5a5a}.mint-button--primary{color:#fff;background-color:#26a2ff}.mint-button--primary.is-plain{border:1px solid #26a2ff;background-color:transparent;color:#26a2ff}.mint-button--danger{color:#fff;background-color:#ef4f4f}.mint-button--danger.is-plain{border:1px solid #ef4f4f;background-color:transparent;color:#ef4f4f}.mint-button--large{display:block;width:100%}.mint-button--normal,.mint-button--small{display:inline-block;padding:0 12px}.mint-button--small{font-size:14px;height:33px}',""])},4:function(e,t,a){var i=a(3);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},5:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#26a2ff;box-sizing:border-box;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;height:40px;line-height:1;padding:0 10px;position:relative;text-align:center;white-space:nowrap}.mint-header .mint-button{background-color:transparent;border:0;box-shadow:none;color:inherit;display:inline-block;padding:0;font-size:inherit}.mint-header .mint-button:after{content:none}.mint-header.is-fixed{top:0;right:0;left:0;position:fixed;z-index:1}.mint-header-button{-webkit-box-flex:.5;-ms-flex:.5;flex:.5}.mint-header-button>a{color:inherit}.mint-header-button.is-right{text-align:right}.mint-header-button.is-left{text-align:left}.mint-header-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:inherit;font-weight:400;-webkit-box-flex:1;-ms-flex:1;flex:1}",""])},6:function(e,t,a){var i=a(5);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},11:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-field{display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field .mint-cell-title{width:105px;-webkit-box-flex:0;-ms-flex:none;flex:none}.mint-field .mint-cell-value{-webkit-box-flex:1;-ms-flex:1;flex:1;color:inherit;display:-webkit-box;display:-ms-flexbox;display:flex}.mint-field.is-nolabel .mint-cell-title{display:none}.mint-field.is-textarea{-webkit-box-align:inherit;-ms-flex-align:inherit;-ms-grid-row-align:inherit;align-items:inherit}.mint-field.is-textarea .mint-cell-title{padding:10px 0}.mint-field.is-textarea .mint-cell-value{padding:5px 0}.mint-field-core{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;border:0;-webkit-box-flex:1;-ms-flex:1;flex:1;outline:0;line-height:1.6;font-size:inherit;width:100%}.mint-field-clear{opacity:.2}.mint-field-state{color:inherit;margin-left:20px}.mint-field-state .mintui{font-size:20px}.mint-field-state.is-default{margin-left:0}.mint-field-state.is-success{color:#4caf50}.mint-field-state.is-warning{color:#ffc107}.mint-field-state.is-error{color:#f44336}.mint-field-other{top:0;right:0;position:absolute}",""])},12:function(e,t,a){var i=a(11);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},16:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".mint-datetime{width:100%}.mint-datetime .picker-item,.mint-datetime .picker-slot-wrapper{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mint-datetime .picker-toolbar{border-bottom:1px solid #eaeaea}.mint-datetime-action{display:inline-block;width:50%;text-align:center;line-height:40px;font-size:16px;color:#26a2ff}.mint-datetime-cancel{float:left}.mint-datetime-confirm{float:right}",""])},17:function(e,t,a){var i=a(16);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},195:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".CRMService_detail_list .mint-cell-wrapper{background-image:none}",""])},196:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".page_wrap[data-v-1ad92eec]{width:100%;height:100%;background:#f0f0f0}.page_wrap .mint-header .mint-button[data-v-1ad92eec]{font-size:14px!important}.page_wrap .mint-header[data-v-1ad92eec]{font-size:18px}.page_wrap .page_cont.CRMClientServiceDetail_page[data-v-1ad92eec]{padding-top:2.5rem;background:#f0f0f0}.page_wrap .page_cont.CRMClientServiceDetail_page .part[data-v-1ad92eec]{padding:0 12px;background:#fff}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .mint-cell[data-v-1ad92eec]{min-height:55px}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .mint-cell img[data-v-1ad92eec]{margin-right:15px}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .select_enum[data-v-1ad92eec]{line-height:55px;position:relative;padding:0 10px}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .select_enum label[data-v-1ad92eec]{width:105px;display:inline-block}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .select_enum select[data-v-1ad92eec]{border:none;outline:none;height:99%;width:160px;color:#98979d;background:#fff;font-size:16px;appearance:none;-moz-appearance:none;-webkit-appearance:none}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .fillTimeData[data-v-1ad92eec]{min-height:55px;line-height:55px;padding:0 10px;overflow:hidden}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .fillTimeData label[data-v-1ad92eec]{width:105px;display:block;float:left}.page_wrap .page_cont.CRMClientServiceDetail_page .part .CRMService_detail_list .fillTimeData input[data-v-1ad92eec]{border:none;outline:none;font-size:16px;float:left;display:inline-block;min-height:55px;line-height:55px;width:160px}.page_wrap .page_cont.CRMClientServiceDetail_page .delete_button[data-v-1ad92eec]{text-align:center;padding:20px 10px}.page_wrap .page_cont.CRMClientServiceDetail_page .delete_button button.mint-button--default[data-v-1ad92eec]{color:#ff8a7e;background:#fff}.page_wrap .page_cont.CRMClientServiceDetail_page .delete_button .mint-button[data-v-1ad92eec]:after{background:#eee}.page_wrap .mint-header-title[data-v-1ad92eec]{font-size:18px}",""])},326:function(e,t,a){var i=a(195);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},327:function(e,t,a){var i=a(196);"string"==typeof i&&(i=[[e.id,i,""]]);a(2)(i,{});i.locals&&(e.exports=i.locals)},401:function(e,t,a){a(326),a(327);var i=a(8)(a(568),a(444),"data-v-1ad92eec",null);e.exports=i.exports},444:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_wrap"},[a("mt-header",{attrs:{title:"服务记录详情",fixed:""}},[a("div",{slot:"left"},[a("mt-button",{attrs:{icon:"back"},on:{click:function(t){e.$router.push({name:"CRMClientServiceList"})}}},[e._v("返回")])],1),e._v(" "),a("div",{slot:"right"},[a("mt-button",{on:{click:e.save}},[e._v("保存")])],1)]),e._v(" "),a("div",{staticClass:"page_cont CRMClientServiceDetail_page"},[a("div",{staticClass:"part"},[e._l(e.fieldList,function(t){return a("div",{staticClass:"CRMService_detail_list"},[1==t.inputType&&void 0!==t.EnumItem&&t.EnumItem.filter(function(a){return a.value==e.values[t.fieldName]}).length>0?a("div",{staticClass:"select_enum mint-cell"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t}),l=e.values,n=t.fieldName;Array.isArray(l)?l.splice(n,1,a.target.multiple?i:i[0]):e.values[t.fieldName]=a.target.multiple?i:i[0]}}},e._l(t.EnumItem,function(t){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.name))])})),e._v(" "),a("i",{staticClass:"mint-cell-allow-right"})]):e._e(),e._v(" "),2==t.inputType?e._l(t.PopupDis,function(i){return 2==i.inputType&&e.values[i.fieldName]?a("mt-field",{attrs:{label:i.display,readonly:"",disableClear:"",value:e.values[i.fieldName]},nativeOn:{click:function(a){e.openPopup(t.fieldName)}}}):e._e()}):e._e(),e._v(" "),15==t.inputType?[a("mt-field",{attrs:{label:t.display,readonly:"",disableClear:"",value:e.EmpFullName,placeholder:"请选择"+t.display},nativeOn:{click:function(a){e.openPopup(t.fieldName)}}})]:e._e(),e._v(" "),2!=t.fieldType&&0!=t.inputType||1==t.inputType||2==t.inputType||"Content"===t.fieldName||"Remark"===t.fieldName||"FeedBack"===t.fieldName||"Topic"===t.fieldName||14==t.fieldType||5==t.fieldType||6==t.fieldType||15==t.inputType?e._e():a("mt-field",{attrs:{placeholder:"请输入"+t.display,label:t.display,value:e.values[t.fieldName],disableClear:""},model:{value:e.values[t.fieldName],callback:function(a){var i=e.values,l=t.fieldName;Array.isArray(i)?i.splice(l,1,a):e.values[t.fieldName]=a},expression:"values[field.fieldName]"}}),e._v(" "),0==t.inputType&&6==t.fieldType?a("div",[a("div",{staticClass:"fillTimeData"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],ref:t.fieldName+"timeData",refInFor:!0,attrs:{type:"text",readonly:"",placeholder:"选择日期"},domProps:{value:e.values[t.fieldName]},on:{click:function(a){e.openDateTimePicker(t.fieldName)},input:function(a){if(!a.target.composing){var i=e.values,l=t.fieldName;Array.isArray(i)?i.splice(l,1,a.target.value):e.values[t.fieldName]=a.target.value}}}})]),e._v(" "),a("mt-datetime-picker",{ref:t.fieldName,refInFor:!0,attrs:{type:"datetime","date-format":"{value} 日",hourFormat:"{value} 时",minuteFormat:"{value} 分"},on:{confirm:e.getDate2},model:{value:e.nowDate,callback:function(t){e.nowDate=t},expression:"nowDate"}})],1):e._e(),e._v(" "),0==t.inputType&&5==t.fieldType?a("div",[a("div",{staticClass:"fillTimeData"},[a("label",[e._v(e._s(t.display))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t.fieldName],expression:"values[field.fieldName]"}],ref:t.fieldName+"timeData",refInFor:!0,attrs:{type:"text",readonly:"",placeholder:"选择日期"},domProps:{value:e.values[t.fieldName]},on:{click:function(a){e.openDateTimePicker(t.fieldName)},input:function(a){if(!a.target.composing){var i=e.values,l=t.fieldName;Array.isArray(i)?i.splice(l,1,a.target.value):e.values[t.fieldName]=a.target.value}}}})]),e._v(" "),a("mt-datetime-picker",{ref:t.fieldName,refInFor:!0,attrs:{type:"date","year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:e.getDate},model:{value:e.nowDate,callback:function(t){e.nowDate=t},expression:"nowDate"}})],1):e._e()],2)}),e._v(" "),a("div",{staticClass:"CRMService_detail_list"},[a("mt-field",{attrs:{placeholder:"请输入主题",label:"主题",value:e.values.Topic,type:"textarea",disableClear:""},model:{value:e.values.Topic,callback:function(t){e.values.Topic=t},expression:"values.Topic"}})],1),e._v(" "),a("div",{staticClass:"CRMService_detail_list"},[a("mt-field",{attrs:{placeholder:"请输入服务内容",label:"服务内容",value:e.values.Content,type:"textarea",disableClear:""},model:{value:e.values.Content,callback:function(t){e.values.Content=t},expression:"values.Content"}})],1),e._v(" "),a("div",{staticClass:"CRMService_detail_list"},[a("mt-field",{attrs:{placeholder:"请输入客户反馈",label:"客户反馈",value:e.values.FeedBack,type:"textarea",disableClear:""},model:{value:e.values.FeedBack,callback:function(t){e.values.FeedBack=t},expression:"values.FeedBack"}})],1),e._v(" "),a("div",{staticClass:"CRMService_detail_list"},[a("mt-field",{attrs:{placeholder:"请输入备注",label:"备注",value:e.values.Remark,type:"textarea",disableClear:""},model:{value:e.values.Remark,callback:function(t){e.values.Remark=t},expression:"values.Remark"}})],1),e._v(" "),e.fujian?a("div",{staticClass:"CRMService_detail_list"},[a("mt-cell",{attrs:{title:"附件",value:e.fujian}},[a("a",{staticStyle:{"text-decoration":"none",color:"#38c",outline:"none"},attrs:{href:e.fujianUrl}},[e._v(e._s(e.fujian))])])],1):e._e()],2),e._v(" "),a("div",{staticClass:"delete_button"},[a("mt-button",{attrs:{type:"default",size:"large"},nativeOn:{click:function(t){e.deleteService(t)}}},[e._v("删除服务记录")])],1)])],1)},staticRenderFns:[]}},568:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(10),n=i(l),o=a(9),r=a(32),d=a(7);a(13),a(4),a(6),a(15),a(17),a(14),a(12),a(36),t.default={name:"CRMClientServiceDetail",components:{"mt-button":d.Button,"mt-header":d.Header,"mt-cell":d.Cell,"mt-datetime-picker":d.DatetimePicker,"mt-field":d.Field},data:function(){return{fieldList:[],nowDate:new Date,main_fieldName:"",values:{},EmpFullName:""}},computed:{fujianUrl:function(){var e="";return this.fujian&&(e="/ReadFile?fileName="+this.fujian+"&realName="+this.fujian+"&tempFile=false&type=AFFIX&tableName=CRMClientService"),e},fujian:function(){return this.values.fujian?this.values.fujian:this.values.Attachment}},methods:(0,n.default)({},(0,o.mapActions)(["detail","reportQuery","update","del"]),{listData:function(){var e=this.$route.params.keyId,t=this;d.Indicator.open({text:"加载中...",spinnerType:"snake"}),this.detail({tableName:"CRMClientService",keyId:e}).then(function(e){d.Indicator.close();for(var a in t.$data)t.$data[a]=e[a];t.$data.nowDate=new Date,t.$data.main_fieldName="",t.$data.EmpFullName=e.fieldList.filter(function(e){return"EmployeeId"===e.fieldName})[0].defaultValue,t.fieldList=t.fieldList.filter(function(e){return 100!==e.inputType&&3!==e.inputType}),t.fieldList.forEach(function(e,t,a){1===e.inputType&&void 0!==e.EnumItem&&e.EnumItem.unshift({name:"请选择",value:""})})})},save:function(){var e=window.JSON.stringify(this.values),t=this;this.update({tableName:"CRMClientService",values:e}).then(function(e){(0,d.Toast)({message:"保存成功",duration:1e3}),setTimeout(function(){t.$router.push({name:"CRMClientServiceList"})},1e3)}).catch(function(e){var t=e.message;d.Indicator.close(),(0,d.Toast)({message:t,duration:1e3})})},openDateTimePicker:function(e){this.$refs[e][0].open(),this.$data.main_fieldName=e},getDate:function(e){var t=(0,r.dateformat)(e,"yyyy-MM-dd"),a=this.$data.main_fieldName;this.$refs[a+"timeData"][0].value=t,this.$data.values[a]=t},getDate2:function(e){var t=(0,r.dateformat)(e,"yyyy-MM-dd hh:mm:ss"),a=this.$data.main_fieldName;this.$refs[a+"timeData"][0].value=t,this.$data.values[a]=t},deleteService:function(){var e=this,t=this.$route.params.keyId;d.MessageBox.confirm("确定要删除该服务记录?").then(function(a){d.Indicator.open({text:"删除中...",spinnerType:"snake"}),e.del({tableName:"CRMClientService",keyId:t,defineInfo:"是否删除"}).then(function(t){d.Indicator.close(),e.$router.replace({name:"CRMClientServiceList"})})})},openPopup:function(e){"EmployeeId"===e&&this.$router.push({name:"popupEmployee",params:{prevRouteName:this.$route.name}}),"ClientId"===e&&this.$router.push({name:"SelectCRMClient",params:{prevRouteName:this.$route.name}})}}),watch:{$route:function(e,t){var a=this;if("popupEmployee"===t.name){if(e.params.checked){var i=e.params.checked;a.$data.values.EmployeeId=i.EmployeeID,a.$data.EmpFullName=i.tblEmployee_EmpFullName}}else if("SelectCRMClient"===t.name&&e.params.checked){var l=e.params.checked;a.$data.values.ClientId=l.ClientId,a.$data.values.f_brother=l.f_brother,a.$data.values["CRMClientInfo.ClientName"]=l.CRMClientInfo_ClientName}}},beforeRouteEnter:function(e,t,a){a(function(e){"popupEmployee"!==t.name&&"SelectCRMClient"!==t.name&&e.listData()})}}}});