<?xml version="1.0" encoding="UTF-8" ?>
<ReportDataSource><Report reporteId="" reportName="库存分布表"/><fieldInfo><field fieldname="'defaultTime'" AsfieldName="endDate" groupByFlag="0" displayFlag="0" condition="&lt;= ? or 1=1" conditionJoin="and" orderbyFlag="" display="单据日期≤" fieldType="5" inputType="" popUpName="" width="0" classCode="1" linkAdd="" order="1" isStat="0" defaultValue="@MEM:sysShortDate" fieldSysType="" fixColName="1" isNull="1" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="单据日期≤"/><Display localStr="en" display="Bill Date≤"/><Display localStr="zh_TW" display="單據日期≤"/></Displays><groupNames/></field><field fieldname="tblGoods.StockCode" AsfieldName="StockCode" groupByFlag="0" displayFlag="0" condition="=? or 1=1" conditionJoin="and" orderbyFlag="" display="仓库" fieldType="2" inputType="2" popUpName="ReportSelectStock_v2" width="0" classCode="1" linkAdd="" order="2" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="仓库"/><Display localStr="en" display="storage"/><Display localStr="zh_TW" display="倉庫"/></Displays><groupNames/></field><field fieldname="tblGoods.classCode" AsfieldName="GoodsCode" groupByFlag="0" displayFlag="0" condition="=?" conditionJoin="and" orderbyFlag="升" display="商品编号" fieldType="2" inputType="2" popUpName="ReportSelectGoods_v2" width="0" classCode="1" linkAdd="" order="3" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="商品编号"/><Display localStr="en" display="Commodity code"/><Display localStr="zh_TW" display="商品編號"/></Displays><groupNames/></field><field fieldname="tblGoods.[tblGoods]" AsfieldName="GoodsFullName" groupByFlag="0" displayFlag="1" condition="" conditionJoin="  " orderbyFlag="" display="商品名称" fieldType="2" inputType="0" popUpName="" width="150" classCode="1" linkAdd="" order="4" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="商品名称"/><Display localStr="en" display="Commodity name"/><Display localStr="zh_TW" display="商品名稱"/></Displays><groupNames/></field><field fieldname="isnull(Detail.totalQty,0)" AsfieldName="LastQty" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="结存数量" fieldType="1" inputType="0" popUpName="" width="100" classCode="1" linkAdd="" order="5" isStat="1" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="1" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="Qty" analysis="0"><Displays><Display localStr="zh_CN" display="结存数量"/><Display localStr="en" display="LastQty"/><Display localStr="zh_TW" display="結存數量"/></Displays><groupNames/></field><field fieldname="isnull(Detail.lastPrice,0)" AsfieldName="LastPrice" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="结存单价" fieldType="1" inputType="0" popUpName="" width="100" classCode="1" linkAdd="" order="6" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="1" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="priceIdentifier" analysis="0"><Displays><Display localStr="zh_CN" display="结存单价"/><Display localStr="en" display="Inventory unit price"/><Display localStr="zh_TW" display="結存單價"/></Displays><groupNames/></field><field fieldname="isnull(Detail.totalAmt,0)" AsfieldName="LastAmount" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="结存金额" fieldType="1" inputType="0" popUpName="" width="100" classCode="1" linkAdd="" order="7" isStat="1" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="1" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="AmountIdentifier" analysis="0"><Displays><Display localStr="zh_CN" display="结存金额"/><Display localStr="en" display="LastAmount"/><Display localStr="zh_TW" display="結存金額"/></Displays><groupNames/></field><field fieldname="tblGoods.isCatalog" AsfieldName="isCatalog" groupByFlag="0" displayFlag="1" condition="=0" conditionJoin="and" orderbyFlag="" display="分类标识" fieldType="0" inputType="0" popUpName="" width="0" classCode="1" linkAdd="" order="8" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="分类标识"/><Display localStr="en" display="isCatalog"/><Display localStr="zh_TW" display="分类标识"/></Displays><groupNames/></field><field fieldname="tblGoods.classCode" AsfieldName="classCode" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="" fieldType="2" inputType="100" popUpName="" width="0" classCode="1" linkAdd="" order="9" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays/><groupNames/></field><field fieldname="(case when len(isnull((SELECT top 1 Seq FROM tblStockDet WHERE tblGoods.classCode = tblStockDet.GoodsCode ),''))=0  then '' else (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') end)" AsfieldName="Seq" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="序列号" fieldType="2" inputType="4" popUpName="" width="80" classCode="1" linkAdd="ReportDataAction.do?reportNumber=ReportSeqDispose&amp;GoodsCode=@ValueofDB:classCode&amp;hide_GoodsCode=@ValueofDB:hideCode&amp;tblGoods.[tblGoods]=@ValueofDB:GoodsNumber&amp;OutInStock=1" order="10" isStat="0" defaultValue="" fieldSysType="GoodsField" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="序列号"/><Display localStr="en" display="series"/><Display localStr="zh_TW" display="序列号"/></Displays><groupNames/></field><field fieldname="(select top 1 languageId from tblDBEnumerationItem where enumValue='warehouse')" AsfieldName="OutInStockDet" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="出入库明细" fieldType="2" inputType="4" popUpName="" width="80" classCode="1" linkAdd="ReportDataAction.do?reportNumber=ReportOutInDetDisplayData&amp;GoodsCode=@ValueofDB:classCode&amp;hide_GoodsCode=@ValueofDB:hideCode&amp;tblGoods.[tblGoods]=@ValueofDB:GoodsNumber" order="11" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="出入库明细"/><Display localStr="en" display="warehouse changing  detail"/><Display localStr="zh_TW" display="出入庫明細"/></Displays><groupNames/></field><field fieldname="isnull(Detail.totalQty,0)" AsfieldName="LastQty1" groupByFlag="0" displayFlag="1" condition="&lt;&gt;?" conditionJoin="and" orderbyFlag="" display="结存数量" fieldType="1" inputType="5" popUpName="zero" width="0" classCode="1" linkAdd="" order="12" isStat="0" defaultValue="0" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="Qty" analysis="0"><Displays><Display localStr="zh_CN" display="结存数量"/><Display localStr="en" display="Inventory quantity"/><Display localStr="zh_TW" display="结存数量"/></Displays><groupNames/></field><field fieldname="(select top 1 tblDBEnumerationItem.languageId from tblDBEnumerationItem left join tblDBEnumeration on tblDBEnumerationItem.enumid=tblDBEnumeration.id where tblDBEnumeration.enumName='CommEnum' and tblDBEnumerationItem.enumValue='information')" AsfieldName="tblGoodsDetail" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="详情" fieldType="2" inputType="4" popUpName="" width="40" classCode="1" linkAdd="UserFunctionAction.do?tableName=tblGoods&amp;keyId=@ValueofDB:id&amp;operation=5" order="13" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="详情"/><Display localStr="en" display="information"/><Display localStr="zh_TW" display="詳情"/></Displays><groupNames/></field><field fieldname="tblGoods.id" AsfieldName="id" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="" fieldType="2" inputType="0" popUpName="" width="0" classCode="1" linkAdd="" order="14" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays/><groupNames/></field><field fieldname="tblGoods.classCode+'#;#0#;##;#'" AsfieldName="hideCode" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="" fieldType="" inputType="" popUpName="" width="0" classCode="1" linkAdd="" order="15" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays/><groupNames/></field><field fieldname="tblGoods.classCode" AsfieldName="parentCode" groupByFlag="0" displayFlag="0" condition="like ?+'%'" conditionJoin="and" orderbyFlag="" display="" fieldType="" inputType="3" popUpName="" width="0" classCode="1" linkAdd="" order="16" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays/><groupNames/></field></fieldInfo><SQL text="select vbCrLf    tblGoods.[tblGoods] as GoodsFullName,vbCrLf    isnull(Detail.totalQty,0) as LastQty,vbCrLf    isnull(Detail.lastPrice,0) as LastPrice,vbCrLf    isnull(Detail.totalAmt,0) as LastAmount,vbCrLf    tblGoods.isCatalog as isCatalog,vbCrLf    tblGoods.classCode as classCode,vbCrLf    (case when len(isnull((SELECT top 1 Seq FROM tblStockDet WHERE tblGoods.classCode = tblStockDet.GoodsCode ),''))=0  then '' else (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') end) as Seq,vbCrLf    (select top 1 languageId from tblDBEnumerationItem where enumValue='warehouse') as OutInStockDet,vbCrLf    isnull(Detail.totalQty,0) as LastQty1,vbCrLf    (select top 1 tblDBEnumerationItem.languageId from tblDBEnumerationItem left join tblDBEnumeration on tblDBEnumerationItem.enumid=tblDBEnumeration.id where tblDBEnumeration.enumName='CommEnum' and tblDBEnumerationItem.enumValue='information') as tblGoodsDetail,vbCrLf    tblGoods.id as id,vbCrLf    tblGoods.classCode+'#;#0#;##;#' as hideCodevbCrLffrom tblgoodsvbCrLfleft join (select GoodsCode as classCode,SUM(isnull(instoreQty,0))-SUM(isnull(outstoreQty,0)) as totalQty,SUM(isnull(instoreAmount,0))-SUM(isnull(outstoreAmount,0)) as totalAmt,case when SUM(isnull(instoreQty,0))-SUM(isnull(outstoreQty,0))=0 then 0 else (SUM(isnull(instoreAmount,0))-SUM(isnull(outstoreAmount,0)))/(SUM(isnull(instoreQty,0))-SUM(isnull(outstoreQty,0))) end as lastPrice from tblStockDet noright left join tblStock on tblStockDet.StockCode=tblStock.classCode where BillDate&lt;=@condition:endDate and tblStockDet.stockCode=@condition:StockCode group by GoodsCode)as Detail on Detail.classCode=tblGoods.classCodevbCrLfwhere 1=1 vbCrLf      and ('defaultTime' &lt;= ? or 1=1)vbCrLf      and (tblGoods.StockCode =? or 1=1)vbCrLf      and (tblGoods.classCode =?)vbCrLf      and (tblGoods.isCatalog =0)vbCrLf      and (isnull(Detail.totalQty,0) &lt;&gt;?)vbCrLf      and (tblGoods.classCode like ?+'%')vbCrLfvbCrLforder by vbCrLf   tblGoods.classCode vbCrLfvbCrLf"/><charts/></ReportDataSource>
