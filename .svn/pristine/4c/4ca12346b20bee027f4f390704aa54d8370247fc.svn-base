<?xml version="1.0" encoding="UTF-8" ?>
<ReportDataSource><Report reporteId="" reportName=""/><fieldInfo><field fieldname="orderID" AsfieldName="orderID" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="升" display="排序" fieldType="2" inputType="" popUpName="" width="0" classCode="1" linkAdd="" order="1" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="排序"/></Displays><groupNames/></field><field fieldname="isnull(tblCompany.ComFullName,'')" AsfieldName="ComFullName" groupByFlag="0" displayFlag="1" condition="tblCompany.ClientFlag!=1 and tblCompany.isCatalog=0" conditionJoin="and" orderbyFlag="  " display="客户" fieldType="18" inputType="7" popUpName="" width="150" classCode="1" linkAdd="" order="2" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="Customer" analysis="0"><Displays><Display localStr="zh_CN" display="客户"/><Display localStr="en" display="客户"/><Display localStr="zh_TW" display="客户"/></Displays><groupNames/></field><field fieldname="isnull(tblCompanybeginningDet.TotalRemain,0)" AsfieldName="TotalRemain" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="期初金额" fieldType="1" inputType="0" popUpName="" width="100" classCode="1" linkAdd="" order="3" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="SAmountIdentifier" analysis="0"><Displays><Display localStr="zh_CN" display="期初金额"/><Display localStr="en" display="Balance"/><Display localStr="zh_TW" display="期初金额"/></Displays><groupNames/></field><field fieldname="isnull(tblCompanyTotal.ReceiveTotalRemain,0)" AsfieldName="ReceiveTotalRemain" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="当前余额" fieldType="1" inputType="0" popUpName="" width="100" classCode="1" linkAdd="ReportDataAction.do?reportNumber=ReportCompanyCln&amp;hide_CompanyCode=@ValueofDB:hidCode&amp;tblCompany.ComFullName=@ValueofDB:ComFullName&amp;CompanyCode=@ValueofDB:CompanyCode&amp;startDate=@MEM:defaultTime&amp;TotalReceive1=0" order="4" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="SAmountIdentifier" analysis="0"><Displays><Display localStr="zh_CN" display="当前余额"/><Display localStr="en" display="Account receivable balance"/><Display localStr="zh_TW" display="当前余额"/></Displays><groupNames/></field><field fieldname="SalesAmt.Date" AsfieldName="Date" groupByFlag="0" displayFlag="1" condition="" conditionJoin="  " orderbyFlag="  " display="账龄期间" fieldType="3" inputType="0" popUpName="" width="100" classCode="1" linkAdd="" order="5" isStat="0" defaultValue="" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="1" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="账龄期间"/><Display localStr="en" display="Description"/><Display localStr="zh_TW" display="账龄期间"/></Displays><groupNames/></field><field fieldname="SalesAmt.NeedReturnAmt" AsfieldName="NeedReturnAmt" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="待收款金额" fieldType="1" inputType="100" popUpName="" width="100" classCode="1" linkAdd="" order="6" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="1" seriesCol="" seriesNums="" crossField="2" groupName="" fieldIdentity="SAmountIdentifier" analysis="0"><Displays><Display localStr="zh_TW" display="待收款金額"/><Display localStr="zh_CN" display="待收款金额"/><Display localStr="en" display="Receivable amount"/></Displays><groupNames/></field><field fieldname="tblCompany.classCode" AsfieldName="CompanyCode" groupByFlag="0" displayFlag="1" condition="=?" conditionJoin="and" orderbyFlag="" display="客户" fieldType="2" inputType="2" popUpName="ReportSelectClient_v2" width="-1" classCode="1" linkAdd="" order="7" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="Customer" analysis="0"><Displays><Display localStr="zh_CN" display="客户"/></Displays><groupNames/></field><field fieldname="tblCompanyTotal.ReceiveTotalRemain" AsfieldName="ReceiveTotal" groupByFlag="0" displayFlag="1" condition="&lt;&gt;?" conditionJoin="and" orderbyFlag="" display="当前余额" fieldType="1" inputType="5" popUpName="zero" width="0" classCode="1" linkAdd="" order="8" isStat="0" defaultValue="0" fieldSysType="" fixColName="1" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_CN" display="当前余额"/></Displays><groupNames/></field><field fieldname="tblCompany.classCode+'#;#'+cast(tblCompany.isCatalog as  varchar(10))+'#;##;#'" AsfieldName="hidCode" groupByFlag="0" displayFlag="1" condition="" conditionJoin="" orderbyFlag="" display="" fieldType="" inputType="" popUpName="" width="0" classCode="1" linkAdd="" order="9" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays/><groupNames/></field><field fieldname="tblCompany.statusId" AsfieldName="statusId" groupByFlag="0" displayFlag="0" condition="=0" conditionJoin="and" orderbyFlag="" display="状态" fieldType="0" inputType="100" popUpName="" width="0" classCode="1" linkAdd="" order="10" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_TW" display="狀態"/><Display localStr="zh_CN" display="状态"/><Display localStr="en" display="Status"/></Displays><groupNames/></field><field fieldname="tblCompany.workFlowNodeName" AsfieldName="workFlowNodeName" groupByFlag="0" displayFlag="0" condition="='finish'" conditionJoin="and" orderbyFlag="" display="workFlowNodeName" fieldType="2" inputType="100" popUpName="" width="0" classCode="1" linkAdd="" order="11" isStat="0" defaultValue="" fieldSysType="" fixColName="0" isNull="0" planarField="0" subSQL="" repeatNotShow="0" zeroDisplay="0" seriesCol="" seriesNums="" crossField="" groupName="" fieldIdentity="" analysis="0"><Displays><Display localStr="zh_TW" display="workFlowNodeName"/><Display localStr="zh_CN" display="workFlowNodeName"/><Display localStr="en" display="workFlowNodeName"/></Displays><groupNames/></field></fieldInfo><SQL text="select vbCrLf    orderID as orderID,vbCrLf    isnull(tblCompany.ComFullName,'') as ComFullName,vbCrLf    isnull(tblCompanybeginningDet.TotalRemain,0) as TotalRemain,vbCrLf    isnull(tblCompanyTotal.ReceiveTotalRemain,0) as ReceiveTotalRemain,vbCrLf    SalesAmt.Date as Date,vbCrLf    SalesAmt.NeedReturnAmt as NeedReturnAmt,vbCrLf    tblCompany.classCode as CompanyCode,vbCrLf    tblCompanyTotal.ReceiveTotalRemain as ReceiveTotal,vbCrLf    tblCompany.classCode+'#;#'+cast(tblCompany.isCatalog as  varchar(10))+'#;##;#' as hidCodevbCrLffrom  (select a.CompanyCode,Date,SUM(NeedReturnAmt) as NeedReturnAmt, (select b.detOrderNo from tblQueryPeriodSet a join tblQueryPeriodSetDet b on a.id=b.f_ref where code='accAgePeriod' and  b.displayVal=Date) as orderIDvbCrLffrom(select (select displayVal from tblQueryPeriodSet a join tblQueryPeriodSetDet b on a.id=b.f_ref where code='accAgePeriod' and (DATEDIFF(DAY,BillDate,GETDATE())+1)&gt;=b.startVal and (DATEDIFF(DAY,BillDate,GETDATE())+1)&lt;(case b.endVal when 0 then 99999999999 else b.endVal end))as Date,CompanyCode,NeedReturnAmt from tblSalesOutStock where workFlowNodeName='finish' and NeedReturnAmt&gt;0 vbCrLf	union all vbCrLf	select (select displayVal from tblQueryPeriodSet a join tblQueryPeriodSetDet b on a.id=b.f_ref where code='accAgePeriod' and (DATEDIFF(DAY,BillDate,GETDATE())+1)&gt;=b.startVal and (DATEDIFF(DAY,BillDate,GETDATE())+1)&lt;(case b.endVal when 0 then 99999999999 else b.endVal end))as Date,CompanyCode,NeedReturnAmt from tblSalesReplace  where workFlowNodeName='finish' and NeedReturnAmt&lt;&gt;0vbCrLf	union all vbCrLf	select (select displayVal from tblQueryPeriodSet a join tblQueryPeriodSetDet b on a.id=b.f_ref where code='accAgePeriod' and (DATEDIFF(DAY,tblSalesReturnStock.BillDate,GETDATE())+1)&gt;=b.startVal and (DATEDIFF(DAY,tblSalesReturnStock.BillDate,GETDATE())+1)&lt;(case b.endVal when 0 then 99999999999 else b.endVal end))as Date,tblSalesReturnStock.CompanyCode,tblSalesOutStock.BackAmount-1*NeedPayAmt from tblSalesReturnStock  join tblSalesReturnStockDet on tblSalesReturnStock.id=(select top 1 f_ref from tblSalesReturnStockDet where f_ref=tblSalesReturnStock.id) left join tblSalesOutStock on tblSalesOutStock.id=tblSalesReturnStockDet.SalesOutStockID and tblSalesOutStock.workFlowNodeName='finish'  where tblSalesReturnStock.workFlowNodeName='finish' and  NeedPayAmt&gt;0)a group by a.CompanyCode,Date)SalesAmtvbCrLfright join tblCompany on tblCompany.classCode=SalesAmt.CompanyCodevbCrLfleft join (select CompanyCode,sum(ReceiveTotalRemain-PreReceiveTotalRemain) as ReceiveTotalRemain from tblCompanyTotal group by CompanyCode)tblCompanyTotal on tblCompany.classCode=tblCompanyTotal.CompanyCode vbCrLfleft join tblCompanybeginningDet on tblCompanybeginningDet.CompanyCode=tblCompany.classCode and tblCompanybeginningDet.f_ref in(select id from tblCompanybeginning where tblCompanybeginning.moduleType=2 and tblCompanybeginning.workFlowNodeName='finish')vbCrLfwhere 1=1 vbCrLf      and tblCompany.ClientFlag!=1 and tblCompany.isCatalog=0vbCrLf      and (tblCompany.classCode =?)vbCrLf      and (tblCompanyTotal.ReceiveTotalRemain &lt;&gt;?)vbCrLf      and (tblCompany.statusId =0)vbCrLf      and (tblCompany.workFlowNodeName ='finish')vbCrLfvbCrLforder by vbCrLf   orderID vbCrLfvbCrLf"/><charts/></ReportDataSource>
