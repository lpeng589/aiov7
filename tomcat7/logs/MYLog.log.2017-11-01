[INFO ] 2017-11-01 22:00:07,175 Line:206 系统开始启动，最大内存：891;目前总内存：147;目前空闲内存：53
 [INFO ] 2017-11-01 22:00:07,706 Line:284 ===========Tomcat Port=8888
 [DEBUG] 2017-11-01 22:00:13,568 Line:3843 --------Init Hibernate Successful---------------
 [DEBUG] 2017-11-01 22:00:14,209 Line:1203 ------Init SystemSetting record:212
 [INFO ] 2017-11-01 22:00:14,224 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-11-01 22:00:14,427 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-11-01 22:00:14,459 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-11-01 22:00:14,474 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-11-01 22:00:14,474 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-11-01 22:00:14,490 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-11-01 22:00:14,505 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-11-01 22:00:16,850 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:00:16,872 Line:1091 ------Init WorkProfession record:6
 [DEBUG] 2017-11-01 22:00:16,918 Line:1121 ------Init District record:3984
 [DEBUG] 2017-11-01 22:00:16,934 Line:1152 ------Init deptMap record:15
 [DEBUG] 2017-11-01 22:00:18,950 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-11-01 22:00:18,950 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-11-01 22:00:20,704 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-11-01 22:00:21,079 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-11-01 22:00:23,595 Line:538 ------Init TableInfo record:879
 [DEBUG] 2017-11-01 22:00:23,630 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-11-01 22:00:23,646 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-11-01 22:00:23,661 Line:775 ------Init initModuleField record:4
 [DEBUG] 2017-11-01 22:00:23,677 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-11-01 22:00:23,693 Line:721 ------Init TableInfo record:24
 [DEBUG] 2017-11-01 22:00:23,739 Line:891 ------Init PropInfo record:7
 [ERROR] 2017-11-01 22:00:34,064 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.InitMenData.initDog(InitMenData.java:2946)
	at com.menyi.web.util.InitMenData.initSystem(InitMenData.java:3850)
	at com.menyi.web.util.BaseFilter.init(BaseFilter.java:216)
	at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:279)
	at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:260)
	at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:105)
	at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4854)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5542)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:649)
	at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:672)
	at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1859)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:00:37,020 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:00:37,110 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-11-01 22:00:38,266 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\25183d52_1706281731170782890.xml (系统找不到指定的文件。)
 [ERROR] 2017-11-01 22:00:38,973 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\726c06ce_1603150934567560417.xml (系统找不到指定的文件。)
 [ERROR] 2017-11-01 22:00:39,113 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\916dc5e8_1512091148254894807.xml (系统找不到指定的文件。)
 [ERROR] 2017-11-01 22:00:39,176 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\9d47f247_1706091716571082648.xml (系统找不到指定的文件。)
 [ERROR] 2017-11-01 22:00:39,457 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\c30fac90_1604291410068132941.xml (系统找不到指定的文件。)
 [ERROR] 2017-11-01 22:00:40,774 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\fd21c05c_1606131813438340088.xml (系统找不到指定的文件。)
 [ERROR] 2017-11-01 22:00:40,791 Line:48 java.io.FileNotFoundException: C:\koron\HFtomcat\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-11-01 22:00:40,791 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-11-01 22:00:40,822 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-11-01 22:00:41,142 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-11-01 22:00:41,142 Line:3855 --------Init Dog Successful---------------
 [DEBUG] 2017-11-01 22:00:42,783 Line:549 ReportDataMgt.getReportData SQL=select      tblSalesOrder.BillDate as startDate,     tblSalesOrder.BillDate as endDate,     tblSalesOrder.BillNo as BillNo,     tblSalesOrder.BillDate as BillDate,     tblProject.ProjectName as ProjectName,     tblGoods.classCode as GoodsCode,     tblCompany.ComNumber as ComNumber,     tblCompany.ComFullName as ComFullName,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee.EmpFullName as EmpFullName,     tblEmployee2.EmpFullName as createBy,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblSalesOrderDet.BatchNo as BatchNo,     tblSalesOrderDet.Inch as Inch,     tblSalesOrderDet.Hue as Hue,     tblSalesOrderDet.yearNO as yearNO,     tblSalesOrderDet.ProDate as ProDate,     tblSalesOrderDet.Availably as Availably,     tblSalesOrderDet.SendDate as SendDate,     tblSalesOrderDet.Qty as Qty,     tblSalesOrderDet.Price as Price,     tblSalesOrderDet.Amount as Amount,     (select Top 1 lastPrice from tblStocks a where a.GoodsCode=tblSalesOrderDet.GoodsCode and tblSalesOrderDet.PresentSampleType!=0) as lastPrice,     tblSalesOrderDet.Qty*(select Top 1 lastPrice from tblStocks a where a.GoodsCode=tblSalesOrderDet.GoodsCode and tblSalesOrderDet.PresentSampleType!=0) as lastAmount,     tblSalesOrderDet.SalesGoodsType as SalesGoodsType,     tblSalesOrderDet.SecUnit as SecName,     tblSalesOrderDet.UnitIntQty as SecUnitQty,     tblSalesOrderDet.UnitBaseQty as SecBaseQty,     tblSalesOrderDet.UnitQty as UnitQty,     tblSalesOrderDet.UnitPrice as UnitPrice,     tblSalesOrderDet.Discount as Discount,     tblSalesOrderDet.DisPrice as DisPrice,     tblSalesOrderDet.DisBackAmt as DisBackAmt,     tblSalesOrderDet.DisAmount as DisAmount,     tblSalesOrder.Tax as Tax,     tblSalesOrderDet.TaxPrice as TaxPrice,     tblSalesOrderDet.TaxAmount as TaxAmount,     tblSalesOrderDet.CoTaxAmt as CoTaxAmt,     tblCurrency.CurrencyName as CurrencyName,     tblSalesOrder.CurrencyRate as CurrencyRate,     tblSalesOrderDet.CurPrice as CurPrice,     tblSalesOrderDet.CurAmount as CurAmount,     tblSalesOrderDet.AccountingPrice as AccountingPrice,     tblSalesOrder.hasBuyOrder as hasBuyOrder,     tblSalesOrderDet.MRPQty as MRPQty,     tblSalesOrderDet.WorkOrderQty as WorkOrderQty,     (select sum(isnull(k.InQty,0)) from tblBuyOrderDet k where k.SourceID=tblSalesOrderDet.id) as inQty,     tblSalesOrderDet.OutQty as OutQty,     case when tblSalesOrderDet.NotOutQty <=0 or tblSalesOrder.statusId!=0 then 0 else tblSalesOrderDet.NotOutQty end as NotOutQty,     tblSalesOrderDet.BackQty as BackQty,     tblSalesOrder.id as id,     tblSalesOrderDet.SCompanyID as SCompanyID,     tblSalesOrderDet.FinishStatus as FinishStatus,     tblSalesOrderDet.PresentSampleType as PresentSampleType,     tblSalesOrder.Remark as Remark,     tblSalesOrderDet.Remark as ReRemark,     case when (tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) <0 then (-1)*(tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) else 0 end as OverOutQty,     viewcompanytotal.ComFullName as ComFullName1,     tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice as profitPrice,     tblSalesOrderDet.Qty*(tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice) as profitAmt,     tblGoods.classCode+'#;#0#;##;#' as hideCode,     tblSalesOrder.workFlowNodeName as workFlowNodeName,     tblSalesOrder.OldGiftId as OldGiftId from tblSalesOrderDet    left join tblGoods on tblGoods.ClassCode=tblSalesOrderDet.GoodsCode   left join viewcompanytotal on tblGoods.CompanyCode=viewcompanytotal.classCode   left join tblSalesOrder on tblSalesOrderDet.f_ref=tblSalesOrder.id   left join tblStock on tblStock.classCode=tblSalesOrderDet.StockCode   left join tblCurrency on tblCurrency.id=tblSalesOrder.Currency   left join tblEmployee on tblEmployee.id = tblSalesOrder.EmployeeID   left join tblEmployee as tblEmployee2 on tblEmployee2.id = tblSalesOrder.createBy   left join tblCompany on tblCompany.classCode = tblSalesOrder.CompanyCode   left join tblDepartment on tblDepartment.classCode = tblSalesOrder.DepartmentCode left join tblProject on tblSalesOrder.ProjectCode=tblProject.id  where 1=1        and (tblSalesOrder.BillDate >= '2017-11-01')                                                                                                                                                                 and (tblSalesOrder.workFlowNodeName ='finish')         
 [INFO ] 2017-11-01 22:00:42,986 Line:89 SAFE 数据库第一个备份任务启动，时间2017-11-01 00:00:00
 [INFO ] 2017-11-01 22:00:42,986 Line:144 SAFE 备份任务开始执行，时间2017-11-01 22:00:42
 [INFO ] 2017-11-01 22:00:42,986 Line:137 SAFE 碎片任务启动，时间2017-11-05 00:00:00
 [DEBUG] 2017-11-01 22:00:43,361 Line:689 通过SQL读原始数据：531
 [DEBUG] 2017-11-01 22:00:43,368 Line:1391 整理数据：7
 [DEBUG] 2017-11-01 22:00:43,494 Line:549 ReportDataMgt.getReportData SQL=select      tblBuyOrder.BillDate as BillDate,     tblBuyOrder.BillNo as BillNo,     tblProject.ProjectName as ProjectName,     tblGoods.classCode as GoodsCode,     tblCompany.ComNumber as ComNumber,     tblCompany.ComFullName as ComFullName,     tblBuyOrder.TradeType as TradeType,     tblBuyOrder.InvoiceType as InvoiceType,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee.EmpFullName as EmpFullName,     tblEmployee.EmpNumber as EmpNumber,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblBuyOrderDet.BatchNo as BatchNo,     tblBuyOrderDet.Inch as Inch,     tblBuyOrderDet.Hue as Hue,     tblBuyOrderDet.yearNO as yearNO,     tblBuyOrderDet.ProDate as ProDate,     tblBuyOrderDet.Availably as Availably,     tblBuyOrderDet.ArriveDate as ArriveDate,     tblBuyOrderDet.Qty as Qty,     tblBuyOrderDet.Price as Price,     tblBuyOrderDet.Amount as Amount,     tblBuyOrderDet.SecUnit as SecName,     tblBuyOrderDet.UnitIntQty as UnitIntQty,     tblBuyOrderDet.UnitBaseQty as UnitBaseQty,     tblBuyOrderDet.UnitQty as UnitQty,     tblBuyOrderDet.UnitPrice as UnitPrice,     tblCurrency.CurrencyName as CurrencyName,     tblBuyOrder.CurrencyRate as CurrencyRate,     tblBuyOrderDet.CurPrice as CurPrice,     tblBuyOrderDet.CurAmount as CurAmount,     tblBuyOrderDet.Discount as Discount,     tblBuyOrderDet.DisPrice as DisPrice,     tblBuyOrderDet.DisBackAmt as DisBackAmt,     tblBuyOrderDet.DisAmount as DisAmount,     tblBuyOrder.Tax as Tax,     tblBuyOrderDet.TaxPrice as TaxPrice,     tblBuyOrderDet.TaxAmount as TaxAmount,     tblBuyOrderDet.CoTaxAmt as CoTaxAmt,     tblBuyOrderDet.InQty as InQty,     tblBuyOrderDet.BackQty as BackQty,     case when isnull(tblBuyOrderDet.NotInQty,0)<=0 or tblBuyOrder.statusId!=0 then 0 else isnull(tblBuyOrderDet.NotInQty,0) end as NotInQty,     tblBuyOrder.id as id,     tblBuyOrderDet.PresentSampleType as PresentSampleType,     tblBuyOrderDet.FinishStatus as FinishStatus,     tblBuyOrder.Remark as Remark,     tblBuyOrderDet.Remark as DetRemark,     tblGoods.Validity as Validity,     case when isnull(tblBuyOrderDet.NotInQty,0)<0 then (-1)*isnull(tblBuyOrderDet.NotInQty,0) else 0 end as OverInQty,     tblGoods.classCode as GoodsCodeA,     tblBuyOrder.CompanyCode as CompanyCodeA,     tblGoods.classCode+'#;#0#;##;#' as hideCode,     tblBuyOrderDet.BuyAskPriceID as BuyAskPriceID,     tblBuyOrderDet.BuyAppTotalID as BuyAppTotalID,     tblBuyOrder.workFlowNodeName as workFlowNodeName,     tblBuyApplication.BillNo as AppNo from tblBuyOrder left join tblBuyOrderDet on tblBuyOrderDet.f_ref=tblBuyOrder.id left join tblCompany on tblCompany.classCode=tblBuyOrder.CompanyCode left join tblDepartment on tblDepartment.classCode=tblBuyOrder.DepartmentCode left join tblEmployee on tblEmployee.id=tblBuyOrder.EmployeeID left join tblStock on tblStock.classCode=tblBuyOrderDet.StockCode left join tblGoods on tblGoods.classCode=tblBuyOrderDet.GoodsCode left join tblCurrency on tblCurrency.id=tblBuyOrder.Currency left join tblProject on tblBuyOrder.ProjectCode=tblProject.id left join tblBuyApplication on tblBuyApplication.id=tblBuyOrder.BuyApplyID  where 1=1        and (tblBuyOrder.BillDate >= '2017-11-01')                                                                                                                                                                               and (NotInQty>0 and DATEDIFF(DAY,CONVERT(varchar(20),getDate(),23),ArriveDate)+1<=?)                            and (tblBuyOrder.workFlowNodeName ='finish')         
 [DEBUG] 2017-11-01 22:00:43,494 Line:582 ReportDataMgt.getReportData 参数1:2
 [ERROR] 2017-11-01 22:00:43,557 Line:1394 ReportDataMgt.getReportData() Error:
 com.microsoft.sqlserver.jdbc.SQLServerException: 列名 'ArriveDate' 不明确。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:283)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
	at com.menyi.aio.web.report.ReportDataMgt$12$1.execute(ReportDataMgt.java:584)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.web.report.ReportDataMgt$12.exec(ReportDataMgt.java:553)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:364)
	at com.menyi.aio.web.report.ReportDataMgt.getReportData(ReportDataMgt.java:551)
	at com.menyi.aio.web.alert.AlertCenterMgt.showData(AlertCenterMgt.java:933)
	at com.menyi.aio.web.alert.AlertCenterMgt.queryAlertTotals(AlertCenterMgt.java:177)
	at com.menyi.web.util.TimingMsgThread.run(TimingMsgThread.java:44)
[DEBUG] 2017-11-01 22:01:12,214 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-11-01 22:01:12,218 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-11-01 22:01:12,220 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-11-01 22:01:14,366 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-11-01 22:01:14,367 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-11-01 22:01:14,368 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-11-01 22:01:14,546 Line:5227 GlobalsTool.js 生成js 时间593:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:01:14,655 Line:5227 GlobalsTool.js 生成js 时间208:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:01:14,893 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-11-01 22:01:14,895 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-11-01 22:01:15,651 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1509544875631
 [DEBUG] 2017-11-01 22:01:15,710 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1509544875631,];
 [DEBUG] 2017-11-01 22:01:16,294 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-11-01 22:01:16,295 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-11-01 22:01:34,406 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-11-01 22:01:34,407 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-11-01 22:01:34,626 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-11-01 22:01:34,627 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-11-01 22:01:37,644 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1509544897642
 [DEBUG] 2017-11-01 22:01:37,645 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1509544897642,];
 [DEBUG] 2017-11-01 22:01:39,023 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1509544899022
 [DEBUG] 2017-11-01 22:01:39,023 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1509544899022,];
 [DEBUG] 2017-11-01 22:01:39,296 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1509544899294
 [DEBUG] 2017-11-01 22:01:39,296 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1509544899294,];
 [DEBUG] 2017-11-01 22:01:39,562 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-11-01 22:01:39,563 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1366,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[c4ca4238a0b923820dcc509a6f75849b,];
 [DEBUG] 2017-11-01 22:01:41,329 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-11-01 22:01:46,606 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1509544906605
 [DEBUG] 2017-11-01 22:01:46,606 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1509544906605,];
 [DEBUG] 2017-11-01 22:01:46,615 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1509544906614
 [DEBUG] 2017-11-01 22:01:46,616 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1509544906614,];
 [DEBUG] 2017-11-01 22:01:46,632 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-11-01 22:01:46,633 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1366,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[b59c67bf196a4758191e42f76670ceba,];
 [DEBUG] 2017-11-01 22:01:47,061 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-11-01 22:01:47,217 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-11-01 22:01:47,621 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-11-01 22:01:47,622 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-11-01 22:01:47,734 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-11-01 22:01:48,844 Line:5227 GlobalsTool.js 生成js 时间335:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:01:49,969 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-11-01 22:01:49,970 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-11-01 22:01:49,970 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-11-01 22:01:49,970 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-11-01 22:01:49,973 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-11-01 22:01:50,061 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-11-01 22:01:50,062 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-11-01 22:01:50,063 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-11-01 22:01:50,108 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-11-01 22:01:50,109 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-11-01 22:01:50,110 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-11-01 22:01:50,161 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-11-01 22:01:50,162 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-11-01 22:01:50,163 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [ERROR] 2017-11-01 22:01:51,818 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:01:56,026 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:02:17,074 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-11-01 22:02:17,075 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:02:17,076 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-11-01 22:02:18,080 Line:5227 GlobalsTool.js 生成js 时间177:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:02:18,330 Line:5227 GlobalsTool.js 生成js 时间249:/js/gen/defineList.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-11-01 22:02:20,574 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-11-01 22:02:20,574 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-11-01 22:02:21,948 Line:5227 GlobalsTool.js 生成js 时间96:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:02:23,252 Line:5227 GlobalsTool.js 生成js 时间1303:/js/gen/define.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-11-01 22:02:40,207 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyOrder&src=menu&winCurIndex=2
 [DEBUG] 2017-11-01 22:02:40,208 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyOrder,];src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-11-01 22:02:40,208 Line:215 ---------->SET Page 2 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyOrder
 [DEBUG] 2017-11-01 22:02:40,518 Line:5227 GlobalsTool.js 生成js 时间169:/js/gen/defineList.vjstblBuyOrder_zh_CN.js
 [DEBUG] 2017-11-01 22:02:42,122 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyOrder&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=2&popWinName=PopMainOpdiv
 [DEBUG] 2017-11-01 22:02:42,123 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyOrder,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[2,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-11-01 22:02:42,798 Line:5227 GlobalsTool.js 生成js 时间406:/js/gen/define.vjstblBuyOrder_zh_CN.js
 [DEBUG] 2017-11-01 22:02:45,160 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyOrder&fieldName=CompanyCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=83e8760a_0811132128219840114&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-11-01 22:02:45,161 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyOrder,];fieldName=[CompanyCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[83e8760a_0811132128219840114,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-11-01 22:02:45,424 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyOrder&fieldName=CompanyCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=83e8760a_0811132128219840114&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-11-01 22:02:45,424 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=83e8760a_0811132128219840114&editable=&subSql=
 [DEBUG] 2017-11-01 22:02:45,425 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyOrder,];fieldName=[CompanyCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[83e8760a_0811132128219840114,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-11-01 22:02:45,425 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[83e8760a_0811132128219840114,];editable=[,];subSql=[,];
 [DEBUG] 2017-11-01 22:02:45,428 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,'',id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComFullName
 [DEBUG] 2017-11-01 22:02:45,473 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,tblCompany.InVoiceType f2 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f3 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f4 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '总经办' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f6 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f7 ,tblCompany.taxRate f8 ,tblCompany.Currency f9 ,tblSetExchange.RecordExchange f10 ,tblSetExchange.CurrencyName f11 ,tblCompany.ComNumber f12 ,tblCompany.ComFullName f13 ,tblCompany.ComFullNamePYM f14 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
      left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
      left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      left join tblSetExchange on tblSetExchange.Currency=tblCompany.Currency
      where 1=1 and (ISNULL(tblSetExchange.id,'')='' or tblSetExchange.id in (select Top 1 id from tblSetExchange a where a.Currency=tblSetExchange.Currency order by a.PeriodYear desc,a.Period desc))  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1') and tblCompany.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:02:46,032 Line:5227 GlobalsTool.js 生成js 时间145:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:02:46,186 Line:5227 GlobalsTool.js 生成js 时间153:/js/gen/popupPage.vjs_zh_CN.js
 [INFO ] 2017-11-01 22:02:48,217 Line:148 SAFE 备份任务执行成功，时间2017-11-01 22:02:48
 [DEBUG] 2017-11-01 22:02:56,801 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=3
 [DEBUG] 2017-11-01 22:02:56,801 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[3,];
 [DEBUG] 2017-11-01 22:02:56,802 Line:215 ---------->SET Page 3 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-11-01 22:02:57,736 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-11-01 22:02:57,737 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-11-01 22:02:59,022 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=4
 [DEBUG] 2017-11-01 22:02:59,023 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[4,];
 [DEBUG] 2017-11-01 22:02:59,023 Line:215 ---------->SET Page 4 DEFAULT URL = /CustomQueryAction.do
 [ERROR] 2017-11-01 22:03:00,603 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:03:02,707 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:03:23,669 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2017-11-01 22:03:23,670 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[4,];search=[采购入库,];
 [DEBUG] 2017-11-01 22:03:27,706 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblBuyInStock&search=%E9%87%87%E8%B4%AD%E5%85%A5%E5%BA%93&popWinName=TablemgtDiv
 [DEBUG] 2017-11-01 22:03:27,706 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblBuyInStock,];search=[é??è????????,];popWinName=[TablemgtDiv,];
 [DEBUG] 2017-11-01 22:03:29,072 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=Yes
 [DEBUG] 2017-11-01 22:03:29,072 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=InvoiceType
 [DEBUG] 2017-11-01 22:03:29,072 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=
 [DEBUG] 2017-11-01 22:03:29,072 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=
 [DEBUG] 2017-11-01 22:03:29,073 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[,];
 [DEBUG] 2017-11-01 22:03:29,072 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[InvoiceType,];
 [DEBUG] 2017-11-01 22:03:29,072 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[Yes,];
 [DEBUG] 2017-11-01 22:03:29,073 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[,];
 [DEBUG] 2017-11-01 22:03:31,814 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:03:31,814 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:03:31,891 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:03:31,899 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:03:38,691 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineOp
 [DEBUG] 2017-11-01 22:03:38,691 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineOp,];
 [DEBUG] 2017-11-01 22:03:50,414 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineFile&id=tblBuyInStock_Add
 [DEBUG] 2017-11-01 22:03:50,414 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineFile,];id=[tblBuyInStock_Add,];
 [DEBUG] 2017-11-01 22:03:50,565 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=getDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D0973457B8B57A88C072DF8AD219FA989EC390
 [DEBUG] 2017-11-01 22:03:50,571 Line:1653 ReportServlet 读define文件:C:\koron\HFtomcat\tomcat7\bin\..\..\user_config\defineBuyInStock.xml
 [ERROR] 2017-11-01 22:04:04,734 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:04:05,728 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:05:07,923 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:05:09,135 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:05:43,749 Line:549 ReportDataMgt.getReportData SQL=select      tblSalesOrder.BillDate as startDate,     tblSalesOrder.BillDate as endDate,     tblSalesOrder.BillNo as BillNo,     tblSalesOrder.BillDate as BillDate,     tblProject.ProjectName as ProjectName,     tblGoods.classCode as GoodsCode,     tblCompany.ComNumber as ComNumber,     tblCompany.ComFullName as ComFullName,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee.EmpFullName as EmpFullName,     tblEmployee2.EmpFullName as createBy,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblSalesOrderDet.BatchNo as BatchNo,     tblSalesOrderDet.Inch as Inch,     tblSalesOrderDet.Hue as Hue,     tblSalesOrderDet.yearNO as yearNO,     tblSalesOrderDet.ProDate as ProDate,     tblSalesOrderDet.Availably as Availably,     tblSalesOrderDet.SendDate as SendDate,     tblSalesOrderDet.Qty as Qty,     tblSalesOrderDet.Price as Price,     tblSalesOrderDet.Amount as Amount,     (select Top 1 lastPrice from tblStocks a where a.GoodsCode=tblSalesOrderDet.GoodsCode and tblSalesOrderDet.PresentSampleType!=0) as lastPrice,     tblSalesOrderDet.Qty*(select Top 1 lastPrice from tblStocks a where a.GoodsCode=tblSalesOrderDet.GoodsCode and tblSalesOrderDet.PresentSampleType!=0) as lastAmount,     tblSalesOrderDet.SalesGoodsType as SalesGoodsType,     tblSalesOrderDet.SecUnit as SecName,     tblSalesOrderDet.UnitIntQty as SecUnitQty,     tblSalesOrderDet.UnitBaseQty as SecBaseQty,     tblSalesOrderDet.UnitQty as UnitQty,     tblSalesOrderDet.UnitPrice as UnitPrice,     tblSalesOrderDet.Discount as Discount,     tblSalesOrderDet.DisPrice as DisPrice,     tblSalesOrderDet.DisBackAmt as DisBackAmt,     tblSalesOrderDet.DisAmount as DisAmount,     tblSalesOrder.Tax as Tax,     tblSalesOrderDet.TaxPrice as TaxPrice,     tblSalesOrderDet.TaxAmount as TaxAmount,     tblSalesOrderDet.CoTaxAmt as CoTaxAmt,     tblCurrency.CurrencyName as CurrencyName,     tblSalesOrder.CurrencyRate as CurrencyRate,     tblSalesOrderDet.CurPrice as CurPrice,     tblSalesOrderDet.CurAmount as CurAmount,     tblSalesOrderDet.AccountingPrice as AccountingPrice,     tblSalesOrder.hasBuyOrder as hasBuyOrder,     tblSalesOrderDet.MRPQty as MRPQty,     tblSalesOrderDet.WorkOrderQty as WorkOrderQty,     (select sum(isnull(k.InQty,0)) from tblBuyOrderDet k where k.SourceID=tblSalesOrderDet.id) as inQty,     tblSalesOrderDet.OutQty as OutQty,     case when tblSalesOrderDet.NotOutQty <=0 or tblSalesOrder.statusId!=0 then 0 else tblSalesOrderDet.NotOutQty end as NotOutQty,     tblSalesOrderDet.BackQty as BackQty,     tblSalesOrder.id as id,     tblSalesOrderDet.SCompanyID as SCompanyID,     tblSalesOrderDet.FinishStatus as FinishStatus,     tblSalesOrderDet.PresentSampleType as PresentSampleType,     tblSalesOrder.Remark as Remark,     tblSalesOrderDet.Remark as ReRemark,     case when (tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) <0 then (-1)*(tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) else 0 end as OverOutQty,     viewcompanytotal.ComFullName as ComFullName1,     tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice as profitPrice,     tblSalesOrderDet.Qty*(tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice) as profitAmt,     tblGoods.classCode+'#;#0#;##;#' as hideCode,     tblSalesOrder.workFlowNodeName as workFlowNodeName,     tblSalesOrder.OldGiftId as OldGiftId from tblSalesOrderDet    left join tblGoods on tblGoods.ClassCode=tblSalesOrderDet.GoodsCode   left join viewcompanytotal on tblGoods.CompanyCode=viewcompanytotal.classCode   left join tblSalesOrder on tblSalesOrderDet.f_ref=tblSalesOrder.id   left join tblStock on tblStock.classCode=tblSalesOrderDet.StockCode   left join tblCurrency on tblCurrency.id=tblSalesOrder.Currency   left join tblEmployee on tblEmployee.id = tblSalesOrder.EmployeeID   left join tblEmployee as tblEmployee2 on tblEmployee2.id = tblSalesOrder.createBy   left join tblCompany on tblCompany.classCode = tblSalesOrder.CompanyCode   left join tblDepartment on tblDepartment.classCode = tblSalesOrder.DepartmentCode left join tblProject on tblSalesOrder.ProjectCode=tblProject.id  where 1=1        and (tblSalesOrder.BillDate >= '2017-11-01')                                                                                                                                                                 and (tblSalesOrder.workFlowNodeName ='finish')         
 [DEBUG] 2017-11-01 22:05:44,133 Line:689 通过SQL读原始数据：380
 [DEBUG] 2017-11-01 22:05:44,133 Line:1391 整理数据：0
 [ERROR] 2017-11-01 22:06:11,303 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:06:12,295 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:07:14,440 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:07:15,395 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:08:10,339 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=5
 [DEBUG] 2017-11-01 22:08:10,340 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[5,];
 [DEBUG] 2017-11-01 22:08:10,340 Line:215 ---------->SET Page 5 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2017-11-01 22:08:15,918 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2017-11-01 22:08:15,919 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[5,];search=[tblStocks,];Submit=[,];
 [ERROR] 2017-11-01 22:08:17,530 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:08:18,548 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:08:18,564 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblStocks&search=tblStocks&popWinName=TablemgtDiv
 [DEBUG] 2017-11-01 22:08:18,564 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblStocks,];search=[tblStocks,];popWinName=[TablemgtDiv,];
 [DEBUG] 2017-11-01 22:08:18,805 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=
 [DEBUG] 2017-11-01 22:08:18,806 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[,];
 [DEBUG] 2017-11-01 22:08:20,228 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:08:54,779 Line:135 BaseAction.execute 请求地址：/CustomAction.do?OAWorkFlowId=$designId
 [DEBUG] 2017-11-01 22:08:54,804 Line:146 BaseAction.execute 操作人:admin;请求数据：OAWorkFlowId=[$designId,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[,];popWinName=[TablemgtDiv,];tableId=[74,];tableType=[0,];isSunCmpShare=[0,];needsCopy=[0,];hasNext=[0,];relationTable=[,];classCount=[6,];tableName=[tblStocks,];oldtableName=[tblStocks,];tableDisplay=[en:;zh_CN:分仓库存表;,];tableDisplayDis=[分仓库存表,];MainModule=[1,];sysParameter=[CurrentAccBefBill,];tableSysType=[Normal,];tWidth=[0,];tHeight=[0,];isUsed=[1,];isBaseInfo=[1,];triggerExpress=[1,];fieldCalculate=[,];extendButton=[,];tableDesc=[,];PopDisSentence=[,];fieldId=[983,76dc3c91_1109051448520200007,988,2ad12328_1103180933162770124,2ad12328_1103180933162760125,329482b8_0902211000355780018,329482b8_0902211000355780020,53f0ee78_1601241344542310248,53f0ee78_1601241344542310251,53f0ee78_1601241344542310254,5440ff65_1601251430068060209,329482b8_0902211000355780022,28aee0d1_1302455273370049,28aee0d1_1302191046273370051,daa1f717_0906161515138900003,28aee0d1_130234446273370051,1ebc33ca_0907181429090620034,28aee0d1_1302191046273370049,f0fced35_1006051135310620003,b6d15cac_0907011346113750001,8cdb2f19_1511182314498079155,,,];languageId=[1f9f043f_0909171103356090055,76dc3c91_1109051448520400013,1f9f043f_0909171103356090062,2ad12328_1103180933162770126,2ad12328_1103180933162770127,1f9f043f_0909171103356090064,1f9f043f_0909171103356090065,53f0ee78_1601241344542310249,53f0ee78_1601241344542310252,53f0ee78_1601241344542310255,5440ff65_1601251430068070210,1f9f043f_0909171103356090066,28aee0d1_1302191045673370050,28aee0d1_1302191046273370052,c48075e6_0911031437306090018,28aee0d1_1302191068873370052,6cb0b5d8_0910271850478430456,28aee0d1_1302191046273370050,f0fced35_1006051135310620004,c48075e6_0911031437370310052,8cdb2f19_1511182314498079156,,,];listOrder=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,];isStat=[0,0,0,0,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,0,,];isNull=[1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];isUnique=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];digits=[0,0,0,0,0,4,4,4,4,4,4,2,4,4,0,4,0,4,0,0,0,,,];refEnumerationName=[,,,,,,,,,,,,,,,,,,,,,,,];inputValue=[:,,:,,,,,,,,,,,,,,,,:,,,,,];calculate=[,,,,,,,,,,,,,,,,,,,,,,,];fieldSysType=[,,,,GoodsField,,,,,,,,,,GoodsField,,GoodsField,,GoodsField,GoodsField,,,,];fieldIdentityStr=[,,,,,Qty,priceIdentifier,priceIdentifier,priceIdentifier,priceIdentifier,priceIdentifier,AmountIdentifier,Qty,Qty,,Qty,,Qty,,,,,,];copyType=[copy,,,,,,,,,,,,,,triggerCopy,,triggerCopy,,triggerCopy,triggerCopy,,,,];logicValidate=[,,,,,,,,,,,,,,,,,,,,,,,];popupType=[,,,,,,,,,,,,,,,,,,,,,,,];groupLanguageId=[,,,,,,,,,,,,,,,,,,,,,,,];groupName=[,,,,,,,,,,,,,,,,,,,,zh_CN:;,zh_CN:;,,];insertTable=[,,,,,,,,,,,,,,,,,,,,,,,];isCopy=[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,];isReAudit=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,,];isLog=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,,];inputTypeOld=[2,0,2,1,0,0,0,0,0,0,0,0,0,0,3,0,0,0,2,0,0,,,];isMobile=[,,,,,,,,,,,,,,,,,,,,2,2,2,];fieldName=[GoodsCode,orderQuantum,StockCode,ProDate,Availably,lastQty,lastPrice,lastPriceMaterial,lastPriceLabor,lastPriceProdCost,lastPriceOutFee,lastAmount,SInQtyNotAudit,outQtyNotAudit,BatchNo,BOutQtyNotAudit,Inch,inQtyNotAudit,Hue,yearNO,OweQty,BuyOrderDate,,];fieldDisplay=[en:;zh_CN:货品;,en:;zh_CN:订单已分配量;,en:;zh_CN:仓库;,en:;zh_CN:生产日期;,en:;zh_CN:保质期限;,en:;zh_CN:实际库存;,en:;zh_CN:期末单价;,zh_CN:材料成本;,zh_CN:直接人工;,zh_CN:制费;,zh_CN:委外加工费;,en:;zh_CN:期末金额;,en:;zh_CN:销售退货未过账;,en:;zh_CN:出库未过账;,en:;zh_CN:批号;,en:;zh_CN:采购退货未过账;,en:thickness;zh_CN:厚度;,en:;zh_CN:入库未过账;,en:;zh_CN:颜色;,en:;zh_CN:箱号;,zh_CN:欠料余量;,zh_CN:入库单日期;,,];fieldDisplayDis=[货品,订单已分配量,仓库,生产日期,保质期限,实际库存,期末单价,材料成本,直接人工,制费,委外加工费,期末金额,销售退货未过账,出库未过账,批号,采购退货未过账,厚度,入库未过账,颜色,箱号,欠料余量,入库单日期,,];fieldType=[2,2,2,5,5,1,1,1,1,1,1,1,1,1,2,1,2,1,2,2,1,5,2,];maxLength=[50,30,50,10,10,0,0,0,0,0,0,0,0,0,100,0,100,0,100,100,0,10,,];defaultValue=[,,,,,0,0,0,0,0,0,0,,,,,,,,,,,,];isNullId=[1,1,];width=[200,0,200,80,80,200,80,200,200,200,200,200,224,224,120,224,70,224,70,100,200,200,,];inputType=[2,100,2,3,3,0,0,0,0,0,0,0,0,0,3,0,3,0,3,0,3,0,0,];moreInputId=[,,---,,];zhWidth=[200,];inputTypeOldId=[,];fieldSysTypeId=[,];fieldIdentityStrId=[,];groupNameId=[,];logicValidateId=[,];copyTypeId=[,];isCopyId=[1,];
 [DEBUG] 2017-11-01 22:08:54,883 Line:1235  update tblDBTableInfo set lastUpdateTime='2017-11-01 22:08:54' where tableName='tblStocks'
 [DEBUG] 2017-11-01 22:08:54,890 Line:1235 ALTER TABLE tblStocks ADD  BuyOrderDate varchar(10) null 
 [DEBUG] 2017-11-01 22:08:54,900 Line:1235 insert into tblDBFieldInfo(tableId,id,fieldName,isCopy,listOrder,isNull,isReAudit,isUnique,isStat,defaultValue,fieldType,maxLength,width,inputType,inputTypeOld,refEnumerationName,inputValue,digits,calculate,logicValidate,udType,fieldSysType,fieldIdentityStr,copyType,statusId,popupType,languageId,groupName,insertTable,isLog) values('74','97763882_1711012208548180067','BuyOrderDate','1','21','0','0','0','0','','5','10','200','0','0','','','0','','','0','','','','0','','97763882_1711012208548180068','','','0')
 [DEBUG] 2017-11-01 22:08:54,912 Line:1235 insert into tblLanguage(zh_CN,id) values('入库单日期','97763882_1711012208548180068')
 [DEBUG] 2017-11-01 22:08:54,918 Line:1235  update tblDBFieldInfo set groupName=null where tableid=(select id from tblDBTableInfo where tableName='tblStocks') and fieldName = 'lastPriceOutFee'
 [DEBUG] 2017-11-01 22:08:54,942 Line:1643 update tblInitTime set lastTime = ? where initName=?
 [DEBUG] 2017-11-01 22:08:56,848 Line:297  select * from tblDBTableInfo where tableName = 'tblStocks'
 [DEBUG] 2017-11-01 22:08:56,853 Line:370 select * from tblDBFieldInfo where tableId = (select id from tblDBTableInfo where tableName='tblStocks') order by tableId,listOrder
 [DEBUG] 2017-11-01 22:08:56,873 Line:538 ------Init TableInfo record:1
 [DEBUG] 2017-11-01 22:08:58,486 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblStocks&popWinName=TablemgtDiv&winCurIndex=
 [DEBUG] 2017-11-01 22:08:58,487 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblStocks,];popWinName=[TablemgtDiv,];winCurIndex=[,];
 [DEBUG] 2017-11-01 22:08:58,718 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=
 [DEBUG] 2017-11-01 22:08:58,719 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[,];
 [DEBUG] 2017-11-01 22:08:59,621 Line:1061 ------Init Enumeration record:518
 [ERROR] 2017-11-01 22:09:20,922 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:09:21,890 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:09:57,072 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D0973489BD41DBA84239177686458C02F7B7F6
 [ERROR] 2017-11-01 22:09:57,117 Line:119 ------保存成功
 [ERROR] 2017-11-01 22:10:23,770 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:10:24,726 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:10:44,211 Line:549 ReportDataMgt.getReportData SQL=select      tblSalesOrder.BillDate as startDate,     tblSalesOrder.BillDate as endDate,     tblSalesOrder.BillNo as BillNo,     tblSalesOrder.BillDate as BillDate,     tblProject.ProjectName as ProjectName,     tblGoods.classCode as GoodsCode,     tblCompany.ComNumber as ComNumber,     tblCompany.ComFullName as ComFullName,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee.EmpFullName as EmpFullName,     tblEmployee2.EmpFullName as createBy,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblSalesOrderDet.BatchNo as BatchNo,     tblSalesOrderDet.Inch as Inch,     tblSalesOrderDet.Hue as Hue,     tblSalesOrderDet.yearNO as yearNO,     tblSalesOrderDet.ProDate as ProDate,     tblSalesOrderDet.Availably as Availably,     tblSalesOrderDet.SendDate as SendDate,     tblSalesOrderDet.Qty as Qty,     tblSalesOrderDet.Price as Price,     tblSalesOrderDet.Amount as Amount,     (select Top 1 lastPrice from tblStocks a where a.GoodsCode=tblSalesOrderDet.GoodsCode and tblSalesOrderDet.PresentSampleType!=0) as lastPrice,     tblSalesOrderDet.Qty*(select Top 1 lastPrice from tblStocks a where a.GoodsCode=tblSalesOrderDet.GoodsCode and tblSalesOrderDet.PresentSampleType!=0) as lastAmount,     tblSalesOrderDet.SalesGoodsType as SalesGoodsType,     tblSalesOrderDet.SecUnit as SecName,     tblSalesOrderDet.UnitIntQty as SecUnitQty,     tblSalesOrderDet.UnitBaseQty as SecBaseQty,     tblSalesOrderDet.UnitQty as UnitQty,     tblSalesOrderDet.UnitPrice as UnitPrice,     tblSalesOrderDet.Discount as Discount,     tblSalesOrderDet.DisPrice as DisPrice,     tblSalesOrderDet.DisBackAmt as DisBackAmt,     tblSalesOrderDet.DisAmount as DisAmount,     tblSalesOrder.Tax as Tax,     tblSalesOrderDet.TaxPrice as TaxPrice,     tblSalesOrderDet.TaxAmount as TaxAmount,     tblSalesOrderDet.CoTaxAmt as CoTaxAmt,     tblCurrency.CurrencyName as CurrencyName,     tblSalesOrder.CurrencyRate as CurrencyRate,     tblSalesOrderDet.CurPrice as CurPrice,     tblSalesOrderDet.CurAmount as CurAmount,     tblSalesOrderDet.AccountingPrice as AccountingPrice,     tblSalesOrder.hasBuyOrder as hasBuyOrder,     tblSalesOrderDet.MRPQty as MRPQty,     tblSalesOrderDet.WorkOrderQty as WorkOrderQty,     (select sum(isnull(k.InQty,0)) from tblBuyOrderDet k where k.SourceID=tblSalesOrderDet.id) as inQty,     tblSalesOrderDet.OutQty as OutQty,     case when tblSalesOrderDet.NotOutQty <=0 or tblSalesOrder.statusId!=0 then 0 else tblSalesOrderDet.NotOutQty end as NotOutQty,     tblSalesOrderDet.BackQty as BackQty,     tblSalesOrder.id as id,     tblSalesOrderDet.SCompanyID as SCompanyID,     tblSalesOrderDet.FinishStatus as FinishStatus,     tblSalesOrderDet.PresentSampleType as PresentSampleType,     tblSalesOrder.Remark as Remark,     tblSalesOrderDet.Remark as ReRemark,     case when (tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) <0 then (-1)*(tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) else 0 end as OverOutQty,     viewcompanytotal.ComFullName as ComFullName1,     tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice as profitPrice,     tblSalesOrderDet.Qty*(tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice) as profitAmt,     tblGoods.classCode+'#;#0#;##;#' as hideCode,     tblSalesOrder.workFlowNodeName as workFlowNodeName,     tblSalesOrder.OldGiftId as OldGiftId from tblSalesOrderDet    left join tblGoods on tblGoods.ClassCode=tblSalesOrderDet.GoodsCode   left join viewcompanytotal on tblGoods.CompanyCode=viewcompanytotal.classCode   left join tblSalesOrder on tblSalesOrderDet.f_ref=tblSalesOrder.id   left join tblStock on tblStock.classCode=tblSalesOrderDet.StockCode   left join tblCurrency on tblCurrency.id=tblSalesOrder.Currency   left join tblEmployee on tblEmployee.id = tblSalesOrder.EmployeeID   left join tblEmployee as tblEmployee2 on tblEmployee2.id = tblSalesOrder.createBy   left join tblCompany on tblCompany.classCode = tblSalesOrder.CompanyCode   left join tblDepartment on tblDepartment.classCode = tblSalesOrder.DepartmentCode left join tblProject on tblSalesOrder.ProjectCode=tblProject.id  where 1=1        and (tblSalesOrder.BillDate >= '2017-11-01')                                                                                                                                                                 and (tblSalesOrder.workFlowNodeName ='finish')         
 [DEBUG] 2017-11-01 22:10:44,549 Line:689 通过SQL读原始数据：338
 [DEBUG] 2017-11-01 22:10:44,550 Line:1391 整理数据：1
 [ERROR] 2017-11-01 22:11:26,700 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:11:27,578 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:11:50,334 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=BuyOrderID&operation=22&BillDate=2017-11-01&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-11-01 22:11:50,335 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[BuyOrderID,];operation=[22,];BillDate=[2017-11-01,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-11-01 22:11:50,355 Line:3434 DynDBManager.popSelect selectName=SelectBuyOrderID; sql=select *  from (select tblBuyOrder.id f1 ,tblCompany.classCode f2 ,tblCompany.InVoiceType f3 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f4 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-11-01'),121) f5 ,tblCompany.taxRate f6 ,tblCompany.Currency f7 ,tblSetExchange.RecordExchange f8 ,tblSetExchange.CurrencyName f9 ,tblBuyOrder.ConsumeTax f10 ,tblBuyOrder.BillNo f11 ,tblBuyOrder.BillDate f12 ,tblCompany.ComNumber f13 ,tblCompany.ComFullName f14 ,tblCompany.ComFullNamePYM f15 ,tblDepartment.DeptFullName f16 ,tblEmployee.EmpFullName f17 
,ROW_NUMBER() over( order by tblBuyOrder.BillDate,tblBuyOrder.BillNo) as row_id from tblBuyOrder
				join tblEmployee on tblEmployee.id=tblBuyOrder.EmployeeID
				join tblDepartment on tblDepartment.classCode=tblBuyOrder.DepartmentCode
				 join tblCompany as tblCompany on tblCompany.classCode=tblBuyOrder.CompanyCode
                                left join tblSetExchange on tblSetExchange.Currency=tblBuyOrder.Currency
      where 1=1 and (ISNULL(tblSetExchange.id,'')='' or tblSetExchange.id in (select Top 1 id from tblSetExchange a where a.Currency=tblSetExchange.Currency order by a.PeriodYear desc,a.Period desc))  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)  and tblBuyOrder.workFlowNodeName = 'finish' and tblBuyOrder.statusId = 0 and  tblBuyOrder.BillDate<='2017-11-01') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:11:53,968 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=660105&tableName=tblBuyInStock&fieldName=freightAcc&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-11-01 22:11:53,969 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[660105,];tableName=[tblBuyInStock,];fieldName=[freightAcc,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-11-01 22:11:54,043 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblAccTypeInfo&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-11-01 22:11:54,044 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblAccTypeInfo,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-11-01 22:11:54,044 Line:229 TreeMgt.getTree sql=select classCode,zh_CN,AccNumber,tblAccTypeInfo.id from tblAccTypeInfo  join tblLanguage b  on tblAccTypeInfo.AccName=b.id where statusId =0  and isCatalog=1  order by AccNumber
 [DEBUG] 2017-11-01 22:11:54,045 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=660105&tableName=tblBuyInStock&fieldName=freightAcc&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-11-01 22:11:54,046 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[660105,];tableName=[tblBuyInStock,];fieldName=[freightAcc,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-11-01 22:11:54,052 Line:3434 DynDBManager.popSelect selectName=freightAcc; sql=select * from (select tblAccTypeInfo.AccNumber f1 ,tblAccTypeInfo.AccName f2 ,tblAccTypeInfo.AccFullName f3 ,tblAccTypeInfo.PyCode f4 ,tblAccTypeInfo.classCode f5
,tblAccTypeInfo.isCatalog as childCount,ROW_NUMBER() over( order by tblAccTypeInfo.AccNumber) as row_id from tblAccTypeInfo where 1=1 and tblAccTypeInfo.statusId!='-1' and isnull(tblAccTypeInfo.isCalculate,'')!='1' and tblAccTypeInfo.AccNumber not like '1122%' and tblAccTypeInfo.AccNumber not like '2203%' and tblAccTypeInfo.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:11:55,920 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:11:55,921 Line:146 BaseAction.execute 操作人:admin;请求数据：root=[,];isRoot=[,];operation=[22,];tableName=[tblBuyInStock,];parentTableName=[,];fieldName=[freightAcc,];popDataType=[,];parentCode=[00001,];selectName=[freightAcc,];popupType=[,];displayName=[,];reportNumber=[,];reportName=[,];backType=[,];isQuote=[,];MOID=[41,];MOOP=[add,];iniPropField=[,];keyIdType=[saveType,];queryChannel=[,];strAction=[/UserFunctionAction.do?keyId=660105&tableName=tblBuyInStock&fieldName=freightAcc&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y,];nextClass=[next,];popPop=[,];noOp=[,];popupWin=[MainPopup,];isMain=[true,];topId=[,];toDetail=[,];checkTab=[Y,];queryField=[,];keySearch=[,];tblAccTypeInfo.AccNumber=[,];tblAccTypeInfo.AccName=[,];tblAccTypeInfo.AccFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:11:55,926 Line:3434 DynDBManager.popSelect selectName=freightAcc; sql=select * from (select tblAccTypeInfo.AccNumber f1 ,tblAccTypeInfo.AccName f2 ,tblAccTypeInfo.AccFullName f3 ,tblAccTypeInfo.PyCode f4 ,tblAccTypeInfo.classCode f5
,tblAccTypeInfo.isCatalog as childCount,ROW_NUMBER() over( order by tblAccTypeInfo.AccNumber) as row_id from tblAccTypeInfo where 1=1 and tblAccTypeInfo.statusId!='-1' and isnull(tblAccTypeInfo.isCalculate,'')!='1' and tblAccTypeInfo.AccNumber not like '1122%' and tblAccTypeInfo.AccNumber not like '2203%' and tblAccTypeInfo.classCode like '00001_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:11:57,290 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:11:57,291 Line:146 BaseAction.execute 操作人:admin;请求数据：root=[,];isRoot=[,];operation=[22,];tableName=[tblBuyInStock,];parentTableName=[,];fieldName=[freightAcc,];popDataType=[,];parentCode=[0000100001,];selectName=[freightAcc,];popupType=[,];displayName=[,];reportNumber=[,];reportName=[,];backType=[,];isQuote=[,];MOID=[41,];MOOP=[add,];iniPropField=[,];keyIdType=[saveType,];queryChannel=[,];strAction=[/UserFunctionAction.do?keyId=660105&tableName=tblBuyInStock&fieldName=freightAcc&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y,];nextClass=[next,];popPop=[,];noOp=[,];popupWin=[MainPopup,];isMain=[true,];topId=[,];toDetail=[,];checkTab=[Y,];queryField=[,];keySearch=[,];tblAccTypeInfo.AccNumber=[,];tblAccTypeInfo.AccName=[,];tblAccTypeInfo.AccFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:11:57,297 Line:3434 DynDBManager.popSelect selectName=freightAcc; sql=select * from (select tblAccTypeInfo.AccNumber f1 ,tblAccTypeInfo.AccName f2 ,tblAccTypeInfo.AccFullName f3 ,tblAccTypeInfo.PyCode f4 ,tblAccTypeInfo.classCode f5
,tblAccTypeInfo.isCatalog as childCount,ROW_NUMBER() over( order by tblAccTypeInfo.AccNumber) as row_id from tblAccTypeInfo where 1=1 and tblAccTypeInfo.statusId!='-1' and isnull(tblAccTypeInfo.isCalculate,'')!='1' and tblAccTypeInfo.AccNumber not like '1122%' and tblAccTypeInfo.AccNumber not like '2203%' and tblAccTypeInfo.classCode like '0000100001_____') a where  row_id between 1 and 100 order by row_id 
 [ERROR] 2017-11-01 22:12:29,471 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:12:30,443 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:12:47,697 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&InVoiceType=2&CompanyCode=0002T00007&BillDate=2017-11-01&BuyOrderID=1C49F0E0B36843A180381880D032BE&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-11-01 22:12:47,698 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];InVoiceType=[2,];CompanyCode=[0002T00007,];BillDate=[2017-11-01,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-11-01 22:12:47,712 Line:3434 DynDBManager.popSelect selectName=SelectBuyOrderGoods; sql=select *  from (select tblStock.StockNumber f1 ,tblStock.StockName f2 ,tblBuyOrderDet.BatchNo f3 ,tblBuyOrderDet.yearNO f4 ,tblBuyOrderDet.NotInQty f5 ,tblBuyOrderDet.NotInQty f6 ,tblBuyOrderDet.CurPrice f7 ,tblBuyOrder.id f8 ,tblBuyOrderDet.id f9 ,tblGoods.classCode f10 ,tblBuyOrderDet.SecQty f11 ,tblBuyOrderDet.BaseQty f12 ,tblBuyOrderDet.PresentSampleType f13 ,tblGoods.StockCode f14 ,tblStock.StockNumber f15 ,tblStock.StockFullName f16 ,tblStock.StockName f17 ,tblBuyOrder.BillDate f18 ,tblBuyOrder.BillNo f19 ,tblGoods.GoodsNumber f20 ,tblGoods.GoodsFullName f21 ,tblGoods.GoodsSpec f22 ,tblGoods.BaseUnit f23 ,tblGoods.BarCode f24 ,tblGoods.GoodsFullNamePYM f25 ,tblProject.ProjectName f26 
,ROW_NUMBER() over( order by tblBuyOrder.BillDate,tblBuyOrder.BillNo,tblGoods.GoodsNumber) as row_id from tblBuyOrderDet join tblBuyOrder on tblBuyOrderDet.f_ref=tblBuyOrder.id
	 join tblGoods on tblBuyOrderDet.goodsCode=tblGoods.classCode
	 left join tblProject on tblBuyOrder.ProjectCode=tblProject.id
         left join tblStock on tblGoods.StockCode=tblStock.classCode
      where 1=1  and (tblBuyOrder.InvoiceType='2' and tblBuyOrder.CompanyCode='0002T00007' and tblBuyOrder.BillDate<='2017-11-01' and tblBuyOrder.workFlowNodeName = 'finish')   and (tblGoods.statusid!='-1' and tblBuyOrder.statusId = 0 and tblBuyOrderDet.finishStatus=0 and tblBuyOrder.id='1C49F0E0B36843A180381880D032BE')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:12:49,365 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=validateGoodsSeq&validateField=tblBuyInStockDet_GoodsCode&tblBuyInStockDet_GoodsCode=00003000050002C&time=1509545569363
 [DEBUG] 2017-11-01 22:12:49,365 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[validateGoodsSeq,];validateField=[tblBuyInStockDet_GoodsCode,];tblBuyInStockDet_GoodsCode=[00003000050002C,];time=[1509545569363,];
 [DEBUG] 2017-11-01 22:12:49,874 Line:921 自定义执行的语句显示： tblBuyInStockDet_GoodsSeqSet :select seqIsUsed as isUsed from tblGoods where classCode=?
 [DEBUG] 2017-11-01 22:12:49,874 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:49,875 Line:988 1值：00003000050002C
 [DEBUG] 2017-11-01 22:12:49,878 Line:1025 query condition columnName:isUsed----value:1
 [DEBUG] 2017-11-01 22:12:49,878 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:12:49,878 Line:313 exeCondition:tblBuyInStockDet_GoodsSeqSet :1 == 0
 [DEBUG] 2017-11-01 22:12:50,214 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:51,639 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=StockCode&operation=22&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-11-01 22:12:51,639 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[StockCode,];operation=[22,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-11-01 22:12:51,726 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStockMain&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-11-01 22:12:51,727 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStockMain,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-11-01 22:12:51,728 Line:229 TreeMgt.getTree sql= select classCode,StockName,StockNumber,id from tblStockMain where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-11-01 22:12:51,728 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=StockCode&operation=22&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-11-01 22:12:51,729 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[StockCode,];operation=[22,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-11-01 22:12:51,731 Line:3434 DynDBManager.popSelect selectName=StockMany; sql=select * from (select tblStockMain.classCode f1 ,tblStockMain.StockNumber f2 ,tblStockMain.StockName f3 ,tblStockMain.StockFullName f4 ,tblStockMain.StockFullNamePYM f5 
,tblStockMain.isCatalog as childCount,ROW_NUMBER() over( order by tblStockMain.StockNumber,tblStockMain.StockFullName) as row_id from tblStock tblStockMain where 1=1 and tblStockMain.statusid!='-1' and tblStockMain.workFlowNodeName='finish' and tblStockMain.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:12:56,369 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:12:56,372 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,,];tblBuyInStockDet_tblGoods_BaseUnit=[个,,];tblBuyInStockDet_BatchNo=[,,];tblBuyInStockDet_Qty=[454.0000,,];tblBuyInStockDet_QuaQty=[454.0000,,];tblBuyInStockDet_TaxPrice=[4.5,,];tblBuyInStockDet_TaxAmount=[2043,,];tblBuyInStockDet_Price=[3.8461,,];tblBuyInStockDet_Amount=[1746.15,,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,,];tblBuyInStockDet_tblStock_StockName1=[包材仓,,];tblBuyInStockDet_yearNO=[,,];tblBuyInStockDet_freightAmount=[0,0,];tblBuyInStockDet_tblGoods_BarCode=[,,];tblBuyInStockDet_Seq_hid=[,,];tblBuyInStockDet_CoTaxAmt=[296.85,0,];tblBuyInStockDet_CurPrice=[4.5000,,];tblBuyInStockDet_CurAmount=[2043,,];tblBuyInStockDet_ConsumeTaxAmt=[0,,];tblBuyInStockDet_TariffAmt=[0,,];tblBuyInStockDet_PresentSampleTypeName=[,,];tblBuyInStockDet_PresentSampleType=[0,,];tblBuyInStockDet_Remark=[,,];tblBuyInStockDet_Seq=[,,];tblBuyInStockDet_Availably=[,,];tblBuyInStockDet_Inch=[,,];tblBuyInStockDet_ProDate=[,,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,,];tblBuyInStockDet_BuyAskPriceID=[,,];tblBuyInStockDet_SalesOutID=[,,];tblBuyInStockDet_GoodsCode=[00003000050002C,,];tblBuyInStockDet_StockCode=[00009,,];tblBuyInStockDet_Hue=[,,];tblBuyInStockDet_Discount=[100,100,];tblBuyInStockDet_DisPrice=[3.8461,,];tblBuyInStockDet_DisBackAmt=[1746.15,,];tblBuyInStockDet_DisAmount=[0,,];tblBuyInStockDet_ApportionAmt=[,,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,,];tblBuyInStockDet_InvoiceAmount=[0,0,];tblBuyInStockDet_NotPayQty=[,,];tblBuyInStockDet_PayQty=[,,];tblBuyInStockDet_SecQty=[0,0,];tblBuyInStockDet_BaseQty=[0,0,];tblBuyInStockDet_CheckBarCode=[,,];tblBuyInStockDet_BackPayQty=[,,];tblBuyInStockDet_PreferAmount=[,,];tblBuyInStockDet_hasCheck=[0,0,];tblBuyInStockDet_detsId=[,,];Remark=[,];
 [DEBUG] 2017-11-01 22:12:56,374 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:12:56,494 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:12:56,495 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:12:56,495 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:12:56,496 Line:5853 3:97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,496 Line:5853 4:0
 [DEBUG] 2017-11-01 22:12:56,496 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:12:56,497 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:12:56,497 Line:5853 7:0
 [DEBUG] 2017-11-01 22:12:56,497 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:12:56,497 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:12:56,498 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:12:56,498 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:12:56,498 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:12:56,498 Line:5853 13:1
 [DEBUG] 2017-11-01 22:12:56,498 Line:5853 14:
 [DEBUG] 2017-11-01 22:12:56,499 Line:5853 15:2
 [DEBUG] 2017-11-01 22:12:56,499 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:12:56,499 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:12:56,499 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:12:56,499 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:12:56,500 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:12:56,500 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:12:56,500 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:12:56,500 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:12:56,500 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:12:56,501 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:12:56,501 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:12:56,501 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:12:56,501 Line:5853 28:
 [DEBUG] 2017-11-01 22:12:56,502 Line:5853 29:11
 [DEBUG] 2017-11-01 22:12:56,502 Line:5853 30:11
 [DEBUG] 2017-11-01 22:12:56,502 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:12:56,502 Line:5853 32:
 [DEBUG] 2017-11-01 22:12:56,503 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:12:56,503 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:12:56,503 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:12:56,503 Line:5853 36:
 [DEBUG] 2017-11-01 22:12:56,504 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:12:56,504 Line:5853 38:
 [DEBUG] 2017-11-01 22:12:56,504 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:12:56,505 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:12:56,505 Line:5853 41:
 [DEBUG] 2017-11-01 22:12:56,505 Line:5853 42:
 [DEBUG] 2017-11-01 22:12:56,506 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:12:56,506 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:12:56,506 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:12:56,507 Line:5853 46:
 [DEBUG] 2017-11-01 22:12:56,508 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:12:56,508 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:12:56,508 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:12:56,509 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:12:56,509 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:12:56,509 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:12:56,510 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:12:56,510 Line:5853 54:
 [DEBUG] 2017-11-01 22:12:56,510 Line:5853 55:
 [DEBUG] 2017-11-01 22:12:56,511 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:12:56,511 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:12:56,511 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:12:56,512 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:12:56,512 Line:5853 60:
 [DEBUG] 2017-11-01 22:12:56,512 Line:5853 61:
 [DEBUG] 2017-11-01 22:12:56,513 Line:5853 62:0
 [DEBUG] 2017-11-01 22:12:56,513 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:12:56,513 Line:5853 64:0
 [DEBUG] 2017-11-01 22:12:56,514 Line:5853 65:
 [DEBUG] 2017-11-01 22:12:56,514 Line:5853 66:1
 [DEBUG] 2017-11-01 22:12:56,514 Line:5853 67:2017-11-01 22:12:56
 [DEBUG] 2017-11-01 22:12:56,515 Line:5853 68:1
 [DEBUG] 2017-11-01 22:12:56,515 Line:5853 69:2017-11-01 22:12:56
 [DEBUG] 2017-11-01 22:12:56,571 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:12:56,572 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:12:56,573 Line:5853 2:97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,573 Line:5853 3:97763882_1711012212565710114
 [DEBUG] 2017-11-01 22:12:56,573 Line:5853 4:
 [DEBUG] 2017-11-01 22:12:56,574 Line:5853 5:
 [DEBUG] 2017-11-01 22:12:56,574 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:12:56,575 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:12:56,575 Line:5853 8:
 [DEBUG] 2017-11-01 22:12:56,575 Line:5853 9:
 [DEBUG] 2017-11-01 22:12:56,576 Line:5853 10:
 [DEBUG] 2017-11-01 22:12:56,576 Line:5853 11:
 [DEBUG] 2017-11-01 22:12:56,576 Line:5853 12:
 [DEBUG] 2017-11-01 22:12:56,577 Line:5853 13:
 [DEBUG] 2017-11-01 22:12:56,577 Line:5853 14:
 [DEBUG] 2017-11-01 22:12:56,577 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:12:56,578 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:12:56,578 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:12:56,578 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:12:56,579 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:12:56,579 Line:5853 20:0
 [DEBUG] 2017-11-01 22:12:56,580 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:12:56,580 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:12:56,580 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:12:56,581 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:12:56,581 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:12:56,581 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:12:56,582 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:12:56,582 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:12:56,582 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:12:56,583 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:12:56,583 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:12:56,583 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:12:56,584 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:12:56,584 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:12:56,585 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:12:56,585 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:12:56,585 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:12:56,585 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:12:56,585 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:12:56,586 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:12:56,586 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:12:56,586 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:12:56,587 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:12:56,587 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:12:56,587 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:12:56,588 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:12:56,588 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:12:56,588 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:12:56,589 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:12:56,589 Line:5853 50:0
 [DEBUG] 2017-11-01 22:12:56,589 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:12:56,590 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:12:56,590 Line:5853 53:0
 [DEBUG] 2017-11-01 22:12:56,590 Line:5853 54:0
 [DEBUG] 2017-11-01 22:12:56,591 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:12:56,591 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:12:56,591 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:12:56,592 Line:5853 58:0
 [DEBUG] 2017-11-01 22:12:56,592 Line:5853 59:0
 [DEBUG] 2017-11-01 22:12:56,592 Line:5853 60:
 [DEBUG] 2017-11-01 22:12:56,593 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:12:56,593 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:12:56,593 Line:5853 63:
 [DEBUG] 2017-11-01 22:12:56,594 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:12:56,594 Line:5853 65:0
 [DEBUG] 2017-11-01 22:12:56,595 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:12:56,613 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:12:56,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,614 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,617 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:12:56,617 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:12:56,618 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:12:56,618 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,618 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,622 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:12:56,622 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:12:56,622 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:12:56,624 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,624 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:12:56,627 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,627 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:12:56,627 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,627 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,635 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:12:56,636 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:12:56,636 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:12:56,636 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,637 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,644 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:12:56,644 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:12:56,644 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:12:56,644 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,645 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,649 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:12:56,650 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:12:56,650 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:12:56,650 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,651 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,657 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:12:56,657 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:12:56,658 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:12:56,660 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,661 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:12:56,663 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,663 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:12:56,665 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,665 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:12:56,667 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,667 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:12:56,669 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,669 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:12:56,672 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,673 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:12:56,674 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,675 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:12:56,676 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,677 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:12:56,678 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:56,679 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:12:56,679 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:12:56,679 Line:1157 2值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,685 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:12:56,686 Line:408 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:12:56,686 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:12:56,688 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,688 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:12:56,690 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:56,692 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:12:56,693 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,693 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,694 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:12:56,700 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:12:56,700 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:12:56,703 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,703 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:12:56,703 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,704 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,704 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:12:56,718 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:12:56,718 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:12:56,721 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,722 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:12:56,722 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,722 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,723 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:12:56,734 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:12:56,735 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:12:56,736 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,736 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:12:56,737 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,737 Line:988 1值：true
 [DEBUG] 2017-11-01 22:12:56,737 Line:988 2值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,748 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:12:56,748 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:12:56,748 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:12:56,750 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,750 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:12:56,750 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,751 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,763 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-11-01 22:12:56,764 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,766 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,766 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:12:56,767 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,768 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,778 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:12:56,779 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,780 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,781 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:12:56,781 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,781 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,788 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:12:56,788 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,790 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,791 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:12:56,793 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,793 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:12:56,793 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,794 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,798 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:12:56,798 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,800 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,800 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:12:56,800 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,800 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:12:56,801 Line:988 2值：0
 [DEBUG] 2017-11-01 22:12:56,801 Line:988 3值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,812 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:12:56,813 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:12:56,813 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-11-01 22:12:56,813 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:12:56,815 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,815 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:12:56,815 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,816 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,835 Line:1043 ---上述语句时间---20
 [DEBUG] 2017-11-01 22:12:56,836 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,837 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,837 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:12:56,837 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,838 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,848 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:12:56,849 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,850 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,851 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:12:56,852 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,852 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,857 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:12:56,857 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:12:56,859 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,859 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:12:56,859 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,860 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,864 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:12:56,865 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:12:56,866 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,867 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:12:56,867 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,867 Line:988 1值：
 [DEBUG] 2017-11-01 22:12:56,867 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:12:56,872 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:12:56,873 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:12:56,873 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,873 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,874 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:12:56,874 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:12:56,874 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:12:56,880 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:12:56,881 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:12:56,882 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,883 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:12:56,884 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,884 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:12:56,885 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,886 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:12:56,887 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:56,889 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:12:56,890 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,890 Line:988 1值：1
 [DEBUG] 2017-11-01 22:12:56,891 Line:988 2值：1
 [DEBUG] 2017-11-01 22:12:56,902 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:12:56,902 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-11-01 22:12:56,902 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:12:56,903 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:12:56,903 Line:988 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,937 Line:1043 ---上述语句时间---35
 [DEBUG] 2017-11-01 22:12:56,938 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:12:56,939 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,940 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:12:56,941 Line:321 flag:false
 [DEBUG] 2017-11-01 22:12:56,941 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:12:56,942 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:56,943 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:12:56,944 Line:1157 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,950 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:12:56,950 Line:229 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:12:56,951 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:12:56,951 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:12:56,952 Line:1157 2值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,952 Line:1157 3值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,962 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:12:56,962 Line:229 ************上述语句执行时间：11
 [DEBUG] 2017-11-01 22:12:56,962 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:12:56,963 Line:1157 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,963 Line:1157 2值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,972 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:12:56,972 Line:229 ************上述语句执行时间：10
 [DEBUG] 2017-11-01 22:12:56,972 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:12:56,973 Line:1157 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,977 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:12:56,978 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:12:56,978 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:12:56,978 Line:1157 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,985 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:12:56,986 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:12:56,986 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:12:56,987 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:56,988 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:12:56,988 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:12:56,988 Line:1157 2值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:56,989 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:12:56,989 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:12:56,989 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:12:56,991 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:56,991 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:12:56,992 Line:1157 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:57,011 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:12:57,011 Line:408 ************上述语句执行时间：20
 [DEBUG] 2017-11-01 22:12:57,012 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:12:57,012 Line:1157 1值：97763882_1711012212564660113
 [DEBUG] 2017-11-01 22:12:57,033 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:12:57,034 Line:408 ************上述语句执行时间：22
 [DEBUG] 2017-11-01 22:12:57,034 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:12:57,035 Line:321 flag:true
 [DEBUG] 2017-11-01 22:12:57,036 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:12:57,037 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:12:57,037 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:12:57,037 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:12:57,037 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:12:57,038 Line:1270 0
 [DEBUG] 2017-11-01 22:12:57,038 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:12:57,038 Line:1270 f_ref='97763882_1711012212564660113'
 [ERROR] 2017-11-01 22:12:57,042 Line:1312 DefineSQLBean.execProcedure Error
 com.microsoft.sqlserver.jdbc.SQLServerException: 过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.execute(SQLServerPreparedStatement.java:322)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at com.menyi.web.util.DefineSQLBean.execProcedure(DefineSQLBean.java:1277)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:419)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:412)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3873)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:183)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:12:57,043 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
 [DEBUG] 2017-11-01 22:13:14,794 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D09734ECC99D1E95EF23501A9149AA833C7396
 [ERROR] 2017-11-01 22:13:14,832 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:13:17,503 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:13:17,505 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5,];tblBuyInStockDet_TaxAmount=[2043,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043,];tblBuyInStockDet_ConsumeTaxAmt=[0,];tblBuyInStockDet_TariffAmt=[0,];tblBuyInStockDet_PresentSampleTypeName=[,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-11-01 22:13:17,507 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:13:17,520 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:13:17,522 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:13:17,522 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:13:17,522 Line:5853 3:97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,523 Line:5853 4:0
 [DEBUG] 2017-11-01 22:13:17,523 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:13:17,523 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:13:17,524 Line:5853 7:0
 [DEBUG] 2017-11-01 22:13:17,524 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:13:17,525 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:13:17,525 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:13:17,525 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:13:17,526 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:13:17,526 Line:5853 13:1
 [DEBUG] 2017-11-01 22:13:17,526 Line:5853 14:
 [DEBUG] 2017-11-01 22:13:17,527 Line:5853 15:2
 [DEBUG] 2017-11-01 22:13:17,527 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:13:17,527 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:13:17,527 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:13:17,528 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:13:17,528 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:13:17,528 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:13:17,528 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:13:17,529 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:13:17,529 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:17,529 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:13:17,529 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:13:17,530 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:13:17,530 Line:5853 28:
 [DEBUG] 2017-11-01 22:13:17,530 Line:5853 29:11
 [DEBUG] 2017-11-01 22:13:17,530 Line:5853 30:11
 [DEBUG] 2017-11-01 22:13:17,531 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:13:17,531 Line:5853 32:
 [DEBUG] 2017-11-01 22:13:17,531 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:13:17,531 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:13:17,532 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:13:17,532 Line:5853 36:
 [DEBUG] 2017-11-01 22:13:17,532 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:17,533 Line:5853 38:
 [DEBUG] 2017-11-01 22:13:17,533 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:13:17,534 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:13:17,535 Line:5853 41:
 [DEBUG] 2017-11-01 22:13:17,535 Line:5853 42:
 [DEBUG] 2017-11-01 22:13:17,535 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:13:17,536 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:13:17,536 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:13:17,537 Line:5853 46:
 [DEBUG] 2017-11-01 22:13:17,537 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:13:17,537 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:13:17,538 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:13:17,538 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:13:17,538 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:13:17,538 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:13:17,539 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:13:17,539 Line:5853 54:
 [DEBUG] 2017-11-01 22:13:17,539 Line:5853 55:
 [DEBUG] 2017-11-01 22:13:17,539 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:13:17,540 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:13:17,540 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:13:17,540 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:13:17,541 Line:5853 60:
 [DEBUG] 2017-11-01 22:13:17,541 Line:5853 61:
 [DEBUG] 2017-11-01 22:13:17,541 Line:5853 62:0
 [DEBUG] 2017-11-01 22:13:17,541 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:13:17,542 Line:5853 64:0
 [DEBUG] 2017-11-01 22:13:17,542 Line:5853 65:
 [DEBUG] 2017-11-01 22:13:17,542 Line:5853 66:1
 [DEBUG] 2017-11-01 22:13:17,543 Line:5853 67:2017-11-01 22:13:17
 [DEBUG] 2017-11-01 22:13:17,543 Line:5853 68:1
 [DEBUG] 2017-11-01 22:13:17,543 Line:5853 69:2017-11-01 22:13:17
 [DEBUG] 2017-11-01 22:13:17,545 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:13:17,546 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:17,546 Line:5853 2:97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,546 Line:5853 3:97763882_1711012213175450117
 [DEBUG] 2017-11-01 22:13:17,547 Line:5853 4:
 [DEBUG] 2017-11-01 22:13:17,547 Line:5853 5:
 [DEBUG] 2017-11-01 22:13:17,547 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:13:17,547 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:13:17,548 Line:5853 8:
 [DEBUG] 2017-11-01 22:13:17,548 Line:5853 9:
 [DEBUG] 2017-11-01 22:13:17,548 Line:5853 10:
 [DEBUG] 2017-11-01 22:13:17,549 Line:5853 11:
 [DEBUG] 2017-11-01 22:13:17,549 Line:5853 12:
 [DEBUG] 2017-11-01 22:13:17,549 Line:5853 13:
 [DEBUG] 2017-11-01 22:13:17,550 Line:5853 14:
 [DEBUG] 2017-11-01 22:13:17,550 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:13:17,550 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:13:17,550 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:13:17,551 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:13:17,551 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:13:17,551 Line:5853 20:0
 [DEBUG] 2017-11-01 22:13:17,551 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:13:17,552 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:13:17,552 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:13:17,553 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:13:17,553 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:13:17,553 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:13:17,554 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:13:17,554 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:13:17,554 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:13:17,555 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:13:17,555 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:13:17,555 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:13:17,556 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:13:17,556 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:13:17,556 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:13:17,557 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:13:17,557 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:13:17,558 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:13:17,558 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:13:17,559 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:13:17,559 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:13:17,560 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:13:17,560 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:13:17,560 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:13:17,561 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:13:17,561 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:13:17,561 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:13:17,562 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:13:17,562 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:13:17,562 Line:5853 50:0
 [DEBUG] 2017-11-01 22:13:17,563 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:13:17,563 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:13:17,563 Line:5853 53:0
 [DEBUG] 2017-11-01 22:13:17,563 Line:5853 54:0
 [DEBUG] 2017-11-01 22:13:17,564 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:13:17,564 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:13:17,564 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:13:17,565 Line:5853 58:0
 [DEBUG] 2017-11-01 22:13:17,565 Line:5853 59:0
 [DEBUG] 2017-11-01 22:13:17,565 Line:5853 60:
 [DEBUG] 2017-11-01 22:13:17,566 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:13:17,566 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:13:17,566 Line:5853 63:
 [DEBUG] 2017-11-01 22:13:17,567 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:13:17,567 Line:5853 65:0
 [DEBUG] 2017-11-01 22:13:17,568 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:13:17,570 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:13:17,571 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,571 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,572 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:13:17,572 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,573 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:13:17,573 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,574 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,575 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:13:17,575 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,575 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:13:17,576 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,577 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:13:17,579 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,579 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:13:17,579 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,580 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,582 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:13:17,582 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:17,583 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:13:17,583 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,584 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,585 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:13:17,585 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:17,586 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:13:17,586 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,586 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,587 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:13:17,588 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:13:17,588 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:13:17,588 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,588 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,590 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:13:17,590 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,590 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:13:17,592 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,592 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:13:17,593 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,594 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:13:17,595 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,596 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:13:17,597 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,597 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:13:17,599 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,600 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:13:17,601 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,602 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:13:17,603 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,603 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:13:17,605 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,605 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:13:17,607 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,608 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:13:17,608 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:17,609 Line:1157 2值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,610 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:13:17,610 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:13:17,611 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:13:17,612 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,613 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:13:17,615 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,617 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:13:17,618 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,618 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,618 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:13:17,620 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:17,620 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:17,622 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,622 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:13:17,623 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,623 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,623 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:13:17,624 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,624 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:17,625 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,626 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:13:17,626 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,626 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,626 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:13:17,627 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:13:17,627 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:17,629 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,630 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:13:17,630 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,630 Line:988 1值：true
 [DEBUG] 2017-11-01 22:13:17,631 Line:988 2值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,632 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:13:17,632 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:17,632 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:13:17,634 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,635 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:13:17,635 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,636 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,637 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,638 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,639 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,640 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:13:17,640 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,641 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,641 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:13:17,642 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,644 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,644 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:13:17,645 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,645 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,646 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,647 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,648 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,648 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:13:17,650 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,650 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:13:17,651 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,651 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,652 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,653 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,654 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,655 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:13:17,655 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,655 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:13:17,655 Line:988 2值：0
 [DEBUG] 2017-11-01 22:13:17,656 Line:988 3值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,657 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:13:17,657 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:13:17,657 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,657 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:13:17,659 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,659 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:13:17,659 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,660 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,660 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:13:17,661 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,662 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,662 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:13:17,663 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,663 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,664 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,664 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,665 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,666 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:13:17,666 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,667 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,667 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:13:17,668 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:17,670 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,670 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:13:17,671 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,671 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,672 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:17,673 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:13:17,674 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,675 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:13:17,675 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,676 Line:988 1值：
 [DEBUG] 2017-11-01 22:13:17,676 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:13:17,679 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:13:17,680 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:13:17,680 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,680 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,681 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:17,681 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:17,681 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:17,682 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:17,683 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:13:17,685 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,685 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:17,687 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,687 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:13:17,689 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,690 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:13:17,691 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,693 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:13:17,694 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,694 Line:988 1值：1
 [DEBUG] 2017-11-01 22:13:17,694 Line:988 2值：1
 [DEBUG] 2017-11-01 22:13:17,696 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:13:17,696 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:17,697 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:13:17,697 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:17,697 Line:988 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,698 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:13:17,699 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:13:17,700 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,701 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:13:17,702 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:17,702 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:13:17,704 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,705 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:13:17,705 Line:1157 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,706 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:17,706 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:13:17,707 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:13:17,707 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:13:17,707 Line:1157 2值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,708 Line:1157 3值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,709 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:17,709 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:13:17,710 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:13:17,710 Line:1157 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,710 Line:1157 2值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,711 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:17,711 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:13:17,711 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:13:17,712 Line:1157 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,712 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:17,713 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:13:17,713 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:13:17,713 Line:1157 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,714 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:17,714 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:13:17,715 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:13:17,717 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,717 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:13:17,718 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:17,718 Line:1157 2值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,719 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:13:17,719 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:13:17,719 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:13:17,721 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,721 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:13:17,722 Line:1157 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,724 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:13:17,724 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:13:17,725 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:13:17,726 Line:1157 1值：97763882_1711012213175140116
 [DEBUG] 2017-11-01 22:13:17,727 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:13:17,728 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:13:17,728 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:13:17,729 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:17,730 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:13:17,730 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:13:17,731 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:13:17,731 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:13:17,731 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:13:17,731 Line:1270 0
 [DEBUG] 2017-11-01 22:13:17,732 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:13:17,732 Line:1270 f_ref='97763882_1711012213175140116'
 [ERROR] 2017-11-01 22:13:17,734 Line:1312 DefineSQLBean.execProcedure Error
 com.microsoft.sqlserver.jdbc.SQLServerException: 过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.execute(SQLServerPreparedStatement.java:322)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at com.menyi.web.util.DefineSQLBean.execProcedure(DefineSQLBean.java:1277)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:419)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:412)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3873)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:183)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:13:17,735 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
 [ERROR] 2017-11-01 22:13:32,480 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:13:33,444 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:13:43,238 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D097342F9AE5566715066C33A3E039F5C82ECB
 [ERROR] 2017-11-01 22:13:43,280 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:13:47,487 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:13:47,489 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5,];tblBuyInStockDet_TaxAmount=[2043,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043,];tblBuyInStockDet_ConsumeTaxAmt=[0,];tblBuyInStockDet_TariffAmt=[0,];tblBuyInStockDet_PresentSampleTypeName=[,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-11-01 22:13:47,490 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:13:47,512 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:13:47,512 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:13:47,512 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:13:47,513 Line:5853 3:97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,513 Line:5853 4:0
 [DEBUG] 2017-11-01 22:13:47,513 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:13:47,514 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:13:47,514 Line:5853 7:0
 [DEBUG] 2017-11-01 22:13:47,514 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:13:47,515 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:13:47,515 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:13:47,515 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:13:47,515 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:13:47,515 Line:5853 13:1
 [DEBUG] 2017-11-01 22:13:47,516 Line:5853 14:
 [DEBUG] 2017-11-01 22:13:47,516 Line:5853 15:2
 [DEBUG] 2017-11-01 22:13:47,516 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:13:47,516 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:13:47,517 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:13:47,517 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:13:47,517 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:13:47,517 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:13:47,518 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:13:47,518 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:13:47,518 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:47,518 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:13:47,519 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:13:47,519 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:13:47,519 Line:5853 28:
 [DEBUG] 2017-11-01 22:13:47,519 Line:5853 29:11
 [DEBUG] 2017-11-01 22:13:47,520 Line:5853 30:11
 [DEBUG] 2017-11-01 22:13:47,520 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:13:47,520 Line:5853 32:
 [DEBUG] 2017-11-01 22:13:47,520 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:13:47,521 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:13:47,521 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:13:47,521 Line:5853 36:
 [DEBUG] 2017-11-01 22:13:47,521 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:47,522 Line:5853 38:
 [DEBUG] 2017-11-01 22:13:47,522 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:13:47,522 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:13:47,523 Line:5853 41:
 [DEBUG] 2017-11-01 22:13:47,523 Line:5853 42:
 [DEBUG] 2017-11-01 22:13:47,523 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:13:47,523 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:13:47,524 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:13:47,524 Line:5853 46:
 [DEBUG] 2017-11-01 22:13:47,524 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:13:47,525 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:13:47,525 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:13:47,525 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:13:47,525 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:13:47,526 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:13:47,526 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:13:47,526 Line:5853 54:
 [DEBUG] 2017-11-01 22:13:47,527 Line:5853 55:
 [DEBUG] 2017-11-01 22:13:47,527 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:13:47,527 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:13:47,528 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:13:47,528 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:13:47,528 Line:5853 60:
 [DEBUG] 2017-11-01 22:13:47,528 Line:5853 61:
 [DEBUG] 2017-11-01 22:13:47,528 Line:5853 62:0
 [DEBUG] 2017-11-01 22:13:47,529 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:13:47,529 Line:5853 64:0
 [DEBUG] 2017-11-01 22:13:47,529 Line:5853 65:
 [DEBUG] 2017-11-01 22:13:47,529 Line:5853 66:1
 [DEBUG] 2017-11-01 22:13:47,529 Line:5853 67:2017-11-01 22:13:47
 [DEBUG] 2017-11-01 22:13:47,530 Line:5853 68:1
 [DEBUG] 2017-11-01 22:13:47,530 Line:5853 69:2017-11-01 22:13:47
 [DEBUG] 2017-11-01 22:13:47,531 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:13:47,532 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:47,532 Line:5853 2:97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,532 Line:5853 3:97763882_1711012213475310120
 [DEBUG] 2017-11-01 22:13:47,533 Line:5853 4:
 [DEBUG] 2017-11-01 22:13:47,533 Line:5853 5:
 [DEBUG] 2017-11-01 22:13:47,533 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:13:47,533 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:13:47,533 Line:5853 8:
 [DEBUG] 2017-11-01 22:13:47,533 Line:5853 9:
 [DEBUG] 2017-11-01 22:13:47,534 Line:5853 10:
 [DEBUG] 2017-11-01 22:13:47,534 Line:5853 11:
 [DEBUG] 2017-11-01 22:13:47,534 Line:5853 12:
 [DEBUG] 2017-11-01 22:13:47,534 Line:5853 13:
 [DEBUG] 2017-11-01 22:13:47,534 Line:5853 14:
 [DEBUG] 2017-11-01 22:13:47,535 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:13:47,535 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:13:47,535 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:13:47,536 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:13:47,536 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:13:47,536 Line:5853 20:0
 [DEBUG] 2017-11-01 22:13:47,536 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:13:47,536 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:13:47,537 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:13:47,537 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:13:47,537 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:13:47,537 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:13:47,537 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:13:47,538 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:13:47,538 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:13:47,538 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:13:47,538 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:13:47,539 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:13:47,539 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:13:47,539 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:13:47,539 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:13:47,539 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:13:47,540 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:13:47,540 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:13:47,540 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:13:47,540 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:13:47,541 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:13:47,541 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:13:47,541 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:13:47,541 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:13:47,541 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:13:47,541 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:13:47,542 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:13:47,542 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:13:47,542 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:13:47,543 Line:5853 50:0
 [DEBUG] 2017-11-01 22:13:47,543 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:13:47,543 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:13:47,543 Line:5853 53:0
 [DEBUG] 2017-11-01 22:13:47,544 Line:5853 54:0
 [DEBUG] 2017-11-01 22:13:47,544 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:13:47,544 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:13:47,544 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:13:47,544 Line:5853 58:0
 [DEBUG] 2017-11-01 22:13:47,545 Line:5853 59:0
 [DEBUG] 2017-11-01 22:13:47,545 Line:5853 60:
 [DEBUG] 2017-11-01 22:13:47,545 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:13:47,545 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:13:47,545 Line:5853 63:
 [DEBUG] 2017-11-01 22:13:47,545 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:13:47,546 Line:5853 65:0
 [DEBUG] 2017-11-01 22:13:47,546 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:13:47,548 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:13:47,548 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,549 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,565 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:13:47,565 Line:1043 ---上述语句时间---17
 [DEBUG] 2017-11-01 22:13:47,565 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:13:47,565 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,566 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,578 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:13:47,578 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-11-01 22:13:47,579 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:13:47,585 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,585 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:13:47,587 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,587 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:13:47,588 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,588 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,601 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:13:47,601 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:13:47,601 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:13:47,602 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,602 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,619 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:13:47,620 Line:1043 ---上述语句时间---19
 [DEBUG] 2017-11-01 22:13:47,620 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:13:47,621 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,621 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,633 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:13:47,634 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:13:47,634 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:13:47,634 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,635 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,647 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:13:47,647 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-11-01 22:13:47,648 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:13:47,649 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,649 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:13:47,650 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,650 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:13:47,651 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,652 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:13:47,653 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,654 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:13:47,655 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,655 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:13:47,656 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,657 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:13:47,658 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,658 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:13:47,660 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,660 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:13:47,662 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,662 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:13:47,662 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:47,663 Line:1157 2值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,670 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:13:47,671 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-11-01 22:13:47,671 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:13:47,672 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,672 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:13:47,673 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,674 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:13:47,675 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,675 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,675 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:13:47,684 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:13:47,685 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:47,686 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,686 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:13:47,686 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,687 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,687 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:13:47,694 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:13:47,694 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:47,695 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,696 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:13:47,696 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,696 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,697 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:13:47,703 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:13:47,703 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:47,705 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,705 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:13:47,705 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,706 Line:988 1值：true
 [DEBUG] 2017-11-01 22:13:47,706 Line:988 2值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,720 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:13:47,720 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:13:47,722 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:13:47,723 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,723 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:13:47,724 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,724 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,731 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:13:47,732 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,733 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,734 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:13:47,734 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,735 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,742 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:13:47,743 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,744 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,745 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:13:47,745 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,745 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,752 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:13:47,752 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,753 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,754 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:13:47,754 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,755 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:13:47,755 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,755 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,762 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:13:47,762 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,764 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,764 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:13:47,764 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,764 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:13:47,765 Line:988 2值：0
 [DEBUG] 2017-11-01 22:13:47,765 Line:988 3值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,777 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:13:47,778 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:13:47,778 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:13:47,778 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:13:47,779 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,780 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:13:47,780 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,780 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,786 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:13:47,787 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,788 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,788 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:13:47,788 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,789 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,796 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:13:47,796 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,798 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,799 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:13:47,800 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,800 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,810 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:13:47,810 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:13:47,812 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,813 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:13:47,813 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,814 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,815 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:47,815 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:13:47,817 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,818 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:13:47,818 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,819 Line:988 1值：
 [DEBUG] 2017-11-01 22:13:47,819 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:13:47,820 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:47,821 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:13:47,821 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,821 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,822 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:47,822 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:47,822 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:13:47,823 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:13:47,824 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:13:47,825 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,826 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:13:47,827 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,828 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:13:47,829 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,830 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:13:47,832 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,833 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:13:47,834 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,834 Line:988 1值：1
 [DEBUG] 2017-11-01 22:13:47,834 Line:988 2值：1
 [DEBUG] 2017-11-01 22:13:47,836 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:13:47,836 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:13:47,836 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:13:47,837 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:13:47,837 Line:988 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,844 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:13:47,845 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:13:47,846 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,846 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:13:47,848 Line:321 flag:false
 [DEBUG] 2017-11-01 22:13:47,848 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:13:47,849 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,850 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:13:47,851 Line:1157 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,865 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:47,866 Line:229 ************上述语句执行时间：16
 [DEBUG] 2017-11-01 22:13:47,866 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:13:47,867 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:13:47,867 Line:1157 2值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,868 Line:1157 3值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,887 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:47,887 Line:229 ************上述语句执行时间：21
 [DEBUG] 2017-11-01 22:13:47,887 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:13:47,888 Line:1157 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,888 Line:1157 2值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,903 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:47,903 Line:229 ************上述语句执行时间：16
 [DEBUG] 2017-11-01 22:13:47,903 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:13:47,904 Line:1157 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,910 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:47,910 Line:229 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:13:47,911 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:13:47,911 Line:1157 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,920 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:13:47,920 Line:229 ************上述语句执行时间：10
 [DEBUG] 2017-11-01 22:13:47,920 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:13:47,922 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,922 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:13:47,923 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:13:47,923 Line:1157 2值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,929 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:13:47,930 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:13:47,930 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:13:47,931 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,931 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:13:47,932 Line:1157 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,933 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:13:47,933 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:13:47,934 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:13:47,934 Line:1157 1值：97763882_1711012213475080119
 [DEBUG] 2017-11-01 22:13:47,935 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:13:47,936 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:13:47,936 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:13:47,937 Line:321 flag:true
 [DEBUG] 2017-11-01 22:13:47,937 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:13:47,938 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:13:47,938 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:13:47,938 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:13:47,938 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:13:47,938 Line:1270 0
 [DEBUG] 2017-11-01 22:13:47,939 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:13:47,939 Line:1270 f_ref='97763882_1711012213475080119'
 [ERROR] 2017-11-01 22:13:47,941 Line:1312 DefineSQLBean.execProcedure Error
 com.microsoft.sqlserver.jdbc.SQLServerException: 过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.execute(SQLServerPreparedStatement.java:322)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at com.menyi.web.util.DefineSQLBean.execProcedure(DefineSQLBean.java:1277)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:419)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:412)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3873)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:183)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:13:47,942 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
 [DEBUG] 2017-11-01 22:14:27,655 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D09734BBFD241897D088647686458C02F7B7F6
 [ERROR] 2017-11-01 22:14:27,713 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:14:33,397 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:14:33,399 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5,];tblBuyInStockDet_TaxAmount=[2043,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043,];tblBuyInStockDet_ConsumeTaxAmt=[0,];tblBuyInStockDet_TariffAmt=[0,];tblBuyInStockDet_PresentSampleTypeName=[,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-11-01 22:14:33,401 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:14:33,422 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:14:33,423 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:14:33,423 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:14:33,423 Line:5853 3:97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,424 Line:5853 4:0
 [DEBUG] 2017-11-01 22:14:33,424 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:14:33,424 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:14:33,425 Line:5853 7:0
 [DEBUG] 2017-11-01 22:14:33,425 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:14:33,425 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:14:33,426 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:14:33,426 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:14:33,426 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:14:33,426 Line:5853 13:1
 [DEBUG] 2017-11-01 22:14:33,427 Line:5853 14:
 [DEBUG] 2017-11-01 22:14:33,427 Line:5853 15:2
 [DEBUG] 2017-11-01 22:14:33,427 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:14:33,428 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:14:33,428 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:14:33,428 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:14:33,429 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:14:33,429 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:14:33,429 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:14:33,429 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:14:33,429 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:14:33,430 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:14:33,430 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:14:33,430 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:14:33,430 Line:5853 28:
 [DEBUG] 2017-11-01 22:14:33,430 Line:5853 29:11
 [DEBUG] 2017-11-01 22:14:33,430 Line:5853 30:11
 [DEBUG] 2017-11-01 22:14:33,431 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:14:33,431 Line:5853 32:
 [DEBUG] 2017-11-01 22:14:33,431 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:14:33,431 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:14:33,431 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:14:33,432 Line:5853 36:
 [DEBUG] 2017-11-01 22:14:33,432 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:14:33,432 Line:5853 38:
 [DEBUG] 2017-11-01 22:14:33,432 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:14:33,432 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:14:33,433 Line:5853 41:
 [DEBUG] 2017-11-01 22:14:33,433 Line:5853 42:
 [DEBUG] 2017-11-01 22:14:33,433 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:14:33,433 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:14:33,433 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:14:33,434 Line:5853 46:
 [DEBUG] 2017-11-01 22:14:33,434 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:14:33,434 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:14:33,434 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:14:33,435 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:14:33,435 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:14:33,435 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:14:33,435 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:14:33,435 Line:5853 54:
 [DEBUG] 2017-11-01 22:14:33,436 Line:5853 55:
 [DEBUG] 2017-11-01 22:14:33,436 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:14:33,436 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:14:33,437 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:14:33,437 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:14:33,437 Line:5853 60:
 [DEBUG] 2017-11-01 22:14:33,437 Line:5853 61:
 [DEBUG] 2017-11-01 22:14:33,437 Line:5853 62:0
 [DEBUG] 2017-11-01 22:14:33,438 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:14:33,438 Line:5853 64:0
 [DEBUG] 2017-11-01 22:14:33,438 Line:5853 65:
 [DEBUG] 2017-11-01 22:14:33,438 Line:5853 66:1
 [DEBUG] 2017-11-01 22:14:33,438 Line:5853 67:2017-11-01 22:14:33
 [DEBUG] 2017-11-01 22:14:33,439 Line:5853 68:1
 [DEBUG] 2017-11-01 22:14:33,439 Line:5853 69:2017-11-01 22:14:33
 [DEBUG] 2017-11-01 22:14:33,441 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:14:33,441 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:14:33,441 Line:5853 2:97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,441 Line:5853 3:97763882_1711012214334400123
 [DEBUG] 2017-11-01 22:14:33,442 Line:5853 4:
 [DEBUG] 2017-11-01 22:14:33,442 Line:5853 5:
 [DEBUG] 2017-11-01 22:14:33,442 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:14:33,443 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:14:33,443 Line:5853 8:
 [DEBUG] 2017-11-01 22:14:33,443 Line:5853 9:
 [DEBUG] 2017-11-01 22:14:33,443 Line:5853 10:
 [DEBUG] 2017-11-01 22:14:33,444 Line:5853 11:
 [DEBUG] 2017-11-01 22:14:33,444 Line:5853 12:
 [DEBUG] 2017-11-01 22:14:33,444 Line:5853 13:
 [DEBUG] 2017-11-01 22:14:33,444 Line:5853 14:
 [DEBUG] 2017-11-01 22:14:33,445 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:14:33,445 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:14:33,445 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:14:33,445 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:14:33,445 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:14:33,446 Line:5853 20:0
 [DEBUG] 2017-11-01 22:14:33,446 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:14:33,446 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:14:33,446 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:14:33,447 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:14:33,447 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:14:33,447 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:14:33,447 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:14:33,447 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:14:33,448 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:14:33,448 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:14:33,448 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:14:33,448 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:14:33,448 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:14:33,449 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:14:33,449 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:14:33,449 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:14:33,449 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:14:33,449 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:14:33,450 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:14:33,450 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:14:33,450 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:14:33,450 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:14:33,450 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:14:33,451 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:14:33,451 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:14:33,451 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:14:33,452 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:14:33,452 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:14:33,452 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:14:33,453 Line:5853 50:0
 [DEBUG] 2017-11-01 22:14:33,453 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:14:33,453 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:14:33,453 Line:5853 53:0
 [DEBUG] 2017-11-01 22:14:33,454 Line:5853 54:0
 [DEBUG] 2017-11-01 22:14:33,454 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:14:33,454 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:14:33,455 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:14:33,455 Line:5853 58:0
 [DEBUG] 2017-11-01 22:14:33,455 Line:5853 59:0
 [DEBUG] 2017-11-01 22:14:33,456 Line:5853 60:
 [DEBUG] 2017-11-01 22:14:33,456 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:14:33,456 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:14:33,457 Line:5853 63:
 [DEBUG] 2017-11-01 22:14:33,457 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:14:33,458 Line:5853 65:0
 [DEBUG] 2017-11-01 22:14:33,459 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:14:33,463 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:14:33,464 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,464 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,465 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:14:33,466 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:14:33,466 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:14:33,466 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,467 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,468 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:14:33,468 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,469 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:14:33,471 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,471 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:14:33,473 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,473 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:14:33,473 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,474 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,475 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:14:33,475 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,476 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:14:33,476 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,477 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,478 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:14:33,478 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,478 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:14:33,479 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,479 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,480 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:14:33,480 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,480 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:14:33,481 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,481 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,482 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:14:33,482 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,482 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:14:33,484 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,484 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:14:33,486 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,486 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:14:33,488 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,489 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:14:33,490 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,491 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:14:33,493 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,494 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:14:33,495 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,496 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:14:33,498 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,498 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:14:33,500 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,501 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:14:33,503 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,503 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:14:33,504 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:14:33,504 Line:1157 2值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,506 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:14:33,506 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:14:33,507 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:14:33,509 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,510 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:14:33,512 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,514 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:14:33,515 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,515 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,516 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:14:33,517 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:14:33,518 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:14:33,520 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,520 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:14:33,521 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,522 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,523 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:14:33,527 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:14:33,528 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:14:33,529 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,530 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:14:33,530 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,531 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,531 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:14:33,532 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,533 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:14:33,535 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,536 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:14:33,536 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,537 Line:988 1值：true
 [DEBUG] 2017-11-01 22:14:33,537 Line:988 2值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,538 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:14:33,539 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:14:33,539 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:14:33,541 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,541 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:14:33,541 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,542 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,543 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,544 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,545 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,546 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:14:33,546 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,547 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,549 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:14:33,549 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,551 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,552 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:14:33,552 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,553 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,554 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,554 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,556 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,556 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:14:33,558 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,558 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:14:33,558 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,559 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,560 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,560 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,561 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,561 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:14:33,562 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,562 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:14:33,562 Line:988 2值：0
 [DEBUG] 2017-11-01 22:14:33,562 Line:988 3值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,564 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:14:33,564 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:14:33,565 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:14:33,565 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:14:33,566 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,566 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:14:33,567 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,567 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,568 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,568 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,570 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,570 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:14:33,570 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,571 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,572 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,572 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,574 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,575 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:14:33,575 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,576 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,577 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:14:33,577 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:14:33,579 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,580 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:14:33,580 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,580 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,584 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:14:33,584 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:14:33,586 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,587 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:14:33,587 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,588 Line:988 1值：
 [DEBUG] 2017-11-01 22:14:33,588 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:14:33,590 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:14:33,590 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:14:33,591 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,591 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,592 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:14:33,592 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:14:33,593 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:14:33,594 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:14:33,594 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:14:33,597 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,597 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:14:33,599 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,599 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:14:33,602 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,603 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:14:33,605 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,608 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:14:33,608 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,609 Line:988 1值：1
 [DEBUG] 2017-11-01 22:14:33,609 Line:988 2值：1
 [DEBUG] 2017-11-01 22:14:33,611 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:14:33,612 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:14:33,612 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:14:33,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:14:33,613 Line:988 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,615 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:14:33,615 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:14:33,617 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,618 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:14:33,620 Line:321 flag:false
 [DEBUG] 2017-11-01 22:14:33,620 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:14:33,622 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,624 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:14:33,625 Line:1157 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,645 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:14:33,645 Line:229 ************上述语句执行时间：21
 [DEBUG] 2017-11-01 22:14:33,646 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:14:33,646 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:14:33,647 Line:1157 2值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,647 Line:1157 3值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,649 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:14:33,650 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:14:33,650 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:14:33,651 Line:1157 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,651 Line:1157 2值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,653 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:14:33,653 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:14:33,654 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:14:33,654 Line:1157 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,656 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:14:33,656 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:14:33,657 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:14:33,657 Line:1157 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,660 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:14:33,661 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:14:33,661 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:14:33,663 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,664 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:14:33,665 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:14:33,665 Line:1157 2值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,666 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:14:33,667 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:14:33,667 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:14:33,669 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,670 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:14:33,671 Line:1157 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,673 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:14:33,673 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:14:33,673 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:14:33,674 Line:1157 1值：97763882_1711012214334190122
 [DEBUG] 2017-11-01 22:14:33,676 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:14:33,677 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:14:33,677 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:14:33,679 Line:321 flag:true
 [DEBUG] 2017-11-01 22:14:33,680 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:14:33,680 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:14:33,681 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:14:33,681 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:14:33,681 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:14:33,682 Line:1270 0
 [DEBUG] 2017-11-01 22:14:33,682 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:14:33,682 Line:1270 f_ref='97763882_1711012214334190122'
 [ERROR] 2017-11-01 22:14:33,686 Line:1312 DefineSQLBean.execProcedure Error
 com.microsoft.sqlserver.jdbc.SQLServerException: 过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.execute(SQLServerPreparedStatement.java:322)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at com.menyi.web.util.DefineSQLBean.execProcedure(DefineSQLBean.java:1277)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:419)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:412)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3873)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:183)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:14:33,716 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
 [ERROR] 2017-11-01 22:14:35,541 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:14:36,609 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:15:14,277 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D097348A428968F922DA101A9149AA833C7396
 [ERROR] 2017-11-01 22:15:14,318 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:15:21,387 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D097341BAE98FBA23B4EBB5038F594B7A91F37
 [ERROR] 2017-11-01 22:15:21,426 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:15:24,716 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:15:24,718 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5,];tblBuyInStockDet_TaxAmount=[2043,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043,];tblBuyInStockDet_ConsumeTaxAmt=[0,];tblBuyInStockDet_TariffAmt=[0,];tblBuyInStockDet_PresentSampleTypeName=[,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-11-01 22:15:24,720 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:15:24,738 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:15:24,738 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:15:24,739 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:15:24,739 Line:5853 3:97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,740 Line:5853 4:0
 [DEBUG] 2017-11-01 22:15:24,740 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:15:24,740 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:15:24,741 Line:5853 7:0
 [DEBUG] 2017-11-01 22:15:24,741 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:15:24,742 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:15:24,742 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:15:24,742 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:15:24,743 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:15:24,743 Line:5853 13:1
 [DEBUG] 2017-11-01 22:15:24,743 Line:5853 14:
 [DEBUG] 2017-11-01 22:15:24,744 Line:5853 15:2
 [DEBUG] 2017-11-01 22:15:24,744 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:15:24,744 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:15:24,745 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:15:24,745 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:15:24,746 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:15:24,746 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:15:24,746 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:15:24,747 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:15:24,747 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:24,747 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:15:24,748 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:15:24,748 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:15:24,749 Line:5853 28:
 [DEBUG] 2017-11-01 22:15:24,749 Line:5853 29:11
 [DEBUG] 2017-11-01 22:15:24,749 Line:5853 30:11
 [DEBUG] 2017-11-01 22:15:24,750 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:15:24,750 Line:5853 32:
 [DEBUG] 2017-11-01 22:15:24,750 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:15:24,751 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:15:24,751 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:15:24,751 Line:5853 36:
 [DEBUG] 2017-11-01 22:15:24,752 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:24,752 Line:5853 38:
 [DEBUG] 2017-11-01 22:15:24,752 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:15:24,752 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:15:24,753 Line:5853 41:
 [DEBUG] 2017-11-01 22:15:24,753 Line:5853 42:
 [DEBUG] 2017-11-01 22:15:24,753 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:15:24,754 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:15:24,754 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:15:24,754 Line:5853 46:
 [DEBUG] 2017-11-01 22:15:24,755 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:15:24,755 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:15:24,756 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:15:24,756 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:15:24,756 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:15:24,757 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:15:24,757 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:15:24,757 Line:5853 54:
 [DEBUG] 2017-11-01 22:15:24,758 Line:5853 55:
 [DEBUG] 2017-11-01 22:15:24,758 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:15:24,758 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:15:24,759 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:15:24,759 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:15:24,759 Line:5853 60:
 [DEBUG] 2017-11-01 22:15:24,760 Line:5853 61:
 [DEBUG] 2017-11-01 22:15:24,760 Line:5853 62:0
 [DEBUG] 2017-11-01 22:15:24,760 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:15:24,761 Line:5853 64:0
 [DEBUG] 2017-11-01 22:15:24,761 Line:5853 65:
 [DEBUG] 2017-11-01 22:15:24,762 Line:5853 66:1
 [DEBUG] 2017-11-01 22:15:24,763 Line:5853 67:2017-11-01 22:15:24
 [DEBUG] 2017-11-01 22:15:24,763 Line:5853 68:1
 [DEBUG] 2017-11-01 22:15:24,764 Line:5853 69:2017-11-01 22:15:24
 [DEBUG] 2017-11-01 22:15:24,766 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:15:24,767 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:24,767 Line:5853 2:97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,767 Line:5853 3:97763882_1711012215247660127
 [DEBUG] 2017-11-01 22:15:24,768 Line:5853 4:
 [DEBUG] 2017-11-01 22:15:24,768 Line:5853 5:
 [DEBUG] 2017-11-01 22:15:24,768 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:15:24,768 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:15:24,769 Line:5853 8:
 [DEBUG] 2017-11-01 22:15:24,769 Line:5853 9:
 [DEBUG] 2017-11-01 22:15:24,769 Line:5853 10:
 [DEBUG] 2017-11-01 22:15:24,769 Line:5853 11:
 [DEBUG] 2017-11-01 22:15:24,770 Line:5853 12:
 [DEBUG] 2017-11-01 22:15:24,770 Line:5853 13:
 [DEBUG] 2017-11-01 22:15:24,770 Line:5853 14:
 [DEBUG] 2017-11-01 22:15:24,770 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:15:24,771 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:15:24,771 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:15:24,771 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:15:24,772 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:15:24,772 Line:5853 20:0
 [DEBUG] 2017-11-01 22:15:24,772 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:15:24,773 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:15:24,773 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:15:24,773 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:15:24,774 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:15:24,774 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:15:24,774 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:15:24,775 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:15:24,775 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:15:24,775 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:15:24,775 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:15:24,776 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:15:24,776 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:15:24,776 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:15:24,777 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:15:24,777 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:15:24,778 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:15:24,778 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:15:24,778 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:15:24,779 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:15:24,779 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:15:24,779 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:15:24,780 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:15:24,780 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:15:24,780 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:15:24,780 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:15:24,781 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:15:24,781 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:15:24,781 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:15:24,781 Line:5853 50:0
 [DEBUG] 2017-11-01 22:15:24,781 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:15:24,782 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:15:24,782 Line:5853 53:0
 [DEBUG] 2017-11-01 22:15:24,782 Line:5853 54:0
 [DEBUG] 2017-11-01 22:15:24,782 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:15:24,783 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:15:24,783 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:15:24,783 Line:5853 58:0
 [DEBUG] 2017-11-01 22:15:24,783 Line:5853 59:0
 [DEBUG] 2017-11-01 22:15:24,784 Line:5853 60:
 [DEBUG] 2017-11-01 22:15:24,784 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:15:24,784 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:15:24,784 Line:5853 63:
 [DEBUG] 2017-11-01 22:15:24,785 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:15:24,785 Line:5853 65:0
 [DEBUG] 2017-11-01 22:15:24,785 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:15:24,787 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:15:24,788 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,788 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,789 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:15:24,789 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,789 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:15:24,789 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,790 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,791 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:15:24,791 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,792 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:15:24,798 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,799 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:15:24,800 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,800 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:15:24,800 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,801 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,802 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:15:24,802 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,803 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:15:24,803 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,804 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,805 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:15:24,805 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,805 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:15:24,806 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,806 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,807 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:15:24,807 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,807 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:15:24,808 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,808 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,809 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:15:24,809 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,809 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:15:24,811 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,812 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:15:24,813 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,814 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:15:24,815 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,816 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:15:24,818 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,818 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:15:24,820 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,821 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:15:24,823 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,824 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:15:24,825 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,826 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:15:24,827 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,828 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:15:24,829 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,829 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:15:24,830 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:24,830 Line:1157 2值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,831 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:15:24,831 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:15:24,831 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:15:24,833 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,833 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:15:24,835 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,836 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:15:24,836 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,837 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,837 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:15:24,838 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,838 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:24,839 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,840 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:15:24,840 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,841 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,841 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:15:24,844 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:15:24,844 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:24,846 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,846 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:15:24,847 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,847 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,848 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:15:24,850 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:15:24,851 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:24,853 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,853 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:15:24,854 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,854 Line:988 1值：true
 [DEBUG] 2017-11-01 22:15:24,855 Line:988 2值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,857 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:15:24,858 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:15:24,858 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:15:24,860 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,860 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:15:24,861 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,861 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,866 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:15:24,866 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,868 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,868 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:15:24,869 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,869 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,870 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,870 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,872 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,872 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:15:24,873 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,873 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,876 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:15:24,877 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,878 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,879 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:15:24,881 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,881 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:15:24,881 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,882 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,883 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,883 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,884 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,885 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:15:24,885 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,885 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:15:24,885 Line:988 2值：0
 [DEBUG] 2017-11-01 22:15:24,886 Line:988 3值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,887 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:15:24,888 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:15:24,888 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:15:24,889 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:15:24,890 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,891 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:15:24,891 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,892 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,894 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:15:24,895 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,896 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,897 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:15:24,897 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,897 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,898 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:15:24,899 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,901 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,902 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:15:24,903 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,903 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,904 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,905 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:24,906 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,906 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:15:24,907 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,907 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,908 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,908 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:15:24,909 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,910 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:15:24,910 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,910 Line:988 1值：
 [DEBUG] 2017-11-01 22:15:24,910 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:15:24,912 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,912 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:15:24,913 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,913 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,913 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:24,913 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:24,914 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:24,915 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:15:24,916 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:15:24,917 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,918 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:24,920 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,920 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:15:24,922 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,923 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:15:24,925 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,926 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:15:24,927 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,927 Line:988 1值：1
 [DEBUG] 2017-11-01 22:15:24,928 Line:988 2值：1
 [DEBUG] 2017-11-01 22:15:24,929 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:15:24,930 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:15:24,930 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:15:24,930 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:24,931 Line:988 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,932 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:24,933 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:15:24,934 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,935 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:15:24,937 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:24,937 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:15:24,939 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,944 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:15:24,944 Line:1157 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,945 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:24,945 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:15:24,946 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:15:24,946 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:15:24,946 Line:1157 2值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,947 Line:1157 3值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,948 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:24,948 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:15:24,948 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:15:24,949 Line:1157 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,949 Line:1157 2值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,950 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:24,950 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:15:24,950 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:15:24,951 Line:1157 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,951 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:24,952 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:15:24,952 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:15:24,952 Line:1157 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,953 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:24,953 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:15:24,953 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:15:24,955 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,956 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:15:24,956 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:24,956 Line:1157 2值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,957 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:15:24,957 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:15:24,958 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:15:24,959 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,960 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:15:24,961 Line:1157 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,963 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:15:24,964 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:15:24,964 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:15:24,964 Line:1157 1值：97763882_1711012215247340126
 [DEBUG] 2017-11-01 22:15:24,967 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:15:24,968 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:15:24,968 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:15:24,970 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:24,971 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:15:24,971 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:15:24,972 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:15:24,972 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:15:24,972 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:15:24,973 Line:1270 0
 [DEBUG] 2017-11-01 22:15:24,973 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:15:24,974 Line:1270 f_ref='97763882_1711012215247340126'
 [ERROR] 2017-11-01 22:15:24,976 Line:1312 DefineSQLBean.execProcedure Error
 com.microsoft.sqlserver.jdbc.SQLServerException: 过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.execute(SQLServerPreparedStatement.java:322)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at com.menyi.web.util.DefineSQLBean.execProcedure(DefineSQLBean.java:1277)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:419)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:412)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3873)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:183)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:15:24,977 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
 [ERROR] 2017-11-01 22:15:38,632 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:15:39,543 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:15:45,334 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D09734ABA64647D90DD6140A1BB597E5395919
 [ERROR] 2017-11-01 22:15:45,370 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:15:49,644 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:15:49,647 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5,];tblBuyInStockDet_TaxAmount=[2043,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043,];tblBuyInStockDet_ConsumeTaxAmt=[0,];tblBuyInStockDet_TariffAmt=[0,];tblBuyInStockDet_PresentSampleTypeName=[,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-11-01 22:15:49,649 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:15:49,658 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:15:49,658 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:15:49,659 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:15:49,659 Line:5853 3:97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,660 Line:5853 4:0
 [DEBUG] 2017-11-01 22:15:49,660 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:15:49,660 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:15:49,661 Line:5853 7:0
 [DEBUG] 2017-11-01 22:15:49,661 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:15:49,661 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:15:49,661 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:15:49,661 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:15:49,662 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:15:49,662 Line:5853 13:1
 [DEBUG] 2017-11-01 22:15:49,662 Line:5853 14:
 [DEBUG] 2017-11-01 22:15:49,662 Line:5853 15:2
 [DEBUG] 2017-11-01 22:15:49,662 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:15:49,662 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:15:49,663 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:15:49,663 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:15:49,663 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:15:49,663 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:15:49,663 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:15:49,664 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:15:49,664 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:49,664 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:15:49,664 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:15:49,664 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:15:49,664 Line:5853 28:
 [DEBUG] 2017-11-01 22:15:49,665 Line:5853 29:11
 [DEBUG] 2017-11-01 22:15:49,665 Line:5853 30:11
 [DEBUG] 2017-11-01 22:15:49,665 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:15:49,665 Line:5853 32:
 [DEBUG] 2017-11-01 22:15:49,665 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:15:49,665 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:15:49,666 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:15:49,666 Line:5853 36:
 [DEBUG] 2017-11-01 22:15:49,666 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:49,666 Line:5853 38:
 [DEBUG] 2017-11-01 22:15:49,666 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:15:49,667 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:15:49,667 Line:5853 41:
 [DEBUG] 2017-11-01 22:15:49,667 Line:5853 42:
 [DEBUG] 2017-11-01 22:15:49,668 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:15:49,668 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:15:49,668 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:15:49,668 Line:5853 46:
 [DEBUG] 2017-11-01 22:15:49,669 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:15:49,669 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:15:49,669 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:15:49,670 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:15:49,670 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:15:49,671 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:15:49,671 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:15:49,671 Line:5853 54:
 [DEBUG] 2017-11-01 22:15:49,671 Line:5853 55:
 [DEBUG] 2017-11-01 22:15:49,672 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:15:49,672 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:15:49,672 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:15:49,673 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:15:49,673 Line:5853 60:
 [DEBUG] 2017-11-01 22:15:49,673 Line:5853 61:
 [DEBUG] 2017-11-01 22:15:49,674 Line:5853 62:0
 [DEBUG] 2017-11-01 22:15:49,674 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:15:49,674 Line:5853 64:0
 [DEBUG] 2017-11-01 22:15:49,674 Line:5853 65:
 [DEBUG] 2017-11-01 22:15:49,675 Line:5853 66:1
 [DEBUG] 2017-11-01 22:15:49,675 Line:5853 67:2017-11-01 22:15:49
 [DEBUG] 2017-11-01 22:15:49,675 Line:5853 68:1
 [DEBUG] 2017-11-01 22:15:49,676 Line:5853 69:2017-11-01 22:15:49
 [DEBUG] 2017-11-01 22:15:49,678 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:15:49,678 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:49,678 Line:5853 2:97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,678 Line:5853 3:97763882_1711012215496770130
 [DEBUG] 2017-11-01 22:15:49,679 Line:5853 4:
 [DEBUG] 2017-11-01 22:15:49,679 Line:5853 5:
 [DEBUG] 2017-11-01 22:15:49,679 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:15:49,679 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:15:49,679 Line:5853 8:
 [DEBUG] 2017-11-01 22:15:49,679 Line:5853 9:
 [DEBUG] 2017-11-01 22:15:49,680 Line:5853 10:
 [DEBUG] 2017-11-01 22:15:49,680 Line:5853 11:
 [DEBUG] 2017-11-01 22:15:49,680 Line:5853 12:
 [DEBUG] 2017-11-01 22:15:49,680 Line:5853 13:
 [DEBUG] 2017-11-01 22:15:49,680 Line:5853 14:
 [DEBUG] 2017-11-01 22:15:49,681 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:15:49,681 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:15:49,681 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:15:49,681 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:15:49,681 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:15:49,682 Line:5853 20:0
 [DEBUG] 2017-11-01 22:15:49,682 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:15:49,682 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:15:49,682 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:15:49,682 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:15:49,682 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:15:49,683 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:15:49,683 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:15:49,683 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:15:49,684 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:15:49,684 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:15:49,684 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:15:49,684 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:15:49,685 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:15:49,685 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:15:49,685 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:15:49,685 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:15:49,686 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:15:49,686 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:15:49,687 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:15:49,687 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:15:49,687 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:15:49,688 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:15:49,688 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:15:49,688 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:15:49,689 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:15:49,689 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:15:49,689 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:15:49,689 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:15:49,690 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:15:49,690 Line:5853 50:0
 [DEBUG] 2017-11-01 22:15:49,690 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:15:49,691 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:15:49,691 Line:5853 53:0
 [DEBUG] 2017-11-01 22:15:49,691 Line:5853 54:0
 [DEBUG] 2017-11-01 22:15:49,692 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:15:49,692 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:15:49,692 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:15:49,693 Line:5853 58:0
 [DEBUG] 2017-11-01 22:15:49,693 Line:5853 59:0
 [DEBUG] 2017-11-01 22:15:49,693 Line:5853 60:
 [DEBUG] 2017-11-01 22:15:49,694 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:15:49,694 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:15:49,694 Line:5853 63:
 [DEBUG] 2017-11-01 22:15:49,695 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:15:49,695 Line:5853 65:0
 [DEBUG] 2017-11-01 22:15:49,695 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:15:49,698 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:15:49,699 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,699 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,713 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:15:49,714 Line:1043 ---上述语句时间---16
 [DEBUG] 2017-11-01 22:15:49,714 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:15:49,714 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,715 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,728 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:15:49,729 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:15:49,729 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:15:49,736 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,736 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:15:49,737 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,737 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:15:49,738 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,738 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,751 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:15:49,751 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:15:49,751 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:15:49,752 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,752 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,765 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:15:49,765 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:15:49,765 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:15:49,765 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,766 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,781 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:15:49,782 Line:1043 ---上述语句时间---17
 [DEBUG] 2017-11-01 22:15:49,782 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:15:49,782 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,782 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,795 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:15:49,795 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-11-01 22:15:49,795 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:15:49,797 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,797 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:15:49,798 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,799 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:15:49,800 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,801 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:15:49,803 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,804 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:15:49,805 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,806 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:15:49,808 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,809 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:15:49,810 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,812 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:15:49,813 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,814 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:15:49,816 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:49,816 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:15:49,817 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:49,817 Line:1157 2值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,828 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:15:49,829 Line:408 ************上述语句执行时间：13
 [DEBUG] 2017-11-01 22:15:49,829 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:15:49,831 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,831 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:15:49,833 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:49,835 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:15:49,835 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,836 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,836 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:15:49,847 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:15:49,847 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:49,848 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,849 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:15:49,849 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,849 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,849 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:15:49,857 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:15:49,857 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:49,858 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,859 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:15:49,859 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,859 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,860 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:15:49,867 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:15:49,867 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:49,869 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,869 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:15:49,870 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,870 Line:988 1值：true
 [DEBUG] 2017-11-01 22:15:49,870 Line:988 2值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,883 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:15:49,884 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:15:49,884 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:15:49,885 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,885 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:15:49,885 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,886 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,894 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:15:49,894 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,896 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,896 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:15:49,897 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,897 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,904 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:15:49,905 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,906 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,906 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:15:49,907 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,907 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,913 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:15:49,914 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,915 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,916 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:15:49,917 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,918 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:15:49,918 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,918 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,929 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:15:49,930 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,931 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,931 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:15:49,932 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,932 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:15:49,932 Line:988 2值：0
 [DEBUG] 2017-11-01 22:15:49,932 Line:988 3值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,945 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:15:49,945 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:15:49,945 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:15:49,946 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:15:49,947 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,947 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:15:49,947 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,948 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,954 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:15:49,955 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,956 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,957 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:15:49,957 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,958 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,964 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:15:49,965 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,966 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,968 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:15:49,968 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,969 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,978 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:15:49,979 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:15:49,980 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,980 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:15:49,980 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,981 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,981 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:15:49,982 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:15:49,983 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,983 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:15:49,983 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,984 Line:988 1值：
 [DEBUG] 2017-11-01 22:15:49,984 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:15:49,985 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:49,985 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:15:49,986 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,986 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:49,986 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:49,986 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:49,987 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:15:49,987 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:49,988 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:15:49,989 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,989 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:15:49,990 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,991 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:15:49,992 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:49,992 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:15:49,993 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:49,994 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:15:49,995 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,995 Line:988 1值：1
 [DEBUG] 2017-11-01 22:15:49,995 Line:988 2值：1
 [DEBUG] 2017-11-01 22:15:49,996 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:15:49,996 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:15:49,996 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:15:49,997 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:15:49,997 Line:988 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,003 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:15:50,004 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:15:50,005 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:50,005 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:15:50,006 Line:321 flag:false
 [DEBUG] 2017-11-01 22:15:50,007 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:15:50,007 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:50,009 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:15:50,009 Line:1157 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,017 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:50,018 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:15:50,018 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:15:50,018 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:15:50,019 Line:1157 2值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,019 Line:1157 3值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,031 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:50,032 Line:229 ************上述语句执行时间：14
 [DEBUG] 2017-11-01 22:15:50,032 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:15:50,032 Line:1157 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,032 Line:1157 2值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,047 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:50,048 Line:229 ************上述语句执行时间：16
 [DEBUG] 2017-11-01 22:15:50,048 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:15:50,048 Line:1157 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,056 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:50,056 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:15:50,057 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:15:50,057 Line:1157 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,064 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:15:50,064 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:15:50,065 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:15:50,066 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:50,066 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:15:50,067 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:15:50,067 Line:1157 2值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,076 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:15:50,077 Line:408 ************上述语句执行时间：11
 [DEBUG] 2017-11-01 22:15:50,077 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:15:50,079 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:50,080 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:15:50,080 Line:1157 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,082 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:15:50,083 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:15:50,083 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:15:50,084 Line:1157 1值：97763882_1711012215496560129
 [DEBUG] 2017-11-01 22:15:50,086 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:15:50,086 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:15:50,087 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:15:50,088 Line:321 flag:true
 [DEBUG] 2017-11-01 22:15:50,089 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:15:50,089 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:15:50,089 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:15:50,089 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:15:50,089 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:15:50,090 Line:1270 0
 [DEBUG] 2017-11-01 22:15:50,090 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:15:50,090 Line:1270 f_ref='97763882_1711012215496560129'
 [ERROR] 2017-11-01 22:15:50,092 Line:1312 DefineSQLBean.execProcedure Error
 com.microsoft.sqlserver.jdbc.SQLServerException: 过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:390)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:340)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.execute(SQLServerPreparedStatement.java:322)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.execute(DelegatingPreparedStatement.java:172)
	at com.menyi.web.util.DefineSQLBean.execProcedure(DefineSQLBean.java:1277)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:419)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:412)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3873)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:183)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-11-01 22:15:50,093 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=过程或函数 'proc_updateStocksNotAudit' 需要参数 '@BillDate'，但未提供该参数。
 [DEBUG] 2017-11-01 22:16:27,591 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:16:27,595 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[true,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];designId=[16abe428_1603022152285291215,];OAWorkFlow=[true,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[0,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];InvoiceStatus=[0,];NeedPayAmt=[0,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];SourceBillId=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5,];tblBuyInStockDet_TaxAmount=[2043,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043,];tblBuyInStockDet_ConsumeTaxAmt=[0,];tblBuyInStockDet_TariffAmt=[0,];tblBuyInStockDet_PresentSampleTypeName=[,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-11-01 22:16:27,597 Line:3828 添加单据desingId=16abe428_1603022152285291215工作流designId=16abe428_1603022152285291215
 [DEBUG] 2017-11-01 22:16:27,609 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,ConsumeTax,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,TotalConsumeTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,TotalTariffAmt,SourceBillId,inType,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:16:27,609 Line:5853 1:0.0
 [DEBUG] 2017-11-01 22:16:27,609 Line:5853 2:;1;
 [DEBUG] 2017-11-01 22:16:27,609 Line:5853 3:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,610 Line:5853 4:0
 [DEBUG] 2017-11-01 22:16:27,610 Line:5853 5:notApprove
 [DEBUG] 2017-11-01 22:16:27,610 Line:5853 6:0.0
 [DEBUG] 2017-11-01 22:16:27,611 Line:5853 7:0
 [DEBUG] 2017-11-01 22:16:27,611 Line:5853 8:0.0
 [DEBUG] 2017-11-01 22:16:27,611 Line:5853 9:BI1711001
 [DEBUG] 2017-11-01 22:16:27,611 Line:5853 10:2017-11-01
 [DEBUG] 2017-11-01 22:16:27,611 Line:5853 11:0002T00007
 [DEBUG] 2017-11-01 22:16:27,612 Line:5853 12:00101
 [DEBUG] 2017-11-01 22:16:27,612 Line:5853 13:1
 [DEBUG] 2017-11-01 22:16:27,612 Line:5853 14:
 [DEBUG] 2017-11-01 22:16:27,612 Line:5853 15:2
 [DEBUG] 2017-11-01 22:16:27,612 Line:5853 16:0.0
 [DEBUG] 2017-11-01 22:16:27,613 Line:5853 17:0.0
 [DEBUG] 2017-11-01 22:16:27,613 Line:5853 18:0.0
 [DEBUG] 2017-11-01 22:16:27,613 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:16:27,613 Line:5853 20:100101
 [DEBUG] 2017-11-01 22:16:27,614 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:16:27,614 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:16:27,614 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:16:27,614 Line:5853 24:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:27,615 Line:5853 25:0.0
 [DEBUG] 2017-11-01 22:16:27,615 Line:5853 26:0.0
 [DEBUG] 2017-11-01 22:16:27,615 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:16:27,615 Line:5853 28:
 [DEBUG] 2017-11-01 22:16:27,616 Line:5853 29:11
 [DEBUG] 2017-11-01 22:16:27,616 Line:5853 30:11
 [DEBUG] 2017-11-01 22:16:27,616 Line:5853 31:2017
 [DEBUG] 2017-11-01 22:16:27,616 Line:5853 32:
 [DEBUG] 2017-11-01 22:16:27,616 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:16:27,617 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:16:27,617 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:16:27,617 Line:5853 36:
 [DEBUG] 2017-11-01 22:16:27,617 Line:5853 37:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:27,618 Line:5853 38:
 [DEBUG] 2017-11-01 22:16:27,618 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:16:27,618 Line:5853 40:0.0
 [DEBUG] 2017-11-01 22:16:27,619 Line:5853 41:
 [DEBUG] 2017-11-01 22:16:27,619 Line:5853 42:
 [DEBUG] 2017-11-01 22:16:27,619 Line:5853 43:100.0
 [DEBUG] 2017-11-01 22:16:27,619 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:16:27,619 Line:5853 45:17.0
 [DEBUG] 2017-11-01 22:16:27,620 Line:5853 46:
 [DEBUG] 2017-11-01 22:16:27,620 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:16:27,620 Line:5853 48:1.0
 [DEBUG] 2017-11-01 22:16:27,620 Line:5853 49:1746.15
 [DEBUG] 2017-11-01 22:16:27,621 Line:5853 50:2043.0
 [DEBUG] 2017-11-01 22:16:27,621 Line:5853 51:296.85
 [DEBUG] 2017-11-01 22:16:27,621 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:16:27,621 Line:5853 53:2043.0
 [DEBUG] 2017-11-01 22:16:27,621 Line:5853 54:
 [DEBUG] 2017-11-01 22:16:27,622 Line:5853 55:
 [DEBUG] 2017-11-01 22:16:27,622 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:16:27,622 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:16:27,622 Line:5853 58:0.0
 [DEBUG] 2017-11-01 22:16:27,622 Line:5853 59:0.0
 [DEBUG] 2017-11-01 22:16:27,623 Line:5853 60:
 [DEBUG] 2017-11-01 22:16:27,623 Line:5853 61:
 [DEBUG] 2017-11-01 22:16:27,623 Line:5853 62:0
 [DEBUG] 2017-11-01 22:16:27,623 Line:5853 63:00001
 [DEBUG] 2017-11-01 22:16:27,623 Line:5853 64:0
 [DEBUG] 2017-11-01 22:16:27,624 Line:5853 65:
 [DEBUG] 2017-11-01 22:16:27,624 Line:5853 66:1
 [DEBUG] 2017-11-01 22:16:27,624 Line:5853 67:2017-11-01 22:16:27
 [DEBUG] 2017-11-01 22:16:27,624 Line:5853 68:1
 [DEBUG] 2017-11-01 22:16:27,624 Line:5853 69:2017-11-01 22:16:27
 [DEBUG] 2017-11-01 22:16:27,627 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:16:27,627 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:27,627 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,627 Line:5853 3:97763882_1711012216276260132
 [DEBUG] 2017-11-01 22:16:27,628 Line:5853 4:
 [DEBUG] 2017-11-01 22:16:27,628 Line:5853 5:
 [DEBUG] 2017-11-01 22:16:27,628 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:16:27,628 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:16:27,628 Line:5853 8:
 [DEBUG] 2017-11-01 22:16:27,628 Line:5853 9:
 [DEBUG] 2017-11-01 22:16:27,629 Line:5853 10:
 [DEBUG] 2017-11-01 22:16:27,629 Line:5853 11:
 [DEBUG] 2017-11-01 22:16:27,629 Line:5853 12:
 [DEBUG] 2017-11-01 22:16:27,629 Line:5853 13:
 [DEBUG] 2017-11-01 22:16:27,629 Line:5853 14:
 [DEBUG] 2017-11-01 22:16:27,630 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:16:27,630 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:16:27,630 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:16:27,630 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:16:27,630 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:16:27,631 Line:5853 20:0
 [DEBUG] 2017-11-01 22:16:27,631 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:16:27,631 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:16:27,631 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:16:27,631 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:16:27,632 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:16:27,632 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:16:27,632 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:16:27,632 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:16:27,632 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:16:27,632 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:16:27,633 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:16:27,633 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:16:27,633 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:16:27,633 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:16:27,633 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:16:27,634 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:16:27,634 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:16:27,634 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:16:27,634 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:16:27,635 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:16:27,635 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:16:27,635 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:16:27,635 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:16:27,635 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:16:27,636 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:16:27,636 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:16:27,636 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:16:27,636 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:16:27,637 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:16:27,637 Line:5853 50:0
 [DEBUG] 2017-11-01 22:16:27,637 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:16:27,637 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:16:27,637 Line:5853 53:0
 [DEBUG] 2017-11-01 22:16:27,638 Line:5853 54:0
 [DEBUG] 2017-11-01 22:16:27,638 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:16:27,638 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:16:27,639 Line:5853 57:0.0
 [DEBUG] 2017-11-01 22:16:27,639 Line:5853 58:0
 [DEBUG] 2017-11-01 22:16:27,639 Line:5853 59:0
 [DEBUG] 2017-11-01 22:16:27,640 Line:5853 60:
 [DEBUG] 2017-11-01 22:16:27,640 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:16:27,640 Line:5853 62:0.0
 [DEBUG] 2017-11-01 22:16:27,640 Line:5853 63:
 [DEBUG] 2017-11-01 22:16:27,641 Line:5853 64:0.0
 [DEBUG] 2017-11-01 22:16:27,641 Line:5853 65:0
 [DEBUG] 2017-11-01 22:16:27,642 Line:5853 66:00001
 [DEBUG] 2017-11-01 22:16:27,646 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:16:27,646 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,647 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,648 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:16:27,648 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,648 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:16:27,649 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,649 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,652 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:16:27,652 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:16:27,653 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:27,654 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,655 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:27,656 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,657 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:16:27,657 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,658 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,660 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:16:27,661 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:16:27,661 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:16:27,661 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,662 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,663 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:16:27,664 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,664 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:16:27,666 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,667 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,668 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:16:27,668 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:16:27,669 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:16:27,669 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,669 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,670 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:16:27,670 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:27,671 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:16:27,672 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,673 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:16:27,674 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,674 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:16:27,676 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,677 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:16:27,679 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,679 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:16:27,680 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,681 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:16:27,682 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,683 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:16:27,684 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,685 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:16:27,686 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,686 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:16:27,687 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,688 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:16:27,688 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:27,688 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,689 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:16:27,689 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:27,690 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:16:27,691 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,691 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:16:27,692 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,694 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:16:27,694 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,694 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,695 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:16:27,696 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,696 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:27,697 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,698 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:16:27,698 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,699 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,699 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:16:27,700 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,701 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:27,702 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,702 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:16:27,703 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,703 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,704 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:16:27,705 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,705 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:27,707 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,708 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:16:27,708 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,709 Line:988 1值：true
 [DEBUG] 2017-11-01 22:16:27,709 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,710 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:16:27,711 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,711 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:27,713 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,713 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:16:27,714 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,714 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,717 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:16:27,718 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,719 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,720 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:16:27,720 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,720 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,722 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,723 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,724 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,725 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:16:27,725 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,726 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,727 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,728 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,730 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,730 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:16:27,732 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,733 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:16:27,733 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,733 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,736 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,736 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,738 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,738 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:16:27,739 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,739 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:16:27,739 Line:988 2值：0
 [DEBUG] 2017-11-01 22:16:27,740 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,743 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:16:27,743 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:16:27,744 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:16:27,744 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:16:27,746 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,746 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:16:27,747 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,747 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,749 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,749 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,751 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,751 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:16:27,752 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,752 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,754 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,754 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,756 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,770 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:16:27,771 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,771 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,774 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:16:27,774 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:27,776 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,776 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:16:27,777 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,777 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,779 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,780 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:16:27,782 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,783 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:16:27,783 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,783 Line:988 1值：
 [DEBUG] 2017-11-01 22:16:27,784 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:16:27,785 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,786 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:16:27,786 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,787 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,787 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:27,788 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:27,788 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:27,789 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,789 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:16:27,791 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,791 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:27,793 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,793 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:16:27,795 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,795 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:16:27,797 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,800 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:16:27,800 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,801 Line:988 1值：1
 [DEBUG] 2017-11-01 22:16:27,801 Line:988 2值：1
 [DEBUG] 2017-11-01 22:16:27,803 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:16:27,803 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:27,804 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:16:27,804 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:27,805 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,806 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:27,807 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:16:27,809 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,809 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:16:27,812 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:27,812 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:16:27,814 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,816 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:16:27,817 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,819 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:27,819 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:16:27,820 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:16:27,820 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:16:27,821 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,821 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,822 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:27,823 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:16:27,823 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:16:27,824 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,824 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,829 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:27,829 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:16:27,830 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:16:27,830 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,832 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:27,832 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:27,832 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:16:27,833 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,833 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:27,834 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:27,834 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:16:27,836 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,836 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:16:27,837 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:27,837 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,837 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:27,838 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:27,838 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:16:27,840 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,840 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:16:27,841 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,843 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:27,843 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:16:27,843 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:16:27,844 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,845 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:27,845 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:27,846 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:16:27,847 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,847 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:27,848 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:27,848 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:27,849 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:27,849 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:27,849 Line:1270 0
 [DEBUG] 2017-11-01 22:16:27,850 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:27,850 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:27,872 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:27,873 Line:425 ************上述语句执行时间：26
 [DEBUG] 2017-11-01 22:16:27,873 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:16:27,875 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:27,876 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:27,876 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:27,876 Line:1270 add
 [DEBUG] 2017-11-01 22:16:27,966 Line:425 ************上述语句执行时间：90
 [DEBUG] 2017-11-01 22:16:27,966 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:16:27,967 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:28,010 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:28,020 Line:108 插入OAMyWorkFlow表开始 designId=16abe428_1603022152285291215;tableName=tblBuyInStock;id=97763882_1711012216276050131;loginBean=1;locale=zh_CN
 [DEBUG] 2017-11-01 22:16:28,186 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?keyId=97763882_1711012216276050131&currNodeId=0&nextNodeIds=null&department=00101&tableName=tblBuyInStock&designId=16abe428_1603022152285291215&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:16:28,187 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[97763882_1711012216276050131,];currNodeId=[0,];nextNodeIds=[null,];department=[00101,];tableName=[tblBuyInStock,];designId=[16abe428_1603022152285291215,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:16:28,190 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:28,322 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:28,592 Line:5227 GlobalsTool.js 生成js 时间65:/js/gen/fileUpload.vjs_zh_CN.js
 [DEBUG] 2017-11-01 22:16:32,648 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:16:32,649 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[,];approveStatus=[,];noback=[false,];toPage=[,];fromPage=[,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:16:32,650 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:32,663 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:32,672 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:33,945 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&parentCode=&f_brother=&keyId=97763882_1711012216276050131&moduleType=&checkTab=Y&parentTableName=&winCurIndex=1
 [DEBUG] 2017-11-01 22:16:33,945 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];parentCode=[,];f_brother=[,];keyId=[97763882_1711012216276050131,];moduleType=[,];checkTab=[Y,];parentTableName=[,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:16:33,946 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:33,956 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:35,853 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:16:35,856 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:16:27,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[0.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012216276260132,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:16:35,899 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:35,971 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:35,988 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:16:35,990 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:35,990 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:35,991 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:35,991 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:35,991 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:35,992 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:35,992 Line:1270 0
 [DEBUG] 2017-11-01 22:16:35,992 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:35,992 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:35,997 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:35,998 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:16:35,998 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:16:36,000 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,000 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:16:36,001 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,005 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:16:36,005 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:16:36,006 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:16:36,007 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,014 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:16:36,015 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:16:36,015 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:16:36,015 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:16:36,016 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:16:36,016 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:16:36,016 Line:5993 6:1
 [DEBUG] 2017-11-01 22:16:36,016 Line:5993 7:
 [DEBUG] 2017-11-01 22:16:36,017 Line:5993 8:2
 [DEBUG] 2017-11-01 22:16:36,017 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:16:36,017 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:16:36,017 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:16:36,018 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:16:36,018 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:16:36,018 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:16:36,018 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:16:36,019 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:36,019 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:16:36,019 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:16:36,019 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:16:36,020 Line:5993 20:11
 [DEBUG] 2017-11-01 22:16:36,020 Line:5993 21:11
 [DEBUG] 2017-11-01 22:16:36,020 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:16:36,021 Line:5993 23:
 [DEBUG] 2017-11-01 22:16:36,021 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:16:36,021 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:16:36,022 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:36,022 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:16:36,022 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:16:36,023 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:16:36,023 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:16:36,023 Line:5993 31:
 [DEBUG] 2017-11-01 22:16:36,023 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:16:36,023 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:16:36,024 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:16:36,024 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:16:36,024 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:16:36,024 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:16:36,025 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:16:36,025 Line:5993 39:
 [DEBUG] 2017-11-01 22:16:36,025 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:16:36,025 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:16:36,026 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:16:36,026 Line:5993 43:
 [DEBUG] 2017-11-01 22:16:36,026 Line:5993 44:
 [DEBUG] 2017-11-01 22:16:36,027 Line:5993 45:1
 [DEBUG] 2017-11-01 22:16:36,027 Line:5993 46:2017-11-01 22:16:35
 [DEBUG] 2017-11-01 22:16:36,042 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:16:36,046 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:16:36,046 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:36,047 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,047 Line:5853 3:97763882_1711012216360460136
 [DEBUG] 2017-11-01 22:16:36,047 Line:5853 4:
 [DEBUG] 2017-11-01 22:16:36,047 Line:5853 5:
 [DEBUG] 2017-11-01 22:16:36,047 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:16:36,047 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:16:36,048 Line:5853 8:
 [DEBUG] 2017-11-01 22:16:36,048 Line:5853 9:
 [DEBUG] 2017-11-01 22:16:36,048 Line:5853 10:
 [DEBUG] 2017-11-01 22:16:36,048 Line:5853 11:
 [DEBUG] 2017-11-01 22:16:36,048 Line:5853 12:
 [DEBUG] 2017-11-01 22:16:36,049 Line:5853 13:
 [DEBUG] 2017-11-01 22:16:36,049 Line:5853 14:
 [DEBUG] 2017-11-01 22:16:36,049 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:16:36,049 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:16:36,049 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:16:36,050 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:16:36,050 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:16:36,050 Line:5853 20:0
 [DEBUG] 2017-11-01 22:16:36,050 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:16:36,051 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:16:36,051 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:16:36,051 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:16:36,051 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:16:36,051 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:16:36,052 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:16:36,052 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:16:36,052 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:16:36,052 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:16:36,052 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:16:36,053 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:16:36,053 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:16:36,053 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:16:36,053 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:16:36,053 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:16:36,053 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:16:36,054 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:16:36,054 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:16:36,054 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:16:36,054 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:16:36,054 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:16:36,054 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:16:36,055 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:16:36,055 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:16:36,055 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:16:36,055 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:16:36,055 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:16:36,056 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:16:36,056 Line:5853 50:0
 [DEBUG] 2017-11-01 22:16:36,056 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:16:36,056 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:16:36,056 Line:5853 53:0
 [DEBUG] 2017-11-01 22:16:36,056 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:16:36,057 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:16:36,057 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:16:36,057 Line:5853 57:0
 [DEBUG] 2017-11-01 22:16:36,057 Line:5853 58:0
 [DEBUG] 2017-11-01 22:16:36,057 Line:5853 59:
 [DEBUG] 2017-11-01 22:16:36,058 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:16:36,058 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:16:36,058 Line:5853 62:
 [DEBUG] 2017-11-01 22:16:36,058 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:16:36,058 Line:5853 64:0
 [DEBUG] 2017-11-01 22:16:36,059 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:16:36,067 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:16:36,067 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,067 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,068 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:16:36,068 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,068 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:16:36,068 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,069 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,070 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:16:36,070 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,070 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:36,071 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,072 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:36,073 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,073 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:16:36,074 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,074 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,075 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:16:36,075 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,075 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:16:36,075 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,076 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,076 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:16:36,077 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,077 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:16:36,077 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,077 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,078 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:16:36,078 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:36,078 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:16:36,079 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,079 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,079 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:16:36,080 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,080 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:16:36,081 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,082 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:16:36,083 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,083 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:16:36,085 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,086 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:16:36,087 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,088 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:16:36,089 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,090 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:16:36,092 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,093 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:16:36,094 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,095 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:16:36,096 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,097 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:16:36,098 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,098 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:16:36,099 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:36,099 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,100 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:16:36,100 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:36,100 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:16:36,102 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,102 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:16:36,104 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,105 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:16:36,106 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,106 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,107 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:16:36,107 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,108 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:36,109 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,109 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:16:36,110 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,110 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,110 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:16:36,111 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,111 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:36,112 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,113 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:16:36,113 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,113 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,114 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:16:36,114 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:36,115 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:36,116 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,116 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:16:36,116 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,117 Line:988 1值：true
 [DEBUG] 2017-11-01 22:16:36,117 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,118 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:16:36,119 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:36,119 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:36,120 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,120 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:16:36,121 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,121 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,122 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,123 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,124 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,124 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:16:36,124 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,126 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,126 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,127 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,128 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,128 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:16:36,128 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,128 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,129 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:36,129 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,130 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,131 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:16:36,132 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,132 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:16:36,132 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,133 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,133 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:36,134 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,135 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,135 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:16:36,135 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,135 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:16:36,136 Line:988 2值：0
 [DEBUG] 2017-11-01 22:16:36,136 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,137 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:16:36,137 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:16:36,137 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,138 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:16:36,139 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,139 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:16:36,140 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,140 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,141 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,141 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,142 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,143 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:16:36,143 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,143 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,144 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:36,145 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,146 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,147 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:16:36,148 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,148 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,149 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,149 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:36,151 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,152 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:16:36,152 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,152 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,153 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:36,153 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:16:36,154 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,155 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:16:36,155 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,155 Line:988 1值：
 [DEBUG] 2017-11-01 22:16:36,156 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:16:36,157 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,157 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:16:36,158 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,158 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,158 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:36,158 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:36,159 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:36,159 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,160 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:16:36,161 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,161 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:36,162 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,163 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:16:36,164 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,165 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:16:36,166 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,167 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:16:36,167 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,167 Line:988 1值：1
 [DEBUG] 2017-11-01 22:16:36,168 Line:988 2值：1
 [DEBUG] 2017-11-01 22:16:36,169 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:16:36,169 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,169 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:16:36,170 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:36,170 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,171 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:36,171 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:16:36,172 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,173 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:16:36,174 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,174 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:16:36,175 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,176 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:16:36,176 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,177 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:36,177 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:36,177 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:16:36,178 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:16:36,178 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,178 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,179 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:36,179 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:36,179 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:16:36,179 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,180 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,180 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:36,180 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:36,181 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:16:36,181 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,181 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:36,181 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-11-01 22:16:36,182 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:16:36,182 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,182 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:36,183 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:36,183 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:16:36,184 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,184 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:16:36,185 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:36,185 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,186 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:36,186 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:36,186 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:16:36,188 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,188 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:16:36,189 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,191 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:36,191 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:16:36,191 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:16:36,192 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,194 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:36,194 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:16:36,194 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:16:36,196 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,196 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:36,197 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:36,197 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:36,197 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:36,198 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:36,198 Line:1270 0
 [DEBUG] 2017-11-01 22:16:36,198 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:36,198 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:36,200 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:36,201 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:16:36,201 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:16:36,203 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:36,204 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:36,204 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:36,204 Line:1270 add
 [DEBUG] 2017-11-01 22:16:36,208 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:16:36,209 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:16:36,210 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:36,217 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:36,266 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:16:36,266 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:16:36,269 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:36,279 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:39,314 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:16:39,315 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:16:39,315 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:39,345 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:39,353 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:40,921 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:16:40,921 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:16:40,922 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:40,940 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:16:41,907 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:16:42,939 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:16:51,490 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:16:51,493 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:16:35,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[0.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012216360460136,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:16:51,511 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:51,519 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,524 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:16:51,534 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,535 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:51,535 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:51,535 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:51,536 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:51,536 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:51,536 Line:1270 0
 [DEBUG] 2017-11-01 22:16:51,536 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:51,536 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:51,539 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:51,540 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:16:51,540 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:16:51,541 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,541 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:16:51,542 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,542 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:16:51,543 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,543 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:16:51,544 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,547 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:16:51,547 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:16:51,547 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:16:51,548 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:16:51,548 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:16:51,548 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:16:51,548 Line:5993 6:1
 [DEBUG] 2017-11-01 22:16:51,549 Line:5993 7:
 [DEBUG] 2017-11-01 22:16:51,549 Line:5993 8:2
 [DEBUG] 2017-11-01 22:16:51,549 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:16:51,549 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:16:51,549 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:16:51,550 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:16:51,550 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:16:51,550 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:16:51,550 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:16:51,550 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:51,551 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:16:51,551 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:16:51,551 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:16:51,551 Line:5993 20:11
 [DEBUG] 2017-11-01 22:16:51,552 Line:5993 21:11
 [DEBUG] 2017-11-01 22:16:51,552 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:16:51,552 Line:5993 23:
 [DEBUG] 2017-11-01 22:16:51,552 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:16:51,553 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:16:51,553 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:51,553 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:16:51,553 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:16:51,554 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:16:51,554 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:16:51,554 Line:5993 31:
 [DEBUG] 2017-11-01 22:16:51,555 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:16:51,555 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:16:51,555 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:16:51,556 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:16:51,556 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:16:51,556 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:16:51,556 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:16:51,557 Line:5993 39:
 [DEBUG] 2017-11-01 22:16:51,557 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:16:51,557 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:16:51,557 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:16:51,558 Line:5993 43:
 [DEBUG] 2017-11-01 22:16:51,558 Line:5993 44:
 [DEBUG] 2017-11-01 22:16:51,558 Line:5993 45:1
 [DEBUG] 2017-11-01 22:16:51,558 Line:5993 46:2017-11-01 22:16:51
 [DEBUG] 2017-11-01 22:16:51,560 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:16:51,561 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:16:51,562 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:51,562 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,562 Line:5853 3:97763882_1711012216515610139
 [DEBUG] 2017-11-01 22:16:51,562 Line:5853 4:
 [DEBUG] 2017-11-01 22:16:51,563 Line:5853 5:
 [DEBUG] 2017-11-01 22:16:51,563 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:16:51,563 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:16:51,564 Line:5853 8:
 [DEBUG] 2017-11-01 22:16:51,564 Line:5853 9:
 [DEBUG] 2017-11-01 22:16:51,564 Line:5853 10:
 [DEBUG] 2017-11-01 22:16:51,564 Line:5853 11:
 [DEBUG] 2017-11-01 22:16:51,564 Line:5853 12:
 [DEBUG] 2017-11-01 22:16:51,565 Line:5853 13:
 [DEBUG] 2017-11-01 22:16:51,565 Line:5853 14:
 [DEBUG] 2017-11-01 22:16:51,565 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:16:51,565 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:16:51,566 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:16:51,566 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:16:51,566 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:16:51,566 Line:5853 20:0
 [DEBUG] 2017-11-01 22:16:51,567 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:16:51,567 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:16:51,567 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:16:51,567 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:16:51,568 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:16:51,568 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:16:51,568 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:16:51,568 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:16:51,568 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:16:51,568 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:16:51,569 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:16:51,569 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:16:51,569 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:16:51,569 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:16:51,569 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:16:51,569 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:16:51,570 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:16:51,570 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:16:51,570 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:16:51,570 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:16:51,571 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:16:51,571 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:16:51,571 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:16:51,571 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:16:51,571 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:16:51,571 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:16:51,572 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:16:51,572 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:16:51,572 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:16:51,572 Line:5853 50:0
 [DEBUG] 2017-11-01 22:16:51,572 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:16:51,573 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:16:51,573 Line:5853 53:0
 [DEBUG] 2017-11-01 22:16:51,573 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:16:51,573 Line:5853 55:0.0
 [DEBUG] 2017-11-01 22:16:51,574 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:16:51,574 Line:5853 57:0
 [DEBUG] 2017-11-01 22:16:51,574 Line:5853 58:0
 [DEBUG] 2017-11-01 22:16:51,574 Line:5853 59:
 [DEBUG] 2017-11-01 22:16:51,574 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:16:51,574 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:16:51,575 Line:5853 62:
 [DEBUG] 2017-11-01 22:16:51,575 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:16:51,575 Line:5853 64:0
 [DEBUG] 2017-11-01 22:16:51,575 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:16:51,577 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:16:51,577 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,578 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,578 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:16:51,579 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,579 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:16:51,579 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,579 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,580 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:16:51,580 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:51,580 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:51,581 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,582 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:51,582 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,583 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:16:51,583 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,583 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,584 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:16:51,584 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:51,584 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:16:51,585 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,585 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,586 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:16:51,586 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,586 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:16:51,586 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,587 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,587 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:16:51,587 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:51,588 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:16:51,588 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,588 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,589 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:16:51,589 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:51,589 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:16:51,591 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,591 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:16:51,592 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,593 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:16:51,594 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,595 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:16:51,596 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,596 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:16:51,597 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,597 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:16:51,599 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,599 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:16:51,600 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,601 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:16:51,602 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,603 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:16:51,604 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,604 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:16:51,605 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:51,605 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,606 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:16:51,606 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,606 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:16:51,608 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,608 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:16:51,610 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,611 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:16:51,611 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,612 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,612 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:16:51,614 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:51,615 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:51,616 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,617 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:16:51,617 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,618 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,618 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:16:51,619 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,619 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:51,620 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,621 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:16:51,621 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,621 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,622 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:16:51,623 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,623 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:51,625 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,625 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:16:51,625 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,626 Line:988 1值：true
 [DEBUG] 2017-11-01 22:16:51,626 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,628 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:16:51,628 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:51,629 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:16:51,630 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,631 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:16:51,631 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,631 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,632 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:16:51,633 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,634 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,635 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:16:51,635 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,636 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,637 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,637 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,638 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,639 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:16:51,639 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,640 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,641 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,641 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,643 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,644 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:16:51,645 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,646 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:16:51,646 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,646 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,648 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,648 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,650 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,650 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:16:51,651 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,651 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:16:51,652 Line:988 2值：0
 [DEBUG] 2017-11-01 22:16:51,652 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,653 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:16:51,653 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:16:51,653 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:51,654 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:16:51,655 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,655 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:16:51,656 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,656 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,663 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:16:51,664 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,665 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,665 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:16:51,665 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,666 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,667 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,668 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,669 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,671 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:16:51,671 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,672 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,673 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,673 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:16:51,675 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,675 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:16:51,676 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,676 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,677 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,677 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:16:51,679 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,679 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:16:51,679 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,680 Line:988 1值：
 [DEBUG] 2017-11-01 22:16:51,680 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:16:51,681 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,682 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:16:51,682 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,683 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,683 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:51,683 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:51,684 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:16:51,685 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:51,685 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:16:51,687 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,687 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:51,688 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,689 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:16:51,691 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,691 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:16:51,693 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,694 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:16:51,695 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,695 Line:988 1值：1
 [DEBUG] 2017-11-01 22:16:51,695 Line:988 2值：1
 [DEBUG] 2017-11-01 22:16:51,696 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:16:51,697 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:51,697 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:16:51,697 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:51,697 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,699 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:16:51,699 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:16:51,701 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,701 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:16:51,702 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,703 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:16:51,704 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,705 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:16:51,706 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,706 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:51,707 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,707 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:16:51,707 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:16:51,708 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,708 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,709 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:51,709 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,709 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:16:51,709 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,709 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,710 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:51,710 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:51,711 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:16:51,711 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,711 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:51,712 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:51,712 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:16:51,712 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,713 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:16:51,713 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:51,713 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:16:51,714 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,715 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:16:51,715 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:16:51,715 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,716 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:51,716 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:51,716 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:16:51,717 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,718 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:16:51,718 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,720 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:51,720 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,721 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:16:51,721 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,723 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:16:51,723 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,723 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:16:51,724 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,725 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:51,725 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:51,725 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:51,726 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:51,726 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:51,726 Line:1270 0
 [DEBUG] 2017-11-01 22:16:51,726 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:51,726 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:51,728 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:51,729 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:16:51,729 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:16:51,730 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:51,731 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:51,731 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:51,731 Line:1270 add
 [DEBUG] 2017-11-01 22:16:51,733 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:16:51,734 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:16:51,735 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:51,738 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:51,831 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:16:51,831 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:16:51,834 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:51,841 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:53,191 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:16:53,192 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:16:53,192 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:53,196 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:53,208 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:16:53,315 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:16:53,316 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:53,316 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,322 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:16:53,323 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:16:53,324 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,324 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:16:53,326 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,326 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:16:53,327 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,328 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:53,328 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:53,328 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:53,329 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:53,329 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:53,329 Line:1270 0
 [DEBUG] 2017-11-01 22:16:53,330 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:53,330 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:53,332 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:53,332 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:16:53,332 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:16:53,333 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,334 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:53,334 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,334 Line:1270 delete
 [DEBUG] 2017-11-01 22:16:53,335 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:16:53,336 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:16:53,337 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,337 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:16:53,338 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,339 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:16:53,340 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,340 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:16:53,340 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,346 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:16:53,346 Line:408 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:16:53,347 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:16:53,348 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,349 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:16:53,350 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,351 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,351 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,351 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,471 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:16:53,472 Line:408 ************上述语句执行时间：123
 [DEBUG] 2017-11-01 22:16:53,472 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:16:53,472 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:53,473 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,479 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:16:53,480 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:16:53,480 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:16:53,481 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,481 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:16:53,482 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:16:53,482 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:16:53,489 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:16:53,489 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:16:53,490 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:16:53,491 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,491 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:53,492 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,492 Line:1270 add
 [DEBUG] 2017-11-01 22:16:53,611 Line:425 ************上述语句执行时间：120
 [DEBUG] 2017-11-01 22:16:53,611 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:16:53,613 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,613 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:16:53,615 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,615 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:16:53,616 Line:1270 11
 [DEBUG] 2017-11-01 22:16:53,616 Line:1270 2017
 [DEBUG] 2017-11-01 22:16:53,616 Line:1270 11
 [DEBUG] 2017-11-01 22:16:53,616 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:16:53,616 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:16:53,617 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,617 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:16:53,617 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:16:53,617 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:16:53,617 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:53,617 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:53,618 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:16:53,618 Line:1270 1
 [DEBUG] 2017-11-01 22:16:53,618 Line:1270 1
 [DEBUG] 2017-11-01 22:16:53,618 Line:1270 2017-11-01 22:16:53
 [DEBUG] 2017-11-01 22:16:53,618 Line:1270 2017-11-01 22:16:51
 [DEBUG] 2017-11-01 22:16:53,618 Line:1270 00001
 [DEBUG] 2017-11-01 22:16:53,619 Line:1270 
 [DEBUG] 2017-11-01 22:16:53,619 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:16:53,619 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:16:53,619 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:16:53,619 Line:1270 1
 [DEBUG] 2017-11-01 22:16:53,620 Line:1270 00101
 [DEBUG] 2017-11-01 22:16:53,620 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:16:53,620 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:16:53,620 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:16:53,620 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:16:53,620 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:16:53,621 Line:1270 0.0
 [DEBUG] 2017-11-01 22:16:53,621 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:16:53,621 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:16:53,621 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:16:53,621 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:16:53,780 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:16:53','2017-11-01 22:16:51','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:16:53,781 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:16:53,781 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:16:53,781 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:16:53,781 Line:425 ************上述语句执行时间：166
 [DEBUG] 2017-11-01 22:16:53,782 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:16:53,783 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,784 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:16:53,785 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:53,787 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:16:53,787 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:16:53,788 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:16:53,789 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,789 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:16:53,806 Line:425 ************上述语句执行时间：17
 [DEBUG] 2017-11-01 22:16:53,807 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:16:53,808 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,808 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:16:53,809 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:53,809 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:53,809 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:16:53,810 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:53,810 Line:1270 00001
 [DEBUG] 2017-11-01 22:16:53,810 Line:1270 1
 [DEBUG] 2017-11-01 22:16:53,992 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:16:53,993 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:16:53,993 Line:425 ************上述语句执行时间：184
 [DEBUG] 2017-11-01 22:16:53,993 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:16:53,993 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:53,994 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:16:53,994 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:16:53,994 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:16:53,995 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:16:53,995 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:16:53,995 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:16:53,997 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:16:53,997 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:16:53,997 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:16:53,997 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:16:53,998 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:16:53,999 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:53,999 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:16:54,000 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:54,001 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:54,001 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:54,001 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:16:54,002 Line:1270 1
 [DEBUG] 2017-11-01 22:16:54,002 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:16:54,002 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:16:51@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:16:54,106 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:16:51','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:16:54,107 Line:425 ************上述语句执行时间：106
 [DEBUG] 2017-11-01 22:16:54,107 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:16:54,108 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,109 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:16:54,110 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,111 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:16:54,112 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,112 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:16:54,114 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,114 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:16:54,116 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,117 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:16:54,118 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,119 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:16:54,119 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:16:54,120 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:16:54,120 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:16:54,120 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:16:54,121 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:16:54,121 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:16:54,121 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:16:54,124 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:16:54,124 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:16:54,125 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:16:54,125 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:16:54,125 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:16:54,127 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,127 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:16:54,129 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,129 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:16:54,130 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,131 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:16:54,132 Line:321 flag:false
 [DEBUG] 2017-11-01 22:16:54,132 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:16:54,133 Line:321 flag:true
 [DEBUG] 2017-11-01 22:16:54,134 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:16:54,134 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:16:54,134 Line:1270 add
 [DEBUG] 2017-11-01 22:16:54,146 Line:425 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:16:55,024 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:16:55,025 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:16:55,025 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:16:55,033 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:17:44,970 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:17:45,980 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:18:02,872 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:18:02,873 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:16:53,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:16:51,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012216515610139,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:18:02,889 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:02,893 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:02,987 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:18:02,988 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:02,988 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:02,989 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:02,989 Line:1270 add
 [DEBUG] 2017-11-01 22:18:02,991 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:18:02,991 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:02,992 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:02,992 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:02,997 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:18:02,997 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:02,998 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:02,999 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:18:02,999 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:02,999 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,003 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:18:03,004 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,005 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,005 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,005 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,006 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,016 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:18:03,017 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,018 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,018 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,018 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,019 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,033 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:18:03,034 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,035 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,035 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:18:03,035 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,035 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,037 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:03,038 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,039 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,039 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,040 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,040 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,049 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:18:03,049 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,050 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,051 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,051 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,051 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,060 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:18:03,060 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,061 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,062 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,062 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,062 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,069 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:18:03,069 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,071 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,071 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,071 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,072 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,081 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:18:03,082 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,083 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,084 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:18:03,084 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,085 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,092 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:18:03,093 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,094 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,094 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:18:03,095 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,095 Line:988 1值：1
 [DEBUG] 2017-11-01 22:18:03,095 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,100 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:18:03,100 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:18:03,101 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,101 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:18:03,102 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,102 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,106 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:03,107 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:18:03,107 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:18:03,107 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:18:03,108 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:18:03,108 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:18:03,108 Line:313 exeCondition:tblBuyInStock_Delete_One :'1' != '0'
 [DEBUG] 2017-11-01 22:18:03,110 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,111 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_updateStocksNotAudit(?,@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:18:03,111 Line:1270 '2017-09-09'
 [DEBUG] 2017-11-01 22:18:03,111 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:18:03,112 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:18:03,112 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:18:03,112 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:18:03,113 Line:1270 0
 [DEBUG] 2017-11-01 22:18:03,113 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:18:03,113 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:03,115 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:03,116 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:18:03,116 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:18:03,117 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,117 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:03,118 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,118 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:18:03,118 Line:1270 1
 [DEBUG] 2017-11-01 22:18:03,175 Line:425 ************上述语句执行时间：58
 [DEBUG] 2017-11-01 22:18:03,176 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:18:03,177 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,177 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:03,177 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:18:03,178 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,178 Line:1270 00001
 [DEBUG] 2017-11-01 22:18:03,178 Line:1270 1
 [DEBUG] 2017-11-01 22:18:03,261 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:18:03,261 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:18:03,262 Line:425 ************上述语句执行时间：85
 [DEBUG] 2017-11-01 22:18:03,262 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:18:03,263 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,263 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:03,263 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,264 Line:1270 delete
 [DEBUG] 2017-11-01 22:18:03,265 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:03,265 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:18:03,266 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,267 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:03,267 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:03,267 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:18:03,267 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:18:03,309 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:18:03,309 Line:425 ************上述语句执行时间：42
 [DEBUG] 2017-11-01 22:18:03,309 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:18:03,310 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,311 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:18:03,312 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,312 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:18:03,313 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:03,313 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:18:03,314 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,314 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:03,314 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,315 Line:1270 delete
 [DEBUG] 2017-11-01 22:18:03,316 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:03,316 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:18:03,318 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,318 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:18:03,318 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,319 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,319 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,319 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,319 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,320 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,320 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,495 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:18:03,495 Line:408 ************上述语句执行时间：177
 [DEBUG] 2017-11-01 22:18:03,495 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:18:03,496 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:03,496 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:03,497 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:18:03,497 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:03,497 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:18:03,498 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:03,499 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:18:03,499 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:18:03,499 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:18:03,499 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:18:03,505 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:18:03,506 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:18:05,047 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:18:05,048 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:18:05,049 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:05,066 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:12,745 Line:164 发送消息到微信：wxqy0 ok   content:你提交的采购入库单:"已经反审核了。<a href='http://erp.haferd.com.cn:8000/mobilevue/workflow/approvedetredirect/tblBuyInStock/97763882_1711012216276050131?opType=detail&state=wxqy'>点击查看</a>
 [ERROR] 2017-11-01 22:18:47,905 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:18:48,873 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:18:51,345 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:18:51,347 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:16:53,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:16:51,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012216515610139,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:18:51,369 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:51,377 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,384 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:18:51,394 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,395 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:18:51,395 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:18:51,395 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:18:51,396 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:18:51,396 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:18:51,396 Line:1270 0
 [DEBUG] 2017-11-01 22:18:51,397 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:18:51,397 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:51,400 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:51,400 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:18:51,401 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:18:51,402 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,403 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:18:51,403 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,404 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:18:51,405 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:51,405 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:18:51,407 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,409 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:18:51,409 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:18:51,410 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:18:51,410 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:18:51,410 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:18:51,410 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:18:51,411 Line:5993 6:1
 [DEBUG] 2017-11-01 22:18:51,411 Line:5993 7:
 [DEBUG] 2017-11-01 22:18:51,411 Line:5993 8:2
 [DEBUG] 2017-11-01 22:18:51,411 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:18:51,411 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:18:51,412 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:18:51,412 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:18:51,412 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:18:51,412 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:18:51,413 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:18:51,413 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:51,413 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:18:51,414 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:18:51,414 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:18:51,414 Line:5993 20:11
 [DEBUG] 2017-11-01 22:18:51,414 Line:5993 21:11
 [DEBUG] 2017-11-01 22:18:51,415 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:18:51,415 Line:5993 23:
 [DEBUG] 2017-11-01 22:18:51,415 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:18:51,415 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:18:51,415 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:51,416 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:18:51,416 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:18:51,416 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:18:51,416 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:18:51,417 Line:5993 31:
 [DEBUG] 2017-11-01 22:18:51,417 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:18:51,417 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:18:51,417 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:18:51,417 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:18:51,418 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:18:51,418 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:18:51,418 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:18:51,418 Line:5993 39:
 [DEBUG] 2017-11-01 22:18:51,418 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:18:51,419 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:18:51,419 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:18:51,419 Line:5993 43:
 [DEBUG] 2017-11-01 22:18:51,419 Line:5993 44:
 [DEBUG] 2017-11-01 22:18:51,419 Line:5993 45:1
 [DEBUG] 2017-11-01 22:18:51,420 Line:5993 46:2017-11-01 22:18:51
 [DEBUG] 2017-11-01 22:18:51,421 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:18:51,422 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:18:51,423 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:51,423 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,423 Line:5853 3:97763882_1711012218514220145
 [DEBUG] 2017-11-01 22:18:51,424 Line:5853 4:
 [DEBUG] 2017-11-01 22:18:51,424 Line:5853 5:
 [DEBUG] 2017-11-01 22:18:51,424 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:18:51,425 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:18:51,425 Line:5853 8:
 [DEBUG] 2017-11-01 22:18:51,425 Line:5853 9:
 [DEBUG] 2017-11-01 22:18:51,426 Line:5853 10:
 [DEBUG] 2017-11-01 22:18:51,426 Line:5853 11:
 [DEBUG] 2017-11-01 22:18:51,426 Line:5853 12:
 [DEBUG] 2017-11-01 22:18:51,426 Line:5853 13:
 [DEBUG] 2017-11-01 22:18:51,427 Line:5853 14:
 [DEBUG] 2017-11-01 22:18:51,427 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:18:51,427 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:18:51,428 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:18:51,428 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:18:51,428 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:18:51,428 Line:5853 20:0
 [DEBUG] 2017-11-01 22:18:51,428 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:18:51,429 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:18:51,429 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:18:51,429 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:18:51,429 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:18:51,429 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:18:51,430 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:18:51,430 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:18:51,430 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:18:51,430 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:18:51,431 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:18:51,431 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:18:51,431 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:18:51,431 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:18:51,431 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:18:51,432 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:18:51,432 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:18:51,432 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:18:51,432 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:18:51,432 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:18:51,433 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:18:51,433 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:18:51,433 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:18:51,434 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:18:51,434 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:18:51,434 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:18:51,435 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:18:51,435 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:18:51,435 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:18:51,436 Line:5853 50:0
 [DEBUG] 2017-11-01 22:18:51,436 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:18:51,436 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:18:51,436 Line:5853 53:0
 [DEBUG] 2017-11-01 22:18:51,437 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:18:51,437 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:18:51,437 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:18:51,438 Line:5853 57:0
 [DEBUG] 2017-11-01 22:18:51,438 Line:5853 58:0
 [DEBUG] 2017-11-01 22:18:51,438 Line:5853 59:
 [DEBUG] 2017-11-01 22:18:51,439 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:18:51,439 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:18:51,439 Line:5853 62:
 [DEBUG] 2017-11-01 22:18:51,439 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:18:51,439 Line:5853 64:0
 [DEBUG] 2017-11-01 22:18:51,440 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:18:51,442 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:18:51,443 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,443 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,444 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:18:51,444 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,444 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:18:51,444 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,445 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,446 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:18:51,446 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,446 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:18:51,447 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,447 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:18:51,448 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,449 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:18:51,449 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,449 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,450 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:18:51,451 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,451 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:18:51,451 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,451 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,452 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:18:51,452 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:51,452 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:18:51,453 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,453 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,454 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:18:51,455 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:51,455 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:18:51,455 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,456 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,457 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:18:51,458 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:51,458 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:18:51,460 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,461 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:18:51,462 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,463 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:18:51,465 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,465 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:18:51,467 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,468 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:18:51,469 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,470 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:18:51,472 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,472 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:18:51,473 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,473 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:18:51,475 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,475 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:18:51,476 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,477 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:18:51,477 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:51,478 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,478 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:18:51,478 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:51,479 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:18:51,481 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,481 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:18:51,482 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,484 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:18:51,484 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,485 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,485 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:18:51,486 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,486 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:51,488 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,489 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:18:51,489 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,489 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,490 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:18:51,491 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,491 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:51,493 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,493 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:18:51,494 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,494 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,495 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:18:51,499 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:18:51,500 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:51,501 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,502 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:18:51,502 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,503 Line:988 1值：true
 [DEBUG] 2017-11-01 22:18:51,503 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,505 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:18:51,505 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:51,506 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:18:51,507 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,507 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:18:51,507 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,508 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,509 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,509 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,510 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,511 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:18:51,511 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,512 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,513 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,513 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,515 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,515 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:18:51,515 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,516 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,517 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,517 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,519 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,519 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:18:51,520 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,521 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:18:51,521 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,522 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,522 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:51,523 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,524 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,524 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:18:51,525 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,525 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:18:51,525 Line:988 2值：0
 [DEBUG] 2017-11-01 22:18:51,525 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,526 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:18:51,527 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:18:51,527 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:51,527 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:18:51,528 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,529 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:18:51,529 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,529 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,530 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:51,531 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,532 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,532 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:18:51,532 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,533 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,533 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:51,534 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,535 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,536 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:18:51,536 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,536 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,537 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,537 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:51,538 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,538 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:18:51,539 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,539 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,541 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:51,541 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:18:51,542 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,542 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:18:51,542 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,543 Line:988 1值：
 [DEBUG] 2017-11-01 22:18:51,543 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:18:51,544 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,544 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:18:51,544 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,545 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,545 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:51,545 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:51,545 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:51,546 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:51,546 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:18:51,547 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,548 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:51,549 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,549 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:18:51,550 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,550 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:18:51,551 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,552 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:18:51,552 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,553 Line:988 1值：1
 [DEBUG] 2017-11-01 22:18:51,553 Line:988 2值：1
 [DEBUG] 2017-11-01 22:18:51,554 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:18:51,555 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:51,555 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:18:51,555 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:51,555 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,556 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:51,556 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:18:51,558 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,558 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:18:51,559 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,559 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:18:51,560 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,561 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:18:51,561 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,562 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:51,562 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:51,562 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:18:51,563 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:18:51,563 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,563 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,564 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:51,564 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:51,564 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:18:51,564 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,565 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,565 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:51,566 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:51,566 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:18:51,566 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,567 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:51,567 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:51,567 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:18:51,567 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,568 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:51,568 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:51,569 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:18:51,570 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,570 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:18:51,571 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:51,571 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,571 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:18:51,572 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:51,572 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:18:51,573 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,574 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:18:51,574 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,576 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:18:51,576 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:51,576 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:18:51,577 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,579 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:18:51,579 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:18:51,580 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:18:51,581 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,582 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:18:51,582 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:18:51,582 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:18:51,583 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:18:51,583 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:18:51,583 Line:1270 0
 [DEBUG] 2017-11-01 22:18:51,583 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:18:51,584 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:51,586 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:51,587 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:18:51,587 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:18:51,588 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:51,589 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:51,590 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:51,590 Line:1270 add
 [DEBUG] 2017-11-01 22:18:51,593 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:18:51,593 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:18:51,595 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:51,599 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:51,650 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:18:51,650 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:18:51,653 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:51,661 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:54,334 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:18:54,334 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:18:54,335 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:54,338 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:54,355 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:55,211 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:18:55,212 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:18:55,212 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:55,224 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:56,479 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:18:56,481 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:16:53,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:18:51,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012218514220145,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:18:56,496 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:56,505 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,510 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:18:56,511 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,512 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:18:56,512 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:18:56,512 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:18:56,512 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:18:56,513 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:18:56,513 Line:1270 0
 [DEBUG] 2017-11-01 22:18:56,513 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:18:56,513 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:56,515 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:56,515 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:18:56,516 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:18:56,517 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,517 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:18:56,517 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,518 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:18:56,518 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:56,518 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:18:56,519 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,521 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:18:56,521 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:18:56,522 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:18:56,522 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:18:56,522 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:18:56,522 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:18:56,522 Line:5993 6:1
 [DEBUG] 2017-11-01 22:18:56,523 Line:5993 7:
 [DEBUG] 2017-11-01 22:18:56,523 Line:5993 8:2
 [DEBUG] 2017-11-01 22:18:56,523 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:18:56,523 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:18:56,523 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:18:56,523 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:18:56,524 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:18:56,524 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:18:56,524 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:18:56,524 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:56,524 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:18:56,524 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:18:56,525 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:18:56,525 Line:5993 20:11
 [DEBUG] 2017-11-01 22:18:56,525 Line:5993 21:11
 [DEBUG] 2017-11-01 22:18:56,525 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:18:56,525 Line:5993 23:
 [DEBUG] 2017-11-01 22:18:56,525 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:18:56,526 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:18:56,526 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:56,526 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:18:56,526 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:18:56,526 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:18:56,527 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:18:56,527 Line:5993 31:
 [DEBUG] 2017-11-01 22:18:56,527 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:18:56,527 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:18:56,527 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:18:56,528 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:18:56,528 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:18:56,528 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:18:56,528 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:18:56,528 Line:5993 39:
 [DEBUG] 2017-11-01 22:18:56,529 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:18:56,529 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:18:56,529 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:18:56,529 Line:5993 43:
 [DEBUG] 2017-11-01 22:18:56,529 Line:5993 44:
 [DEBUG] 2017-11-01 22:18:56,529 Line:5993 45:1
 [DEBUG] 2017-11-01 22:18:56,530 Line:5993 46:2017-11-01 22:18:56
 [DEBUG] 2017-11-01 22:18:56,531 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:18:56,532 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:18:56,532 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:56,533 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,533 Line:5853 3:97763882_1711012218565320148
 [DEBUG] 2017-11-01 22:18:56,533 Line:5853 4:
 [DEBUG] 2017-11-01 22:18:56,533 Line:5853 5:
 [DEBUG] 2017-11-01 22:18:56,533 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:18:56,534 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:18:56,534 Line:5853 8:
 [DEBUG] 2017-11-01 22:18:56,534 Line:5853 9:
 [DEBUG] 2017-11-01 22:18:56,534 Line:5853 10:
 [DEBUG] 2017-11-01 22:18:56,535 Line:5853 11:
 [DEBUG] 2017-11-01 22:18:56,535 Line:5853 12:
 [DEBUG] 2017-11-01 22:18:56,535 Line:5853 13:
 [DEBUG] 2017-11-01 22:18:56,535 Line:5853 14:
 [DEBUG] 2017-11-01 22:18:56,536 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:18:56,536 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:18:56,536 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:18:56,537 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:18:56,537 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:18:56,537 Line:5853 20:0
 [DEBUG] 2017-11-01 22:18:56,538 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:18:56,538 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:18:56,538 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:18:56,538 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:18:56,539 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:18:56,539 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:18:56,539 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:18:56,539 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:18:56,540 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:18:56,540 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:18:56,540 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:18:56,540 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:18:56,540 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:18:56,541 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:18:56,541 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:18:56,541 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:18:56,541 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:18:56,541 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:18:56,541 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:18:56,542 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:18:56,542 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:18:56,542 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:18:56,542 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:18:56,542 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:18:56,542 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:18:56,543 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:18:56,543 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:18:56,543 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:18:56,543 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:18:56,543 Line:5853 50:0
 [DEBUG] 2017-11-01 22:18:56,544 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:18:56,544 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:18:56,544 Line:5853 53:0
 [DEBUG] 2017-11-01 22:18:56,544 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:18:56,545 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:18:56,545 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:18:56,545 Line:5853 57:0
 [DEBUG] 2017-11-01 22:18:56,545 Line:5853 58:0
 [DEBUG] 2017-11-01 22:18:56,545 Line:5853 59:
 [DEBUG] 2017-11-01 22:18:56,545 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:18:56,546 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:18:56,546 Line:5853 62:
 [DEBUG] 2017-11-01 22:18:56,546 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:18:56,546 Line:5853 64:0
 [DEBUG] 2017-11-01 22:18:56,546 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:18:56,549 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:18:56,549 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,549 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,550 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:18:56,550 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:56,550 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:18:56,551 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,551 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,551 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:18:56,552 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,552 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:18:56,553 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,554 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:18:56,555 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,555 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:18:56,555 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,556 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,556 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:18:56,557 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,557 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:18:56,557 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,557 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,558 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:18:56,558 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:56,559 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:18:56,559 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,559 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,560 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:18:56,561 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:56,561 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:18:56,561 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,561 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,562 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:18:56,562 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:56,563 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:18:56,564 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,564 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:18:56,566 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,566 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:18:56,567 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,568 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:18:56,569 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,569 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:18:56,570 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,570 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:18:56,573 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,573 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:18:56,575 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,575 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:18:56,576 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,576 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:18:56,578 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,579 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:18:56,579 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:56,580 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,580 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:18:56,581 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:56,581 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:18:56,583 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,583 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:18:56,585 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,587 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:18:56,587 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,588 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,588 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:18:56,589 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,590 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:56,592 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,592 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:18:56,592 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,593 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,593 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:18:56,595 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:56,595 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:56,597 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,598 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:18:56,598 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,598 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,599 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:18:56,600 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:56,601 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:56,602 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,603 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:18:56,603 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,604 Line:988 1值：true
 [DEBUG] 2017-11-01 22:18:56,604 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,605 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:18:56,606 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:56,606 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:18:56,608 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,608 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:18:56,608 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,609 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,610 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,611 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,612 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,613 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:18:56,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,614 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,615 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,615 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,617 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,617 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:18:56,617 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,618 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,619 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,619 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,621 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,621 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:18:56,622 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,622 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:18:56,623 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,623 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,624 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,624 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,625 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,626 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:18:56,626 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,627 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:18:56,627 Line:988 2值：0
 [DEBUG] 2017-11-01 22:18:56,627 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,629 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:18:56,629 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:18:56,629 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:56,630 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:18:56,631 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,632 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:18:56,632 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,632 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,633 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,634 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,635 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,635 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:18:56,636 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,636 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,637 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,637 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,639 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,640 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:18:56,640 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,641 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,642 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,642 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:18:56,643 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,644 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:18:56,644 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,644 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,645 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:18:56,646 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:18:56,647 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,648 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:18:56,648 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,648 Line:988 1值：
 [DEBUG] 2017-11-01 22:18:56,649 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:18:56,650 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,650 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:18:56,650 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,651 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,651 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:56,651 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:56,652 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:18:56,652 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:18:56,653 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:18:56,654 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,655 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:18:56,656 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,656 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:18:56,658 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,658 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:18:56,660 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,661 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:18:56,662 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,662 Line:988 1值：1
 [DEBUG] 2017-11-01 22:18:56,662 Line:988 2值：1
 [DEBUG] 2017-11-01 22:18:56,664 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:18:56,665 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:18:56,665 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:18:56,666 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:18:56,666 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,668 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:18:56,668 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:18:56,670 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,670 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:18:56,671 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,672 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:18:56,673 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,674 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:18:56,675 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,675 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:56,675 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:56,676 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:18:56,676 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:18:56,676 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,677 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,678 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:56,678 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:56,678 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:18:56,679 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,679 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,680 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:56,680 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:56,680 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:18:56,681 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,682 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:56,682 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:56,683 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:18:56,683 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,684 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:18:56,684 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:18:56,685 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:18:56,686 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,687 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:18:56,687 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:18:56,688 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,689 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:18:56,689 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:56,689 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:18:56,690 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,691 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:18:56,691 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,693 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:18:56,693 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:18:56,694 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:18:56,694 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,697 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:18:56,697 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:18:56,698 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:18:56,699 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,700 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:18:56,701 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:18:56,701 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:18:56,701 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:18:56,702 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:18:56,702 Line:1270 0
 [DEBUG] 2017-11-01 22:18:56,703 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:18:56,703 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:56,707 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:18:56,708 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:18:56,708 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:18:56,710 Line:321 flag:true
 [DEBUG] 2017-11-01 22:18:56,711 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:18:56,711 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:18:56,711 Line:1270 add
 [DEBUG] 2017-11-01 22:18:56,716 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:18:56,716 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:18:56,718 Line:321 flag:false
 [DEBUG] 2017-11-01 22:18:56,734 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:56,801 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:18:56,801 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:18:56,803 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:56,812 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:58,591 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:18:58,591 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:18:58,591 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:58,594 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:58,604 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:18:59,485 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:18:59,486 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:18:59,486 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:18:59,494 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:19:00,458 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:19:00,459 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:16:53,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:18:56,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012218565320148,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:19:00,476 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:19:00,485 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,490 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:19:00,492 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,492 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:19:00,492 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:19:00,493 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:19:00,493 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:19:00,493 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:19:00,493 Line:1270 0
 [DEBUG] 2017-11-01 22:19:00,493 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:19:00,493 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:00,495 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:00,495 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:00,496 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:19:00,497 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,497 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:19:00,497 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,498 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:19:00,498 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:19:00,498 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:19:00,499 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,501 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:19:00,501 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:19:00,502 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:19:00,502 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:19:00,502 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:19:00,502 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:19:00,502 Line:5993 6:1
 [DEBUG] 2017-11-01 22:19:00,502 Line:5993 7:
 [DEBUG] 2017-11-01 22:19:00,503 Line:5993 8:2
 [DEBUG] 2017-11-01 22:19:00,503 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:19:00,503 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:19:00,503 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:19:00,503 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:19:00,503 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:19:00,504 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:19:00,504 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:19:00,504 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:19:00,504 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:19:00,504 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:19:00,504 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:19:00,505 Line:5993 20:11
 [DEBUG] 2017-11-01 22:19:00,505 Line:5993 21:11
 [DEBUG] 2017-11-01 22:19:00,505 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:19:00,505 Line:5993 23:
 [DEBUG] 2017-11-01 22:19:00,505 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:19:00,505 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:19:00,506 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:19:00,506 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:19:00,506 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:19:00,506 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:19:00,506 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:19:00,507 Line:5993 31:
 [DEBUG] 2017-11-01 22:19:00,507 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:19:00,507 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:19:00,507 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:19:00,507 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:19:00,508 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:19:00,508 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:19:00,508 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:19:00,508 Line:5993 39:
 [DEBUG] 2017-11-01 22:19:00,509 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:19:00,509 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:19:00,509 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:19:00,510 Line:5993 43:
 [DEBUG] 2017-11-01 22:19:00,510 Line:5993 44:
 [DEBUG] 2017-11-01 22:19:00,510 Line:5993 45:1
 [DEBUG] 2017-11-01 22:19:00,510 Line:5993 46:2017-11-01 22:19:00
 [DEBUG] 2017-11-01 22:19:00,512 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:19:00,514 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:19:00,514 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:19:00,514 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,515 Line:5853 3:97763882_1711012219005140151
 [DEBUG] 2017-11-01 22:19:00,515 Line:5853 4:
 [DEBUG] 2017-11-01 22:19:00,515 Line:5853 5:
 [DEBUG] 2017-11-01 22:19:00,516 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:19:00,516 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:19:00,516 Line:5853 8:
 [DEBUG] 2017-11-01 22:19:00,516 Line:5853 9:
 [DEBUG] 2017-11-01 22:19:00,517 Line:5853 10:
 [DEBUG] 2017-11-01 22:19:00,517 Line:5853 11:
 [DEBUG] 2017-11-01 22:19:00,517 Line:5853 12:
 [DEBUG] 2017-11-01 22:19:00,517 Line:5853 13:
 [DEBUG] 2017-11-01 22:19:00,518 Line:5853 14:
 [DEBUG] 2017-11-01 22:19:00,518 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:19:00,518 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:19:00,518 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:19:00,518 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:19:00,519 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:19:00,519 Line:5853 20:0
 [DEBUG] 2017-11-01 22:19:00,519 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:19:00,519 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:19:00,519 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:19:00,519 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:19:00,520 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:19:00,520 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:19:00,520 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:19:00,520 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:19:00,520 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:19:00,521 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:19:00,521 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:19:00,521 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:19:00,521 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:19:00,521 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:19:00,521 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:19:00,522 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:19:00,522 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:19:00,522 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:19:00,522 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:19:00,522 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:19:00,523 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:19:00,523 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:19:00,523 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:19:00,523 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:19:00,523 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:19:00,523 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:19:00,524 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:19:00,524 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:19:00,524 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:19:00,524 Line:5853 50:0
 [DEBUG] 2017-11-01 22:19:00,524 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:19:00,525 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:19:00,525 Line:5853 53:0
 [DEBUG] 2017-11-01 22:19:00,525 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:19:00,525 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:19:00,525 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:19:00,525 Line:5853 57:0
 [DEBUG] 2017-11-01 22:19:00,526 Line:5853 58:0
 [DEBUG] 2017-11-01 22:19:00,526 Line:5853 59:
 [DEBUG] 2017-11-01 22:19:00,526 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:19:00,526 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:19:00,526 Line:5853 62:
 [DEBUG] 2017-11-01 22:19:00,526 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:19:00,527 Line:5853 64:0
 [DEBUG] 2017-11-01 22:19:00,527 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:19:00,530 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:19:00,530 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,531 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,531 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:19:00,532 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,532 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:19:00,532 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,533 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,534 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:19:00,535 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:00,535 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:19:00,537 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,537 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:19:00,539 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,539 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:19:00,539 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,540 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,541 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:19:00,542 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:00,542 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:19:00,542 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,543 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,544 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:19:00,544 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,544 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:19:00,545 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,545 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,546 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:19:00,546 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,546 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:19:00,547 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,547 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,548 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:19:00,548 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,548 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:19:00,549 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,549 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:19:00,550 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,551 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:19:00,552 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,552 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:19:00,553 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,553 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:19:00,554 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,554 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:19:00,555 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,556 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:19:00,556 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,557 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:19:00,557 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,558 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:19:00,559 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,559 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:19:00,559 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:19:00,559 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,560 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:19:00,560 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:19:00,561 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:19:00,562 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,563 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:19:00,564 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,566 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:19:00,566 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,567 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,567 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:19:00,568 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,569 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:19:00,570 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,570 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:19:00,571 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,571 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,571 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:19:00,573 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:00,573 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:19:00,575 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,575 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:19:00,576 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,576 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,577 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:19:00,577 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,578 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:19:00,579 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,579 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:19:00,580 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,580 Line:988 1值：true
 [DEBUG] 2017-11-01 22:19:00,580 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,581 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:19:00,581 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,581 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:19:00,583 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,583 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:19:00,583 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,583 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,584 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:19:00,585 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,586 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,586 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:19:00,586 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,586 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,587 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:19:00,587 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,588 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,589 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:19:00,589 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,589 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,590 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:19:00,590 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,591 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,592 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:19:00,593 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,593 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:19:00,594 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,594 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,595 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,595 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,596 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,597 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:19:00,597 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,597 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:19:00,597 Line:988 2值：0
 [DEBUG] 2017-11-01 22:19:00,598 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,599 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:19:00,599 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:19:00,600 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:00,600 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:19:00,601 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,602 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:19:00,602 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,602 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,603 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:19:00,604 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,605 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,605 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:19:00,605 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,605 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,606 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:19:00,607 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,608 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,609 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:19:00,610 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,610 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,611 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:00,612 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:19:00,613 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,614 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:19:00,614 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,614 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,615 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:19:00,615 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:19:00,619 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,619 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:19:00,620 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,620 Line:988 1值：
 [DEBUG] 2017-11-01 22:19:00,621 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:19:00,623 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:19:00,623 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:19:00,624 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,624 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,625 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:19:00,625 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:19:00,625 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:19:00,626 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:00,627 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:19:00,629 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,629 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:00,631 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,631 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:19:00,633 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,633 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:19:00,635 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,637 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:19:00,637 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,638 Line:988 1值：1
 [DEBUG] 2017-11-01 22:19:00,638 Line:988 2值：1
 [DEBUG] 2017-11-01 22:19:00,640 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:19:00,641 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:19:00,641 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:19:00,642 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:00,642 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,644 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:00,644 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:19:00,646 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,647 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:19:00,648 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,649 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:19:00,650 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,652 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:19:00,653 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,654 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:19:00,655 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:00,655 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:19:00,655 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:19:00,656 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,656 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,658 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:19:00,658 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:00,658 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:19:00,659 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,659 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,661 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:19:00,661 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:00,662 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:19:00,662 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,663 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:19:00,664 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:00,664 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:19:00,665 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,666 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:19:00,666 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:19:00,667 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:19:00,668 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,669 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:19:00,669 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:19:00,670 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,671 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:19:00,672 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:00,672 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:19:00,674 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,674 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:19:00,675 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,685 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:19:00,686 Line:408 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:19:00,686 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:19:00,686 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,690 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:19:00,690 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:19:00,691 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:19:00,692 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,693 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:19:00,693 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:19:00,694 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:19:00,694 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:19:00,694 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:19:00,695 Line:1270 0
 [DEBUG] 2017-11-01 22:19:00,695 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:19:00,695 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:00,698 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:00,699 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:19:00,699 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:19:00,701 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:00,701 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:19:00,702 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:00,702 Line:1270 add
 [DEBUG] 2017-11-01 22:19:00,705 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:19:00,705 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:19:00,707 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:00,713 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:19:00,801 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:19:00,802 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:19:00,804 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:19:00,813 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:19:03,484 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:19:03,485 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:19:03,485 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:19:03,490 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:19:03,500 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:19:03,549 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:19:03,550 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:03,550 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,551 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:03,551 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:19:03,552 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,553 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:19:03,554 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,554 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:19:03,555 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,555 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:19:03,556 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:19:03,556 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:19:03,556 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:19:03,556 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:19:03,556 Line:1270 0
 [DEBUG] 2017-11-01 22:19:03,556 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:19:03,557 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:03,558 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:03,559 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:19:03,559 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:19:03,560 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,560 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:19:03,561 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,561 Line:1270 delete
 [DEBUG] 2017-11-01 22:19:03,562 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:19:03,562 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:19:03,563 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,563 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:19:03,564 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,565 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:19:03,566 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,567 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:19:03,567 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,568 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:19:03,568 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:19:03,568 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:19:03,570 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,570 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:19:03,571 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,571 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,572 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,572 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,575 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:19:03,575 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:19:03,575 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:19:03,576 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:03,576 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,577 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:19:03,578 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:03,578 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:19:03,579 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,579 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:19:03,580 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:19:03,580 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:19:03,580 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:19:03,581 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:19:03,581 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:19:03,582 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,582 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:19:03,582 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,583 Line:1270 add
 [DEBUG] 2017-11-01 22:19:03,585 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:19:03,585 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:19:03,586 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,587 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:19:03,588 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,588 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:19:03,589 Line:1270 11
 [DEBUG] 2017-11-01 22:19:03,589 Line:1270 2017
 [DEBUG] 2017-11-01 22:19:03,589 Line:1270 11
 [DEBUG] 2017-11-01 22:19:03,589 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:19:03,590 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:19:03,590 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,590 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:19:03,590 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:19:03,590 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:19:03,591 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:19:03,591 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:19:03,591 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:19:03,592 Line:1270 1
 [DEBUG] 2017-11-01 22:19:03,592 Line:1270 1
 [DEBUG] 2017-11-01 22:19:03,592 Line:1270 2017-11-01 22:19:03
 [DEBUG] 2017-11-01 22:19:03,592 Line:1270 2017-11-01 22:19:00
 [DEBUG] 2017-11-01 22:19:03,593 Line:1270 00001
 [DEBUG] 2017-11-01 22:19:03,593 Line:1270 
 [DEBUG] 2017-11-01 22:19:03,593 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:19:03,594 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:19:03,594 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:19:03,594 Line:1270 1
 [DEBUG] 2017-11-01 22:19:03,594 Line:1270 00101
 [DEBUG] 2017-11-01 22:19:03,595 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:19:03,595 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:19:03,595 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:19:03,595 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:19:03,596 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:19:03,596 Line:1270 0.0
 [DEBUG] 2017-11-01 22:19:03,596 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:19:03,597 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:19:03,597 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:19:03,597 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:19:03,609 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:19:03','2017-11-01 22:19:00','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:19:03,609 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:19:03,610 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:19:03,610 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:19:03,610 Line:425 ************上述语句执行时间：22
 [DEBUG] 2017-11-01 22:19:03,610 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:19:03,611 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,612 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:19:03,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:03,613 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:19:03,614 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:19:03,614 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:19:03,615 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,615 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:19:03,622 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:19:03,622 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:19:03,623 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,623 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:19:03,624 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,625 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:19:03,625 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:19:03,625 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,625 Line:1270 00001
 [DEBUG] 2017-11-01 22:19:03,625 Line:1270 1
 [DEBUG] 2017-11-01 22:19:03,639 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:19:03,639 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:19:03,639 Line:425 ************上述语句执行时间：14
 [DEBUG] 2017-11-01 22:19:03,639 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:19:03,640 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:03,640 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:19:03,640 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:19:03,640 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:19:03,641 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:19:03,641 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:19:03,641 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:19:03,642 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:19:03,642 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:19:03,642 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:19:03,642 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:19:03,643 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:19:03,644 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,644 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:19:03,645 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,645 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:19:03,646 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,646 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:19:03,646 Line:1270 1
 [DEBUG] 2017-11-01 22:19:03,646 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:19:03,647 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:19:00@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:19:03,652 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:19:00','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:19:03,652 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:19:03,652 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:19:03,653 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,654 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:19:03,655 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,655 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:19:03,656 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,657 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:19:03,658 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,658 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:19:03,660 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,660 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:19:03,662 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,663 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:19:03,663 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:19:03,664 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:19:03,664 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:19:03,664 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:19:03,665 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:19:03,665 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:19:03,666 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:19:03,668 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:19:03,669 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:19:03,669 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:19:03,669 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:19:03,670 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:19:03,671 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,672 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:19:03,673 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,674 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:19:03,675 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,676 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:19:03,677 Line:321 flag:false
 [DEBUG] 2017-11-01 22:19:03,678 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:19:03,679 Line:321 flag:true
 [DEBUG] 2017-11-01 22:19:03,680 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:19:03,680 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:19:03,680 Line:1270 add
 [DEBUG] 2017-11-01 22:19:03,682 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:19:04,836 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:19:04,836 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:19:04,837 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:19:04,846 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:19:50,735 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:19:51,621 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:20:53,618 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:20:54,547 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:21:56,479 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:21:57,370 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:22:59,390 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:23:00,433 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:23:46,518 Line:215 ---------->SET Page 6 DEFAULT URL = /LogManageAction.do
 [ERROR] 2017-11-01 22:24:02,447 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:24:03,439 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:25:05,324 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:25:06,292 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:26:08,529 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:26:09,442 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:27:11,347 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:27:12,269 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:28:14,700 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:28:15,647 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:29:17,955 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:29:19,154 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:30:21,023 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:30:21,970 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:31:23,901 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:31:24,825 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:32:24,842 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [ERROR] 2017-11-01 22:32:27,963 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:32:28,863 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:33:30,892 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:33:31,927 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:34:33,863 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:34:34,766 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:35:36,835 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:35:37,872 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:36:02,884 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:36:02,887 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:19:03,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:19:00,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012219005140151,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:36:03,094 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:03,108 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:03,220 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:36:03,232 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,232 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:03,233 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,233 Line:1270 add
 [DEBUG] 2017-11-01 22:36:03,320 Line:425 ************上述语句执行时间：88
 [DEBUG] 2017-11-01 22:36:03,321 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,321 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,321 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,326 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:36:03,326 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,328 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,328 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:36:03,328 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,329 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,332 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:36:03,333 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,334 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,334 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,334 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,335 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,345 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:36:03,346 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,347 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,347 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,347 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,348 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,363 Line:1043 ---上述语句时间---16
 [DEBUG] 2017-11-01 22:36:03,363 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,364 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,365 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:36:03,365 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,365 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,367 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:03,368 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,369 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,369 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,369 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,370 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,380 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:36:03,380 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,381 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,382 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,382 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,382 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,391 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:36:03,392 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,393 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,393 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,393 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,394 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,403 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:36:03,403 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,405 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,405 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,405 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,405 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,416 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:36:03,416 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,418 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,418 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:36:03,418 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,418 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,424 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:36:03,424 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,425 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,426 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:36:03,426 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,426 Line:988 1值：1
 [DEBUG] 2017-11-01 22:36:03,427 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,432 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:36:03,432 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:36:03,433 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,433 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:36:03,434 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:03,434 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,436 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:03,436 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:36:03,437 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:36:03,437 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:36:03,437 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:36:03,437 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:36:03,437 Line:313 exeCondition:tblBuyInStock_Delete_One :'1' != '0'
 [DEBUG] 2017-11-01 22:36:03,439 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,439 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_updateStocksNotAudit(?,@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:03,439 Line:1270 '2017-09-09'
 [DEBUG] 2017-11-01 22:36:03,439 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:03,440 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:03,440 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:03,440 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:03,440 Line:1270 0
 [DEBUG] 2017-11-01 22:36:03,440 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:03,441 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:03,462 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:03,462 Line:425 ************上述语句执行时间：23
 [DEBUG] 2017-11-01 22:36:03,462 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:36:03,464 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,464 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:03,464 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,464 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:03,465 Line:1270 1
 [DEBUG] 2017-11-01 22:36:03,610 Line:425 ************上述语句执行时间：146
 [DEBUG] 2017-11-01 22:36:03,611 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:36:03,612 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,613 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:03,613 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:36:03,613 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,613 Line:1270 00001
 [DEBUG] 2017-11-01 22:36:03,614 Line:1270 1
 [DEBUG] 2017-11-01 22:36:03,793 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:36:03,794 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:36:03,794 Line:425 ************上述语句执行时间：182
 [DEBUG] 2017-11-01 22:36:03,794 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:36:03,796 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,796 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:03,797 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,797 Line:1270 delete
 [DEBUG] 2017-11-01 22:36:03,894 Line:425 ************上述语句执行时间：98
 [DEBUG] 2017-11-01 22:36:03,895 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:36:03,896 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,897 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:03,897 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:03,897 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:36:03,898 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:36:03,987 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:36:03,987 Line:425 ************上述语句执行时间：90
 [DEBUG] 2017-11-01 22:36:03,987 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:36:03,988 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,989 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:36:03,990 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,990 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:36:03,991 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:03,991 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:36:03,992 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:03,993 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:03,993 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:03,993 Line:1270 delete
 [DEBUG] 2017-11-01 22:36:04,005 Line:425 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:36:04,005 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:36:04,006 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:04,007 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:36:04,007 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,007 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,008 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,008 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,009 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,009 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,009 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,199 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:36:04,199 Line:408 ************上述语句执行时间：192
 [DEBUG] 2017-11-01 22:36:04,199 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:36:04,199 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:04,200 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:04,207 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:04,207 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:36:04,208 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:36:04,209 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:04,210 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:36:04,210 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:04,210 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:04,210 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:04,219 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:36:04,219 Line:408 ************上述语句执行时间：10
 [DEBUG] 2017-11-01 22:36:05,769 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:36:05,772 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:36:05,774 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:05,792 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:11,362 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:36:11,366 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:19:03,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:19:00,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012219005140151,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:36:11,399 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:11,419 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,431 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:36:11,433 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,434 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:11,434 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:11,435 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:11,435 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:11,435 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:11,436 Line:1270 0
 [DEBUG] 2017-11-01 22:36:11,436 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:11,436 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:11,441 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:11,441 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:36:11,441 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:36:11,443 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,443 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:36:11,444 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,447 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:36:11,447 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:11,447 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:11,449 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,455 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:36:11,456 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:36:11,456 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:36:11,456 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:36:11,456 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:36:11,457 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:36:11,457 Line:5993 6:1
 [DEBUG] 2017-11-01 22:36:11,457 Line:5993 7:
 [DEBUG] 2017-11-01 22:36:11,457 Line:5993 8:2
 [DEBUG] 2017-11-01 22:36:11,458 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:36:11,458 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:36:11,458 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:36:11,458 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:36:11,458 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:36:11,459 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:36:11,459 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:36:11,459 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:11,460 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:36:11,460 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:36:11,460 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:36:11,461 Line:5993 20:11
 [DEBUG] 2017-11-01 22:36:11,461 Line:5993 21:11
 [DEBUG] 2017-11-01 22:36:11,461 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:36:11,461 Line:5993 23:
 [DEBUG] 2017-11-01 22:36:11,462 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:36:11,462 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:36:11,462 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:11,462 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:36:11,463 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:36:11,463 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:36:11,463 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:36:11,464 Line:5993 31:
 [DEBUG] 2017-11-01 22:36:11,464 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:36:11,464 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:36:11,465 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:36:11,465 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:36:11,465 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:36:11,465 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:36:11,466 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:36:11,466 Line:5993 39:
 [DEBUG] 2017-11-01 22:36:11,466 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:36:11,467 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:36:11,467 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:36:11,467 Line:5993 43:
 [DEBUG] 2017-11-01 22:36:11,467 Line:5993 44:
 [DEBUG] 2017-11-01 22:36:11,468 Line:5993 45:1
 [DEBUG] 2017-11-01 22:36:11,468 Line:5993 46:2017-11-01 22:36:11
 [DEBUG] 2017-11-01 22:36:11,499 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:36:11,506 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:36:11,507 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:11,507 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,507 Line:5853 3:97763882_1711012236115060157
 [DEBUG] 2017-11-01 22:36:11,507 Line:5853 4:
 [DEBUG] 2017-11-01 22:36:11,508 Line:5853 5:
 [DEBUG] 2017-11-01 22:36:11,508 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:36:11,508 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:36:11,509 Line:5853 8:
 [DEBUG] 2017-11-01 22:36:11,509 Line:5853 9:
 [DEBUG] 2017-11-01 22:36:11,509 Line:5853 10:
 [DEBUG] 2017-11-01 22:36:11,509 Line:5853 11:
 [DEBUG] 2017-11-01 22:36:11,510 Line:5853 12:
 [DEBUG] 2017-11-01 22:36:11,510 Line:5853 13:
 [DEBUG] 2017-11-01 22:36:11,510 Line:5853 14:
 [DEBUG] 2017-11-01 22:36:11,510 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:36:11,511 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:36:11,511 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:36:11,511 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:36:11,512 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:36:11,512 Line:5853 20:0
 [DEBUG] 2017-11-01 22:36:11,512 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:36:11,512 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:36:11,513 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:36:11,513 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:36:11,513 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:36:11,514 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:36:11,514 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:36:11,514 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:36:11,514 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:36:11,515 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:36:11,515 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:36:11,515 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:36:11,516 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:36:11,516 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:36:11,516 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:36:11,516 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:36:11,517 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:36:11,517 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:36:11,517 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:36:11,517 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:36:11,518 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:36:11,518 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:36:11,518 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:36:11,519 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:36:11,519 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:36:11,519 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:36:11,519 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:36:11,520 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:36:11,520 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:36:11,520 Line:5853 50:0
 [DEBUG] 2017-11-01 22:36:11,521 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:36:11,521 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:36:11,521 Line:5853 53:0
 [DEBUG] 2017-11-01 22:36:11,521 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:36:11,521 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:36:11,522 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:36:11,522 Line:5853 57:0
 [DEBUG] 2017-11-01 22:36:11,522 Line:5853 58:0
 [DEBUG] 2017-11-01 22:36:11,522 Line:5853 59:
 [DEBUG] 2017-11-01 22:36:11,522 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:36:11,523 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:36:11,523 Line:5853 62:
 [DEBUG] 2017-11-01 22:36:11,523 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:36:11,523 Line:5853 64:0
 [DEBUG] 2017-11-01 22:36:11,523 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:36:11,533 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:36:11,533 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,533 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,539 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:36:11,540 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:36:11,540 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:36:11,541 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,541 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,549 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:36:11,550 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:36:11,550 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:11,552 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,553 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:11,554 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,554 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:36:11,555 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,555 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,568 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:36:11,569 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:36:11,569 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:36:11,569 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,570 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,579 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:36:11,579 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:36:11,580 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:36:11,580 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,580 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,583 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:36:11,583 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:11,583 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:36:11,584 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,584 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,588 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:36:11,588 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:36:11,588 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:11,589 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,590 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:11,591 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,591 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:11,592 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,593 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:11,594 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,595 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:36:11,597 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,597 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:36:11,599 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,599 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:36:11,600 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,601 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:36:11,602 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,603 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:11,604 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,604 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:11,604 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:11,605 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,609 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:36:11,609 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:36:11,609 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:36:11,611 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,611 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:11,612 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,613 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:36:11,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,614 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,614 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:36:11,619 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:36:11,620 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:11,621 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,621 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:11,621 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,622 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,622 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:11,630 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:36:11,630 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:11,631 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,632 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:11,632 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,632 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,632 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:11,640 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:36:11,640 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:11,641 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,641 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:36:11,642 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,642 Line:988 1值：true
 [DEBUG] 2017-11-01 22:36:11,642 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,655 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:36:11,655 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:36:11,655 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:11,657 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,658 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:36:11,658 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,659 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,679 Line:1043 ---上述语句时间---21
 [DEBUG] 2017-11-01 22:36:11,679 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,680 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,681 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:36:11,681 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,681 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,688 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:36:11,688 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,689 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,690 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:36:11,690 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,690 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,697 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:36:11,698 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,699 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,699 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:36:11,700 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,700 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:36:11,701 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,701 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,704 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:36:11,705 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,706 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,706 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:36:11,706 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,707 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:36:11,707 Line:988 2值：0
 [DEBUG] 2017-11-01 22:36:11,707 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,725 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:11,725 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:11,725 Line:1043 ---上述语句时间---19
 [DEBUG] 2017-11-01 22:36:11,726 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:36:11,727 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,727 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:36:11,727 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,728 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,745 Line:1043 ---上述语句时间---18
 [DEBUG] 2017-11-01 22:36:11,746 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,747 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,747 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:36:11,747 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,748 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,759 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:36:11,760 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,761 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,762 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:36:11,762 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,763 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,766 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:36:11,766 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:11,767 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,767 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:36:11,767 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,768 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,773 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:36:11,773 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:36:11,775 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,775 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:36:11,775 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,776 Line:988 1值：
 [DEBUG] 2017-11-01 22:36:11,776 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:36:11,781 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:36:11,781 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:36:11,782 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,782 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,782 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:11,782 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:11,783 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:11,789 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:36:11,789 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:36:11,791 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,791 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:11,792 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,792 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:36:11,793 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,794 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:36:11,794 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,796 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:36:11,796 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,796 Line:988 1值：1
 [DEBUG] 2017-11-01 22:36:11,796 Line:988 2值：1
 [DEBUG] 2017-11-01 22:36:11,807 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:36:11,808 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:36:11,808 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:36:11,808 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:11,809 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,841 Line:1043 ---上述语句时间---33
 [DEBUG] 2017-11-01 22:36:11,841 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:36:11,842 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,843 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:36:11,844 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,845 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:11,845 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,847 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:36:11,847 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,853 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:11,853 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:36:11,853 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:11,854 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:36:11,854 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,854 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,864 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:11,864 Line:229 ************上述语句执行时间：11
 [DEBUG] 2017-11-01 22:36:11,864 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:11,865 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,865 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,877 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:11,877 Line:229 ************上述语句执行时间：13
 [DEBUG] 2017-11-01 22:36:11,877 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:36:11,878 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,885 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:11,885 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:36:11,885 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:36:11,886 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,899 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:11,900 Line:229 ************上述语句执行时间：15
 [DEBUG] 2017-11-01 22:36:11,900 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:11,902 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,902 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:11,903 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:11,903 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,904 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:11,904 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:11,904 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:36:11,905 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,905 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:11,906 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,925 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:11,926 Line:408 ************上述语句执行时间：21
 [DEBUG] 2017-11-01 22:36:11,926 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:11,926 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,944 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:11,944 Line:408 ************上述语句执行时间：18
 [DEBUG] 2017-11-01 22:36:11,945 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:11,946 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,946 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:11,946 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:11,947 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:11,947 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:11,947 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:11,947 Line:1270 0
 [DEBUG] 2017-11-01 22:36:11,947 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:11,948 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:11,949 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:11,950 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:11,950 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:11,951 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:11,952 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:11,952 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:11,952 Line:1270 add
 [DEBUG] 2017-11-01 22:36:11,955 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:36:11,955 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:11,957 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:11,969 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:12,055 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:12,056 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:12,077 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:12,091 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:14,990 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:36:14,991 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:36:14,991 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:14,996 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:15,006 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:15,972 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:15,972 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:15,973 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:15,981 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:16,979 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:36:16,981 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:19:03,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:36:11,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012236115060157,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:36:16,998 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:17,006 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,010 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:36:17,012 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,012 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:17,012 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:17,013 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:17,013 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:17,013 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:17,014 Line:1270 0
 [DEBUG] 2017-11-01 22:36:17,014 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:17,014 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:17,016 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:17,016 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:17,017 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:36:17,018 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,018 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:36:17,019 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,019 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:36:17,019 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:17,020 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:17,021 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,023 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:36:17,023 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:36:17,023 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:36:17,023 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:36:17,023 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:36:17,024 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:36:17,024 Line:5993 6:1
 [DEBUG] 2017-11-01 22:36:17,024 Line:5993 7:
 [DEBUG] 2017-11-01 22:36:17,024 Line:5993 8:2
 [DEBUG] 2017-11-01 22:36:17,024 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:36:17,025 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:36:17,025 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:36:17,025 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:36:17,026 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:36:17,026 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:36:17,026 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:36:17,026 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:17,027 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:36:17,027 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:36:17,027 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:36:17,027 Line:5993 20:11
 [DEBUG] 2017-11-01 22:36:17,027 Line:5993 21:11
 [DEBUG] 2017-11-01 22:36:17,028 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:36:17,028 Line:5993 23:
 [DEBUG] 2017-11-01 22:36:17,028 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:36:17,028 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:36:17,029 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:17,029 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:36:17,029 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:36:17,029 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:36:17,030 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:36:17,030 Line:5993 31:
 [DEBUG] 2017-11-01 22:36:17,030 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:36:17,031 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:36:17,031 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:36:17,031 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:36:17,032 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:36:17,032 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:36:17,032 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:36:17,032 Line:5993 39:
 [DEBUG] 2017-11-01 22:36:17,033 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:36:17,033 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:36:17,033 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:36:17,034 Line:5993 43:
 [DEBUG] 2017-11-01 22:36:17,034 Line:5993 44:
 [DEBUG] 2017-11-01 22:36:17,034 Line:5993 45:1
 [DEBUG] 2017-11-01 22:36:17,034 Line:5993 46:2017-11-01 22:36:17
 [DEBUG] 2017-11-01 22:36:17,037 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:36:17,038 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:36:17,038 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:17,038 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,038 Line:5853 3:97763882_1711012236170370160
 [DEBUG] 2017-11-01 22:36:17,038 Line:5853 4:
 [DEBUG] 2017-11-01 22:36:17,039 Line:5853 5:
 [DEBUG] 2017-11-01 22:36:17,039 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:36:17,039 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:36:17,039 Line:5853 8:
 [DEBUG] 2017-11-01 22:36:17,039 Line:5853 9:
 [DEBUG] 2017-11-01 22:36:17,040 Line:5853 10:
 [DEBUG] 2017-11-01 22:36:17,040 Line:5853 11:
 [DEBUG] 2017-11-01 22:36:17,040 Line:5853 12:
 [DEBUG] 2017-11-01 22:36:17,040 Line:5853 13:
 [DEBUG] 2017-11-01 22:36:17,040 Line:5853 14:
 [DEBUG] 2017-11-01 22:36:17,040 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:36:17,041 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:36:17,041 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:36:17,041 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:36:17,041 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:36:17,041 Line:5853 20:0
 [DEBUG] 2017-11-01 22:36:17,041 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:36:17,042 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:36:17,042 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:36:17,042 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:36:17,042 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:36:17,042 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:36:17,043 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:36:17,043 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:36:17,043 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:36:17,043 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:36:17,043 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:36:17,043 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:36:17,044 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:36:17,044 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:36:17,044 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:36:17,044 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:36:17,044 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:36:17,045 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:36:17,045 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:36:17,045 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:36:17,045 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:36:17,045 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:36:17,045 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:36:17,046 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:36:17,046 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:36:17,046 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:36:17,046 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:36:17,046 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:36:17,046 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:36:17,047 Line:5853 50:0
 [DEBUG] 2017-11-01 22:36:17,047 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:36:17,047 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:36:17,047 Line:5853 53:0
 [DEBUG] 2017-11-01 22:36:17,047 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:36:17,047 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:36:17,048 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:36:17,048 Line:5853 57:0
 [DEBUG] 2017-11-01 22:36:17,048 Line:5853 58:0
 [DEBUG] 2017-11-01 22:36:17,048 Line:5853 59:
 [DEBUG] 2017-11-01 22:36:17,048 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:36:17,048 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:36:17,049 Line:5853 62:
 [DEBUG] 2017-11-01 22:36:17,049 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:36:17,049 Line:5853 64:0
 [DEBUG] 2017-11-01 22:36:17,049 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:36:17,051 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:36:17,051 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,052 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,052 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:36:17,053 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,053 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:36:17,053 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,053 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,054 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:36:17,054 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,054 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:17,055 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,056 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:17,057 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,057 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:36:17,057 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,057 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,058 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:36:17,059 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,059 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:36:17,059 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,059 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,060 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:36:17,060 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,060 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:36:17,060 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,061 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,061 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:36:17,062 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,062 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:36:17,062 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,062 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,063 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:36:17,063 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,063 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:17,064 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,065 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:17,066 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,066 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:17,067 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,068 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:17,069 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,069 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:36:17,070 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,071 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:36:17,072 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,072 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:36:17,073 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,073 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:36:17,074 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,074 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:17,075 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,076 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:17,076 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:17,076 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,077 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:36:17,077 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:17,077 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:36:17,078 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,079 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:17,079 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,080 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:36:17,081 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,081 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,081 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:36:17,082 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,082 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:17,083 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,084 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:17,084 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,085 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,085 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:17,086 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,086 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:17,088 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,088 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:17,089 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,089 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,089 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:17,091 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:17,092 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:17,093 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,094 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:36:17,094 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,095 Line:988 1值：true
 [DEBUG] 2017-11-01 22:36:17,095 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,097 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:36:17,097 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:17,098 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:17,099 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,099 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:36:17,099 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,100 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,100 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,101 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,102 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,102 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:36:17,103 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,103 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,104 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,104 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,105 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,105 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:36:17,105 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,106 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,107 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,107 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,108 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,108 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:36:17,110 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,110 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:36:17,110 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,110 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,111 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,111 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,113 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,113 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:36:17,113 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,113 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:36:17,113 Line:988 2值：0
 [DEBUG] 2017-11-01 22:36:17,114 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,115 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:17,115 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:17,115 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,116 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:36:17,117 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,117 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:36:17,117 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,117 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,118 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,119 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,120 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,120 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:36:17,120 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,120 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,121 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,121 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,122 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,123 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:36:17,123 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,124 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,124 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,124 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:17,125 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,126 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:36:17,126 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,126 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,127 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,127 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:36:17,128 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,128 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:36:17,128 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,128 Line:988 1值：
 [DEBUG] 2017-11-01 22:36:17,129 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:36:17,130 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,130 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:36:17,130 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,131 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,131 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:17,131 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:17,132 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:17,132 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,132 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:36:17,134 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,134 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:17,135 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,135 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:36:17,136 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,136 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:36:17,137 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,138 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:36:17,138 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,139 Line:988 1值：1
 [DEBUG] 2017-11-01 22:36:17,139 Line:988 2值：1
 [DEBUG] 2017-11-01 22:36:17,140 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:36:17,140 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:17,140 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:36:17,140 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:17,141 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,141 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:17,142 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:36:17,143 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,143 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:36:17,144 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,144 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:17,146 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,147 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:36:17,147 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,148 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:17,148 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:17,149 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:17,149 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:36:17,150 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,150 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,151 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:17,151 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:17,151 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:17,152 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,152 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,153 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:17,153 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:17,154 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:36:17,154 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,154 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:17,155 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:17,155 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:36:17,156 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,156 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:17,156 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:17,157 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:17,158 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,158 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:17,158 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:17,159 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,159 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:17,159 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:17,160 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:36:17,161 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,161 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:17,161 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,163 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:17,163 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:17,163 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:17,164 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,165 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:17,166 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:36:17,166 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:17,167 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,167 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:17,168 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:17,168 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:17,168 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:17,168 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:17,168 Line:1270 0
 [DEBUG] 2017-11-01 22:36:17,169 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:17,169 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:17,171 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:17,171 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:17,172 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:17,173 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:17,173 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:17,173 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:17,174 Line:1270 add
 [DEBUG] 2017-11-01 22:36:17,176 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:36:17,176 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:17,177 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:17,180 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:17,264 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:17,264 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:17,266 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:17,275 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:21,452 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:36:21,453 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:36:21,453 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:21,458 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:21,468 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:22,621 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:22,622 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:22,622 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:22,631 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:28,547 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:36:28,549 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:19:03,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:36:17,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012236170370160,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:36:28,579 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:28,588 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,595 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:36:28,596 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,597 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:28,597 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:28,597 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:28,598 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:28,598 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:28,598 Line:1270 0
 [DEBUG] 2017-11-01 22:36:28,599 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:28,599 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:28,602 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:28,602 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:36:28,603 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:36:28,604 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,605 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:36:28,605 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,606 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:36:28,606 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:28,607 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:28,608 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,610 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:36:28,611 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:36:28,611 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:36:28,611 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:36:28,611 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:36:28,612 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:36:28,612 Line:5993 6:1
 [DEBUG] 2017-11-01 22:36:28,612 Line:5993 7:
 [DEBUG] 2017-11-01 22:36:28,612 Line:5993 8:2
 [DEBUG] 2017-11-01 22:36:28,612 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:36:28,613 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:36:28,613 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:36:28,613 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:36:28,613 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:36:28,613 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:36:28,614 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:36:28,614 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:28,614 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:36:28,614 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:36:28,614 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:36:28,615 Line:5993 20:11
 [DEBUG] 2017-11-01 22:36:28,615 Line:5993 21:11
 [DEBUG] 2017-11-01 22:36:28,615 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:36:28,615 Line:5993 23:
 [DEBUG] 2017-11-01 22:36:28,615 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:36:28,616 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:36:28,617 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:28,617 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:36:28,617 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:36:28,617 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:36:28,617 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:36:28,618 Line:5993 31:
 [DEBUG] 2017-11-01 22:36:28,618 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:36:28,618 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:36:28,619 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:36:28,619 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:36:28,619 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:36:28,619 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:36:28,620 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:36:28,620 Line:5993 39:
 [DEBUG] 2017-11-01 22:36:28,620 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:36:28,621 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:36:28,621 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:36:28,621 Line:5993 43:
 [DEBUG] 2017-11-01 22:36:28,621 Line:5993 44:
 [DEBUG] 2017-11-01 22:36:28,622 Line:5993 45:1
 [DEBUG] 2017-11-01 22:36:28,622 Line:5993 46:2017-11-01 22:36:28
 [DEBUG] 2017-11-01 22:36:28,624 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:36:28,625 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:36:28,625 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:28,626 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,626 Line:5853 3:97763882_1711012236286250163
 [DEBUG] 2017-11-01 22:36:28,626 Line:5853 4:
 [DEBUG] 2017-11-01 22:36:28,626 Line:5853 5:
 [DEBUG] 2017-11-01 22:36:28,627 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:36:28,627 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:36:28,627 Line:5853 8:
 [DEBUG] 2017-11-01 22:36:28,627 Line:5853 9:
 [DEBUG] 2017-11-01 22:36:28,627 Line:5853 10:
 [DEBUG] 2017-11-01 22:36:28,627 Line:5853 11:
 [DEBUG] 2017-11-01 22:36:28,628 Line:5853 12:
 [DEBUG] 2017-11-01 22:36:28,628 Line:5853 13:
 [DEBUG] 2017-11-01 22:36:28,628 Line:5853 14:
 [DEBUG] 2017-11-01 22:36:28,628 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:36:28,628 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:36:28,629 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:36:28,629 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:36:28,629 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:36:28,629 Line:5853 20:0
 [DEBUG] 2017-11-01 22:36:28,629 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:36:28,630 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:36:28,630 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:36:28,630 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:36:28,630 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:36:28,632 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:36:28,632 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:36:28,632 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:36:28,633 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:36:28,633 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:36:28,633 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:36:28,633 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:36:28,634 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:36:28,634 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:36:28,634 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:36:28,634 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:36:28,635 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:36:28,635 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:36:28,635 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:36:28,635 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:36:28,636 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:36:28,636 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:36:28,636 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:36:28,636 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:36:28,636 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:36:28,637 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:36:28,637 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:36:28,637 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:36:28,637 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:36:28,637 Line:5853 50:0
 [DEBUG] 2017-11-01 22:36:28,638 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:36:28,638 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:36:28,638 Line:5853 53:0
 [DEBUG] 2017-11-01 22:36:28,638 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:36:28,638 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:36:28,639 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:36:28,639 Line:5853 57:0
 [DEBUG] 2017-11-01 22:36:28,639 Line:5853 58:0
 [DEBUG] 2017-11-01 22:36:28,639 Line:5853 59:
 [DEBUG] 2017-11-01 22:36:28,639 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:36:28,640 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:36:28,640 Line:5853 62:
 [DEBUG] 2017-11-01 22:36:28,640 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:36:28,640 Line:5853 64:0
 [DEBUG] 2017-11-01 22:36:28,640 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:36:28,643 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:36:28,644 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,656 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,657 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:36:28,658 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:36:28,658 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:36:28,658 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,659 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,660 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:36:28,661 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:28,661 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:28,674 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,674 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:28,676 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,676 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:36:28,677 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,677 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,678 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:36:28,678 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,678 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:36:28,679 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,679 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,680 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:36:28,680 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,680 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:36:28,680 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,681 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,681 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:36:28,682 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,682 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:36:28,682 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,683 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,684 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:36:28,684 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,684 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:28,686 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,686 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:28,688 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,688 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:28,689 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,690 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:28,691 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,692 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:36:28,694 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,694 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:36:28,695 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,695 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:36:28,696 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,696 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:36:28,697 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,698 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:28,699 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,699 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:28,699 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:28,700 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,700 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:36:28,700 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:28,701 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:36:28,702 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,702 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:28,703 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,704 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:36:28,704 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,704 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,704 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:36:28,705 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,705 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:28,706 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,707 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:28,707 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,707 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,707 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:28,708 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,708 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:28,709 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,710 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:28,710 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,710 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,710 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:28,711 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,711 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:28,712 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,712 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:36:28,713 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,713 Line:988 1值：true
 [DEBUG] 2017-11-01 22:36:28,713 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,714 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:36:28,714 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,714 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:28,715 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,716 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:36:28,716 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,716 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,717 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,717 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,718 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,719 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:36:28,719 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,719 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,720 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,721 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,722 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,723 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:36:28,723 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,723 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,724 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,725 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,726 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,726 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:36:28,727 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,727 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:36:28,727 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,728 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,729 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,729 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,730 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,730 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:36:28,730 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,731 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:36:28,731 Line:988 2值：0
 [DEBUG] 2017-11-01 22:36:28,731 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,732 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:28,732 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:28,733 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:28,733 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:36:28,734 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,734 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:36:28,734 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,734 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,735 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,735 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,736 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,737 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:36:28,737 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,737 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,738 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,738 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,739 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,741 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:36:28,741 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,741 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,742 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,742 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:28,743 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,744 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:36:28,744 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,744 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,745 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:28,745 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:36:28,746 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,746 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:36:28,747 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,747 Line:988 1值：
 [DEBUG] 2017-11-01 22:36:28,747 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:36:28,749 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:28,749 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:36:28,749 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,749 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,750 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:28,750 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:28,750 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:28,751 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,751 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:36:28,752 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,752 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:28,754 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,754 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:36:28,755 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,756 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:36:28,757 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,758 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:36:28,758 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,758 Line:988 1值：1
 [DEBUG] 2017-11-01 22:36:28,759 Line:988 2值：1
 [DEBUG] 2017-11-01 22:36:28,760 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:36:28,760 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,760 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:36:28,761 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:28,761 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,762 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:28,762 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:36:28,764 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,764 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:36:28,766 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,766 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:28,768 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,769 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:36:28,770 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,770 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:28,771 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:28,772 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:28,772 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:36:28,773 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,773 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,774 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:28,774 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:28,774 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:28,775 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,775 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,776 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:28,776 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:28,777 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:36:28,777 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,778 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:28,778 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:28,779 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:36:28,779 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,780 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:28,780 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:28,780 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:28,782 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,783 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:28,783 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:28,783 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,784 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:28,785 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:36:28,785 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:36:28,787 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,787 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:28,788 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,790 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:28,790 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:36:28,791 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:28,791 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,792 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:28,793 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:28,793 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:28,794 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,794 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:28,795 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:28,795 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:28,795 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:28,795 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:28,795 Line:1270 0
 [DEBUG] 2017-11-01 22:36:28,796 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:28,796 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:28,798 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:28,798 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:28,798 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:28,799 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:28,800 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:28,800 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:28,800 Line:1270 add
 [DEBUG] 2017-11-01 22:36:28,802 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:28,802 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:28,804 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:28,806 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:28,852 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:28,852 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:28,854 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:28,861 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:30,369 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:30,370 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:30,370 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:30,377 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:38,181 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ViewStoreDetail&src=menu&winCurIndex=7
 [DEBUG] 2017-11-01 22:36:38,182 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ViewStoreDetail,];src=[menu,];winCurIndex=[7,];
 [DEBUG] 2017-11-01 22:36:38,182 Line:215 ---------->SET Page 7 DEFAULT URL = /ReportDataAction.do?reportNumber=ViewStoreDetail
 [DEBUG] 2017-11-01 22:36:38,572 Line:5227 GlobalsTool.js 生成js 时间124:/js/gen/report.vjs_zh_CN.js
 [ERROR] 2017-11-01 22:36:40,203 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:36:41,127 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:36:43,455 Line:152 UtilServlet.service 请求地址：/UtilServlet
 [DEBUG] 2017-11-01 22:36:43,456 Line:163 UtilServlet.service 操作人:admin;请求数据：selectName=[ReportSelectGoods_v2,];operation=[PopupTitle,];MOID=[29964431_1404241451132920009,];MOOP=[query,];selectField=[tblGoods.GoodsNumber,];
 [DEBUG] 2017-11-01 22:36:43,687 Line:152 UtilServlet.service 请求地址：/UtilServlet
 [DEBUG] 2017-11-01 22:36:43,688 Line:163 UtilServlet.service 操作人:admin;请求数据：selectName=[ReportSelectGoods_v2,];operation=[DropdownPopup,];MOID=[29964431_1404241451132920009,];MOOP=[query,];selectField=[tblGoods.GoodsNumber,];selectValue=[lm01-04,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:36:43,695 Line:3434 DynDBManager.popSelect selectName=ReportSelectGoods_v2; sql=select * from (select tblGoods.classCode f1 ,tblGoods.isCatalog f2 ,tblGoods.GoodsNumber f3 ,tblGoods.GoodsFullName f4 ,tblGoods.GoodsSpec f5 ,tblGoods.BaseUnit f6 ,tblGoods.BarCode f7 ,tblGoods.GoodsFullNamePYM f8 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods
      where 1=1  and tblGoods.workFlowNodeName='finish' and ( tblGoods.GoodsNumber like '%lm01-04%' or  ( tblGoods.BarCode like '%lm01-04%' or tblGoods.GoodsFullNamePYM like '%lm01-04%'))) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-11-01 22:36:45,324 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:36:45,325 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:36:45,349 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:36:45,505 Line:689 通过SQL读原始数据：155
 [DEBUG] 2017-11-01 22:36:45,511 Line:1391 整理数据：5
 [DEBUG] 2017-11-01 22:36:57,508 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:36:57,510 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:19:03,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:36:28,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012236286250163,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:36:57,529 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:57,539 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,544 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:36:57,546 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,546 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:57,547 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:57,547 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:57,548 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:57,548 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:57,548 Line:1270 0
 [DEBUG] 2017-11-01 22:36:57,548 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:57,549 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:57,552 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:57,552 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:36:57,552 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:36:57,554 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,554 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:36:57,555 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,572 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:36:57,573 Line:408 ************上述语句执行时间：19
 [DEBUG] 2017-11-01 22:36:57,573 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:57,586 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,588 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:36:57,589 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:36:57,589 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:36:57,589 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:36:57,589 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:36:57,589 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:36:57,590 Line:5993 6:1
 [DEBUG] 2017-11-01 22:36:57,590 Line:5993 7:
 [DEBUG] 2017-11-01 22:36:57,590 Line:5993 8:2
 [DEBUG] 2017-11-01 22:36:57,590 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:36:57,591 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:36:57,591 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:36:57,591 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:36:57,591 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:36:57,591 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:36:57,592 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:36:57,592 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:57,592 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:36:57,592 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:36:57,592 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:36:57,592 Line:5993 20:11
 [DEBUG] 2017-11-01 22:36:57,593 Line:5993 21:11
 [DEBUG] 2017-11-01 22:36:57,593 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:36:57,593 Line:5993 23:
 [DEBUG] 2017-11-01 22:36:57,593 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:36:57,594 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:36:57,594 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:57,594 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:36:57,594 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:36:57,595 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:36:57,595 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:36:57,595 Line:5993 31:
 [DEBUG] 2017-11-01 22:36:57,595 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:36:57,595 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:36:57,596 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:36:57,596 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:36:57,596 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:36:57,596 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:36:57,597 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:36:57,597 Line:5993 39:
 [DEBUG] 2017-11-01 22:36:57,597 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:36:57,597 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:36:57,597 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:36:57,598 Line:5993 43:
 [DEBUG] 2017-11-01 22:36:57,598 Line:5993 44:
 [DEBUG] 2017-11-01 22:36:57,598 Line:5993 45:1
 [DEBUG] 2017-11-01 22:36:57,598 Line:5993 46:2017-11-01 22:36:57
 [DEBUG] 2017-11-01 22:36:57,600 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:36:57,601 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:36:57,602 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:57,602 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,602 Line:5853 3:97763882_1711012236576010165
 [DEBUG] 2017-11-01 22:36:57,603 Line:5853 4:
 [DEBUG] 2017-11-01 22:36:57,603 Line:5853 5:
 [DEBUG] 2017-11-01 22:36:57,603 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:36:57,603 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:36:57,603 Line:5853 8:
 [DEBUG] 2017-11-01 22:36:57,603 Line:5853 9:
 [DEBUG] 2017-11-01 22:36:57,604 Line:5853 10:
 [DEBUG] 2017-11-01 22:36:57,604 Line:5853 11:
 [DEBUG] 2017-11-01 22:36:57,604 Line:5853 12:
 [DEBUG] 2017-11-01 22:36:57,604 Line:5853 13:
 [DEBUG] 2017-11-01 22:36:57,604 Line:5853 14:
 [DEBUG] 2017-11-01 22:36:57,604 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:36:57,605 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:36:57,605 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:36:57,605 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:36:57,605 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:36:57,605 Line:5853 20:0
 [DEBUG] 2017-11-01 22:36:57,606 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:36:57,606 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:36:57,606 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:36:57,606 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:36:57,606 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:36:57,607 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:36:57,607 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:36:57,607 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:36:57,607 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:36:57,607 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:36:57,608 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:36:57,608 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:36:57,608 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:36:57,608 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:36:57,608 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:36:57,609 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:36:57,609 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:36:57,609 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:36:57,609 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:36:57,610 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:36:57,610 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:36:57,610 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:36:57,610 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:36:57,611 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:36:57,611 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:36:57,611 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:36:57,612 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:36:57,612 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:36:57,612 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:36:57,612 Line:5853 50:0
 [DEBUG] 2017-11-01 22:36:57,612 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:36:57,612 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:36:57,613 Line:5853 53:0
 [DEBUG] 2017-11-01 22:36:57,613 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:36:57,613 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:36:57,613 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:36:57,613 Line:5853 57:0
 [DEBUG] 2017-11-01 22:36:57,614 Line:5853 58:0
 [DEBUG] 2017-11-01 22:36:57,614 Line:5853 59:
 [DEBUG] 2017-11-01 22:36:57,614 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:36:57,615 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:36:57,615 Line:5853 62:
 [DEBUG] 2017-11-01 22:36:57,615 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:36:57,615 Line:5853 64:0
 [DEBUG] 2017-11-01 22:36:57,616 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:36:57,619 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:36:57,620 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,620 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,622 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:36:57,622 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:57,623 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:36:57,623 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,624 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,625 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:36:57,626 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:57,626 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:57,627 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,628 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:57,629 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,629 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:36:57,630 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,630 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,631 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:36:57,631 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,632 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:36:57,632 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,632 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,633 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:36:57,634 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,634 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:36:57,634 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,635 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,636 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:36:57,636 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,636 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:36:57,636 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,637 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,638 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:36:57,638 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,638 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:57,640 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,640 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:36:57,642 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,642 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:57,643 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,644 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:36:57,645 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,646 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:36:57,647 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,648 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:36:57,649 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,650 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:36:57,651 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,652 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:36:57,653 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,654 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:57,655 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,656 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:57,656 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:57,656 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,657 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:36:57,657 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:57,658 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:36:57,660 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,660 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:57,661 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,663 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:36:57,663 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,663 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,664 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:36:57,664 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:36:57,665 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:57,666 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,666 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:57,667 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,667 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,667 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:57,668 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,669 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:57,670 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,670 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:36:57,671 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,671 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,671 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:36:57,672 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,673 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:57,674 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,674 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:36:57,675 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,675 Line:988 1值：true
 [DEBUG] 2017-11-01 22:36:57,675 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,676 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:36:57,677 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:57,677 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:36:57,678 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,678 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:36:57,679 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,679 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,680 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,680 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,682 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,682 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:36:57,683 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,683 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,687 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:36:57,687 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,689 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,689 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:36:57,690 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,690 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,691 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,692 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,693 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,693 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:36:57,694 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,695 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:36:57,695 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,696 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,697 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,698 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,699 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,700 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:36:57,700 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,701 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:36:57,701 Line:988 2值：0
 [DEBUG] 2017-11-01 22:36:57,701 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,703 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:57,704 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:36:57,704 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:36:57,704 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:36:57,706 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,706 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:36:57,707 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,707 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,708 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,709 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,710 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,710 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:36:57,711 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,711 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,712 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,712 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,713 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,715 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:36:57,715 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,716 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,717 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,717 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:36:57,719 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,719 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:36:57,720 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,720 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,721 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:57,722 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:36:57,723 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,724 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:36:57,724 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,724 Line:988 1值：
 [DEBUG] 2017-11-01 22:36:57,724 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:36:57,726 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:57,726 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:36:57,726 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,727 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,727 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:57,727 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:57,728 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:36:57,729 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:57,729 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:36:57,730 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,731 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:57,732 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,732 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:36:57,734 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,734 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:36:57,735 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,738 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:36:57,739 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,739 Line:988 1值：1
 [DEBUG] 2017-11-01 22:36:57,739 Line:988 2值：1
 [DEBUG] 2017-11-01 22:36:57,742 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:36:57,743 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:36:57,743 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:36:57,743 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:57,744 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,746 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:36:57,747 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:36:57,748 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,748 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:36:57,750 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,750 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:36:57,752 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,753 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:36:57,753 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,754 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:57,754 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:57,754 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:57,755 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:36:57,755 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,755 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,756 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:57,756 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:57,757 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:36:57,757 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,758 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,759 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:57,759 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:57,760 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:36:57,760 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,761 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:57,761 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:36:57,762 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:36:57,762 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,763 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:36:57,764 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:57,764 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:36:57,766 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,766 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:36:57,767 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:36:57,767 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,768 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:57,768 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:57,768 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:36:57,770 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,770 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:57,771 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,773 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:57,774 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:57,774 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:36:57,775 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,777 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:36:57,778 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:57,778 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:57,779 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,780 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:57,780 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:57,781 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:57,781 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:57,781 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:57,781 Line:1270 0
 [DEBUG] 2017-11-01 22:36:57,781 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:57,782 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:57,784 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:57,784 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:57,785 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:36:57,786 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:57,786 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:57,787 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:57,787 Line:1270 add
 [DEBUG] 2017-11-01 22:36:57,790 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:57,790 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:36:57,791 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:57,795 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:57,854 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:36:57,855 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:36:57,857 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:57,866 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:59,759 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:36:59,760 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:36:59,760 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:59,764 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:36:59,771 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:36:59,834 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:36:59,835 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:59,835 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,842 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:36:59,842 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:36:59,844 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:59,845 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:36:59,846 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:59,846 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:36:59,847 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,848 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:59,848 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:59,848 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:59,848 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:59,849 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:59,849 Line:1270 0
 [DEBUG] 2017-11-01 22:36:59,849 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:59,849 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:59,851 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:36:59,852 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:59,852 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:36:59,853 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,853 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:59,854 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,854 Line:1270 delete
 [DEBUG] 2017-11-01 22:36:59,855 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:36:59,855 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:36:59,856 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:59,857 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:36:59,857 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:59,858 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:36:59,858 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,859 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:36:59,859 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,863 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:36:59,863 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:36:59,864 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:36:59,865 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,865 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:36:59,866 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,866 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,866 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,867 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,967 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:36:59,967 Line:408 ************上述语句执行时间：102
 [DEBUG] 2017-11-01 22:36:59,967 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:36:59,967 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:36:59,968 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,969 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:59,969 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:36:59,969 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:36:59,970 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,971 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:36:59,971 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:59,972 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:36:59,979 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:36:59,979 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:36:59,980 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:36:59,981 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,981 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:36:59,982 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,982 Line:1270 add
 [DEBUG] 2017-11-01 22:36:59,984 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:36:59,985 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:36:59,986 Line:321 flag:false
 [DEBUG] 2017-11-01 22:36:59,987 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:36:59,988 Line:321 flag:true
 [DEBUG] 2017-11-01 22:36:59,989 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:36:59,990 Line:1270 11
 [DEBUG] 2017-11-01 22:36:59,990 Line:1270 2017
 [DEBUG] 2017-11-01 22:36:59,990 Line:1270 11
 [DEBUG] 2017-11-01 22:36:59,991 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:36:59,991 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:36:59,991 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:36:59,991 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:36:59,992 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:36:59,992 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:36:59,992 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:59,993 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:59,993 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:36:59,993 Line:1270 1
 [DEBUG] 2017-11-01 22:36:59,993 Line:1270 1
 [DEBUG] 2017-11-01 22:36:59,994 Line:1270 2017-11-01 22:36:59
 [DEBUG] 2017-11-01 22:36:59,994 Line:1270 2017-11-01 22:36:57
 [DEBUG] 2017-11-01 22:36:59,994 Line:1270 00001
 [DEBUG] 2017-11-01 22:36:59,994 Line:1270 
 [DEBUG] 2017-11-01 22:36:59,995 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:36:59,995 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:36:59,995 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:36:59,995 Line:1270 1
 [DEBUG] 2017-11-01 22:36:59,995 Line:1270 00101
 [DEBUG] 2017-11-01 22:36:59,996 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:36:59,996 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:36:59,996 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:36:59,996 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:36:59,996 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:36:59,997 Line:1270 0.0
 [DEBUG] 2017-11-01 22:36:59,997 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:36:59,997 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:36:59,997 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:36:59,997 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:37:00,089 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:36:59','2017-11-01 22:36:57','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:37:00,090 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:37:00,090 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:37:00,090 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:37:00,090 Line:425 ************上述语句执行时间：101
 [DEBUG] 2017-11-01 22:37:00,091 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:37:00,092 Line:321 flag:true
 [DEBUG] 2017-11-01 22:37:00,093 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:37:00,093 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:37:00,095 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:37:00,095 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:37:00,095 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:37:00,096 Line:321 flag:true
 [DEBUG] 2017-11-01 22:37:00,097 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:37:00,116 Line:425 ************上述语句执行时间：19
 [DEBUG] 2017-11-01 22:37:00,117 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:37:00,118 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,118 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:37:00,119 Line:321 flag:true
 [DEBUG] 2017-11-01 22:37:00,120 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:37:00,120 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:37:00,120 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:37:00,121 Line:1270 00001
 [DEBUG] 2017-11-01 22:37:00,121 Line:1270 1
 [DEBUG] 2017-11-01 22:37:00,220 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:37:00,220 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:37:00,220 Line:425 ************上述语句执行时间：100
 [DEBUG] 2017-11-01 22:37:00,221 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:37:00,221 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:37:00,221 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:37:00,222 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:37:00,222 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:37:00,222 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:37:00,222 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:37:00,223 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:37:00,224 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:37:00,225 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:37:00,225 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:37:00,225 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:37:00,225 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:37:00,226 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,227 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:37:00,228 Line:321 flag:true
 [DEBUG] 2017-11-01 22:37:00,229 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:37:00,229 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:37:00,229 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:37:00,229 Line:1270 1
 [DEBUG] 2017-11-01 22:37:00,230 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:37:00,230 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:36:57@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:37:00,300 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:36:57','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:37:00,300 Line:425 ************上述语句执行时间：72
 [DEBUG] 2017-11-01 22:37:00,300 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:37:00,302 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,302 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:37:00,303 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,303 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:37:00,304 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,304 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:37:00,305 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,305 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:37:00,307 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,307 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:37:00,308 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,309 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:37:00,309 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:37:00,309 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:37:00,309 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:37:00,310 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:37:00,310 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:37:00,310 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:37:00,310 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:37:00,312 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:37:00,313 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:37:00,313 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:37:00,314 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:37:00,314 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:37:00,316 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,316 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:37:00,318 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,319 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:37:00,320 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,321 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:37:00,322 Line:321 flag:false
 [DEBUG] 2017-11-01 22:37:00,322 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:37:00,323 Line:321 flag:true
 [DEBUG] 2017-11-01 22:37:00,324 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:37:00,324 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:37:00,324 Line:1270 add
 [DEBUG] 2017-11-01 22:37:00,326 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:37:01,069 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:37:01,070 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:37:01,070 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:37:01,079 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:37:04,914 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:37:04,915 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:37:04,935 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:37:04,953 Line:689 通过SQL读原始数据：17
 [DEBUG] 2017-11-01 22:37:04,955 Line:1391 整理数据：1
 [ERROR] 2017-11-01 22:37:43,228 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:37:44,202 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:38:46,025 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:38:46,917 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:39:48,849 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:39:49,823 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:40:51,731 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:40:52,619 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:41:54,551 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:41:55,530 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:42:03,167 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:42:03,169 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:36:59,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:36:57,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012236576010165,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:42:03,182 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:03,186 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:03,230 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:42:03,237 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,238 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:03,238 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,238 Line:1270 add
 [DEBUG] 2017-11-01 22:42:03,240 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:03,241 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,241 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,241 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,242 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:03,242 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,243 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,244 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:42:03,244 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,244 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,245 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:03,245 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,246 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,246 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,247 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,247 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,248 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:03,248 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,249 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,249 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,249 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,250 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,250 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:03,251 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,251 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,252 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:42:03,252 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,252 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,253 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:03,253 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,254 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,255 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,255 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,255 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,256 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:03,256 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,257 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,257 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,258 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,258 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,259 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:03,259 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,260 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,260 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,261 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,261 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,262 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:03,262 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,263 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,263 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,263 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,264 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,265 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:03,265 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,266 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,266 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:42:03,266 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,267 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,267 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:03,268 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,268 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,269 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:42:03,269 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,269 Line:988 1值：1
 [DEBUG] 2017-11-01 22:42:03,269 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,270 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:03,271 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:42:03,272 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,272 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:42:03,273 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,273 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,274 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:03,274 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:42:03,274 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:42:03,275 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:42:03,275 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:42:03,275 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:03,275 Line:313 exeCondition:tblBuyInStock_Delete_One :'1' != '0'
 [DEBUG] 2017-11-01 22:42:03,276 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,277 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_updateStocksNotAudit(?,@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:03,277 Line:1270 '2017-09-09'
 [DEBUG] 2017-11-01 22:42:03,277 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:03,277 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:03,278 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:03,278 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:03,278 Line:1270 0
 [DEBUG] 2017-11-01 22:42:03,278 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:03,279 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:03,280 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:03,281 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:03,281 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:42:03,282 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,282 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:03,283 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,283 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:03,283 Line:1270 1
 [DEBUG] 2017-11-01 22:42:03,288 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:42:03,288 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:42:03,290 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,290 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:03,291 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:42:03,291 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,291 Line:1270 00001
 [DEBUG] 2017-11-01 22:42:03,291 Line:1270 1
 [DEBUG] 2017-11-01 22:42:03,400 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:42:03,400 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:42:03,400 Line:425 ************上述语句执行时间：110
 [DEBUG] 2017-11-01 22:42:03,401 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:42:03,402 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,402 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:03,402 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,403 Line:1270 delete
 [DEBUG] 2017-11-01 22:42:03,404 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:03,404 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:42:03,406 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,406 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:03,406 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:03,407 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:42:03,407 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:42:03,413 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:42:03,413 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:42:03,414 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:42:03,415 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,416 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:42:03,417 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,417 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:42:03,418 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:03,418 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:42:03,419 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,420 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:03,420 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,420 Line:1270 delete
 [DEBUG] 2017-11-01 22:42:03,422 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:03,422 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:42:03,424 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,424 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:42:03,424 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,425 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,425 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,425 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,425 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,426 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,426 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,428 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:42:03,428 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:03,428 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:42:03,428 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:03,429 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:03,430 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:03,430 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:03,430 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:42:03,431 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:03,431 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:42:03,432 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:03,432 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:03,432 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:03,433 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:42:03,433 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:04,996 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:42:04,997 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:42:04,998 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:05,019 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:06,507 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:42:06,508 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:42:06,528 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:42:06,541 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-11-01 22:42:06,543 Line:1391 整理数据：1
 [DEBUG] 2017-11-01 22:42:32,068 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D09734085837A1A793E87C5622FDE4212056BC
 [ERROR] 2017-11-01 22:42:32,105 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:42:40,913 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:42:40,914 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:42:40,954 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:42:40,985 Line:689 通过SQL读原始数据：31
 [DEBUG] 2017-11-01 22:42:40,987 Line:1391 整理数据：2
 [DEBUG] 2017-11-01 22:42:43,320 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:42:43,322 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:36:59,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:36:57,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012236576010165,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:42:43,339 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:43,352 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,357 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:42:43,363 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,364 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:43,364 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:43,364 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:43,365 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:43,365 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:43,365 Line:1270 0
 [DEBUG] 2017-11-01 22:42:43,365 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:43,365 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:43,368 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:43,368 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:43,368 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:42:43,369 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,370 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:42:43,370 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,371 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:42:43,371 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:43,371 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:42:43,372 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,376 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:42:43,376 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:42:43,376 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:42:43,377 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:42:43,377 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:42:43,377 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:42:43,378 Line:5993 6:1
 [DEBUG] 2017-11-01 22:42:43,378 Line:5993 7:
 [DEBUG] 2017-11-01 22:42:43,378 Line:5993 8:2
 [DEBUG] 2017-11-01 22:42:43,378 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:42:43,378 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:42:43,379 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:42:43,379 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:42:43,379 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:42:43,379 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:42:43,379 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:42:43,380 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:43,380 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:42:43,380 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:42:43,380 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:42:43,380 Line:5993 20:11
 [DEBUG] 2017-11-01 22:42:43,381 Line:5993 21:11
 [DEBUG] 2017-11-01 22:42:43,381 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:42:43,381 Line:5993 23:
 [DEBUG] 2017-11-01 22:42:43,381 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:42:43,381 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:42:43,382 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:43,382 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:42:43,382 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:42:43,382 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:42:43,382 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:42:43,383 Line:5993 31:
 [DEBUG] 2017-11-01 22:42:43,383 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:42:43,383 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:42:43,384 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:42:43,384 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:42:43,384 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:42:43,384 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:42:43,384 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:42:43,385 Line:5993 39:
 [DEBUG] 2017-11-01 22:42:43,385 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:42:43,385 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:42:43,385 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:42:43,385 Line:5993 43:
 [DEBUG] 2017-11-01 22:42:43,386 Line:5993 44:
 [DEBUG] 2017-11-01 22:42:43,386 Line:5993 45:1
 [DEBUG] 2017-11-01 22:42:43,386 Line:5993 46:2017-11-01 22:42:43
 [DEBUG] 2017-11-01 22:42:43,387 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:42:43,388 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:42:43,389 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:43,389 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,389 Line:5853 3:97763882_1711012242433880172
 [DEBUG] 2017-11-01 22:42:43,389 Line:5853 4:
 [DEBUG] 2017-11-01 22:42:43,389 Line:5853 5:
 [DEBUG] 2017-11-01 22:42:43,390 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:42:43,390 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:42:43,390 Line:5853 8:
 [DEBUG] 2017-11-01 22:42:43,390 Line:5853 9:
 [DEBUG] 2017-11-01 22:42:43,390 Line:5853 10:
 [DEBUG] 2017-11-01 22:42:43,391 Line:5853 11:
 [DEBUG] 2017-11-01 22:42:43,391 Line:5853 12:
 [DEBUG] 2017-11-01 22:42:43,391 Line:5853 13:
 [DEBUG] 2017-11-01 22:42:43,391 Line:5853 14:
 [DEBUG] 2017-11-01 22:42:43,391 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:42:43,392 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:42:43,392 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:42:43,392 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:42:43,392 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:42:43,392 Line:5853 20:0
 [DEBUG] 2017-11-01 22:42:43,392 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:42:43,393 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:42:43,393 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:42:43,393 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:42:43,393 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:42:43,393 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:42:43,394 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:42:43,394 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:42:43,394 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:42:43,394 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:42:43,394 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:42:43,395 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:42:43,395 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:42:43,395 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:42:43,395 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:42:43,395 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:42:43,396 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:42:43,396 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:42:43,396 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:42:43,396 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:42:43,396 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:42:43,397 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:42:43,397 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:42:43,397 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:42:43,397 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:42:43,397 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:42:43,397 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:42:43,398 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:42:43,398 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:42:43,398 Line:5853 50:0
 [DEBUG] 2017-11-01 22:42:43,398 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:42:43,398 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:42:43,399 Line:5853 53:0
 [DEBUG] 2017-11-01 22:42:43,399 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:42:43,399 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:42:43,399 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:42:43,399 Line:5853 57:0
 [DEBUG] 2017-11-01 22:42:43,400 Line:5853 58:0
 [DEBUG] 2017-11-01 22:42:43,400 Line:5853 59:
 [DEBUG] 2017-11-01 22:42:43,400 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:42:43,400 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:42:43,400 Line:5853 62:
 [DEBUG] 2017-11-01 22:42:43,401 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:42:43,401 Line:5853 64:0
 [DEBUG] 2017-11-01 22:42:43,401 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:42:43,403 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:42:43,403 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,404 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,404 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:42:43,404 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:43,405 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:42:43,405 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,405 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,406 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:42:43,406 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:43,406 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:43,408 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,408 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:43,409 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,409 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:42:43,409 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,409 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,410 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:42:43,411 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,411 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:42:43,411 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,411 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,412 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:42:43,412 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:43,413 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:42:43,413 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,413 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,414 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:42:43,415 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,415 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:42:43,415 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,415 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,416 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:42:43,416 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:43,417 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:42:43,418 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,418 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:42:43,419 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,419 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:42:43,420 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,420 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:42:43,422 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,422 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:42:43,423 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,423 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:42:43,425 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,425 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:42:43,426 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,427 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:42:43,428 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,428 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:42:43,430 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,431 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:42:43,431 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:43,432 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,436 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:42:43,436 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:42:43,437 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:42:43,439 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,440 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:42:43,444 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,458 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:42:43,459 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,459 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,460 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:42:43,463 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:42:43,463 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:43,465 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,465 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:42:43,466 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,466 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,467 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:42:43,469 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:42:43,469 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:43,471 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,472 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:42:43,472 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,473 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,473 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:42:43,475 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:43,476 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:43,477 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,478 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:42:43,478 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,479 Line:988 1值：true
 [DEBUG] 2017-11-01 22:42:43,479 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,481 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:42:43,482 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:42:43,482 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:43,484 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,485 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:42:43,485 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,486 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,496 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:42:43,497 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,499 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,499 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:42:43,500 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,500 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,501 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,502 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,503 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,504 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:42:43,504 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,505 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,505 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:43,506 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,507 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,508 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:42:43,509 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,509 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:42:43,510 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,510 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,511 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,511 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,512 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,513 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:42:43,513 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,513 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:42:43,513 Line:988 2值：0
 [DEBUG] 2017-11-01 22:42:43,514 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,515 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:42:43,515 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:42:43,515 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,516 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:42:43,517 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,518 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:42:43,518 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,519 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,520 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,520 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,521 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,522 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:42:43,522 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,522 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,523 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:43,523 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,524 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,526 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:42:43,526 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,527 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,528 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,528 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:43,529 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,529 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:42:43,530 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,530 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,531 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,532 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:42:43,533 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,534 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:42:43,534 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,534 Line:988 1值：
 [DEBUG] 2017-11-01 22:42:43,535 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:42:43,536 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,536 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:42:43,537 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,537 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,537 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:43,538 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:43,538 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:43,539 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:43,539 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:42:43,541 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,541 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:43,543 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,543 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:42:43,545 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,545 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:42:43,547 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,549 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:42:43,549 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,549 Line:988 1值：1
 [DEBUG] 2017-11-01 22:42:43,550 Line:988 2值：1
 [DEBUG] 2017-11-01 22:42:43,554 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:42:43,554 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:42:43,555 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:42:43,555 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:43,555 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,557 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:43,558 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:42:43,560 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,560 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:42:43,562 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,562 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:42:43,564 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,570 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:42:43,571 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,575 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:43,575 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:42:43,576 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:42:43,576 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:42:43,577 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,577 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,579 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:43,579 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:43,580 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:42:43,580 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,581 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,585 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:43,585 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:42:43,586 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:42:43,586 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,587 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:43,587 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:43,588 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:42:43,588 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,589 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:43,589 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:43,589 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:42:43,591 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,591 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:42:43,592 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:43,592 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,593 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:43,593 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:43,593 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:42:43,594 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,595 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:42:43,595 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,597 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:43,597 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:43,598 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:42:43,599 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,603 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:43,603 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:42:43,604 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:42:43,605 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,606 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:43,606 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:43,607 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:43,607 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:43,608 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:43,608 Line:1270 0
 [DEBUG] 2017-11-01 22:42:43,608 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:43,609 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:43,611 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:43,612 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:42:43,612 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:42:43,614 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:43,615 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:43,615 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:43,616 Line:1270 add
 [DEBUG] 2017-11-01 22:42:43,623 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:42:43,623 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:42:43,625 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:43,628 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:43,692 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:42:43,692 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:42:43,695 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:43,705 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:46,143 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:42:46,144 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:42:46,144 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:46,156 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:46,167 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:48,540 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:42:48,541 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:42:48,541 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:48,566 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:49,543 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:42:49,544 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:36:59,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:42:43,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012242433880172,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:42:49,564 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:49,575 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,582 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:42:49,584 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,584 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:49,584 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:49,585 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:49,585 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:49,585 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:49,586 Line:1270 0
 [DEBUG] 2017-11-01 22:42:49,586 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:49,586 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:49,588 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:49,589 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:42:49,589 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:42:49,590 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,590 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:42:49,591 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,591 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:42:49,591 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:49,592 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:42:49,593 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,595 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:42:49,595 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:42:49,595 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:42:49,595 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:42:49,596 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:42:49,596 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:42:49,596 Line:5993 6:1
 [DEBUG] 2017-11-01 22:42:49,596 Line:5993 7:
 [DEBUG] 2017-11-01 22:42:49,596 Line:5993 8:2
 [DEBUG] 2017-11-01 22:42:49,597 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:42:49,597 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:42:49,597 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:42:49,598 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:42:49,598 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:42:49,598 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:42:49,598 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:42:49,598 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:49,599 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:42:49,599 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:42:49,599 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:42:49,599 Line:5993 20:11
 [DEBUG] 2017-11-01 22:42:49,599 Line:5993 21:11
 [DEBUG] 2017-11-01 22:42:49,600 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:42:49,600 Line:5993 23:
 [DEBUG] 2017-11-01 22:42:49,600 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:42:49,600 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:42:49,600 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:49,601 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:42:49,601 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:42:49,601 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:42:49,601 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:42:49,602 Line:5993 31:
 [DEBUG] 2017-11-01 22:42:49,602 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:42:49,602 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:42:49,602 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:42:49,602 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:42:49,603 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:42:49,603 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:42:49,603 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:42:49,603 Line:5993 39:
 [DEBUG] 2017-11-01 22:42:49,603 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:42:49,604 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:42:49,604 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:42:49,604 Line:5993 43:
 [DEBUG] 2017-11-01 22:42:49,604 Line:5993 44:
 [DEBUG] 2017-11-01 22:42:49,604 Line:5993 45:1
 [DEBUG] 2017-11-01 22:42:49,605 Line:5993 46:2017-11-01 22:42:49
 [DEBUG] 2017-11-01 22:42:49,606 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:42:49,607 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:42:49,608 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:49,608 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,608 Line:5853 3:97763882_1711012242496070175
 [DEBUG] 2017-11-01 22:42:49,608 Line:5853 4:
 [DEBUG] 2017-11-01 22:42:49,609 Line:5853 5:
 [DEBUG] 2017-11-01 22:42:49,609 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:42:49,609 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:42:49,609 Line:5853 8:
 [DEBUG] 2017-11-01 22:42:49,610 Line:5853 9:
 [DEBUG] 2017-11-01 22:42:49,610 Line:5853 10:
 [DEBUG] 2017-11-01 22:42:49,610 Line:5853 11:
 [DEBUG] 2017-11-01 22:42:49,611 Line:5853 12:
 [DEBUG] 2017-11-01 22:42:49,611 Line:5853 13:
 [DEBUG] 2017-11-01 22:42:49,611 Line:5853 14:
 [DEBUG] 2017-11-01 22:42:49,611 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:42:49,612 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:42:49,612 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:42:49,612 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:42:49,612 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:42:49,613 Line:5853 20:0
 [DEBUG] 2017-11-01 22:42:49,613 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:42:49,613 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:42:49,614 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:42:49,614 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:42:49,614 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:42:49,614 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:42:49,615 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:42:49,615 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:42:49,615 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:42:49,615 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:42:49,616 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:42:49,616 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:42:49,616 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:42:49,617 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:42:49,617 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:42:49,617 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:42:49,617 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:42:49,618 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:42:49,618 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:42:49,618 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:42:49,619 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:42:49,619 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:42:49,619 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:42:49,620 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:42:49,620 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:42:49,620 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:42:49,621 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:42:49,621 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:42:49,621 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:42:49,622 Line:5853 50:0
 [DEBUG] 2017-11-01 22:42:49,622 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:42:49,622 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:42:49,622 Line:5853 53:0
 [DEBUG] 2017-11-01 22:42:49,623 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:42:49,623 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:42:49,623 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:42:49,624 Line:5853 57:0
 [DEBUG] 2017-11-01 22:42:49,624 Line:5853 58:0
 [DEBUG] 2017-11-01 22:42:49,624 Line:5853 59:
 [DEBUG] 2017-11-01 22:42:49,624 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:42:49,625 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:42:49,625 Line:5853 62:
 [DEBUG] 2017-11-01 22:42:49,625 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:42:49,625 Line:5853 64:0
 [DEBUG] 2017-11-01 22:42:49,626 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:42:49,629 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:42:49,629 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,629 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,630 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:42:49,631 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,631 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:42:49,631 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,632 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,633 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:42:49,633 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,634 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:49,635 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,636 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:49,637 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,637 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:42:49,638 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,638 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,639 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:42:49,639 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,639 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:42:49,640 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,640 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,641 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:42:49,641 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,641 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:42:49,642 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,642 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,643 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:42:49,643 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,643 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:42:49,643 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,644 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,644 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:42:49,645 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,645 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:42:49,646 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,646 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:42:49,648 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,648 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:42:49,649 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,650 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:42:49,651 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,652 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:42:49,653 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,654 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:42:49,655 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,656 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:42:49,657 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,658 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:42:49,659 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,659 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:42:49,660 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,661 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:42:49,661 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:49,661 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,662 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:42:49,663 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:49,663 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:42:49,665 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,665 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:42:49,666 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,668 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:42:49,668 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,669 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,670 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:42:49,671 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:49,671 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:49,672 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,673 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:42:49,673 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,674 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,674 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:42:49,678 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:42:49,679 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:49,680 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,681 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:42:49,681 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,682 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,682 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:42:49,687 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:42:49,687 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:49,689 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,689 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:42:49,690 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,690 Line:988 1值：true
 [DEBUG] 2017-11-01 22:42:49,691 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,692 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:42:49,692 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:49,692 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:49,694 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,694 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:42:49,695 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,695 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,697 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:49,698 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,699 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,700 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:42:49,700 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,700 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,702 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,703 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,704 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,705 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:42:49,705 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,705 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,706 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:49,707 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,708 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,709 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:42:49,710 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,710 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:42:49,711 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,711 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,712 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,712 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,713 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,714 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:42:49,714 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,714 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:42:49,714 Line:988 2值：0
 [DEBUG] 2017-11-01 22:42:49,715 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,716 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:42:49,716 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:42:49,716 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:49,717 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:42:49,718 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,719 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:42:49,719 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,719 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,720 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,720 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,722 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,722 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:42:49,722 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,722 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,723 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:49,724 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,725 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,726 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:42:49,726 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,727 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,727 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:49,728 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:49,729 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,730 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:42:49,730 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,730 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,731 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:49,732 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:42:49,733 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,733 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:42:49,734 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,734 Line:988 1值：
 [DEBUG] 2017-11-01 22:42:49,734 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:42:49,735 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,736 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:42:49,736 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,737 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,737 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:49,738 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:49,738 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:49,739 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:49,739 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:42:49,741 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,742 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:49,743 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,743 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:42:49,745 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,746 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:42:49,747 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,749 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:42:49,749 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,750 Line:988 1值：1
 [DEBUG] 2017-11-01 22:42:49,750 Line:988 2值：1
 [DEBUG] 2017-11-01 22:42:49,752 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:42:49,753 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:42:49,753 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:42:49,753 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:49,754 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,755 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:49,756 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:42:49,758 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,758 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:42:49,760 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,760 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:42:49,761 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,763 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:42:49,763 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,764 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:49,764 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:49,765 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:42:49,765 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:42:49,766 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,766 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,767 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:49,767 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:49,768 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:42:49,768 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,768 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,769 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:49,769 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:49,770 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:42:49,770 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,771 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:49,771 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:49,771 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:42:49,772 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,772 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:49,772 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:49,772 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:42:49,774 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,774 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:42:49,775 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:49,775 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,776 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:49,776 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:49,776 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:42:49,778 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,778 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:42:49,778 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,781 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:49,781 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:49,781 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:42:49,782 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,784 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:49,784 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:49,784 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:42:49,785 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,786 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:49,786 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:49,787 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:49,787 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:49,787 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:49,787 Line:1270 0
 [DEBUG] 2017-11-01 22:42:49,787 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:49,788 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:49,790 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:49,790 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:49,791 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:42:49,792 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:49,792 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:49,793 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:49,793 Line:1270 add
 [DEBUG] 2017-11-01 22:42:49,795 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:49,796 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:42:49,797 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:49,800 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:49,871 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:42:49,872 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:42:49,874 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:49,883 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:52,398 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:42:52,399 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:42:52,399 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:52,416 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:52,428 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:53,353 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:42:53,353 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:42:53,354 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:53,364 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:54,520 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:42:54,521 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:36:59,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:42:49,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012242496070175,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:42:54,534 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:54,543 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,547 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:42:54,548 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,548 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:54,549 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:54,549 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:54,549 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:54,549 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:54,550 Line:1270 0
 [DEBUG] 2017-11-01 22:42:54,550 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:54,550 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:54,552 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:54,552 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:54,553 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:42:54,554 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,554 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:42:54,555 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,555 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:42:54,555 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:54,556 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:42:54,557 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,559 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:42:54,559 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:42:54,560 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:42:54,560 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:42:54,560 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:42:54,560 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:42:54,560 Line:5993 6:1
 [DEBUG] 2017-11-01 22:42:54,561 Line:5993 7:
 [DEBUG] 2017-11-01 22:42:54,561 Line:5993 8:2
 [DEBUG] 2017-11-01 22:42:54,561 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:42:54,561 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:42:54,562 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:42:54,562 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:42:54,562 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:42:54,562 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:42:54,563 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:42:54,563 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:54,563 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:42:54,563 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:42:54,563 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:42:54,564 Line:5993 20:11
 [DEBUG] 2017-11-01 22:42:54,564 Line:5993 21:11
 [DEBUG] 2017-11-01 22:42:54,564 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:42:54,564 Line:5993 23:
 [DEBUG] 2017-11-01 22:42:54,565 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:42:54,565 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:42:54,565 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:54,565 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:42:54,566 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:42:54,566 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:42:54,566 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:42:54,566 Line:5993 31:
 [DEBUG] 2017-11-01 22:42:54,567 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:42:54,567 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:42:54,567 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:42:54,567 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:42:54,568 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:42:54,568 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:42:54,568 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:42:54,568 Line:5993 39:
 [DEBUG] 2017-11-01 22:42:54,569 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:42:54,569 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:42:54,569 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:42:54,569 Line:5993 43:
 [DEBUG] 2017-11-01 22:42:54,569 Line:5993 44:
 [DEBUG] 2017-11-01 22:42:54,569 Line:5993 45:1
 [DEBUG] 2017-11-01 22:42:54,570 Line:5993 46:2017-11-01 22:42:54
 [DEBUG] 2017-11-01 22:42:54,572 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:42:54,573 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:42:54,573 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:54,574 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,574 Line:5853 3:97763882_1711012242545730178
 [DEBUG] 2017-11-01 22:42:54,574 Line:5853 4:
 [DEBUG] 2017-11-01 22:42:54,575 Line:5853 5:
 [DEBUG] 2017-11-01 22:42:54,575 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:42:54,575 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:42:54,575 Line:5853 8:
 [DEBUG] 2017-11-01 22:42:54,576 Line:5853 9:
 [DEBUG] 2017-11-01 22:42:54,576 Line:5853 10:
 [DEBUG] 2017-11-01 22:42:54,576 Line:5853 11:
 [DEBUG] 2017-11-01 22:42:54,576 Line:5853 12:
 [DEBUG] 2017-11-01 22:42:54,577 Line:5853 13:
 [DEBUG] 2017-11-01 22:42:54,577 Line:5853 14:
 [DEBUG] 2017-11-01 22:42:54,577 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:42:54,577 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:42:54,578 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:42:54,578 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:42:54,578 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:42:54,578 Line:5853 20:0
 [DEBUG] 2017-11-01 22:42:54,579 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:42:54,579 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:42:54,579 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:42:54,579 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:42:54,579 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:42:54,580 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:42:54,580 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:42:54,580 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:42:54,580 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:42:54,580 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:42:54,581 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:42:54,581 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:42:54,581 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:42:54,581 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:42:54,581 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:42:54,582 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:42:54,582 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:42:54,582 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:42:54,582 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:42:54,583 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:42:54,583 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:42:54,583 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:42:54,583 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:42:54,584 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:42:54,584 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:42:54,584 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:42:54,584 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:42:54,585 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:42:54,585 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:42:54,585 Line:5853 50:0
 [DEBUG] 2017-11-01 22:42:54,585 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:42:54,586 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:42:54,586 Line:5853 53:0
 [DEBUG] 2017-11-01 22:42:54,586 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:42:54,587 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:42:54,587 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:42:54,587 Line:5853 57:0
 [DEBUG] 2017-11-01 22:42:54,587 Line:5853 58:0
 [DEBUG] 2017-11-01 22:42:54,588 Line:5853 59:
 [DEBUG] 2017-11-01 22:42:54,588 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:42:54,588 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:42:54,588 Line:5853 62:
 [DEBUG] 2017-11-01 22:42:54,588 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:42:54,589 Line:5853 64:0
 [DEBUG] 2017-11-01 22:42:54,589 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:42:54,591 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:42:54,592 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,592 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,593 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:42:54,593 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,594 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:42:54,594 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,594 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,595 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:42:54,595 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:54,595 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:54,597 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,597 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:54,599 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,599 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:42:54,599 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,600 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,601 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:42:54,601 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,601 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:42:54,602 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,602 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,603 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:42:54,603 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,604 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:42:54,604 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,604 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,606 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:42:54,606 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,606 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:42:54,607 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,607 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,608 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:42:54,608 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,608 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:42:54,610 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,610 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:42:54,612 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,612 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:42:54,613 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,614 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:42:54,615 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,615 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:42:54,617 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,617 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:42:54,620 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,620 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:42:54,622 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,622 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:42:54,623 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,624 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:42:54,625 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,626 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:42:54,626 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:54,626 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,627 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:42:54,628 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:54,628 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:42:54,629 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,630 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:42:54,631 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,647 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:42:54,648 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,648 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,649 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:42:54,650 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,650 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:54,652 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,652 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:42:54,652 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,653 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,653 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:42:54,654 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,655 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:54,657 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,657 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:42:54,657 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,658 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,658 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:42:54,659 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,660 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:54,661 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,662 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:42:54,662 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,662 Line:988 1值：true
 [DEBUG] 2017-11-01 22:42:54,663 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,664 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:42:54,665 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,665 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:42:54,667 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,667 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:42:54,668 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,668 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,669 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,669 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,671 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,671 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:42:54,672 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,672 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,674 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,674 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,676 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,676 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:42:54,677 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,677 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,683 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:42:54,683 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,685 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,685 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:42:54,686 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,687 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:42:54,687 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,687 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,688 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,689 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,690 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,690 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:42:54,690 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,691 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:42:54,691 Line:988 2值：0
 [DEBUG] 2017-11-01 22:42:54,691 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,692 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:42:54,693 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:42:54,693 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,707 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:42:54,715 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,715 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:42:54,715 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,716 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,716 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:54,717 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,718 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,718 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:42:54,718 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,719 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,720 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,720 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,721 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,722 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:42:54,722 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,723 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,724 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,724 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:42:54,725 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,725 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:42:54,725 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,726 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,727 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,727 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:42:54,728 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,728 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:42:54,729 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,729 Line:988 1值：
 [DEBUG] 2017-11-01 22:42:54,730 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:42:54,731 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,732 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:42:54,732 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,732 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,733 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:54,733 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:54,734 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:42:54,735 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,735 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:42:54,737 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,738 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:54,739 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,740 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:42:54,741 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,742 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:42:54,743 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,744 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:42:54,745 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,745 Line:988 1值：1
 [DEBUG] 2017-11-01 22:42:54,745 Line:988 2值：1
 [DEBUG] 2017-11-01 22:42:54,747 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:42:54,747 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:54,747 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:42:54,748 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:54,748 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,749 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:54,750 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:42:54,751 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,751 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:42:54,752 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,753 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:42:54,754 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,756 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:42:54,756 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,757 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:54,758 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:54,758 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:42:54,758 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:42:54,759 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,759 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,761 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:54,762 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:54,762 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:42:54,763 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,763 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,764 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:54,765 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:54,765 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:42:54,766 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,766 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:54,767 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:54,767 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:42:54,767 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,768 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:42:54,768 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:42:54,769 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:42:54,770 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,770 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:42:54,771 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:42:54,771 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,772 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:54,773 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:54,773 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:42:54,774 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,775 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:42:54,775 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,777 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:54,777 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:54,778 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:42:54,778 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,780 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:42:54,781 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:54,781 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:42:54,782 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,783 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:54,783 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:54,783 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:54,783 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:54,783 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:54,784 Line:1270 0
 [DEBUG] 2017-11-01 22:42:54,784 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:54,784 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:54,786 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:54,787 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:42:54,787 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:42:54,789 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:54,789 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:54,790 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:54,790 Line:1270 add
 [DEBUG] 2017-11-01 22:42:54,792 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:54,792 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:42:54,793 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:54,798 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:54,844 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:42:54,845 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:42:54,846 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:54,854 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:56,324 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:42:56,325 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:42:56,325 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:56,330 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:56,338 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:42:56,399 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:42:56,399 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:56,400 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,400 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:42:56,401 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:42:56,409 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,410 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:42:56,411 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,411 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:42:56,413 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,413 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:56,414 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:56,414 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:56,414 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:56,415 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:56,415 Line:1270 0
 [DEBUG] 2017-11-01 22:42:56,415 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:56,415 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:56,418 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:56,419 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:42:56,419 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:42:56,420 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,421 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:56,421 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,421 Line:1270 delete
 [DEBUG] 2017-11-01 22:42:56,423 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:56,423 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:42:56,424 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,425 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:42:56,426 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,427 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:42:56,428 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,428 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:42:56,429 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,430 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:42:56,430 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:56,431 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:42:56,432 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,433 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:42:56,434 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,434 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,434 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,435 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,437 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:42:56,437 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:42:56,438 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:42:56,438 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:56,438 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,439 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:56,440 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:42:56,440 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:42:56,442 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,442 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:42:56,443 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:56,443 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:42:56,444 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:42:56,444 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:56,445 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:42:56,446 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,447 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:56,447 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,447 Line:1270 add
 [DEBUG] 2017-11-01 22:42:56,449 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:42:56,450 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:42:56,451 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,451 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:42:56,453 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,454 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:42:56,454 Line:1270 11
 [DEBUG] 2017-11-01 22:42:56,455 Line:1270 2017
 [DEBUG] 2017-11-01 22:42:56,455 Line:1270 11
 [DEBUG] 2017-11-01 22:42:56,455 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:42:56,455 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:42:56,456 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,456 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:42:56,456 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:42:56,457 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:42:56,457 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:56,457 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:56,457 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:42:56,458 Line:1270 1
 [DEBUG] 2017-11-01 22:42:56,458 Line:1270 1
 [DEBUG] 2017-11-01 22:42:56,458 Line:1270 2017-11-01 22:42:56
 [DEBUG] 2017-11-01 22:42:56,458 Line:1270 2017-11-01 22:42:54
 [DEBUG] 2017-11-01 22:42:56,459 Line:1270 00001
 [DEBUG] 2017-11-01 22:42:56,459 Line:1270 
 [DEBUG] 2017-11-01 22:42:56,459 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:42:56,459 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:42:56,460 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:42:56,460 Line:1270 1
 [DEBUG] 2017-11-01 22:42:56,460 Line:1270 00101
 [DEBUG] 2017-11-01 22:42:56,460 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:42:56,461 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:42:56,461 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:42:56,461 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:42:56,461 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:42:56,462 Line:1270 0.0
 [DEBUG] 2017-11-01 22:42:56,462 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:42:56,462 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:42:56,462 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:42:56,463 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:42:56,479 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:42:56','2017-11-01 22:42:54','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:42:56,479 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:42:56,480 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:42:56,480 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:42:56,481 Line:425 ************上述语句执行时间：28
 [DEBUG] 2017-11-01 22:42:56,481 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:42:56,482 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,483 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:42:56,484 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:56,484 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:42:56,485 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:42:56,485 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:42:56,486 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,487 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:42:56,495 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:42:56,495 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:42:56,497 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,497 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:42:56,498 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,498 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:56,499 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:42:56,499 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,499 Line:1270 00001
 [DEBUG] 2017-11-01 22:42:56,499 Line:1270 1
 [DEBUG] 2017-11-01 22:42:56,512 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:42:56,513 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:42:56,513 Line:425 ************上述语句执行时间：15
 [DEBUG] 2017-11-01 22:42:56,513 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:42:56,513 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:56,514 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:42:56,514 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:42:56,514 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:42:56,515 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:42:56,515 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:42:56,515 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:42:56,516 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:42:56,516 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:42:56,517 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:42:56,517 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:42:56,517 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:42:56,518 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,519 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:42:56,520 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,521 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:56,521 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,522 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:42:56,522 Line:1270 1
 [DEBUG] 2017-11-01 22:42:56,522 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:42:56,522 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:42:54@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:42:56,529 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:42:54','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:42:56,529 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:42:56,530 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:42:56,531 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,532 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:42:56,534 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,534 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:42:56,535 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,536 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:42:56,538 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,538 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:42:56,540 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,540 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:42:56,542 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,543 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:42:56,543 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:42:56,544 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:42:56,544 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:42:56,544 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:42:56,545 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:42:56,545 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:42:56,546 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:42:56,546 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:42:56,547 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:42:56,547 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:42:56,547 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:42:56,548 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:42:56,549 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,550 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:42:56,551 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,552 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:42:56,553 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,554 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:42:56,555 Line:321 flag:false
 [DEBUG] 2017-11-01 22:42:56,556 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:42:56,557 Line:321 flag:true
 [DEBUG] 2017-11-01 22:42:56,558 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:42:56,558 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:42:56,559 Line:1270 add
 [DEBUG] 2017-11-01 22:42:56,561 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:42:57,404 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:42:57,405 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:42:57,405 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:42:57,419 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:42:57,826 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:42:58,942 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:43:00,081 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:43:00,082 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:43:00,107 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:43:00,132 Line:689 通过SQL读原始数据：24
 [DEBUG] 2017-11-01 22:43:00,133 Line:1391 整理数据：1
 [ERROR] 2017-11-01 22:44:00,913 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:44:01,833 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:44:11,948 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:44:11,950 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:42:56,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:42:54,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012242545730178,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:44:11,962 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:11,967 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:12,011 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:44:12,018 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,019 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:12,019 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,019 Line:1270 add
 [DEBUG] 2017-11-01 22:44:12,022 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:12,022 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,022 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,023 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,023 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,024 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,025 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,025 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:44:12,025 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,025 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,026 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,026 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,028 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,028 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,028 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,028 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,029 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,030 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,031 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,031 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,031 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,032 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,032 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,033 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,034 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,034 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:44:12,034 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,035 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,035 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,036 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,037 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,037 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,037 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,038 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,038 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,039 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,040 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,040 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,040 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,040 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,041 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,042 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,043 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,043 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,043 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,043 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,044 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,045 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,046 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,046 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,046 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,046 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,047 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,048 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,049 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,049 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:44:12,049 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,050 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,050 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:12,051 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,052 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,052 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:44:12,052 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,053 Line:988 1值：1
 [DEBUG] 2017-11-01 22:44:12,053 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,054 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:12,054 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:44:12,055 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,056 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:44:12,056 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,056 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,057 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:12,057 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:44:12,058 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:44:12,058 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:44:12,058 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:44:12,058 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:12,059 Line:313 exeCondition:tblBuyInStock_Delete_One :false
 [DEBUG] 2017-11-01 22:44:12,060 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,060 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:44:12,061 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,061 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:12,062 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,062 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:12,062 Line:1270 1
 [DEBUG] 2017-11-01 22:44:12,066 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:44:12,066 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:44:12,068 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,068 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:12,068 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:44:12,069 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,069 Line:1270 00001
 [DEBUG] 2017-11-01 22:44:12,069 Line:1270 1
 [DEBUG] 2017-11-01 22:44:12,082 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:44:12,083 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:44:12,084 Line:425 ************上述语句执行时间：16
 [DEBUG] 2017-11-01 22:44:12,084 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:44:12,085 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,086 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:12,086 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,086 Line:1270 delete
 [DEBUG] 2017-11-01 22:44:12,088 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:12,088 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:44:12,089 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,089 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:12,090 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:12,090 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:44:12,090 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:44:12,097 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:44:12,097 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:44:12,098 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:44:12,099 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,099 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:44:12,100 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,101 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:44:12,102 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:12,102 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:44:12,103 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,103 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:12,103 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,104 Line:1270 delete
 [DEBUG] 2017-11-01 22:44:12,105 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:12,106 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:44:12,107 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,107 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:44:12,108 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,108 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,108 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,109 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,109 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,109 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,109 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,112 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:44:12,112 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:44:12,112 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:44:12,112 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:12,113 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:12,114 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:12,114 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:12,114 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:44:12,115 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:12,116 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:44:12,116 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:12,117 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:12,117 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:12,118 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:44:12,118 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:13,677 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:44:13,678 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:44:13,680 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:13,707 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:15,527 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:44:15,528 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:44:15,547 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:44:15,561 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-11-01 22:44:15,563 Line:1391 整理数据：2
 [DEBUG] 2017-11-01 22:44:30,937 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D09734A6B4C20964895FCD8AD219FA989EC390
 [ERROR] 2017-11-01 22:44:30,975 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:44:37,761 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:44:37,762 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:44:37,795 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:44:37,809 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-11-01 22:44:37,811 Line:1391 整理数据：1
 [DEBUG] 2017-11-01 22:44:40,264 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:44:40,266 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:42:56,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:42:54,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012242545730178,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:44:40,278 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:40,288 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,293 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:44:40,294 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,295 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:40,295 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:40,295 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:40,296 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:40,296 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:40,296 Line:1270 0
 [DEBUG] 2017-11-01 22:44:40,296 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:40,296 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:40,298 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:40,299 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:40,299 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:44:40,300 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,301 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:44:40,301 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,302 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:44:40,302 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:40,302 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:44:40,303 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,305 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:44:40,306 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:44:40,306 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:44:40,307 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:44:40,307 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:44:40,307 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:44:40,308 Line:5993 6:1
 [DEBUG] 2017-11-01 22:44:40,308 Line:5993 7:
 [DEBUG] 2017-11-01 22:44:40,308 Line:5993 8:2
 [DEBUG] 2017-11-01 22:44:40,308 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:44:40,308 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:44:40,309 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:44:40,309 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:44:40,309 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:44:40,309 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:44:40,309 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:44:40,310 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:40,310 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:44:40,310 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:44:40,310 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:44:40,310 Line:5993 20:11
 [DEBUG] 2017-11-01 22:44:40,311 Line:5993 21:11
 [DEBUG] 2017-11-01 22:44:40,311 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:44:40,311 Line:5993 23:
 [DEBUG] 2017-11-01 22:44:40,311 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:44:40,311 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:44:40,311 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:40,312 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:44:40,312 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:44:40,312 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:44:40,312 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:44:40,312 Line:5993 31:
 [DEBUG] 2017-11-01 22:44:40,313 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:44:40,313 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:44:40,313 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:44:40,313 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:44:40,313 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:44:40,314 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:44:40,314 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:44:40,314 Line:5993 39:
 [DEBUG] 2017-11-01 22:44:40,314 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:44:40,314 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:44:40,315 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:44:40,315 Line:5993 43:
 [DEBUG] 2017-11-01 22:44:40,315 Line:5993 44:
 [DEBUG] 2017-11-01 22:44:40,315 Line:5993 45:1
 [DEBUG] 2017-11-01 22:44:40,315 Line:5993 46:2017-11-01 22:44:40
 [DEBUG] 2017-11-01 22:44:40,317 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:44:40,318 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:44:40,318 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:40,318 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,318 Line:5853 3:97763882_1711012244403170185
 [DEBUG] 2017-11-01 22:44:40,319 Line:5853 4:
 [DEBUG] 2017-11-01 22:44:40,319 Line:5853 5:
 [DEBUG] 2017-11-01 22:44:40,319 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:44:40,319 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:44:40,320 Line:5853 8:
 [DEBUG] 2017-11-01 22:44:40,320 Line:5853 9:
 [DEBUG] 2017-11-01 22:44:40,320 Line:5853 10:
 [DEBUG] 2017-11-01 22:44:40,320 Line:5853 11:
 [DEBUG] 2017-11-01 22:44:40,320 Line:5853 12:
 [DEBUG] 2017-11-01 22:44:40,320 Line:5853 13:
 [DEBUG] 2017-11-01 22:44:40,321 Line:5853 14:
 [DEBUG] 2017-11-01 22:44:40,321 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:44:40,321 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:44:40,321 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:44:40,321 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:44:40,322 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:44:40,322 Line:5853 20:0
 [DEBUG] 2017-11-01 22:44:40,322 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:44:40,322 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:44:40,322 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:44:40,323 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:44:40,323 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:44:40,323 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:44:40,323 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:44:40,323 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:44:40,324 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:44:40,324 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:44:40,324 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:44:40,324 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:44:40,324 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:44:40,325 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:44:40,325 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:44:40,325 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:44:40,325 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:44:40,325 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:44:40,326 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:44:40,326 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:44:40,326 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:44:40,326 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:44:40,326 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:44:40,327 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:44:40,327 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:44:40,327 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:44:40,327 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:44:40,327 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:44:40,327 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:44:40,328 Line:5853 50:0
 [DEBUG] 2017-11-01 22:44:40,328 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:44:40,328 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:44:40,328 Line:5853 53:0
 [DEBUG] 2017-11-01 22:44:40,328 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:44:40,329 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:44:40,329 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:44:40,329 Line:5853 57:0
 [DEBUG] 2017-11-01 22:44:40,329 Line:5853 58:0
 [DEBUG] 2017-11-01 22:44:40,329 Line:5853 59:
 [DEBUG] 2017-11-01 22:44:40,330 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:44:40,330 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:44:40,330 Line:5853 62:
 [DEBUG] 2017-11-01 22:44:40,330 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:44:40,330 Line:5853 64:0
 [DEBUG] 2017-11-01 22:44:40,330 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:44:40,332 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:44:40,333 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,333 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,334 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:44:40,334 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,334 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:44:40,334 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,335 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,336 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:44:40,336 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,336 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:40,337 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,338 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:40,339 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,339 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:44:40,340 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,340 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,341 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:44:40,342 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:40,342 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:44:40,343 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,343 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,344 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:44:40,344 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,345 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:44:40,345 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,345 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,346 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:44:40,346 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:40,346 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:44:40,347 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,347 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,347 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:44:40,348 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,348 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:44:40,349 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,349 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:44:40,350 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,351 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:44:40,351 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,352 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:44:40,353 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,353 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:44:40,354 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,354 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:44:40,355 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,355 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:44:40,356 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,357 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:44:40,358 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,358 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:44:40,359 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,359 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:44:40,360 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:40,360 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,361 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:44:40,361 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:40,361 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:44:40,362 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,363 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:44:40,363 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,364 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:44:40,365 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,365 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,365 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:44:40,366 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,367 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:40,368 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,368 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:44:40,368 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,369 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,369 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:44:40,370 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,370 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:40,371 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,372 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:44:40,372 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,372 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,373 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:44:40,374 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,374 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:40,375 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,376 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:44:40,376 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,376 Line:988 1值：true
 [DEBUG] 2017-11-01 22:44:40,377 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,378 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:44:40,378 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,378 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:40,379 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,380 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:44:40,380 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,381 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,382 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,382 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,383 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,384 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:44:40,384 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,384 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,385 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:40,385 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,386 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,387 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:44:40,387 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,387 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,388 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:40,389 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,390 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,391 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:44:40,392 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,392 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:44:40,393 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,393 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,394 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,395 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,396 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,397 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:44:40,397 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,397 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:44:40,398 Line:988 2值：0
 [DEBUG] 2017-11-01 22:44:40,398 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,400 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:44:40,401 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:44:40,401 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:44:40,401 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:44:40,403 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,403 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:44:40,404 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,404 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,405 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,405 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,406 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,407 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:44:40,407 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,408 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,409 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,409 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,410 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,411 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:44:40,411 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,412 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,413 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,413 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:40,414 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,414 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:44:40,415 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,415 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,416 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,416 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:44:40,417 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,418 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:44:40,418 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,418 Line:988 1值：
 [DEBUG] 2017-11-01 22:44:40,418 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:44:40,420 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,420 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:44:40,420 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,421 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,421 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:40,421 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:40,422 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:40,422 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,423 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:44:40,424 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,424 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:40,425 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,426 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:44:40,427 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,427 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:44:40,429 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,430 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:44:40,431 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,431 Line:988 1值：1
 [DEBUG] 2017-11-01 22:44:40,431 Line:988 2值：1
 [DEBUG] 2017-11-01 22:44:40,432 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:44:40,432 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:40,433 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:44:40,433 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:40,433 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,434 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:40,434 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:44:40,436 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,436 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:44:40,437 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,438 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:44:40,439 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,440 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:44:40,440 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,441 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:40,441 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:40,441 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:44:40,442 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:44:40,442 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,442 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,443 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:40,443 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:40,444 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:44:40,444 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,444 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,445 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:40,446 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:40,446 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:44:40,447 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,447 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:40,448 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:40,448 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:44:40,449 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,449 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:40,450 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:40,450 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:44:40,452 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,452 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:44:40,453 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:40,453 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,454 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:40,454 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:40,455 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:44:40,456 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,456 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:44:40,457 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,460 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:40,460 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:40,461 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:44:40,461 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,465 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:40,465 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:40,466 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:44:40,467 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,468 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:40,468 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:40,468 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:40,469 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:40,469 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:40,469 Line:1270 0
 [DEBUG] 2017-11-01 22:44:40,469 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:40,469 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:40,472 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:40,472 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:44:40,472 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:44:40,474 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:40,475 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:40,475 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:40,476 Line:1270 add
 [DEBUG] 2017-11-01 22:44:40,478 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:40,478 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:44:40,479 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:40,482 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:40,534 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:44:40,534 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:44:40,536 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:40,545 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:42,319 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:44:42,320 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:44:42,320 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:42,328 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:42,339 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:43,113 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:44:43,114 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:44:43,114 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:43,131 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:44,424 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:44:44,426 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:42:56,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:44:40,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012244403170185,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:44:44,439 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:44,448 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,453 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:44:44,460 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,460 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:44,461 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:44,461 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:44,461 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:44,461 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:44,461 Line:1270 0
 [DEBUG] 2017-11-01 22:44:44,461 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:44,462 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:44,463 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:44,464 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:44,464 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:44:44,465 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,465 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:44:44,466 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,466 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:44:44,466 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:44,466 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:44:44,468 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,470 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:44:44,470 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:44:44,470 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:44:44,471 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:44:44,471 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:44:44,471 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:44:44,471 Line:5993 6:1
 [DEBUG] 2017-11-01 22:44:44,471 Line:5993 7:
 [DEBUG] 2017-11-01 22:44:44,472 Line:5993 8:2
 [DEBUG] 2017-11-01 22:44:44,472 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:44:44,472 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:44:44,473 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:44:44,473 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:44:44,473 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:44:44,473 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:44:44,474 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:44:44,474 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:44,474 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:44:44,475 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:44:44,475 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:44:44,475 Line:5993 20:11
 [DEBUG] 2017-11-01 22:44:44,476 Line:5993 21:11
 [DEBUG] 2017-11-01 22:44:44,476 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:44:44,476 Line:5993 23:
 [DEBUG] 2017-11-01 22:44:44,476 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:44:44,477 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:44:44,477 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:44,477 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:44:44,477 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:44:44,478 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:44:44,478 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:44:44,478 Line:5993 31:
 [DEBUG] 2017-11-01 22:44:44,478 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:44:44,478 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:44:44,479 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:44:44,479 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:44:44,479 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:44:44,479 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:44:44,479 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:44:44,479 Line:5993 39:
 [DEBUG] 2017-11-01 22:44:44,480 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:44:44,480 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:44:44,480 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:44:44,480 Line:5993 43:
 [DEBUG] 2017-11-01 22:44:44,480 Line:5993 44:
 [DEBUG] 2017-11-01 22:44:44,480 Line:5993 45:1
 [DEBUG] 2017-11-01 22:44:44,481 Line:5993 46:2017-11-01 22:44:44
 [DEBUG] 2017-11-01 22:44:44,482 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:44:44,483 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:44:44,483 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:44,483 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,483 Line:5853 3:97763882_1711012244444820188
 [DEBUG] 2017-11-01 22:44:44,483 Line:5853 4:
 [DEBUG] 2017-11-01 22:44:44,484 Line:5853 5:
 [DEBUG] 2017-11-01 22:44:44,484 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:44:44,484 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:44:44,484 Line:5853 8:
 [DEBUG] 2017-11-01 22:44:44,484 Line:5853 9:
 [DEBUG] 2017-11-01 22:44:44,485 Line:5853 10:
 [DEBUG] 2017-11-01 22:44:44,485 Line:5853 11:
 [DEBUG] 2017-11-01 22:44:44,485 Line:5853 12:
 [DEBUG] 2017-11-01 22:44:44,485 Line:5853 13:
 [DEBUG] 2017-11-01 22:44:44,485 Line:5853 14:
 [DEBUG] 2017-11-01 22:44:44,485 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:44:44,486 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:44:44,486 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:44:44,486 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:44:44,486 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:44:44,486 Line:5853 20:0
 [DEBUG] 2017-11-01 22:44:44,486 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:44:44,487 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:44:44,487 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:44:44,487 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:44:44,487 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:44:44,487 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:44:44,488 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:44:44,488 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:44:44,488 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:44:44,488 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:44:44,488 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:44:44,488 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:44:44,489 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:44:44,489 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:44:44,489 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:44:44,489 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:44:44,490 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:44:44,490 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:44:44,490 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:44:44,490 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:44:44,490 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:44:44,490 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:44:44,491 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:44:44,491 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:44:44,491 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:44:44,491 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:44:44,491 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:44:44,492 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:44:44,492 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:44:44,492 Line:5853 50:0
 [DEBUG] 2017-11-01 22:44:44,492 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:44:44,493 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:44:44,493 Line:5853 53:0
 [DEBUG] 2017-11-01 22:44:44,493 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:44:44,493 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:44:44,493 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:44:44,493 Line:5853 57:0
 [DEBUG] 2017-11-01 22:44:44,494 Line:5853 58:0
 [DEBUG] 2017-11-01 22:44:44,494 Line:5853 59:
 [DEBUG] 2017-11-01 22:44:44,494 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:44:44,494 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:44:44,494 Line:5853 62:
 [DEBUG] 2017-11-01 22:44:44,494 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:44:44,495 Line:5853 64:0
 [DEBUG] 2017-11-01 22:44:44,495 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:44:44,497 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:44:44,497 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,497 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,498 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:44:44,498 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,498 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:44:44,499 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,499 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,499 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:44:44,500 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,500 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:44,501 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,501 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:44,502 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,502 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:44:44,502 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,503 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,503 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:44:44,504 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,504 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:44:44,504 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,504 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,505 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:44:44,505 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,506 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:44:44,506 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,506 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,507 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:44:44,507 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,507 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:44:44,507 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,507 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,508 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:44:44,509 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,509 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:44:44,510 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,510 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:44:44,511 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,511 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:44:44,512 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,513 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:44:44,513 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,514 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:44:44,515 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,515 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:44:44,516 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,516 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:44:44,517 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,518 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:44:44,519 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,519 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:44:44,520 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,520 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:44:44,520 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:44,521 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,521 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:44:44,521 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:44,521 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:44:44,522 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,523 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:44:44,524 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,525 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:44:44,525 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,526 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,526 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:44:44,527 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,527 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:44,528 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,529 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:44:44,529 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,529 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,529 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:44:44,530 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,530 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:44,532 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,532 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:44:44,533 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,533 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,533 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:44:44,540 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:44:44,540 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:44,542 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,542 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:44:44,543 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,543 Line:988 1值：true
 [DEBUG] 2017-11-01 22:44:44,544 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,545 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:44:44,545 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:44,545 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:44,546 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,547 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:44:44,547 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,548 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,549 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,549 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,550 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,551 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:44:44,551 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,552 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,552 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,553 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,554 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,554 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:44:44,554 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,555 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,555 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,556 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,557 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,557 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:44:44,558 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,559 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:44:44,559 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,559 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,560 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,560 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,561 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,562 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:44:44,562 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,562 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:44:44,562 Line:988 2值：0
 [DEBUG] 2017-11-01 22:44:44,562 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,564 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:44:44,564 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:44:44,564 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:44,565 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:44:44,566 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,566 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:44:44,566 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,567 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,567 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,568 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,569 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,569 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:44:44,569 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,569 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,570 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,571 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,572 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,573 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:44:44,573 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,573 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,574 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,574 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:44,575 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,576 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:44:44,576 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,576 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,577 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:44,577 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:44:44,578 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,579 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:44:44,579 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,579 Line:988 1值：
 [DEBUG] 2017-11-01 22:44:44,579 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:44:44,581 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,581 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:44:44,581 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,581 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,582 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:44,582 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:44,582 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:44,583 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:44,583 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:44:44,585 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,585 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:44,587 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,587 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:44:44,589 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,589 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:44:44,591 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,592 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:44:44,593 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,593 Line:988 1值：1
 [DEBUG] 2017-11-01 22:44:44,593 Line:988 2值：1
 [DEBUG] 2017-11-01 22:44:44,595 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:44:44,596 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:44:44,596 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:44:44,597 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:44,597 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,601 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:44:44,601 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:44:44,603 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,603 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:44:44,605 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,605 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:44:44,606 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,608 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:44:44,608 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,609 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:44,610 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:44,610 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:44:44,611 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:44:44,611 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,611 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,612 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:44,613 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:44,613 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:44:44,614 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,614 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,615 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:44,615 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:44,615 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:44:44,616 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,616 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:44,617 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:44,617 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:44:44,617 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,618 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:44,618 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:44,619 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:44:44,621 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,621 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:44:44,622 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:44,622 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,623 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:44,623 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:44,624 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:44:44,625 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,626 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:44:44,626 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,630 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:44,630 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:44,631 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:44:44,631 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,633 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:44,633 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:44,633 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:44:44,635 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,635 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:44,635 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:44,636 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:44,636 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:44,636 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:44,637 Line:1270 0
 [DEBUG] 2017-11-01 22:44:44,637 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:44,637 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:44,639 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:44,639 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:44,640 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:44:44,641 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:44,642 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:44,642 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:44,642 Line:1270 add
 [DEBUG] 2017-11-01 22:44:44,645 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:44,646 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:44:44,647 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:44,651 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:44,708 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:44:44,709 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:44:44,711 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:44,721 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:46,659 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:44:46,660 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:44:46,660 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:46,666 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:46,674 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:47,464 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:44:47,465 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:44:47,465 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:47,473 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:48,468 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:44:48,469 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:42:56,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:44:44,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012244444820188,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:44:48,482 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:48,491 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,496 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:44:48,503 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,504 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:48,504 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:48,504 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:48,504 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:48,504 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:48,505 Line:1270 0
 [DEBUG] 2017-11-01 22:44:48,505 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:48,505 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:48,507 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:48,507 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:48,507 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:44:48,508 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,509 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:44:48,509 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,510 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:44:48,510 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:48,510 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:44:48,511 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,513 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:44:48,514 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:44:48,514 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:44:48,514 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:44:48,514 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:44:48,515 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:44:48,515 Line:5993 6:1
 [DEBUG] 2017-11-01 22:44:48,515 Line:5993 7:
 [DEBUG] 2017-11-01 22:44:48,515 Line:5993 8:2
 [DEBUG] 2017-11-01 22:44:48,516 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:44:48,516 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:44:48,516 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:44:48,517 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:44:48,517 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:44:48,517 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:44:48,517 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:44:48,518 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:48,518 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:44:48,518 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:44:48,519 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:44:48,519 Line:5993 20:11
 [DEBUG] 2017-11-01 22:44:48,519 Line:5993 21:11
 [DEBUG] 2017-11-01 22:44:48,519 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:44:48,520 Line:5993 23:
 [DEBUG] 2017-11-01 22:44:48,520 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:44:48,520 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:44:48,521 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:48,521 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:44:48,521 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:44:48,521 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:44:48,522 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:44:48,522 Line:5993 31:
 [DEBUG] 2017-11-01 22:44:48,522 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:44:48,522 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:44:48,523 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:44:48,523 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:44:48,523 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:44:48,524 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:44:48,524 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:44:48,524 Line:5993 39:
 [DEBUG] 2017-11-01 22:44:48,525 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:44:48,525 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:44:48,525 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:44:48,525 Line:5993 43:
 [DEBUG] 2017-11-01 22:44:48,526 Line:5993 44:
 [DEBUG] 2017-11-01 22:44:48,526 Line:5993 45:1
 [DEBUG] 2017-11-01 22:44:48,526 Line:5993 46:2017-11-01 22:44:48
 [DEBUG] 2017-11-01 22:44:48,528 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:44:48,530 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:44:48,530 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:48,531 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,531 Line:5853 3:97763882_1711012244485290191
 [DEBUG] 2017-11-01 22:44:48,531 Line:5853 4:
 [DEBUG] 2017-11-01 22:44:48,531 Line:5853 5:
 [DEBUG] 2017-11-01 22:44:48,532 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:44:48,532 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:44:48,532 Line:5853 8:
 [DEBUG] 2017-11-01 22:44:48,533 Line:5853 9:
 [DEBUG] 2017-11-01 22:44:48,533 Line:5853 10:
 [DEBUG] 2017-11-01 22:44:48,533 Line:5853 11:
 [DEBUG] 2017-11-01 22:44:48,533 Line:5853 12:
 [DEBUG] 2017-11-01 22:44:48,534 Line:5853 13:
 [DEBUG] 2017-11-01 22:44:48,534 Line:5853 14:
 [DEBUG] 2017-11-01 22:44:48,534 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:44:48,534 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:44:48,535 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:44:48,535 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:44:48,535 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:44:48,535 Line:5853 20:0
 [DEBUG] 2017-11-01 22:44:48,536 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:44:48,536 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:44:48,536 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:44:48,536 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:44:48,537 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:44:48,537 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:44:48,537 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:44:48,537 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:44:48,538 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:44:48,538 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:44:48,538 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:44:48,538 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:44:48,539 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:44:48,539 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:44:48,539 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:44:48,539 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:44:48,540 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:44:48,540 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:44:48,540 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:44:48,540 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:44:48,541 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:44:48,541 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:44:48,541 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:44:48,541 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:44:48,542 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:44:48,542 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:44:48,542 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:44:48,543 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:44:48,543 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:44:48,543 Line:5853 50:0
 [DEBUG] 2017-11-01 22:44:48,543 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:44:48,544 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:44:48,544 Line:5853 53:0
 [DEBUG] 2017-11-01 22:44:48,544 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:44:48,545 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:44:48,545 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:44:48,545 Line:5853 57:0
 [DEBUG] 2017-11-01 22:44:48,546 Line:5853 58:0
 [DEBUG] 2017-11-01 22:44:48,546 Line:5853 59:
 [DEBUG] 2017-11-01 22:44:48,546 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:44:48,546 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:44:48,546 Line:5853 62:
 [DEBUG] 2017-11-01 22:44:48,547 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:44:48,547 Line:5853 64:0
 [DEBUG] 2017-11-01 22:44:48,547 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:44:48,550 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:44:48,550 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,551 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,552 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:44:48,553 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,553 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:44:48,554 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,554 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,555 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:44:48,556 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,556 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:48,558 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,558 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:48,559 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,560 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:44:48,560 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,561 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,562 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:44:48,563 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,563 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:44:48,563 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,564 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,565 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:44:48,565 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,566 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:44:48,566 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,566 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,568 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:44:48,568 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,568 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:44:48,569 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,569 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,572 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:44:48,572 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:44:48,573 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:44:48,574 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,574 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:44:48,576 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,576 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:44:48,578 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,578 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:44:48,579 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,580 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:44:48,581 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,582 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:44:48,583 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,584 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:44:48,585 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,586 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:44:48,587 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,587 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:44:48,589 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,590 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:44:48,590 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:48,590 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,592 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:44:48,592 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:48,593 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:44:48,594 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,595 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:44:48,596 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,598 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:44:48,599 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,599 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,599 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:44:48,601 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,601 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:48,603 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,603 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:44:48,603 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,604 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,604 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:44:48,606 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,606 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:48,607 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,608 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:44:48,608 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,609 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,609 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:44:48,610 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,611 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:48,612 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,613 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:44:48,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,613 Line:988 1值：true
 [DEBUG] 2017-11-01 22:44:48,614 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,615 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:44:48,616 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,616 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:44:48,618 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,618 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:44:48,618 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,619 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,620 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,621 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,622 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,623 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:44:48,623 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,623 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,625 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,625 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,627 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,627 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:44:48,628 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,628 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,630 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,630 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,632 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,632 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:44:48,634 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,634 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:44:48,634 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,635 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,637 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,637 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,639 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,639 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:44:48,640 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,640 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:44:48,640 Line:988 2值：0
 [DEBUG] 2017-11-01 22:44:48,641 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,643 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:44:48,643 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:44:48,644 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:44:48,644 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:44:48,646 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,646 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:44:48,646 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,647 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,648 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,649 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,650 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,651 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:44:48,651 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,651 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,653 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,654 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,655 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,657 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:44:48,657 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,658 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,659 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:48,659 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:44:48,661 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,661 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:44:48,662 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,662 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,664 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,665 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:44:48,666 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,667 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:44:48,667 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,667 Line:988 1值：
 [DEBUG] 2017-11-01 22:44:48,668 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:44:48,670 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,670 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:44:48,671 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,671 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,671 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:48,672 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:48,672 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:44:48,673 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,674 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:44:48,676 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,676 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:48,677 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,678 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:44:48,679 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,680 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:44:48,681 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,683 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:44:48,683 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,684 Line:988 1值：1
 [DEBUG] 2017-11-01 22:44:48,684 Line:988 2值：1
 [DEBUG] 2017-11-01 22:44:48,687 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:44:48,687 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:44:48,687 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:44:48,688 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:48,688 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,690 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:48,691 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:44:48,693 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,694 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:44:48,696 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,696 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:44:48,697 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,698 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:44:48,698 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,699 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:48,699 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:48,700 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:44:48,700 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:44:48,701 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,701 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,702 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:48,702 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:48,702 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:44:48,703 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,703 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,704 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:48,705 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:48,705 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:44:48,705 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,706 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:48,706 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:48,706 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:44:48,707 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,707 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:44:48,707 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:44:48,708 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:44:48,709 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,710 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:44:48,710 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:44:48,711 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,712 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:48,712 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:48,713 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:44:48,714 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,714 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:44:48,715 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,717 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:48,717 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:48,717 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:44:48,718 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,720 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:44:48,720 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:44:48,720 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:44:48,721 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,722 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:48,722 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:48,722 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:48,722 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:48,723 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:48,723 Line:1270 0
 [DEBUG] 2017-11-01 22:44:48,723 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:48,723 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:48,726 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:48,726 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:48,727 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:44:48,728 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:48,729 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:48,729 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:48,730 Line:1270 add
 [DEBUG] 2017-11-01 22:44:48,733 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:48,733 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:44:48,734 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:48,737 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:48,790 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:44:48,790 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:44:48,792 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:48,800 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:50,545 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:44:50,546 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:44:50,546 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:50,550 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:50,560 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:50,608 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:44:50,608 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:50,608 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,609 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:50,609 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:44:50,610 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,611 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:44:50,612 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,612 Line:313 exeCondition:tblBuyInStock_Add_One :false
 [DEBUG] 2017-11-01 22:44:50,613 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,613 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:44:50,614 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,615 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:50,615 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,615 Line:1270 delete
 [DEBUG] 2017-11-01 22:44:50,617 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:50,617 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:44:50,618 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,619 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:44:50,620 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,621 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:44:50,622 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,623 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:44:50,623 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,623 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:44:50,624 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:50,624 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:44:50,625 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,625 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:44:50,626 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,626 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,626 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,626 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,629 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:44:50,629 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:50,629 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:44:50,629 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:50,630 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,630 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:50,631 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:44:50,631 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:44:50,632 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,632 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:44:50,633 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:50,633 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:44:50,633 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:44:50,634 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:50,634 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:44:50,635 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,635 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:50,635 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,636 Line:1270 add
 [DEBUG] 2017-11-01 22:44:50,637 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:44:50,637 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:44:50,638 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,639 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:44:50,640 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,640 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:44:50,640 Line:1270 11
 [DEBUG] 2017-11-01 22:44:50,641 Line:1270 2017
 [DEBUG] 2017-11-01 22:44:50,641 Line:1270 11
 [DEBUG] 2017-11-01 22:44:50,641 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:44:50,641 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:44:50,641 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,641 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:44:50,642 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:44:50,642 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:44:50,642 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:50,642 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:50,642 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:44:50,642 Line:1270 1
 [DEBUG] 2017-11-01 22:44:50,643 Line:1270 1
 [DEBUG] 2017-11-01 22:44:50,643 Line:1270 2017-11-01 22:44:50
 [DEBUG] 2017-11-01 22:44:50,643 Line:1270 2017-11-01 22:44:48
 [DEBUG] 2017-11-01 22:44:50,643 Line:1270 00001
 [DEBUG] 2017-11-01 22:44:50,643 Line:1270 
 [DEBUG] 2017-11-01 22:44:50,644 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:44:50,644 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:44:50,644 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:44:50,644 Line:1270 1
 [DEBUG] 2017-11-01 22:44:50,644 Line:1270 00101
 [DEBUG] 2017-11-01 22:44:50,644 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:44:50,645 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:44:50,645 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:44:50,645 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:44:50,645 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:44:50,645 Line:1270 0.0
 [DEBUG] 2017-11-01 22:44:50,646 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:44:50,646 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:44:50,646 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:44:50,646 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:44:50,661 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:44:50','2017-11-01 22:44:48','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:44:50,661 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:44:50,662 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:44:50,662 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:44:50,662 Line:425 ************上述语句执行时间：22
 [DEBUG] 2017-11-01 22:44:50,663 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:44:50,664 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,665 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:44:50,665 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:50,666 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:44:50,666 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:44:50,666 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:44:50,667 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,668 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:44:50,680 Line:425 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:44:50,680 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:44:50,682 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,682 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:44:50,684 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,684 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:50,685 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:44:50,685 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,685 Line:1270 00001
 [DEBUG] 2017-11-01 22:44:50,685 Line:1270 1
 [DEBUG] 2017-11-01 22:44:50,697 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:44:50,697 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:44:50,697 Line:425 ************上述语句执行时间：13
 [DEBUG] 2017-11-01 22:44:50,698 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:44:50,698 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:50,698 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:44:50,698 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:44:50,699 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:44:50,699 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:44:50,699 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:44:50,699 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:44:50,700 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:44:50,700 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:44:50,700 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:44:50,701 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:50,701 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:44:50,702 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,702 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:44:50,703 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,704 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:50,704 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,704 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:44:50,704 Line:1270 1
 [DEBUG] 2017-11-01 22:44:50,704 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:44:50,704 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:44:48@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:44:50,709 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:44:48','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:44:50,710 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:44:50,710 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:44:50,712 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,712 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:44:50,713 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,713 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:44:50,714 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,715 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:44:50,715 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,716 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:44:50,717 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,717 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:44:50,718 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,718 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:44:50,718 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:44:50,719 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:44:50,719 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:44:50,719 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:44:50,719 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:44:50,719 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:44:50,720 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:44:50,720 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:44:50,721 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:44:50,721 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:44:50,721 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:44:50,721 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:44:50,722 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,722 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:44:50,723 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,724 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:44:50,725 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,725 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:44:50,726 Line:321 flag:false
 [DEBUG] 2017-11-01 22:44:50,726 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:44:50,727 Line:321 flag:true
 [DEBUG] 2017-11-01 22:44:50,738 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:44:50,739 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:44:50,739 Line:1270 add
 [DEBUG] 2017-11-01 22:44:50,742 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:44:51,431 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:44:51,432 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:44:51,432 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:44:51,441 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:44:53,599 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:44:53,600 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:44:53,626 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:44:53,650 Line:689 通过SQL读原始数据：23
 [DEBUG] 2017-11-01 22:44:53,652 Line:1391 整理数据：1
 [ERROR] 2017-11-01 22:45:03,777 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:45:04,713 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:46:06,589 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:46:07,497 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:47:09,415 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:47:10,366 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:48:06,329 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=8
 [DEBUG] 2017-11-01 22:48:06,330 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[8,];
 [DEBUG] 2017-11-01 22:48:06,331 Line:215 ---------->SET Page 8 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2017-11-01 22:48:12,236 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2017-11-01 22:48:12,237 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[8,];search=[tblStocks,];Submit=[,];
 [ERROR] 2017-11-01 22:48:12,631 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:48:13,608 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:48:15,475 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblStocks&search=tblStocks&popWinName=TablemgtDiv
 [DEBUG] 2017-11-01 22:48:15,475 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblStocks,];search=[tblStocks,];popWinName=[TablemgtDiv,];
 [DEBUG] 2017-11-01 22:48:15,717 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=
 [DEBUG] 2017-11-01 22:48:15,718 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[,];
 [DEBUG] 2017-11-01 22:48:17,052 Line:1061 ------Init Enumeration record:518
 [DEBUG] 2017-11-01 22:48:17,871 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineOp
 [DEBUG] 2017-11-01 22:48:17,872 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineOp,];
 [ERROR] 2017-11-01 22:49:15,561 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:49:16,459 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:50:18,340 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:50:19,297 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:51:12,610 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineQuery&from=adv&src=menu&winCurIndex=9
 [DEBUG] 2017-11-01 22:51:12,610 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineQuery,];from=[adv,];src=[menu,];winCurIndex=[9,];
 [DEBUG] 2017-11-01 22:51:12,610 Line:215 ---------->SET Page 9 DEFAULT URL = /CustomAction.do?type=defineQuery&from=adv
 [DEBUG] 2017-11-01 22:51:17,222 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineQuery
 [DEBUG] 2017-11-01 22:51:17,222 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineQuery,];from=[adv,];keyword=[tblStocks,];
 [ERROR] 2017-11-01 22:51:21,225 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:51:22,179 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:52:24,092 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:52:25,007 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:53:27,621 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:53:28,759 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:54:00,297 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:54:00,298 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:54:00,370 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:54:00,422 Line:689 通过SQL读原始数据：51
 [DEBUG] 2017-11-01 22:54:00,422 Line:1391 整理数据：0
 [DEBUG] 2017-11-01 22:54:02,113 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-11-01 22:54:02,113 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[7,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockNumber=[,];tblStock.StockName=[,];GoodsCode=[00003000050002C,];hide_GoodsCode=[00003000050002C#;#0#;#lm01-04#;#力猛4L浅灰罐#;#力猛4L浅灰罐#;#个#;##;#,];tblGoods.GoodsNumber=[lm01-04,,];tblGoods.GoodsFullName=[力猛4L浅灰罐,,];tblGoods.GoodsSpec=[力猛4L浅灰罐,,];tblGoods.BaseUnit=[个,,];tblGoods.BarCode=[,];BatchNo=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-11-01 22:54:02,135 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockNumber,StockName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,BatchNo,TotalQty,lastPrice,TotalAmt,OweQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode,totalWeight from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockNumber as StockNumber,     tblStock.StockName as StockName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.BarCode as BarCode,     tblStocks.BatchNo as BatchNo,     sum(tblStocks.lastQty) as TotalQty,     (case when sum(tblStocks.lastQty)=0 then 0 else  sum(tblStocks.lastAmount)/sum(tblStocks.lastQty) end) as lastPrice,     sum(tblStocks.lastAmount) as TotalAmt,     sum(tblStocks.OweQty) as OweQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-11-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode,     tblGoods.netWeight*sum(tblStocks.lastQty) as totalWeight   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00003000050002C'))               and tblStocks.lastQty >0 group by     tblStock.classCode,    tblGoods.classCode,    tblStock.StockNumber,    tblStock.StockName,    tblGoods.GoodsNumber,    tblGoods.GoodsFullName,    tblGoods.GoodsSpec,    tblGoods.BaseUnit,    tblGoods.BarCode,    tblStocks.BatchNo,    tblGoods.netWeight  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-11-01 22:54:02,137 Line:689 通过SQL读原始数据：2
 [DEBUG] 2017-11-01 22:54:02,137 Line:1391 整理数据：0
 [DEBUG] 2017-11-01 22:54:12,074 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:54:12,076 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:44:50,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:44:48,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012244485290191,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:54:12,201 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:54:12,216 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:54:12,321 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:54:12,329 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:12,330 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:12,330 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,330 Line:1270 add
 [DEBUG] 2017-11-01 22:54:12,408 Line:425 ************上述语句执行时间：78
 [DEBUG] 2017-11-01 22:54:12,408 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,409 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,409 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,414 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:54:12,414 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,416 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,416 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:54:12,416 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,416 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,420 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:54:12,421 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,422 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,423 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,423 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,424 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,435 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:54:12,435 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,437 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,437 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,437 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,438 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,453 Line:1043 ---上述语句时间---16
 [DEBUG] 2017-11-01 22:54:12,454 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,455 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,455 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:54:12,455 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,456 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,458 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:54:12,458 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,460 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,460 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,461 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,461 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,468 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:54:12,469 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,470 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,471 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,471 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,471 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,480 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:54:12,480 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,481 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,482 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,482 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,483 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,492 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:54:12,492 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,493 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,494 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,494 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,494 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,511 Line:1043 ---上述语句时间---17
 [DEBUG] 2017-11-01 22:54:12,512 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,513 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,513 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:54:12,513 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,514 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,520 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:54:12,520 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,521 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,521 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:54:12,522 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,522 Line:988 1值：1
 [DEBUG] 2017-11-01 22:54:12,522 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,526 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:54:12,527 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:54:12,528 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,528 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:54:12,528 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:12,528 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,531 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:54:12,531 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:54:12,531 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:54:12,531 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:54:12,531 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:54:12,532 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:54:12,532 Line:313 exeCondition:tblBuyInStock_Delete_One :false
 [DEBUG] 2017-11-01 22:54:12,533 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:12,533 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:54:12,534 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:12,534 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:12,535 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,535 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:54:12,535 Line:1270 1
 [DEBUG] 2017-11-01 22:54:12,673 Line:425 ************上述语句执行时间：139
 [DEBUG] 2017-11-01 22:54:12,673 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:54:12,675 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:12,675 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:12,675 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:54:12,676 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,676 Line:1270 00001
 [DEBUG] 2017-11-01 22:54:12,676 Line:1270 1
 [DEBUG] 2017-11-01 22:54:12,848 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:54:12,848 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:54:12,849 Line:425 ************上述语句执行时间：174
 [DEBUG] 2017-11-01 22:54:12,849 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:54:12,850 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:12,851 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:12,851 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:12,852 Line:1270 delete
 [DEBUG] 2017-11-01 22:54:12,971 Line:425 ************上述语句执行时间：120
 [DEBUG] 2017-11-01 22:54:12,971 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:54:12,972 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:12,973 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:12,973 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:54:12,973 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:54:12,973 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:54:13,050 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:54:13,050 Line:425 ************上述语句执行时间：78
 [DEBUG] 2017-11-01 22:54:13,050 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:54:13,051 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:13,052 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:54:13,053 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:13,053 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:54:13,054 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:13,054 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:54:13,055 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:13,055 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:13,055 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,056 Line:1270 delete
 [DEBUG] 2017-11-01 22:54:13,071 Line:425 ************上述语句执行时间：16
 [DEBUG] 2017-11-01 22:54:13,071 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:54:13,073 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:13,073 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:54:13,074 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,074 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,075 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,075 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,075 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,076 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,076 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,265 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:54:13,265 Line:408 ************上述语句执行时间：192
 [DEBUG] 2017-11-01 22:54:13,266 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:54:13,266 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:13,266 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:13,274 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:54:13,274 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:54:13,274 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:54:13,275 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:13,276 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:54:13,276 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:54:13,277 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:54:13,277 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:54:13,285 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:54:13,285 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-11-01 22:54:14,833 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:54:14,834 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:54:14,835 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:54:14,857 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:54:30,746 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:54:31,671 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:54:46,497 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D097348AA6557B5493C0E20C98562ED3F03CD4
 [ERROR] 2017-11-01 22:54:46,540 Line:119 ------保存成功
 [DEBUG] 2017-11-01 22:54:51,569 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:54:51,571 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:44:50,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:44:48,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012244485290191,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:54:51,591 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:54:51,606 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,616 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:54:51,641 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:51,642 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:54:51,642 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:54:51,643 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:54:51,643 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:54:51,643 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:54:51,644 Line:1270 0
 [DEBUG] 2017-11-01 22:54:51,644 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:54:51,644 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:54:51,668 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:54:51,669 Line:425 ************上述语句执行时间：27
 [DEBUG] 2017-11-01 22:54:51,669 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:54:51,670 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:51,671 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:54:51,671 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,673 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:54:51,673 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:54:51,674 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:54:51,675 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,682 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:54:51,682 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:54:51,683 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:54:51,683 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:54:51,683 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:54:51,683 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:54:51,684 Line:5993 6:1
 [DEBUG] 2017-11-01 22:54:51,684 Line:5993 7:
 [DEBUG] 2017-11-01 22:54:51,684 Line:5993 8:2
 [DEBUG] 2017-11-01 22:54:51,684 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:54:51,685 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:54:51,685 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:54:51,685 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:54:51,686 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:54:51,686 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:54:51,686 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:54:51,686 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:54:51,687 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:54:51,687 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:54:51,687 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:54:51,688 Line:5993 20:11
 [DEBUG] 2017-11-01 22:54:51,688 Line:5993 21:11
 [DEBUG] 2017-11-01 22:54:51,688 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:54:51,688 Line:5993 23:
 [DEBUG] 2017-11-01 22:54:51,689 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:54:51,689 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:54:51,689 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:54:51,689 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:54:51,690 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:54:51,690 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:54:51,690 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:54:51,691 Line:5993 31:
 [DEBUG] 2017-11-01 22:54:51,691 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:54:51,691 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:54:51,692 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:54:51,692 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:54:51,692 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:54:51,693 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:54:51,693 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:54:51,693 Line:5993 39:
 [DEBUG] 2017-11-01 22:54:51,693 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:54:51,694 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:54:51,694 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:54:51,694 Line:5993 43:
 [DEBUG] 2017-11-01 22:54:51,694 Line:5993 44:
 [DEBUG] 2017-11-01 22:54:51,695 Line:5993 45:1
 [DEBUG] 2017-11-01 22:54:51,695 Line:5993 46:2017-11-01 22:54:51
 [DEBUG] 2017-11-01 22:54:51,708 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:54:51,712 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:54:51,713 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:54:51,713 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,713 Line:5853 3:97763882_1711012254517120198
 [DEBUG] 2017-11-01 22:54:51,713 Line:5853 4:
 [DEBUG] 2017-11-01 22:54:51,714 Line:5853 5:
 [DEBUG] 2017-11-01 22:54:51,714 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:54:51,714 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:54:51,715 Line:5853 8:
 [DEBUG] 2017-11-01 22:54:51,715 Line:5853 9:
 [DEBUG] 2017-11-01 22:54:51,715 Line:5853 10:
 [DEBUG] 2017-11-01 22:54:51,715 Line:5853 11:
 [DEBUG] 2017-11-01 22:54:51,716 Line:5853 12:
 [DEBUG] 2017-11-01 22:54:51,716 Line:5853 13:
 [DEBUG] 2017-11-01 22:54:51,716 Line:5853 14:
 [DEBUG] 2017-11-01 22:54:51,717 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:54:51,717 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:54:51,717 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:54:51,717 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:54:51,718 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:54:51,718 Line:5853 20:0
 [DEBUG] 2017-11-01 22:54:51,718 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:54:51,719 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:54:51,719 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:54:51,719 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:54:51,719 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:54:51,720 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:54:51,720 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:54:51,720 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:54:51,721 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:54:51,721 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:54:51,721 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:54:51,721 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:54:51,722 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:54:51,722 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:54:51,722 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:54:51,723 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:54:51,723 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:54:51,723 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:54:51,724 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:54:51,724 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:54:51,725 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:54:51,725 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:54:51,726 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:54:51,726 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:54:51,726 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:54:51,726 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:54:51,727 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:54:51,727 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:54:51,727 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:54:51,727 Line:5853 50:0
 [DEBUG] 2017-11-01 22:54:51,728 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:54:51,728 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:54:51,728 Line:5853 53:0
 [DEBUG] 2017-11-01 22:54:51,728 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:54:51,729 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:54:51,729 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:54:51,729 Line:5853 57:0
 [DEBUG] 2017-11-01 22:54:51,729 Line:5853 58:0
 [DEBUG] 2017-11-01 22:54:51,730 Line:5853 59:
 [DEBUG] 2017-11-01 22:54:51,730 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:54:51,730 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:54:51,730 Line:5853 62:
 [DEBUG] 2017-11-01 22:54:51,730 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:54:51,731 Line:5853 64:0
 [DEBUG] 2017-11-01 22:54:51,731 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:54:51,742 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:54:51,742 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,743 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,753 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:54:51,753 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:54:51,753 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:54:51,754 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,754 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,758 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:54:51,759 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:54:51,759 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:54:51,760 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,761 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:54:51,762 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,762 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:54:51,762 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,763 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,772 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:54:51,772 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-11-01 22:54:51,772 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:54:51,773 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,773 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,782 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:54:51,783 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:54:51,783 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:54:51,783 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,783 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,786 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:54:51,786 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:54:51,787 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:54:51,787 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,787 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,791 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:54:51,791 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:54:51,791 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:54:51,793 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,793 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:54:51,794 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,794 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:54:51,795 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,796 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:54:51,797 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,798 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:54:51,799 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,800 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:54:51,802 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,802 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:54:51,804 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,805 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:54:51,808 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,808 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:54:51,810 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:51,811 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:54:51,811 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:54:51,811 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,816 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:54:51,816 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:54:51,817 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:54:51,818 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,818 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:54:51,820 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:51,822 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:54:51,822 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,822 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,823 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:54:51,832 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:54:51,833 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:54:51,834 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,835 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:54:51,835 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,836 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,836 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:54:51,849 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-11-01 22:54:51,849 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:54:51,851 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,851 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:54:51,852 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,852 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,853 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:54:51,866 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-11-01 22:54:51,867 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:54:51,868 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,869 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:54:51,869 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,869 Line:988 1值：true
 [DEBUG] 2017-11-01 22:54:51,870 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,886 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:54:51,886 Line:1043 ---上述语句时间---17
 [DEBUG] 2017-11-01 22:54:51,886 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:54:51,888 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,888 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:54:51,889 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,889 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,900 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-11-01 22:54:51,901 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:51,902 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,902 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:54:51,902 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,903 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,908 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:54:51,909 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:51,910 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,910 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:54:51,910 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,910 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,917 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-11-01 22:54:51,917 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:51,918 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,919 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:54:51,920 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,920 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:54:51,920 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,920 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,926 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:54:51,926 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:51,928 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,928 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:54:51,929 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,929 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:54:51,929 Line:988 2值：0
 [DEBUG] 2017-11-01 22:54:51,930 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,951 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:54:51,951 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:54:51,951 Line:1043 ---上述语句时间---23
 [DEBUG] 2017-11-01 22:54:51,952 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:54:51,953 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,954 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:54:51,954 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,955 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:51,982 Line:1043 ---上述语句时间---28
 [DEBUG] 2017-11-01 22:54:51,983 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:51,985 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:51,985 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:54:51,985 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:51,986 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,005 Line:1043 ---上述语句时间---20
 [DEBUG] 2017-11-01 22:54:52,006 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:52,007 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,008 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:54:52,008 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:52,008 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,011 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:54:52,011 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:54:52,012 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,012 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:54:52,013 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:52,013 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,017 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-11-01 22:54:52,018 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:54:52,019 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,020 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:54:52,020 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:52,020 Line:988 1值：
 [DEBUG] 2017-11-01 22:54:52,021 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:54:52,026 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-11-01 22:54:52,027 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:54:52,027 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:52,027 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,028 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:54:52,028 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:54:52,028 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:54:52,034 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:54:52,035 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:54:52,036 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,037 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:54:52,038 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,038 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:54:52,039 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,040 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:54:52,041 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:52,042 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:54:52,043 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:52,043 Line:988 1值：1
 [DEBUG] 2017-11-01 22:54:52,043 Line:988 2值：1
 [DEBUG] 2017-11-01 22:54:52,052 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:54:52,053 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-11-01 22:54:52,053 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:54:52,053 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:54:52,053 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,084 Line:1043 ---上述语句时间---31
 [DEBUG] 2017-11-01 22:54:52,084 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:54:52,086 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,086 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:54:52,088 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,088 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:54:52,089 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:52,090 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:54:52,091 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,100 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:54:52,100 Line:229 ************上述语句执行时间：10
 [DEBUG] 2017-11-01 22:54:52,100 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:54:52,101 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:54:52,101 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,101 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,113 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:54:52,114 Line:229 ************上述语句执行时间：14
 [DEBUG] 2017-11-01 22:54:52,114 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:54:52,115 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,116 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,126 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:54:52,126 Line:229 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:54:52,126 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:54:52,127 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,131 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:54:52,132 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:54:52,132 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:54:52,132 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,140 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:54:52,140 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:54:52,140 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:54:52,141 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:52,142 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:54:52,142 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:54:52,142 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,143 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:54:52,143 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:54:52,143 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:54:52,144 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:52,145 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:54:52,145 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,164 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:54:52,165 Line:408 ************上述语句执行时间：20
 [DEBUG] 2017-11-01 22:54:52,165 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:54:52,166 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,184 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:54:52,184 Line:408 ************上述语句执行时间：19
 [DEBUG] 2017-11-01 22:54:52,185 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:54:52,186 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:52,186 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:54:52,186 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:54:52,186 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:54:52,187 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:54:52,187 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:54:52,187 Line:1270 0
 [DEBUG] 2017-11-01 22:54:52,187 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:54:52,187 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:54:52,192 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:54:52,193 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:54:52,193 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:54:52,194 Line:321 flag:true
 [DEBUG] 2017-11-01 22:54:52,195 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:54:52,195 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:54:52,195 Line:1270 add
 [DEBUG] 2017-11-01 22:54:52,198 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:54:52,198 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:54:52,199 Line:321 flag:false
 [DEBUG] 2017-11-01 22:54:52,207 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:54:52,276 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:54:52,276 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:54:52,279 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:54:52,289 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:54:54,514 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:54:54,515 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:54:54,515 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:54:54,521 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:54:54,529 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:54:55,354 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:54:55,354 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:54:55,354 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:54:55,364 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:21,387 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:55:21,389 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:44:50,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:54:51,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012254517120198,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:55:21,414 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:21,422 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,429 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:55:21,442 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,443 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:55:21,444 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:55:21,444 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:55:21,445 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:21,445 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:21,445 Line:1270 0
 [DEBUG] 2017-11-01 22:55:21,446 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:55:21,446 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:21,449 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:21,450 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:55:21,450 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:55:21,452 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,452 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:55:21,453 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,454 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:55:21,454 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:21,455 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:55:21,456 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,461 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:55:21,462 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:55:21,462 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:55:21,463 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:55:21,463 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:55:21,463 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:55:21,464 Line:5993 6:1
 [DEBUG] 2017-11-01 22:55:21,464 Line:5993 7:
 [DEBUG] 2017-11-01 22:55:21,464 Line:5993 8:2
 [DEBUG] 2017-11-01 22:55:21,465 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:55:21,465 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:55:21,465 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:55:21,466 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:55:21,466 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:55:21,466 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:55:21,467 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:55:21,467 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:21,467 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:55:21,468 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:55:21,468 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:55:21,468 Line:5993 20:11
 [DEBUG] 2017-11-01 22:55:21,469 Line:5993 21:11
 [DEBUG] 2017-11-01 22:55:21,469 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:55:21,469 Line:5993 23:
 [DEBUG] 2017-11-01 22:55:21,470 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:55:21,470 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:55:21,470 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:21,470 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:55:21,471 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:55:21,471 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:55:21,471 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:55:21,472 Line:5993 31:
 [DEBUG] 2017-11-01 22:55:21,472 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:55:21,472 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:55:21,473 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:55:21,473 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:55:21,473 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:55:21,473 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:55:21,474 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:55:21,474 Line:5993 39:
 [DEBUG] 2017-11-01 22:55:21,475 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:55:21,475 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:55:21,475 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:55:21,476 Line:5993 43:
 [DEBUG] 2017-11-01 22:55:21,476 Line:5993 44:
 [DEBUG] 2017-11-01 22:55:21,476 Line:5993 45:1
 [DEBUG] 2017-11-01 22:55:21,477 Line:5993 46:2017-11-01 22:55:21
 [DEBUG] 2017-11-01 22:55:21,478 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:55:21,479 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:55:21,480 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:21,480 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,480 Line:5853 3:97763882_1711012255214790201
 [DEBUG] 2017-11-01 22:55:21,480 Line:5853 4:
 [DEBUG] 2017-11-01 22:55:21,480 Line:5853 5:
 [DEBUG] 2017-11-01 22:55:21,481 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:55:21,481 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:55:21,481 Line:5853 8:
 [DEBUG] 2017-11-01 22:55:21,481 Line:5853 9:
 [DEBUG] 2017-11-01 22:55:21,481 Line:5853 10:
 [DEBUG] 2017-11-01 22:55:21,482 Line:5853 11:
 [DEBUG] 2017-11-01 22:55:21,482 Line:5853 12:
 [DEBUG] 2017-11-01 22:55:21,482 Line:5853 13:
 [DEBUG] 2017-11-01 22:55:21,483 Line:5853 14:
 [DEBUG] 2017-11-01 22:55:21,483 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:55:21,483 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:55:21,484 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:55:21,484 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:55:21,484 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:55:21,485 Line:5853 20:0
 [DEBUG] 2017-11-01 22:55:21,485 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:55:21,485 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:55:21,486 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:55:21,486 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:55:21,486 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:55:21,486 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:55:21,487 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:55:21,487 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:55:21,487 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:55:21,488 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:55:21,488 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:55:21,488 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:55:21,489 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:55:21,489 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:55:21,490 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:55:21,490 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:55:21,490 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:55:21,491 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:55:21,491 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:55:21,491 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:55:21,492 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:55:21,492 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:55:21,492 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:55:21,493 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:55:21,493 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:55:21,493 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:55:21,494 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:55:21,494 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:55:21,494 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:55:21,495 Line:5853 50:0
 [DEBUG] 2017-11-01 22:55:21,495 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:55:21,495 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:55:21,496 Line:5853 53:0
 [DEBUG] 2017-11-01 22:55:21,496 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:55:21,496 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:55:21,497 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:55:21,497 Line:5853 57:0
 [DEBUG] 2017-11-01 22:55:21,497 Line:5853 58:0
 [DEBUG] 2017-11-01 22:55:21,498 Line:5853 59:
 [DEBUG] 2017-11-01 22:55:21,498 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:55:21,498 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:55:21,499 Line:5853 62:
 [DEBUG] 2017-11-01 22:55:21,499 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:55:21,499 Line:5853 64:0
 [DEBUG] 2017-11-01 22:55:21,500 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:55:21,504 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:55:21,504 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,505 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,506 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:55:21,507 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:21,507 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:55:21,507 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,508 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,510 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:55:21,511 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:55:21,511 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:55:21,512 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,512 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:55:21,513 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,514 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:55:21,514 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,514 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,515 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:55:21,516 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,516 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:55:21,516 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,517 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,518 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:55:21,518 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,518 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:55:21,518 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,519 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,520 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:55:21,520 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,520 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:55:21,521 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,521 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,522 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:55:21,523 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:21,523 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:55:21,525 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,526 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:55:21,528 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,528 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:55:21,530 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,530 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:55:21,531 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,532 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:55:21,534 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,534 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:55:21,536 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,536 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:55:21,538 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,539 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:55:21,541 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,542 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:55:21,543 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,544 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:55:21,544 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:21,544 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,545 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:55:21,545 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:21,546 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:55:21,547 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,547 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:55:21,549 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,550 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:55:21,551 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,551 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,552 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:55:21,553 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:21,554 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:21,556 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,556 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:55:21,556 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,557 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,557 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:55:21,560 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:55:21,560 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:21,562 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,563 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:55:21,563 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,564 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,564 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:55:21,565 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,566 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:21,567 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,567 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:55:21,567 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,568 Line:988 1值：true
 [DEBUG] 2017-11-01 22:55:21,568 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,569 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:55:21,569 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,570 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:55:21,571 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,571 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:55:21,571 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,572 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,573 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,573 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,575 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,575 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:55:21,575 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,576 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,577 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,577 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,578 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,579 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:55:21,579 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,579 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,580 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:21,581 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,582 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,582 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:55:21,583 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,584 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:55:21,584 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,585 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,585 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:21,586 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,587 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,588 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:55:21,588 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,588 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:55:21,588 Line:988 2值：0
 [DEBUG] 2017-11-01 22:55:21,589 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,590 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:55:21,590 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:55:21,591 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:55:21,591 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:55:21,593 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,593 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:55:21,593 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,594 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,595 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,595 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,596 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,597 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:55:21,597 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,597 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,598 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:21,599 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,600 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,601 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:55:21,601 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,602 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,602 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:21,603 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:21,604 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,604 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:55:21,605 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,605 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,606 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,606 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:55:21,607 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,608 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:55:21,608 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,608 Line:988 1值：
 [DEBUG] 2017-11-01 22:55:21,609 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:55:21,610 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:21,610 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:55:21,610 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,611 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,611 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:21,612 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:21,612 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:21,613 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:21,614 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:55:21,615 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,616 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:21,617 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,618 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:55:21,620 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,620 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:55:21,622 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,623 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:55:21,624 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,624 Line:988 1值：1
 [DEBUG] 2017-11-01 22:55:21,624 Line:988 2值：1
 [DEBUG] 2017-11-01 22:55:21,626 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:55:21,626 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:21,627 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:55:21,627 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:21,627 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,630 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:21,630 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:55:21,632 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,632 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:55:21,633 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,634 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:55:21,635 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,637 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:55:21,638 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,639 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:21,639 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:21,640 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:55:21,640 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:55:21,640 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,641 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,643 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:21,643 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:21,643 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:55:21,644 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,644 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,646 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:21,646 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:21,647 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:55:21,647 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,648 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:21,648 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:21,649 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:55:21,649 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,650 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:21,651 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:21,651 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:55:21,653 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,653 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:55:21,654 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:21,654 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,655 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:55:21,655 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:21,656 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:55:21,657 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,658 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:55:21,658 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,662 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:55:21,662 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:55:21,663 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:55:21,663 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,666 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:55:21,666 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:55:21,667 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:55:21,668 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,669 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:55:21,669 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:55:21,670 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:55:21,670 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:21,671 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:21,671 Line:1270 0
 [DEBUG] 2017-11-01 22:55:21,671 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:55:21,672 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:21,694 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:21,695 Line:425 ************上述语句执行时间：26
 [DEBUG] 2017-11-01 22:55:21,695 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:55:21,697 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:21,698 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:21,699 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:21,699 Line:1270 add
 [DEBUG] 2017-11-01 22:55:21,704 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 22:55:21,704 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:55:21,706 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:21,712 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:21,792 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:55:21,793 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:55:21,795 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:21,802 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:24,138 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:55:24,138 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:55:24,139 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:24,144 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:24,157 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:25,147 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:55:25,148 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:55:25,148 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:25,157 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:26,389 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:55:26,391 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:44:50,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:55:21,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012255214790201,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:55:26,412 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:26,420 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,425 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:55:26,433 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,434 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:55:26,434 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:55:26,434 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:55:26,434 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:26,435 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:26,435 Line:1270 0
 [DEBUG] 2017-11-01 22:55:26,435 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:55:26,435 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:26,437 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:26,438 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:55:26,438 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:55:26,439 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,440 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:55:26,440 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,441 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:55:26,441 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:26,441 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:55:26,442 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,445 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:55:26,446 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:55:26,446 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:55:26,446 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:55:26,447 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:55:26,447 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:55:26,447 Line:5993 6:1
 [DEBUG] 2017-11-01 22:55:26,447 Line:5993 7:
 [DEBUG] 2017-11-01 22:55:26,448 Line:5993 8:2
 [DEBUG] 2017-11-01 22:55:26,448 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:55:26,448 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:55:26,449 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:55:26,449 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:55:26,449 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:55:26,449 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:55:26,450 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:55:26,450 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:26,450 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:55:26,450 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:55:26,451 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:55:26,451 Line:5993 20:11
 [DEBUG] 2017-11-01 22:55:26,451 Line:5993 21:11
 [DEBUG] 2017-11-01 22:55:26,452 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:55:26,452 Line:5993 23:
 [DEBUG] 2017-11-01 22:55:26,452 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:55:26,453 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:55:26,453 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:26,453 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:55:26,454 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:55:26,454 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:55:26,454 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:55:26,454 Line:5993 31:
 [DEBUG] 2017-11-01 22:55:26,455 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:55:26,455 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:55:26,455 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:55:26,455 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:55:26,455 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:55:26,456 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:55:26,456 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:55:26,456 Line:5993 39:
 [DEBUG] 2017-11-01 22:55:26,456 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:55:26,456 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:55:26,457 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:55:26,457 Line:5993 43:
 [DEBUG] 2017-11-01 22:55:26,457 Line:5993 44:
 [DEBUG] 2017-11-01 22:55:26,457 Line:5993 45:1
 [DEBUG] 2017-11-01 22:55:26,457 Line:5993 46:2017-11-01 22:55:26
 [DEBUG] 2017-11-01 22:55:26,459 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:55:26,461 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:55:26,461 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:26,461 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,461 Line:5853 3:97763882_1711012255264600204
 [DEBUG] 2017-11-01 22:55:26,462 Line:5853 4:
 [DEBUG] 2017-11-01 22:55:26,462 Line:5853 5:
 [DEBUG] 2017-11-01 22:55:26,462 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:55:26,462 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:55:26,463 Line:5853 8:
 [DEBUG] 2017-11-01 22:55:26,463 Line:5853 9:
 [DEBUG] 2017-11-01 22:55:26,463 Line:5853 10:
 [DEBUG] 2017-11-01 22:55:26,463 Line:5853 11:
 [DEBUG] 2017-11-01 22:55:26,463 Line:5853 12:
 [DEBUG] 2017-11-01 22:55:26,463 Line:5853 13:
 [DEBUG] 2017-11-01 22:55:26,464 Line:5853 14:
 [DEBUG] 2017-11-01 22:55:26,464 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:55:26,464 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:55:26,464 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:55:26,464 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:55:26,465 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:55:26,465 Line:5853 20:0
 [DEBUG] 2017-11-01 22:55:26,465 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:55:26,465 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:55:26,465 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:55:26,466 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:55:26,466 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:55:26,466 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:55:26,466 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:55:26,466 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:55:26,467 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:55:26,467 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:55:26,467 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:55:26,467 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:55:26,468 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:55:26,468 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:55:26,468 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:55:26,468 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:55:26,468 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:55:26,469 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:55:26,469 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:55:26,469 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:55:26,469 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:55:26,469 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:55:26,469 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:55:26,470 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:55:26,470 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:55:26,470 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:55:26,470 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:55:26,470 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:55:26,471 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:55:26,471 Line:5853 50:0
 [DEBUG] 2017-11-01 22:55:26,471 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:55:26,471 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:55:26,471 Line:5853 53:0
 [DEBUG] 2017-11-01 22:55:26,472 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:55:26,472 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:55:26,472 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:55:26,472 Line:5853 57:0
 [DEBUG] 2017-11-01 22:55:26,472 Line:5853 58:0
 [DEBUG] 2017-11-01 22:55:26,473 Line:5853 59:
 [DEBUG] 2017-11-01 22:55:26,473 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:55:26,473 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:55:26,473 Line:5853 62:
 [DEBUG] 2017-11-01 22:55:26,473 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:55:26,473 Line:5853 64:0
 [DEBUG] 2017-11-01 22:55:26,474 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:55:26,476 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:55:26,476 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,476 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,477 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:55:26,477 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,478 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:55:26,478 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,478 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,479 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:55:26,479 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,479 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:55:26,480 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,480 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:55:26,481 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,481 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:55:26,482 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,482 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,483 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:55:26,483 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,483 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:55:26,483 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,484 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,484 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:55:26,485 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,485 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:55:26,485 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,485 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,486 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:55:26,486 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,486 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:55:26,486 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,487 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,487 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:55:26,487 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,488 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:55:26,489 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,489 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:55:26,490 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,490 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:55:26,491 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,492 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:55:26,493 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,493 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:55:26,494 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,494 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:55:26,495 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,495 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:55:26,496 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,497 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:55:26,498 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,498 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:55:26,500 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,501 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:55:26,501 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:26,501 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,502 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:55:26,502 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:26,503 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:55:26,504 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,505 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:55:26,506 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,509 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:55:26,510 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,510 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,511 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:55:26,512 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,512 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:26,513 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,514 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:55:26,514 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,514 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,515 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:55:26,515 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,516 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:26,517 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,517 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:55:26,517 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,518 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,518 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:55:26,519 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,519 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:26,520 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,521 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:55:26,521 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,521 Line:988 1值：true
 [DEBUG] 2017-11-01 22:55:26,521 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,522 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:55:26,523 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,523 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:55:26,525 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,525 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:55:26,526 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,526 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,527 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,528 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,529 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,529 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:55:26,530 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,530 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,531 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,531 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,532 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,533 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:55:26,533 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,533 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,534 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,534 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,535 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,536 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:55:26,537 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,537 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:55:26,538 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,538 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,540 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,540 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,541 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,542 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:55:26,542 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,542 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:55:26,542 Line:988 2值：0
 [DEBUG] 2017-11-01 22:55:26,543 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,544 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:55:26,545 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:55:26,545 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,545 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:55:26,546 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,546 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:55:26,547 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,547 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,548 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,548 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,550 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,550 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:55:26,550 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,550 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,551 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:26,552 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,553 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,554 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:55:26,555 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,555 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,556 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,556 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:55:26,557 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,557 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:55:26,558 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,558 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,559 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,559 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:55:26,561 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,561 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:55:26,562 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,562 Line:988 1值：
 [DEBUG] 2017-11-01 22:55:26,562 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:55:26,564 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,565 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:55:26,565 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,565 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,566 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:26,566 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:26,567 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:55:26,568 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,568 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:55:26,570 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,571 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:26,572 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,573 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:55:26,574 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,574 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:55:26,575 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,576 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:55:26,577 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,577 Line:988 1值：1
 [DEBUG] 2017-11-01 22:55:26,577 Line:988 2值：1
 [DEBUG] 2017-11-01 22:55:26,579 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:55:26,579 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:26,580 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:55:26,580 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:26,580 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,581 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:26,582 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:55:26,583 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,583 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:55:26,584 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,585 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:55:26,586 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,587 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:55:26,588 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,589 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:26,589 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:26,589 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:55:26,590 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:55:26,590 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,591 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,591 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:26,592 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:26,592 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:55:26,592 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,592 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,593 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:26,593 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:26,594 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:55:26,594 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,595 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:26,595 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:26,596 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:55:26,596 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,597 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:55:26,597 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:26,597 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:55:26,598 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,599 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:55:26,599 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:26,599 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,600 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:55:26,600 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:55:26,601 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:55:26,602 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,602 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:55:26,602 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,604 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:55:26,605 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:26,605 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:55:26,605 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,607 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:55:26,607 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:26,607 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:55:26,608 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,609 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:55:26,609 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:55:26,609 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:55:26,610 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:26,610 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:26,610 Line:1270 0
 [DEBUG] 2017-11-01 22:55:26,610 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:55:26,611 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:26,613 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:26,614 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:55:26,614 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:55:26,616 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:26,616 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:26,616 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:26,617 Line:1270 add
 [DEBUG] 2017-11-01 22:55:26,620 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:55:26,620 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:55:26,622 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:26,626 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:26,685 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:55:26,686 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:55:26,688 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:26,698 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:27,602 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:55:27,602 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:55:27,603 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:27,618 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:27,629 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:27,698 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:55:27,698 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:27,699 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,706 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-11-01 22:55:27,707 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:55:27,709 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:27,709 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:55:27,710 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:27,711 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:55:27,712 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,713 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:55:27,713 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:55:27,713 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:55:27,713 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:27,714 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:27,714 Line:1270 0
 [DEBUG] 2017-11-01 22:55:27,714 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:55:27,714 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:27,716 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:27,717 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:55:27,717 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:55:27,718 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,718 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:27,719 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,719 Line:1270 delete
 [DEBUG] 2017-11-01 22:55:27,720 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:27,720 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:55:27,721 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:27,722 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:55:27,723 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:27,723 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:55:27,724 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,724 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:55:27,724 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,729 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:55:27,730 Line:408 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:55:27,730 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:55:27,731 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,731 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:55:27,732 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,732 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,733 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,733 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,835 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:55:27,835 Line:408 ************上述语句执行时间：104
 [DEBUG] 2017-11-01 22:55:27,835 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:55:27,836 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:27,836 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,837 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:27,837 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:27,837 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:55:27,838 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,839 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:55:27,839 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:27,839 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:27,844 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:55:27,845 Line:408 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:55:27,845 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:55:27,846 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,846 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:27,847 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,847 Line:1270 add
 [DEBUG] 2017-11-01 22:55:27,850 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:55:27,850 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:55:27,851 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:27,852 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:55:27,853 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,853 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:55:27,854 Line:1270 11
 [DEBUG] 2017-11-01 22:55:27,854 Line:1270 2017
 [DEBUG] 2017-11-01 22:55:27,854 Line:1270 11
 [DEBUG] 2017-11-01 22:55:27,854 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:55:27,855 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:55:27,855 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,855 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:27,855 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:55:27,855 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:55:27,855 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:27,856 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:27,856 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:55:27,856 Line:1270 1
 [DEBUG] 2017-11-01 22:55:27,856 Line:1270 1
 [DEBUG] 2017-11-01 22:55:27,856 Line:1270 2017-11-01 22:55:27
 [DEBUG] 2017-11-01 22:55:27,857 Line:1270 2017-11-01 22:55:26
 [DEBUG] 2017-11-01 22:55:27,857 Line:1270 00001
 [DEBUG] 2017-11-01 22:55:27,857 Line:1270 
 [DEBUG] 2017-11-01 22:55:27,857 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:55:27,857 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:55:27,857 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:55:27,858 Line:1270 1
 [DEBUG] 2017-11-01 22:55:27,858 Line:1270 00101
 [DEBUG] 2017-11-01 22:55:27,858 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:55:27,858 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:55:27,858 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:55:27,858 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:55:27,859 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:55:27,859 Line:1270 0.0
 [DEBUG] 2017-11-01 22:55:27,859 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:55:27,859 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:55:27,859 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:55:27,859 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:27,959 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:55:27','2017-11-01 22:55:26','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:55:27,959 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:55:27,960 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:55:27,960 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:55:27,960 Line:425 ************上述语句执行时间：107
 [DEBUG] 2017-11-01 22:55:27,961 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:55:27,962 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,963 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:55:27,964 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:27,966 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:55:27,966 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:27,966 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:55:27,967 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,968 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:55:27,985 Line:425 ************上述语句执行时间：17
 [DEBUG] 2017-11-01 22:55:27,986 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:55:27,987 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:27,987 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:55:27,988 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:27,989 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:27,989 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:55:27,989 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:27,990 Line:1270 00001
 [DEBUG] 2017-11-01 22:55:27,990 Line:1270 1
 [DEBUG] 2017-11-01 22:55:28,100 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:55:28,100 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:55:28,101 Line:425 ************上述语句执行时间：112
 [DEBUG] 2017-11-01 22:55:28,101 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:55:28,101 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:28,101 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:55:28,102 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:55:28,102 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:55:28,102 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:55:28,102 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:55:28,102 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:55:28,104 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:55:28,104 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:55:28,104 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:55:28,104 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:28,105 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:55:28,106 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,106 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:55:28,107 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:28,107 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:28,108 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:28,108 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:55:28,108 Line:1270 1
 [DEBUG] 2017-11-01 22:55:28,108 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:55:28,109 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:55:26@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:55:28,169 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:55:26','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:55:28,169 Line:425 ************上述语句执行时间：62
 [DEBUG] 2017-11-01 22:55:28,169 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:55:28,170 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,171 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:55:28,172 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,172 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:55:28,173 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,173 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:55:28,174 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,174 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:55:28,175 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,176 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:55:28,177 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,177 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:55:28,177 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:28,178 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:55:28,178 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:55:28,178 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:55:28,178 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:55:28,179 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:55:28,179 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:55:28,180 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:55:28,181 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:55:28,181 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:55:28,181 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:55:28,181 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:55:28,182 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,183 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:55:28,184 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,185 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:55:28,186 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,187 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:55:28,188 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:28,189 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:55:28,190 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:28,190 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:28,191 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:28,191 Line:1270 add
 [DEBUG] 2017-11-01 22:55:28,193 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:28,925 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:55:28,926 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:55:28,926 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:28,937 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:55:33,649 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:55:34,574 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:55:44,689 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:55:44,691 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:55:27,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:55:26,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012255264600204,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:55:44,702 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:55:44,706 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:44,749 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:55:44,757 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,758 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:44,758 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,758 Line:1270 add
 [DEBUG] 2017-11-01 22:55:44,760 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:44,761 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,761 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,761 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,762 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,762 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,763 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,764 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:55:44,764 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,764 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,765 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,765 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,767 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,767 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,767 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,768 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,768 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,769 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,770 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,770 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,770 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,770 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,771 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,771 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,772 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,773 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:55:44,773 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,773 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,774 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,774 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,775 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,776 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,776 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,776 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,777 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,777 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,778 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,778 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,779 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,779 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,780 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:44,780 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,781 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,781 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,782 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,782 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,783 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:44,783 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,784 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,785 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,785 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,785 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,786 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:44,786 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,787 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,788 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:55:44,788 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,788 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,789 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:55:44,790 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,791 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,791 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:55:44,791 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,792 Line:988 1值：1
 [DEBUG] 2017-11-01 22:55:44,792 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,793 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:44,793 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:55:44,794 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,795 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:55:44,795 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,795 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,796 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:55:44,797 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:55:44,797 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:55:44,797 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:55:44,798 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:55:44,798 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:55:44,798 Line:313 exeCondition:tblBuyInStock_Delete_One :false
 [DEBUG] 2017-11-01 22:55:44,799 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,800 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:55:44,801 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,802 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:44,802 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,803 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:55:44,803 Line:1270 1
 [DEBUG] 2017-11-01 22:55:44,807 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:55:44,807 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:55:44,808 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,809 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:44,809 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:55:44,809 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,809 Line:1270 00001
 [DEBUG] 2017-11-01 22:55:44,810 Line:1270 1
 [DEBUG] 2017-11-01 22:55:44,823 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:55:44,823 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:55:44,823 Line:425 ************上述语句执行时间：14
 [DEBUG] 2017-11-01 22:55:44,823 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:55:44,825 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,825 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:44,825 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,825 Line:1270 delete
 [DEBUG] 2017-11-01 22:55:44,827 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:55:44,827 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:55:44,828 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,829 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:44,829 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:55:44,830 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:55:44,830 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:55:44,841 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:55:44,841 Line:425 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:55:44,841 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:55:44,842 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,843 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:55:44,844 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,844 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:55:44,845 Line:321 flag:false
 [DEBUG] 2017-11-01 22:55:44,845 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:55:44,846 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,846 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:55:44,847 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,847 Line:1270 delete
 [DEBUG] 2017-11-01 22:55:44,849 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:44,849 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:55:44,850 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,851 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:55:44,851 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,852 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,852 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,853 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,853 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,853 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,853 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,855 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:55:44,856 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:55:44,856 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:55:44,856 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:55:44,857 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:55:44,857 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:44,858 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:55:44,858 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:55:44,859 Line:321 flag:true
 [DEBUG] 2017-11-01 22:55:44,859 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:55:44,860 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:44,860 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:44,861 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:55:44,861 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:55:44,862 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:55:46,408 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:55:46,409 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:55:46,410 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:55:46,433 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:35,835 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D09734395488ECD4F448A30A1BB597E5395919
 [ERROR] 2017-11-01 22:56:35,890 Line:119 ------保存成功
 [ERROR] 2017-11-01 22:56:36,484 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:56:37,439 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:56:48,325 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:56:48,327 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:55:27,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:55:26,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012255264600204,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:56:48,343 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:48,353 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,357 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:56:48,365 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,365 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:56:48,365 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:56:48,365 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:56:48,366 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:56:48,366 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:56:48,366 Line:1270 0
 [DEBUG] 2017-11-01 22:56:48,366 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:56:48,366 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:48,368 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:48,369 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:56:48,369 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:56:48,370 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,371 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:56:48,371 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,371 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:56:48,372 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:48,372 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:56:48,373 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,376 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:56:48,376 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:56:48,376 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:56:48,377 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:56:48,377 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:56:48,377 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:56:48,377 Line:5993 6:1
 [DEBUG] 2017-11-01 22:56:48,378 Line:5993 7:
 [DEBUG] 2017-11-01 22:56:48,378 Line:5993 8:2
 [DEBUG] 2017-11-01 22:56:48,378 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:56:48,379 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:56:48,379 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:56:48,380 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:56:48,380 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:56:48,380 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:56:48,380 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:56:48,380 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:48,381 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:56:48,381 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:56:48,381 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:56:48,381 Line:5993 20:11
 [DEBUG] 2017-11-01 22:56:48,381 Line:5993 21:11
 [DEBUG] 2017-11-01 22:56:48,381 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:56:48,382 Line:5993 23:
 [DEBUG] 2017-11-01 22:56:48,382 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:56:48,382 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:56:48,382 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:48,382 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:56:48,382 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:56:48,383 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:56:48,383 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:56:48,383 Line:5993 31:
 [DEBUG] 2017-11-01 22:56:48,383 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:56:48,383 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:56:48,383 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:56:48,384 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:56:48,384 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:56:48,384 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:56:48,384 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:56:48,384 Line:5993 39:
 [DEBUG] 2017-11-01 22:56:48,384 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:56:48,385 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:56:48,385 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:56:48,385 Line:5993 43:
 [DEBUG] 2017-11-01 22:56:48,385 Line:5993 44:
 [DEBUG] 2017-11-01 22:56:48,385 Line:5993 45:1
 [DEBUG] 2017-11-01 22:56:48,386 Line:5993 46:2017-11-01 22:56:48
 [DEBUG] 2017-11-01 22:56:48,387 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:56:48,388 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:56:48,389 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:48,389 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,389 Line:5853 3:97763882_1711012256483880211
 [DEBUG] 2017-11-01 22:56:48,389 Line:5853 4:
 [DEBUG] 2017-11-01 22:56:48,389 Line:5853 5:
 [DEBUG] 2017-11-01 22:56:48,389 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:56:48,390 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:56:48,390 Line:5853 8:
 [DEBUG] 2017-11-01 22:56:48,390 Line:5853 9:
 [DEBUG] 2017-11-01 22:56:48,390 Line:5853 10:
 [DEBUG] 2017-11-01 22:56:48,390 Line:5853 11:
 [DEBUG] 2017-11-01 22:56:48,391 Line:5853 12:
 [DEBUG] 2017-11-01 22:56:48,391 Line:5853 13:
 [DEBUG] 2017-11-01 22:56:48,391 Line:5853 14:
 [DEBUG] 2017-11-01 22:56:48,391 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:56:48,391 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:56:48,391 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:56:48,392 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:56:48,392 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:56:48,392 Line:5853 20:0
 [DEBUG] 2017-11-01 22:56:48,392 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:56:48,392 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:56:48,392 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:56:48,393 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:56:48,393 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:56:48,393 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:56:48,393 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:56:48,393 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:56:48,393 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:56:48,394 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:56:48,394 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:56:48,394 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:56:48,394 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:56:48,394 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:56:48,395 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:56:48,395 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:56:48,395 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:56:48,395 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:56:48,395 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:56:48,395 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:56:48,396 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:56:48,396 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:56:48,396 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:56:48,396 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:56:48,396 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:56:48,396 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:56:48,397 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:56:48,397 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:56:48,397 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:56:48,397 Line:5853 50:0
 [DEBUG] 2017-11-01 22:56:48,397 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:56:48,397 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 53:0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 57:0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 58:0
 [DEBUG] 2017-11-01 22:56:48,398 Line:5853 59:
 [DEBUG] 2017-11-01 22:56:48,399 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:56:48,399 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:56:48,399 Line:5853 62:
 [DEBUG] 2017-11-01 22:56:48,399 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:56:48,399 Line:5853 64:0
 [DEBUG] 2017-11-01 22:56:48,399 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:56:48,401 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:56:48,402 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,402 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,403 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:56:48,403 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,403 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:56:48,404 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,404 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,405 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:56:48,405 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,405 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:56:48,406 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,406 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:56:48,407 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,408 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:56:48,408 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,408 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,409 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:56:48,409 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:48,409 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:56:48,409 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,410 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,411 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:56:48,411 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,411 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:56:48,411 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,412 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,412 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:56:48,413 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,413 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:56:48,413 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,413 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,414 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:56:48,414 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:48,414 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:56:48,416 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,416 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:56:48,417 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,417 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:56:48,418 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,429 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:56:48,441 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,442 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:56:48,443 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,444 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:56:48,445 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,445 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:56:48,446 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,446 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:56:48,447 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,447 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:56:48,448 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,449 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:56:48,449 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:48,449 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,450 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:56:48,451 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:48,451 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:56:48,452 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,453 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:56:48,454 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,456 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:56:48,456 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,456 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,457 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:56:48,457 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:48,458 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:48,459 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,459 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:56:48,459 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,460 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,460 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:56:48,461 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,461 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:48,462 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,463 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:56:48,463 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,463 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,464 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:56:48,465 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,465 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:48,466 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,467 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:56:48,467 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,467 Line:988 1值：true
 [DEBUG] 2017-11-01 22:56:48,467 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,468 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:56:48,469 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,469 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:56:48,470 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,470 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:56:48,471 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,471 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,472 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,472 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,473 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,474 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:56:48,474 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,474 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,475 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:48,476 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,477 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,477 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:56:48,477 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,477 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,478 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:48,478 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,479 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,480 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:56:48,481 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,481 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:56:48,481 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,481 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,482 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:48,483 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,484 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,484 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:56:48,485 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,485 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:56:48,485 Line:988 2值：0
 [DEBUG] 2017-11-01 22:56:48,486 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,487 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:56:48,487 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:56:48,487 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:56:48,487 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:56:48,489 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,489 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:56:48,489 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,489 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,491 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,491 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,493 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,493 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:56:48,494 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,494 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,495 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,496 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,497 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,499 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:56:48,499 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,500 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,501 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,501 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:48,502 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,502 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:56:48,502 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,503 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,504 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,504 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:56:48,505 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,506 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:56:48,506 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,506 Line:988 1值：
 [DEBUG] 2017-11-01 22:56:48,507 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:56:48,508 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,509 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:56:48,509 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,509 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,509 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:48,510 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:48,510 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:48,511 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,511 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:56:48,512 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,513 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:48,514 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,514 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:56:48,515 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,516 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:56:48,517 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,518 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:56:48,518 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,519 Line:988 1值：1
 [DEBUG] 2017-11-01 22:56:48,519 Line:988 2值：1
 [DEBUG] 2017-11-01 22:56:48,520 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:56:48,521 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:56:48,521 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:56:48,522 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:48,522 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,523 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:48,523 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:56:48,524 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,525 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:56:48,526 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,526 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:56:48,527 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,528 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:56:48,528 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,529 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:48,529 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:48,530 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:56:48,530 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:56:48,530 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,531 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,531 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:48,532 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:48,532 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:56:48,532 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,532 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,533 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:48,533 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:48,533 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:56:48,534 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,534 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:48,534 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:48,535 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:56:48,535 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,536 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:48,536 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:48,537 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:56:48,538 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,539 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:56:48,539 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:48,540 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,540 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:56:48,541 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:48,541 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:56:48,543 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,543 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:56:48,543 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,545 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:56:48,546 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:56:48,546 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:56:48,546 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,548 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:56:48,548 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:48,549 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:56:48,550 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,550 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:56:48,550 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:56:48,551 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:56:48,551 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:56:48,551 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:56:48,551 Line:1270 0
 [DEBUG] 2017-11-01 22:56:48,551 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:56:48,552 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:48,554 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:48,555 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:56:48,555 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:56:48,557 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:48,557 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:56:48,558 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:48,558 Line:1270 add
 [DEBUG] 2017-11-01 22:56:48,562 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:56:48,563 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:56:48,564 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:48,567 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:48,622 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:56:48,622 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:56:48,623 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:48,632 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:52,958 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:56:52,958 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:56:52,959 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:52,979 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:52,991 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:53,825 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:56:53,825 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:56:53,825 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:53,837 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:55,248 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:56:55,249 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:55:27,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:56:48,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012256483880211,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:56:55,262 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:55,269 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,274 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:56:55,281 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,282 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:56:55,282 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:56:55,282 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:56:55,282 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:56:55,282 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:56:55,283 Line:1270 0
 [DEBUG] 2017-11-01 22:56:55,283 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:56:55,283 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:55,285 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:55,285 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:56:55,285 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:56:55,286 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,287 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:56:55,287 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,287 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:56:55,288 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:55,288 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:56:55,289 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,291 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:56:55,291 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:56:55,291 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:56:55,292 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:56:55,292 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:56:55,292 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:56:55,292 Line:5993 6:1
 [DEBUG] 2017-11-01 22:56:55,292 Line:5993 7:
 [DEBUG] 2017-11-01 22:56:55,292 Line:5993 8:2
 [DEBUG] 2017-11-01 22:56:55,293 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:56:55,293 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:56:55,293 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:56:55,293 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:56:55,293 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:56:55,293 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:56:55,294 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:56:55,294 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:55,294 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:56:55,294 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:56:55,294 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:56:55,294 Line:5993 20:11
 [DEBUG] 2017-11-01 22:56:55,295 Line:5993 21:11
 [DEBUG] 2017-11-01 22:56:55,295 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:56:55,295 Line:5993 23:
 [DEBUG] 2017-11-01 22:56:55,295 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:56:55,295 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:56:55,295 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:55,296 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:56:55,296 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:56:55,296 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:56:55,296 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:56:55,296 Line:5993 31:
 [DEBUG] 2017-11-01 22:56:55,297 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:56:55,297 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:56:55,297 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:56:55,297 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:56:55,298 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:56:55,298 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:56:55,298 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:56:55,298 Line:5993 39:
 [DEBUG] 2017-11-01 22:56:55,298 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:56:55,299 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:56:55,299 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:56:55,299 Line:5993 43:
 [DEBUG] 2017-11-01 22:56:55,299 Line:5993 44:
 [DEBUG] 2017-11-01 22:56:55,300 Line:5993 45:1
 [DEBUG] 2017-11-01 22:56:55,300 Line:5993 46:2017-11-01 22:56:55
 [DEBUG] 2017-11-01 22:56:55,302 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:56:55,303 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:56:55,304 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:55,304 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,304 Line:5853 3:97763882_1711012256553030214
 [DEBUG] 2017-11-01 22:56:55,305 Line:5853 4:
 [DEBUG] 2017-11-01 22:56:55,305 Line:5853 5:
 [DEBUG] 2017-11-01 22:56:55,305 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:56:55,305 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:56:55,305 Line:5853 8:
 [DEBUG] 2017-11-01 22:56:55,305 Line:5853 9:
 [DEBUG] 2017-11-01 22:56:55,306 Line:5853 10:
 [DEBUG] 2017-11-01 22:56:55,306 Line:5853 11:
 [DEBUG] 2017-11-01 22:56:55,306 Line:5853 12:
 [DEBUG] 2017-11-01 22:56:55,306 Line:5853 13:
 [DEBUG] 2017-11-01 22:56:55,307 Line:5853 14:
 [DEBUG] 2017-11-01 22:56:55,307 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:56:55,307 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:56:55,307 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:56:55,307 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 20:0
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:56:55,308 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:56:55,309 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:56:55,309 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:56:55,309 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:56:55,309 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:56:55,309 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:56:55,309 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:56:55,310 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:56:55,310 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:56:55,310 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:56:55,310 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:56:55,310 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:56:55,310 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:56:55,311 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:56:55,311 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:56:55,311 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:56:55,311 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:56:55,311 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:56:55,311 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:56:55,312 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:56:55,312 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:56:55,312 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:56:55,312 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:56:55,312 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:56:55,312 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:56:55,313 Line:5853 50:0
 [DEBUG] 2017-11-01 22:56:55,313 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:56:55,313 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:56:55,313 Line:5853 53:0
 [DEBUG] 2017-11-01 22:56:55,313 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:56:55,313 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:56:55,314 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:56:55,314 Line:5853 57:0
 [DEBUG] 2017-11-01 22:56:55,314 Line:5853 58:0
 [DEBUG] 2017-11-01 22:56:55,314 Line:5853 59:
 [DEBUG] 2017-11-01 22:56:55,314 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:56:55,314 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:56:55,315 Line:5853 62:
 [DEBUG] 2017-11-01 22:56:55,315 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:56:55,315 Line:5853 64:0
 [DEBUG] 2017-11-01 22:56:55,315 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:56:55,317 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:56:55,317 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,317 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,318 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:56:55,318 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,318 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:56:55,319 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,319 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,320 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:56:55,320 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,320 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:56:55,321 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,321 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:56:55,323 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,323 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:56:55,323 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,323 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,324 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:56:55,324 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,325 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:56:55,325 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,325 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,326 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:56:55,326 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,326 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:56:55,326 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,327 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,327 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:56:55,327 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,328 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:56:55,328 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,328 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,329 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:56:55,329 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,329 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:56:55,331 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,331 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:56:55,332 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,332 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:56:55,333 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,333 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:56:55,334 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,334 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:56:55,335 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,336 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:56:55,337 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,337 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:56:55,338 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,338 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:56:55,339 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,339 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:56:55,340 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,341 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:56:55,341 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:55,341 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,342 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:56:55,342 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:55,342 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:56:55,343 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,343 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:56:55,344 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,345 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:56:55,346 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,346 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,346 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:56:55,347 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,347 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:55,348 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,349 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:56:55,349 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,350 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,350 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:56:55,351 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,351 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:55,352 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,352 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:56:55,353 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,353 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,353 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:56:55,354 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,355 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:55,356 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,357 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:56:55,357 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,357 Line:988 1值：true
 [DEBUG] 2017-11-01 22:56:55,358 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,359 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:56:55,360 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:56:55,360 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:56:55,362 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,362 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:56:55,362 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,363 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,365 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:56:55,366 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,367 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,368 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:56:55,368 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,368 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,369 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,370 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,372 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,372 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:56:55,373 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,373 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,373 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,375 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,376 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,376 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:56:55,377 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,377 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:56:55,378 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,378 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,379 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,379 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,381 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,381 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:56:55,381 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,381 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:56:55,382 Line:988 2值：0
 [DEBUG] 2017-11-01 22:56:55,382 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,383 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:56:55,383 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:56:55,383 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,384 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:56:55,385 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,385 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:56:55,385 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,386 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,386 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,387 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,388 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,389 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:56:55,389 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,389 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,390 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,391 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,392 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,393 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:56:55,393 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,393 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,394 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:56:55,394 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:56:55,396 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,396 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:56:55,396 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,397 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,398 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,398 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:56:55,399 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,400 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:56:55,400 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,400 Line:988 1值：
 [DEBUG] 2017-11-01 22:56:55,401 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:56:55,402 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,403 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:56:55,403 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,403 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,404 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:55,404 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:55,404 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:56:55,405 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,405 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:56:55,407 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,407 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:56:55,408 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,408 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:56:55,409 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,410 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:56:55,411 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,412 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:56:55,412 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,413 Line:988 1值：1
 [DEBUG] 2017-11-01 22:56:55,413 Line:988 2值：1
 [DEBUG] 2017-11-01 22:56:55,414 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:56:55,414 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,414 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:56:55,415 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:56:55,415 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,416 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:56:55,416 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:56:55,418 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,418 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:56:55,420 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,420 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:56:55,421 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,423 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:56:55,424 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,425 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:55,425 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:55,426 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:56:55,426 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:56:55,426 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,427 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,428 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:55,428 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:56:55,428 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:56:55,429 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,429 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,430 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:55,430 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:55,430 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:56:55,431 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,431 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:55,431 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:55,432 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:56:55,432 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,433 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:56:55,433 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:55,433 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:56:55,434 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,435 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:56:55,435 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:56:55,435 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,436 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:56:55,436 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:56:55,437 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:56:55,438 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,438 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:56:55,438 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,440 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:56:55,440 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:56:55,441 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:56:55,441 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,444 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:56:55,444 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:56:55,444 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:56:55,445 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,446 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:56:55,446 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:56:55,446 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:56:55,447 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:56:55,447 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:56:55,447 Line:1270 0
 [DEBUG] 2017-11-01 22:56:55,447 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:56:55,447 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:55,450 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:56:55,450 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:56:55,450 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:56:55,452 Line:321 flag:true
 [DEBUG] 2017-11-01 22:56:55,452 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:56:55,453 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:56:55,453 Line:1270 add
 [DEBUG] 2017-11-01 22:56:55,455 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:56:55,456 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:56:55,457 Line:321 flag:false
 [DEBUG] 2017-11-01 22:56:55,461 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:55,524 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:56:55,525 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:56:55,527 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:55,537 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:57,748 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:56:57,748 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:56:57,749 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:57,757 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:57,768 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:56:58,909 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:56:58,909 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:56:58,910 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:56:58,927 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:00,269 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:57:00,270 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:55:27,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:56:55,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012256553030214,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:57:00,283 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:00,292 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,297 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:57:00,304 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,305 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:57:00,305 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:57:00,305 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:57:00,305 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:57:00,305 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:00,306 Line:1270 0
 [DEBUG] 2017-11-01 22:57:00,306 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:57:00,306 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:00,308 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:00,308 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:00,309 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:57:00,310 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,310 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:57:00,310 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,311 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:57:00,311 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:57:00,311 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:57:00,312 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,314 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:57:00,314 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:57:00,314 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:57:00,314 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:57:00,315 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:57:00,315 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:57:00,315 Line:5993 6:1
 [DEBUG] 2017-11-01 22:57:00,315 Line:5993 7:
 [DEBUG] 2017-11-01 22:57:00,315 Line:5993 8:2
 [DEBUG] 2017-11-01 22:57:00,316 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:57:00,316 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:57:00,316 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:57:00,316 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:57:00,316 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:57:00,316 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:57:00,317 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:57:00,317 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:57:00,317 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:57:00,317 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:57:00,317 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:57:00,318 Line:5993 20:11
 [DEBUG] 2017-11-01 22:57:00,318 Line:5993 21:11
 [DEBUG] 2017-11-01 22:57:00,318 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:57:00,318 Line:5993 23:
 [DEBUG] 2017-11-01 22:57:00,318 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:57:00,319 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:57:00,319 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:57:00,319 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:57:00,319 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:57:00,319 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:57:00,320 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:57:00,320 Line:5993 31:
 [DEBUG] 2017-11-01 22:57:00,320 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:57:00,321 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:57:00,321 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:57:00,321 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:57:00,321 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:57:00,322 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:57:00,322 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:57:00,323 Line:5993 39:
 [DEBUG] 2017-11-01 22:57:00,323 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:57:00,324 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:57:00,324 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:57:00,324 Line:5993 43:
 [DEBUG] 2017-11-01 22:57:00,325 Line:5993 44:
 [DEBUG] 2017-11-01 22:57:00,325 Line:5993 45:1
 [DEBUG] 2017-11-01 22:57:00,325 Line:5993 46:2017-11-01 22:57:00
 [DEBUG] 2017-11-01 22:57:00,327 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:57:00,328 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:57:00,329 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:57:00,329 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,330 Line:5853 3:97763882_1711012257003280217
 [DEBUG] 2017-11-01 22:57:00,330 Line:5853 4:
 [DEBUG] 2017-11-01 22:57:00,330 Line:5853 5:
 [DEBUG] 2017-11-01 22:57:00,330 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:57:00,331 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:57:00,331 Line:5853 8:
 [DEBUG] 2017-11-01 22:57:00,331 Line:5853 9:
 [DEBUG] 2017-11-01 22:57:00,332 Line:5853 10:
 [DEBUG] 2017-11-01 22:57:00,332 Line:5853 11:
 [DEBUG] 2017-11-01 22:57:00,332 Line:5853 12:
 [DEBUG] 2017-11-01 22:57:00,332 Line:5853 13:
 [DEBUG] 2017-11-01 22:57:00,332 Line:5853 14:
 [DEBUG] 2017-11-01 22:57:00,332 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:57:00,333 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:57:00,333 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:57:00,333 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:57:00,333 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:57:00,334 Line:5853 20:0
 [DEBUG] 2017-11-01 22:57:00,334 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:57:00,334 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:57:00,334 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:57:00,334 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:57:00,335 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:57:00,335 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:57:00,335 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:57:00,335 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:57:00,336 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:57:00,336 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:57:00,336 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:57:00,336 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:57:00,336 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:57:00,336 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:57:00,337 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:57:00,337 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:57:00,337 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:57:00,337 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:57:00,338 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:57:00,338 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:57:00,338 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:57:00,339 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:57:00,339 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:57:00,339 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:57:00,339 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:57:00,340 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:57:00,340 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:57:00,340 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:57:00,341 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:57:00,341 Line:5853 50:0
 [DEBUG] 2017-11-01 22:57:00,341 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:57:00,341 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:57:00,342 Line:5853 53:0
 [DEBUG] 2017-11-01 22:57:00,342 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:57:00,343 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:57:00,343 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:57:00,343 Line:5853 57:0
 [DEBUG] 2017-11-01 22:57:00,343 Line:5853 58:0
 [DEBUG] 2017-11-01 22:57:00,343 Line:5853 59:
 [DEBUG] 2017-11-01 22:57:00,344 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:57:00,344 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:57:00,344 Line:5853 62:
 [DEBUG] 2017-11-01 22:57:00,344 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:57:00,344 Line:5853 64:0
 [DEBUG] 2017-11-01 22:57:00,345 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:57:00,347 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:57:00,348 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,348 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,349 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:57:00,350 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,350 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:57:00,350 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,351 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,351 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:57:00,352 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,352 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:57:00,353 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,354 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:57:00,355 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,355 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:57:00,356 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,356 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,357 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:57:00,372 Line:1043 ---上述语句时间---17
 [DEBUG] 2017-11-01 22:57:00,373 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:57:00,373 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,373 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,374 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:57:00,375 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,375 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:57:00,375 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,376 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,377 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:57:00,378 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,378 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:57:00,378 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,379 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,380 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:57:00,381 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,381 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:57:00,395 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,395 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:57:00,396 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,397 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:57:00,398 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,399 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:57:00,400 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,401 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:57:00,402 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,403 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:57:00,404 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,405 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:57:00,406 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,406 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:57:00,407 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,408 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:57:00,409 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,410 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:57:00,410 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:57:00,411 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,412 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:57:00,412 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:00,413 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:57:00,414 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,415 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:57:00,416 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,418 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:57:00,418 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,419 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,419 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:57:00,421 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,421 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:57:00,423 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,423 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:57:00,423 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,424 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,424 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:57:00,426 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,426 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:57:00,428 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,428 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:57:00,429 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,429 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,429 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:57:00,430 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,431 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:57:00,432 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,432 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:57:00,433 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,433 Line:988 1值：true
 [DEBUG] 2017-11-01 22:57:00,434 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,435 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:57:00,436 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:57:00,436 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:57:00,437 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,438 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:57:00,438 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,438 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,439 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,439 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,440 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,441 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:57:00,441 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,443 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,444 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,444 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,446 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,446 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:57:00,446 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,447 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,455 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-11-01 22:57:00,455 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,457 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,458 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:57:00,459 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,460 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:57:00,460 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,460 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,462 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,463 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,465 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,465 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:57:00,466 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,466 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:57:00,466 Line:988 2值：0
 [DEBUG] 2017-11-01 22:57:00,467 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,469 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:57:00,469 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:57:00,469 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:57:00,470 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:57:00,471 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,472 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:57:00,472 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,473 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,475 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,475 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,477 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,477 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:57:00,478 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,478 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,479 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,480 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,482 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,484 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:57:00,484 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,484 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,485 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:00,486 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:57:00,487 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,488 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:57:00,488 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,489 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,489 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:00,490 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:57:00,491 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,492 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:57:00,492 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,493 Line:988 1值：
 [DEBUG] 2017-11-01 22:57:00,493 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:57:00,494 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,495 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:57:00,495 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,496 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,496 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:57:00,496 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:57:00,497 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:57:00,498 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,499 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:57:00,501 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,501 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:00,503 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,503 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:57:00,505 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,505 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:57:00,507 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,511 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:57:00,511 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,512 Line:988 1值：1
 [DEBUG] 2017-11-01 22:57:00,512 Line:988 2值：1
 [DEBUG] 2017-11-01 22:57:00,514 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:57:00,514 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:00,515 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:57:00,515 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:00,516 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,517 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:00,517 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:57:00,519 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,519 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:57:00,521 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,521 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:57:00,523 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,524 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:57:00,525 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,526 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:57:00,526 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:00,527 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:57:00,527 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:57:00,527 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,528 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,528 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:57:00,529 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:00,529 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:57:00,530 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,530 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,532 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:57:00,532 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:00,533 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:57:00,533 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,534 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:57:00,535 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:00,535 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:57:00,536 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,541 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:57:00,541 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:57:00,542 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:57:00,544 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,545 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:57:00,545 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:57:00,546 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,547 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:57:00,547 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:00,547 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:57:00,549 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,550 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:57:00,550 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,552 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:57:00,552 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:00,553 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:57:00,553 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,555 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:57:00,556 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:00,556 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:57:00,557 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,557 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:57:00,558 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:57:00,558 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:57:00,558 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:57:00,559 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:00,559 Line:1270 0
 [DEBUG] 2017-11-01 22:57:00,559 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:57:00,559 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:00,562 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:00,562 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 22:57:00,562 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:57:00,564 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:00,564 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:00,564 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:00,565 Line:1270 add
 [DEBUG] 2017-11-01 22:57:00,567 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:00,568 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:57:00,569 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:00,572 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:00,618 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:57:00,618 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:57:00,620 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:57:00,629 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:01,567 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:57:01,567 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 22:57:01,567 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:57:01,572 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:57:01,584 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:01,631 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:57:01,632 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:01,632 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,633 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:01,633 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 22:57:01,634 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,634 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 22:57:01,636 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,636 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:57:01,637 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,638 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:57:01,638 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:57:01,638 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:57:01,639 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:57:01,639 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:01,639 Line:1270 0
 [DEBUG] 2017-11-01 22:57:01,640 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:57:01,640 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:01,642 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:01,642 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:57:01,642 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 22:57:01,643 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,644 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:01,644 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,644 Line:1270 delete
 [DEBUG] 2017-11-01 22:57:01,645 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:57:01,645 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:57:01,647 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,647 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 22:57:01,648 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,649 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:57:01,650 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,650 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 22:57:01,650 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,651 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:57:01,651 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:57:01,651 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:57:01,652 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,653 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 22:57:01,653 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,654 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,654 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,654 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,677 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:57:01,678 Line:408 ************上述语句执行时间：25
 [DEBUG] 2017-11-01 22:57:01,678 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:57:01,678 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:01,679 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,680 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:01,680 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:01,680 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:57:01,682 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,682 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 22:57:01,683 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:01,683 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:01,684 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 22:57:01,684 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:01,684 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:57:01,685 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,686 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:01,686 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,686 Line:1270 add
 [DEBUG] 2017-11-01 22:57:01,688 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:01,689 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 22:57:01,690 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,690 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 22:57:01,691 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,692 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:57:01,692 Line:1270 11
 [DEBUG] 2017-11-01 22:57:01,693 Line:1270 2017
 [DEBUG] 2017-11-01 22:57:01,693 Line:1270 11
 [DEBUG] 2017-11-01 22:57:01,693 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:57:01,693 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:57:01,694 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,694 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:57:01,694 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:57:01,694 Line:1270 BI1711001
 [DEBUG] 2017-11-01 22:57:01,694 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:01,695 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:01,695 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 22:57:01,695 Line:1270 1
 [DEBUG] 2017-11-01 22:57:01,695 Line:1270 1
 [DEBUG] 2017-11-01 22:57:01,696 Line:1270 2017-11-01 22:57:01
 [DEBUG] 2017-11-01 22:57:01,696 Line:1270 2017-11-01 22:57:00
 [DEBUG] 2017-11-01 22:57:01,696 Line:1270 00001
 [DEBUG] 2017-11-01 22:57:01,696 Line:1270 
 [DEBUG] 2017-11-01 22:57:01,697 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 22:57:01,697 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:57:01,697 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:57:01,698 Line:1270 1
 [DEBUG] 2017-11-01 22:57:01,698 Line:1270 00101
 [DEBUG] 2017-11-01 22:57:01,698 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 22:57:01,698 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 22:57:01,698 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:01,698 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 22:57:01,699 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 22:57:01,699 Line:1270 0.0
 [DEBUG] 2017-11-01 22:57:01,699 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 22:57:01,699 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 22:57:01,700 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:57:01,700 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:01,714 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 22:57:01','2017-11-01 22:57:00','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 22:57:01,714 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 22:57:01,714 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:57:01,715 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 22:57:01,715 Line:425 ************上述语句执行时间：23
 [DEBUG] 2017-11-01 22:57:01,715 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:57:01,716 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,717 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 22:57:01,717 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:01,718 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 22:57:01,718 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:01,719 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 22:57:01,720 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,720 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 22:57:01,728 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:57:01,729 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 22:57:01,730 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,730 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 22:57:01,732 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,733 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:01,733 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:57:01,733 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,733 Line:1270 00001
 [DEBUG] 2017-11-01 22:57:01,734 Line:1270 1
 [DEBUG] 2017-11-01 22:57:01,743 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:57:01,743 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:57:01,744 Line:425 ************上述语句执行时间：12
 [DEBUG] 2017-11-01 22:57:01,744 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 22:57:01,744 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:01,744 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:57:01,745 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:57:01,745 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:57:01,745 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:57:01,745 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:57:01,745 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 22:57:01,746 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:57:01,746 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:57:01,746 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 22:57:01,747 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:01,747 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:57:01,748 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,748 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 22:57:01,749 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,750 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:01,750 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,750 Line:1270 0002T00007
 [DEBUG] 2017-11-01 22:57:01,750 Line:1270 1
 [DEBUG] 2017-11-01 22:57:01,751 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 22:57:01,751 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 22:57:00@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 22:57:01,756 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 22:57:00','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 22:57:01,757 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:57:01,757 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:57:01,758 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,759 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 22:57:01,760 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,760 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 22:57:01,762 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,762 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 22:57:01,764 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,764 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 22:57:01,766 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,766 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 22:57:01,768 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,768 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 22:57:01,768 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:01,768 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 22:57:01,769 Line:988 2值：0.0
 [DEBUG] 2017-11-01 22:57:01,769 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 22:57:01,769 Line:988 4值：0.0
 [DEBUG] 2017-11-01 22:57:01,769 Line:988 5值：0.0
 [DEBUG] 2017-11-01 22:57:01,770 Line:988 6值：0.0
 [DEBUG] 2017-11-01 22:57:01,770 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:57:01,770 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 22:57:01,771 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 22:57:01,771 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:01,771 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:57:01,772 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,772 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 22:57:01,773 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,773 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:57:01,774 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,775 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 22:57:01,775 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:01,776 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 22:57:01,777 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:01,777 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:01,777 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:01,777 Line:1270 add
 [DEBUG] 2017-11-01 22:57:01,779 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:02,421 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:57:02,421 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:57:02,422 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:57:02,440 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:22,384 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:57:22,385 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[83,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[detail,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[-1,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0.00,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17.0000,];ConsumeTax=[0.0000,];CurrencyRate=[1.0000,];TotalAmount=[1746.15,];TotalTaxAmount=[2043.00,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0.00,];CurTotalAmount=[2043.00,];TotalTariffAmt=[0.00,];CurAlreadyPayAmt=[0.00,];CurBackAmount=[0.00,];CurNeedPayAmt=[2043.00,];CurProceDureExp=[0.00,];ChangeAmt=[0.00,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];InvoiceStatus=[0,];NeedPayAmt=[2043.00,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0.00,];ProceDureExp=[0.00,];AccAmt=[0.00,];FactOutcome=[0.00,];AlreadyPayAmt=[0.00,];DiscountAmount=[0.00,];CurAlrPayAmt=[0.00,];CurDiscountAmount=[0.00,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0.00,];NoInvoiceAmount=[2043.00,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0.00,];CheckPersont=[,];TrackNo=[,];Discount=[100.0000,];DisAmount=[0.00,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043.0000,];CurAfterChangeAmt=[0.00,];CurChangeAmt=[0.00,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:57:01,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:57:00,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012257003280217,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:57:22,398 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:57:22,402 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:57:22,445 Line:313 exeCondition:tblBuyInStock_Delete_One :"1"!= "0"&&"returnAuditing"=="returnAuditing"
 [DEBUG] 2017-11-01 22:57:22,456 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,457 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:22,457 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,457 Line:1270 add
 [DEBUG] 2017-11-01 22:57:22,460 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:22,460 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,460 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,461 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,461 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,462 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,463 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,463 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-11-01 22:57:22,463 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,464 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,466 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:57:22,467 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,469 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,469 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,469 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,470 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,471 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:22,471 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,472 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,472 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,472 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,473 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,474 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:22,474 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,475 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,476 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-11-01 22:57:22,476 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,476 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,477 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,477 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,478 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,478 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,478 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,478 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,479 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,479 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,480 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,481 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,481 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,481 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,482 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,482 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,483 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,483 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,483 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,484 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,484 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,485 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,486 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,486 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,486 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,487 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,487 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,488 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,489 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,489 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-11-01 22:57:22,489 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,490 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,490 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,491 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,492 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,493 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-11-01 22:57:22,493 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,493 Line:988 1值：1
 [DEBUG] 2017-11-01 22:57:22,493 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,494 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:57:22,495 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-11-01 22:57:22,496 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,496 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-11-01 22:57:22,496 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,497 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,497 Line:1025 query condition columnName:BuyOrderID----value:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:57:22,498 Line:1025 query condition columnName:StockCode----value:
 [DEBUG] 2017-11-01 22:57:22,498 Line:1023 query condition columnName:NeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 22:57:22,498 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-11-01 22:57:22,498 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-11-01 22:57:22,498 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:22,499 Line:313 exeCondition:tblBuyInStock_Delete_One :'1' != '0'
 [DEBUG] 2017-11-01 22:57:22,500 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,501 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_updateStocksNotAudit(?,@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:57:22,501 Line:1270 '2017-09-09'
 [DEBUG] 2017-11-01 22:57:22,501 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:57:22,501 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:57:22,502 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:57:22,502 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:57:22,502 Line:1270 0
 [DEBUG] 2017-11-01 22:57:22,502 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:57:22,503 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:22,505 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:22,506 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:57:22,506 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:57:22,507 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,507 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:22,508 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,508 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:57:22,508 Line:1270 1
 [DEBUG] 2017-11-01 22:57:22,513 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 22:57:22,513 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' !='update'
 [DEBUG] 2017-11-01 22:57:22,515 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,515 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:22,515 Line:1270 zh_CN
 [DEBUG] 2017-11-01 22:57:22,516 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,516 Line:1270 00001
 [DEBUG] 2017-11-01 22:57:22,516 Line:1270 1
 [DEBUG] 2017-11-01 22:57:22,528 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='97763882_1711012216276050131')) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 22:57:22,528 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 22:57:22,529 Line:425 ************上述语句执行时间：14
 [DEBUG] 2017-11-01 22:57:22,529 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:57:22,530 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,531 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:22,531 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,531 Line:1270 delete
 [DEBUG] 2017-11-01 22:57:22,533 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:22,533 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:57:22,534 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,535 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:22,535 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:57:22,535 Line:1270 proc_deleteComIni
 [DEBUG] 2017-11-01 22:57:22,535 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-11-01 22:57:22,542 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'false'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='97763882_1711012216276050131'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-11-01 22:57:22,542 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 22:57:22,542 Line:313 exeCondition:tblBuyInStock_Delete_One : 'false'=='true'
 [DEBUG] 2017-11-01 22:57:22,544 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,544 Line:313 exeCondition:tblBuyInStock_Delete_One :'returnAuditing' =='update'
 [DEBUG] 2017-11-01 22:57:22,545 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,546 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-11-01 22:57:22,547 Line:321 flag:false
 [DEBUG] 2017-11-01 22:57:22,547 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:57:22,549 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,549 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 22:57:22,549 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,550 Line:1270 delete
 [DEBUG] 2017-11-01 22:57:22,552 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:57:22,552 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-11-01 22:57:22,553 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,554 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:
-----------------------------------------------------------------------------------			
	update tblBuyApplicationDet set InQty=isnull(InQty,0)- aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) + aa.Qty from tblBuyApplicationDet join (
		select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
		join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
		join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
		join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
		where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

	update tblBuyOrderDet set InQty=tblBuyOrderDet.InQty-aa.Qty,NotInQty=tblBuyOrderDet.NotInQty+aa.Qty    from  tblBuyOrderDet join (select PDBuyOrderAllot.orderDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot join PDBuyOrderAllot on  PDBuyOrderAllot.id=PDBuyInstockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDBuyOrderAllot.orderDetId ) aa on tblBuyOrderDet.id=aa.orderDetId
	
	update PDMRPReqDet set InQty=PDMRPReqDet.InQty-aa.Qty    from  PDMRPReqDet join (select PDMRPReqDetId,sum(PDBuyInStockAllot.Qty) Qty from   PDBuyInStockAllot   join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id where tblBuyInStockDet.f_ref=? group by PDMRPReqDetId ) aa on PDMRPReqDet.id=aa.PDMRPReqDetId
	update PDBuyOrderAllot set InQty=PDBuyOrderAllot.InQty-PDBuyInStockAllot.Qty    from  PDBuyOrderAllot join PDBuyInStockAllot on PDBuyOrderAllot.id=PDBuyInStockAllot.orderAllotId  join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id  where tblBuyInStockDet.f_ref=?
	
	delete PDBuyInStockAllot where inStockDetId in ( select id from tblBuyInStockDet where f_ref=? )
	
	update tblBuyOrderDet set FinishStatus=0 where f_ref in (select BuyOrderID from tblBuyInstockDet where f_ref=?) and FinishStatus=1 and NotInQty>0
	
	update tblBuyOrder set statusId=0 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)!=0

-------------------------------------------------------------------
		
 [DEBUG] 2017-11-01 22:57:22,554 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,554 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,555 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,555 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,556 Line:1157 5值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,556 Line:1157 6值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,556 Line:1157 7值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,578 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:57:22,579 Line:408 ************上述语句执行时间：26
 [DEBUG] 2017-11-01 22:57:22,579 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 22:57:22,579 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:57:22,580 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:57:22,581 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:22,581 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:57:22,581 Line:313 exeCondition:tblBuyInStock_Delete_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 22:57:22,582 Line:321 flag:true
 [DEBUG] 2017-11-01 22:57:22,583 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NoOrderQty>0  )
			begin
				update tblBuyApplication set statusId='3' where id=?
			end
			else
			begin
				update tblBuyApplication set statusId='0' where id=?
			end
		
 [DEBUG] 2017-11-01 22:57:22,583 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:22,583 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:22,584 Line:1157 3值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 22:57:22,584 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-11-01 22:57:22,585 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:57:24,139 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&moduleType=&f_brother=&operation=5&winCurIndex=1&parentCode=&parentTableName=&saveDraft=&checkTab=Y&popWinName=
 [DEBUG] 2017-11-01 22:57:24,140 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];parentCode=[,];parentTableName=[,];saveDraft=[,];checkTab=[Y,];popWinName=[,];
 [DEBUG] 2017-11-01 22:57:24,141 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:57:24,161 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 22:57:39,325 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:57:40,308 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 22:58:42,237 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:58:43,189 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:59:42,843 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=user_config\defineBuyInStock.xml&SESSION=46CE6B7178A009E7E4E1ED1155283456BCAE5447B951D8FB911B76D61400C0AF6691761FB9D097348F6312FFE058D3D15622FDE4212056BC
 [ERROR] 2017-11-01 22:59:42,891 Line:119 ------保存成功
 [ERROR] 2017-11-01 22:59:45,101 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 22:59:46,031 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [DEBUG] 2017-11-01 22:59:53,701 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:59:53,703 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;1;,];workFlowNode=[0,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:57:01,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:57:00,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012257003280217,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:59:53,737 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:53,745 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,750 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:59:53,761 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,762 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:59:53,762 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:59:53,762 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:59:53,763 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:59:53,763 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:59:53,763 Line:1270 0
 [DEBUG] 2017-11-01 22:59:53,764 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:59:53,764 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:53,787 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:53,787 Line:425 ************上述语句执行时间：25
 [DEBUG] 2017-11-01 22:59:53,787 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:59:53,789 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,789 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:59:53,789 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,790 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:59:53,790 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:53,790 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:59:53,791 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,794 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:59:53,794 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:59:53,794 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:59:53,795 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:59:53,795 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:59:53,795 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:59:53,795 Line:5993 6:1
 [DEBUG] 2017-11-01 22:59:53,795 Line:5993 7:
 [DEBUG] 2017-11-01 22:59:53,796 Line:5993 8:2
 [DEBUG] 2017-11-01 22:59:53,796 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:59:53,796 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:59:53,796 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:59:53,796 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:59:53,796 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:59:53,797 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:59:53,797 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:59:53,797 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:53,797 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:59:53,797 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:59:53,798 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:59:53,798 Line:5993 20:11
 [DEBUG] 2017-11-01 22:59:53,798 Line:5993 21:11
 [DEBUG] 2017-11-01 22:59:53,798 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:59:53,798 Line:5993 23:
 [DEBUG] 2017-11-01 22:59:53,798 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:59:53,799 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:59:53,799 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:53,799 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:59:53,799 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:59:53,799 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:59:53,800 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:59:53,800 Line:5993 31:
 [DEBUG] 2017-11-01 22:59:53,800 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:59:53,800 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:59:53,801 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:59:53,801 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:59:53,801 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:59:53,801 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:59:53,801 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:59:53,801 Line:5993 39:
 [DEBUG] 2017-11-01 22:59:53,802 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:59:53,802 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:59:53,802 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:59:53,802 Line:5993 43:
 [DEBUG] 2017-11-01 22:59:53,802 Line:5993 44:
 [DEBUG] 2017-11-01 22:59:53,803 Line:5993 45:1
 [DEBUG] 2017-11-01 22:59:53,803 Line:5993 46:2017-11-01 22:59:53
 [DEBUG] 2017-11-01 22:59:53,804 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:59:53,805 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:59:53,805 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:53,806 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,806 Line:5853 3:97763882_1711012259538050224
 [DEBUG] 2017-11-01 22:59:53,806 Line:5853 4:
 [DEBUG] 2017-11-01 22:59:53,806 Line:5853 5:
 [DEBUG] 2017-11-01 22:59:53,806 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:59:53,807 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:59:53,807 Line:5853 8:
 [DEBUG] 2017-11-01 22:59:53,807 Line:5853 9:
 [DEBUG] 2017-11-01 22:59:53,807 Line:5853 10:
 [DEBUG] 2017-11-01 22:59:53,808 Line:5853 11:
 [DEBUG] 2017-11-01 22:59:53,808 Line:5853 12:
 [DEBUG] 2017-11-01 22:59:53,808 Line:5853 13:
 [DEBUG] 2017-11-01 22:59:53,809 Line:5853 14:
 [DEBUG] 2017-11-01 22:59:53,809 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:59:53,809 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:59:53,809 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:59:53,810 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:59:53,810 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:59:53,810 Line:5853 20:0
 [DEBUG] 2017-11-01 22:59:53,811 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:59:53,811 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:59:53,811 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:59:53,811 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:59:53,812 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:59:53,812 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:59:53,812 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:59:53,813 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:59:53,813 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:59:53,813 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:59:53,813 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:59:53,814 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:59:53,814 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:59:53,814 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:59:53,814 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:59:53,815 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:59:53,815 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:59:53,815 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:59:53,815 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:59:53,815 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:59:53,816 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:59:53,816 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:59:53,816 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:59:53,816 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:59:53,817 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:59:53,817 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:59:53,817 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:59:53,817 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:59:53,818 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:59:53,818 Line:5853 50:0
 [DEBUG] 2017-11-01 22:59:53,818 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:59:53,819 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:59:53,819 Line:5853 53:0
 [DEBUG] 2017-11-01 22:59:53,819 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:59:53,819 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:59:53,819 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:59:53,820 Line:5853 57:0
 [DEBUG] 2017-11-01 22:59:53,820 Line:5853 58:0
 [DEBUG] 2017-11-01 22:59:53,820 Line:5853 59:
 [DEBUG] 2017-11-01 22:59:53,820 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:59:53,820 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:59:53,821 Line:5853 62:
 [DEBUG] 2017-11-01 22:59:53,821 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:59:53,821 Line:5853 64:0
 [DEBUG] 2017-11-01 22:59:53,821 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:59:53,824 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:59:53,825 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,825 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,826 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:59:53,826 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,827 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:59:53,827 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,828 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,828 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:59:53,829 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,829 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:59:53,831 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,831 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:59:53,832 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,833 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:59:53,833 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,834 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,835 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:59:53,836 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:53,836 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:59:53,836 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,837 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,838 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:59:53,838 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,839 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:59:53,839 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,839 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,840 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:59:53,841 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:53,841 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:59:53,841 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,841 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,842 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:59:53,843 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,843 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:59:53,844 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,844 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:59:53,845 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,846 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:59:53,847 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,847 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:59:53,849 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,849 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:59:53,851 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,851 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:59:53,852 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,853 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:59:53,854 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,854 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:59:53,855 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,855 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:59:53,856 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,857 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:59:53,857 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:53,857 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,858 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:59:53,858 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:53,858 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:59:53,859 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,859 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:59:53,860 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,861 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:59:53,862 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,862 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,862 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:59:53,863 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,863 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:53,864 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,865 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:59:53,865 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,865 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,865 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:59:53,866 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,867 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:53,868 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,869 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:59:53,869 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,870 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,870 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:59:53,871 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,872 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:53,873 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,874 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:59:53,874 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,874 Line:988 1值：true
 [DEBUG] 2017-11-01 22:59:53,875 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,876 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:59:53,877 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:53,877 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:59:53,878 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,879 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:59:53,879 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,879 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,880 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,880 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,881 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,882 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:59:53,882 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,882 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,883 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,883 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,885 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,885 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:59:53,885 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,885 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,886 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,886 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,888 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,888 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:59:53,889 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,889 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:59:53,889 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,890 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,890 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,891 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,892 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,892 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:59:53,892 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,892 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:59:53,893 Line:988 2值：0
 [DEBUG] 2017-11-01 22:59:53,893 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,894 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:59:53,894 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:59:53,894 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,895 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:59:53,896 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,896 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:59:53,897 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,897 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,898 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,898 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,899 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,899 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:59:53,899 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,900 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,900 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,901 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,902 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,903 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:59:53,903 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,903 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,904 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,905 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:53,906 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,906 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:59:53,906 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,906 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,907 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,907 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:59:53,908 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,909 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:59:53,909 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,909 Line:988 1值：
 [DEBUG] 2017-11-01 22:59:53,909 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:59:53,910 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:53,911 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:59:53,911 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,911 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,912 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:53,912 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:53,912 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:53,913 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,913 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:59:53,914 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,915 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:53,916 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,916 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:59:53,917 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,917 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:59:53,918 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,921 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:59:53,921 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,922 Line:988 1值：1
 [DEBUG] 2017-11-01 22:59:53,922 Line:988 2值：1
 [DEBUG] 2017-11-01 22:59:53,923 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:59:53,924 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:53,924 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:59:53,924 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:53,925 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,926 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:53,927 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:59:53,928 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,929 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:59:53,930 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,931 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:59:53,932 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,934 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:59:53,934 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,936 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:53,936 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:59:53,937 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:59:53,937 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:59:53,938 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,938 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,939 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:53,939 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:59:53,939 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:59:53,939 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,940 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,940 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:53,940 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:53,941 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:59:53,941 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,941 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:53,942 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:53,942 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:59:53,942 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,943 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:53,943 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:53,943 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:59:53,944 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,945 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:59:53,945 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:53,945 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,946 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:59:53,946 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:53,946 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:59:53,947 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,948 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:59:53,948 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,950 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:59:53,951 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:59:53,951 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:59:53,952 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,953 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:59:53,954 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:59:53,954 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:59:53,955 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,956 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:59:53,956 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:59:53,956 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:59:53,956 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:59:53,956 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:59:53,957 Line:1270 0
 [DEBUG] 2017-11-01 22:59:53,957 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:59:53,957 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:53,959 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:53,959 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:59:53,959 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:59:53,961 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:53,961 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:59:53,961 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:53,961 Line:1270 add
 [DEBUG] 2017-11-01 22:59:53,964 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:59:53,964 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:59:53,965 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:53,968 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:54,033 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:59:54,033 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:59:54,037 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:59:54,047 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:56,872 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 22:59:56,873 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1458095006183,];checkPerson=[1,];
 [DEBUG] 2017-11-01 22:59:56,874 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:59:56,903 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:59:56,912 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:58,324 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 22:59:58,324 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:59:58,325 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:59:58,351 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:59,244 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 22:59:59,246 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1458095006183,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1458095006183,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:57:01,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:59:53,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012259538050224,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 22:59:59,258 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:59,264 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,268 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 22:59:59,276 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,277 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:59:59,277 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:59:59,277 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:59:59,278 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:59:59,278 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:59:59,278 Line:1270 0
 [DEBUG] 2017-11-01 22:59:59,278 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:59:59,278 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:59,280 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:59,280 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:59:59,281 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 22:59:59,282 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,282 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 22:59:59,282 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,283 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 22:59:59,283 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:59,283 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:59:59,284 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,286 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 22:59:59,287 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 22:59:59,287 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 22:59:59,287 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 22:59:59,287 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 22:59:59,288 Line:5993 5:00101
 [DEBUG] 2017-11-01 22:59:59,288 Line:5993 6:1
 [DEBUG] 2017-11-01 22:59:59,288 Line:5993 7:
 [DEBUG] 2017-11-01 22:59:59,288 Line:5993 8:2
 [DEBUG] 2017-11-01 22:59:59,288 Line:5993 9:0.0
 [DEBUG] 2017-11-01 22:59:59,289 Line:5993 10:0.0
 [DEBUG] 2017-11-01 22:59:59,289 Line:5993 11:0.0
 [DEBUG] 2017-11-01 22:59:59,289 Line:5993 12:0.0
 [DEBUG] 2017-11-01 22:59:59,289 Line:5993 13:100101
 [DEBUG] 2017-11-01 22:59:59,289 Line:5993 14:0.0
 [DEBUG] 2017-11-01 22:59:59,290 Line:5993 15:0.0
 [DEBUG] 2017-11-01 22:59:59,290 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:59,290 Line:5993 17:0.0
 [DEBUG] 2017-11-01 22:59:59,290 Line:5993 18:0.0
 [DEBUG] 2017-11-01 22:59:59,290 Line:5993 19:0.0
 [DEBUG] 2017-11-01 22:59:59,291 Line:5993 20:11
 [DEBUG] 2017-11-01 22:59:59,291 Line:5993 21:11
 [DEBUG] 2017-11-01 22:59:59,291 Line:5993 22:2017
 [DEBUG] 2017-11-01 22:59:59,291 Line:5993 23:
 [DEBUG] 2017-11-01 22:59:59,291 Line:5993 24:0.0
 [DEBUG] 2017-11-01 22:59:59,292 Line:5993 25:0.0
 [DEBUG] 2017-11-01 22:59:59,292 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:59,292 Line:5993 27:0.0
 [DEBUG] 2017-11-01 22:59:59,292 Line:5993 28:100.0
 [DEBUG] 2017-11-01 22:59:59,293 Line:5993 29:0.0
 [DEBUG] 2017-11-01 22:59:59,293 Line:5993 30:17.0
 [DEBUG] 2017-11-01 22:59:59,293 Line:5993 31:
 [DEBUG] 2017-11-01 22:59:59,293 Line:5993 32:0.0
 [DEBUG] 2017-11-01 22:59:59,293 Line:5993 33:1.0
 [DEBUG] 2017-11-01 22:59:59,294 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 22:59:59,294 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 22:59:59,294 Line:5993 36:296.85
 [DEBUG] 2017-11-01 22:59:59,294 Line:5993 37:0.0
 [DEBUG] 2017-11-01 22:59:59,294 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 22:59:59,295 Line:5993 39:
 [DEBUG] 2017-11-01 22:59:59,295 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 22:59:59,295 Line:5993 41:0.0
 [DEBUG] 2017-11-01 22:59:59,296 Line:5993 42:0.0
 [DEBUG] 2017-11-01 22:59:59,296 Line:5993 43:
 [DEBUG] 2017-11-01 22:59:59,297 Line:5993 44:
 [DEBUG] 2017-11-01 22:59:59,297 Line:5993 45:1
 [DEBUG] 2017-11-01 22:59:59,297 Line:5993 46:2017-11-01 22:59:59
 [DEBUG] 2017-11-01 22:59:59,299 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 22:59:59,300 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 22:59:59,300 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:59,301 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,301 Line:5853 3:97763882_1711012259593000227
 [DEBUG] 2017-11-01 22:59:59,301 Line:5853 4:
 [DEBUG] 2017-11-01 22:59:59,301 Line:5853 5:
 [DEBUG] 2017-11-01 22:59:59,302 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 22:59:59,302 Line:5853 7:00009
 [DEBUG] 2017-11-01 22:59:59,302 Line:5853 8:
 [DEBUG] 2017-11-01 22:59:59,302 Line:5853 9:
 [DEBUG] 2017-11-01 22:59:59,303 Line:5853 10:
 [DEBUG] 2017-11-01 22:59:59,303 Line:5853 11:
 [DEBUG] 2017-11-01 22:59:59,303 Line:5853 12:
 [DEBUG] 2017-11-01 22:59:59,304 Line:5853 13:
 [DEBUG] 2017-11-01 22:59:59,304 Line:5853 14:
 [DEBUG] 2017-11-01 22:59:59,304 Line:5853 15:454.0
 [DEBUG] 2017-11-01 22:59:59,304 Line:5853 16:454.0
 [DEBUG] 2017-11-01 22:59:59,305 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 22:59:59,305 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 22:59:59,305 Line:5853 19:0.0
 [DEBUG] 2017-11-01 22:59:59,305 Line:5853 20:0
 [DEBUG] 2017-11-01 22:59:59,305 Line:5853 21:0.0
 [DEBUG] 2017-11-01 22:59:59,306 Line:5853 22:0.0
 [DEBUG] 2017-11-01 22:59:59,306 Line:5853 23:0.0
 [DEBUG] 2017-11-01 22:59:59,306 Line:5853 24:100.0
 [DEBUG] 2017-11-01 22:59:59,306 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 22:59:59,307 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 22:59:59,307 Line:5853 27:0.0
 [DEBUG] 2017-11-01 22:59:59,307 Line:5853 28:4.5
 [DEBUG] 2017-11-01 22:59:59,307 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 22:59:59,307 Line:5853 30:296.85
 [DEBUG] 2017-11-01 22:59:59,308 Line:5853 31:4.5
 [DEBUG] 2017-11-01 22:59:59,308 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 22:59:59,308 Line:5853 33:0.0
 [DEBUG] 2017-11-01 22:59:59,308 Line:5853 34:0.0
 [DEBUG] 2017-11-01 22:59:59,308 Line:5853 35:0.0
 [DEBUG] 2017-11-01 22:59:59,309 Line:5853 36:0.0
 [DEBUG] 2017-11-01 22:59:59,309 Line:5853 37:0.0
 [DEBUG] 2017-11-01 22:59:59,309 Line:5853 38:0.0
 [DEBUG] 2017-11-01 22:59:59,310 Line:5853 39:0.0
 [DEBUG] 2017-11-01 22:59:59,310 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 22:59:59,310 Line:5853 41:0.0
 [DEBUG] 2017-11-01 22:59:59,310 Line:5853 42:0.0
 [DEBUG] 2017-11-01 22:59:59,311 Line:5853 43:0.0
 [DEBUG] 2017-11-01 22:59:59,311 Line:5853 44:0.0
 [DEBUG] 2017-11-01 22:59:59,311 Line:5853 45:0.0
 [DEBUG] 2017-11-01 22:59:59,312 Line:5853 46:0.0
 [DEBUG] 2017-11-01 22:59:59,312 Line:5853 47:0.0
 [DEBUG] 2017-11-01 22:59:59,312 Line:5853 48:0.0
 [DEBUG] 2017-11-01 22:59:59,313 Line:5853 49:0.0
 [DEBUG] 2017-11-01 22:59:59,313 Line:5853 50:0
 [DEBUG] 2017-11-01 22:59:59,313 Line:5853 51:0.0
 [DEBUG] 2017-11-01 22:59:59,313 Line:5853 52:0.0
 [DEBUG] 2017-11-01 22:59:59,314 Line:5853 53:0
 [DEBUG] 2017-11-01 22:59:59,314 Line:5853 54:0.0
 [DEBUG] 2017-11-01 22:59:59,314 Line:5853 55:454.0
 [DEBUG] 2017-11-01 22:59:59,315 Line:5853 56:0.0
 [DEBUG] 2017-11-01 22:59:59,315 Line:5853 57:0
 [DEBUG] 2017-11-01 22:59:59,315 Line:5853 58:0
 [DEBUG] 2017-11-01 22:59:59,315 Line:5853 59:
 [DEBUG] 2017-11-01 22:59:59,316 Line:5853 60:0.0
 [DEBUG] 2017-11-01 22:59:59,316 Line:5853 61:0.0
 [DEBUG] 2017-11-01 22:59:59,316 Line:5853 62:
 [DEBUG] 2017-11-01 22:59:59,317 Line:5853 63:0.0
 [DEBUG] 2017-11-01 22:59:59,317 Line:5853 64:0
 [DEBUG] 2017-11-01 22:59:59,317 Line:5853 65:00001
 [DEBUG] 2017-11-01 22:59:59,320 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 22:59:59,321 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,321 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,322 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 22:59:59,323 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:59,323 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 22:59:59,324 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,324 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,325 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 22:59:59,325 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,326 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:59:59,327 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,328 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:59:59,329 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,329 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 22:59:59,330 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,330 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,331 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 22:59:59,331 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,332 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 22:59:59,332 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,332 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,333 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 22:59:59,333 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:59,334 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 22:59:59,334 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,334 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,335 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 22:59:59,335 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,335 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 22:59:59,336 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,336 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,338 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 22:59:59,339 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:59:59,339 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:59:59,340 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,341 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 22:59:59,342 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,343 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:59:59,344 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,345 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 22:59:59,346 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,346 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 22:59:59,348 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,348 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 22:59:59,350 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,350 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 22:59:59,351 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,351 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 22:59:59,353 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,353 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:59:59,354 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,355 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:59:59,355 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:59,356 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,356 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 22:59:59,357 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:59:59,357 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 22:59:59,359 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,359 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:59:59,360 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,362 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 22:59:59,362 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,363 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,363 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 22:59:59,364 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,365 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:59,366 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,367 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:59:59,367 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,367 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,368 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:59:59,368 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,369 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:59,370 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,371 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 22:59:59,371 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,371 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,372 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 22:59:59,373 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,373 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:59,375 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,375 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 22:59:59,375 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,376 Line:988 1值：true
 [DEBUG] 2017-11-01 22:59:59,376 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,377 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 22:59:59,378 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:59,378 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 22:59:59,379 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,380 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 22:59:59,380 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,381 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,381 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:59,382 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,383 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,384 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 22:59:59,384 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,385 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,386 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,386 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,388 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,388 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 22:59:59,389 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,389 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,390 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,390 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,392 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,392 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 22:59:59,394 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,394 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 22:59:59,395 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,395 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,396 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,396 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,398 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,398 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 22:59:59,399 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,399 Line:988 1值：2043
 [DEBUG] 2017-11-01 22:59:59,399 Line:988 2值：0
 [DEBUG] 2017-11-01 22:59:59,400 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,401 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 22:59:59,402 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 22:59:59,402 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:59:59,402 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 22:59:59,404 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,405 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 22:59:59,405 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,405 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,406 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:59,407 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,408 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,408 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 22:59:59,408 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,409 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,409 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:59,410 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,411 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,412 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 22:59:59,413 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,413 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,414 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 22:59:59,414 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 22:59:59,416 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,417 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 22:59:59,417 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,417 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,418 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 22:59:59,418 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 22:59:59,420 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,421 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 22:59:59,421 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,421 Line:988 1值：
 [DEBUG] 2017-11-01 22:59:59,422 Line:988 2值：00001
 [DEBUG] 2017-11-01 22:59:59,423 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:59,424 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 22:59:59,424 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,425 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,425 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:59,426 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:59,426 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 22:59:59,427 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:59,428 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 22:59:59,429 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,430 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 22:59:59,431 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,432 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 22:59:59,433 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,434 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 22:59:59,435 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,437 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 22:59:59,438 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,438 Line:988 1值：1
 [DEBUG] 2017-11-01 22:59:59,438 Line:988 2值：1
 [DEBUG] 2017-11-01 22:59:59,441 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 22:59:59,441 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 22:59:59,442 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 22:59:59,442 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 22:59:59,443 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,445 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 22:59:59,446 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 22:59:59,448 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,448 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 22:59:59,450 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,450 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 22:59:59,451 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,453 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 22:59:59,453 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,454 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:59,454 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:59,455 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:59:59,455 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 22:59:59,456 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,456 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,457 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:59,457 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:59:59,458 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 22:59:59,458 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,458 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,459 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:59,459 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:59:59,459 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 22:59:59,460 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,460 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:59,460 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:59,461 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 22:59:59,461 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,462 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 22:59:59,462 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 22:59:59,462 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 22:59:59,463 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,464 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 22:59:59,464 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 22:59:59,465 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,465 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:59:59,466 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 22:59:59,466 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 22:59:59,467 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,467 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:59:59,468 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,470 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:59:59,471 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:59:59,471 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 22:59:59,486 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,491 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 22:59:59,491 Line:408 ************上述语句执行时间：20
 [DEBUG] 2017-11-01 22:59:59,492 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:59:59,500 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,501 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 22:59:59,501 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 22:59:59,501 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 22:59:59,502 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 22:59:59,502 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 22:59:59,502 Line:1270 0
 [DEBUG] 2017-11-01 22:59:59,502 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 22:59:59,503 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:59,505 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 22:59:59,505 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 22:59:59,506 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 22:59:59,507 Line:321 flag:true
 [DEBUG] 2017-11-01 22:59:59,508 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 22:59:59,508 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 22:59:59,508 Line:1270 add
 [DEBUG] 2017-11-01 22:59:59,511 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 22:59:59,511 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 22:59:59,513 Line:321 flag:false
 [DEBUG] 2017-11-01 22:59:59,516 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 22:59:59,592 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1458095006183&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 22:59:59,592 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1458095006183,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 22:59:59,611 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 22:59:59,625 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:02,120 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 23:00:02,120 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1458095006183,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1492538613612,];checkPerson=[1,];
 [DEBUG] 2017-11-01 23:00:02,121 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:02,141 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:02,156 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:02,941 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 23:00:02,941 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 23:00:02,942 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:02,956 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:03,872 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-11-01 23:00:03,873 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[97763882_1711012216276050131,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[16abe428_1603022152285291215,];approveStatus=[transing,];currNodeId=[1492538613612,];fromAdvice=[false,];id=[97763882_1711012216276050131,];parentCode=[,];BillNo=[BI1711001,];BillDate=[2017-11-01,];InVoiceTypeName=[增值税发票,];InVoiceType=[2,];freightAcc=[100101,];tblAccTypeInfo_AccName=[库存现金,];freightAmount=[0,];Currency=[42428a07_1604181718549566965,];tblSetExchange_CurrencyName=[人民币,];BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyOrder_BillNo=[PO1610013,];tblBuyOrder_BillDate=[2016-10-01,];tblCompany_ComNumber=[GY044,];tblCompany_ComFullName=[东莞市冠一塑料容器有限公司,];Tax=[17,];ConsumeTax=[0,];CurrencyRate=[1,];TotalAmount=[1746.15,];TotalTaxAmount=[2043,];TotalCoTaxAmt=[296.85,];TotalConsumeTaxAmt=[0,];CurTotalAmount=[2043,];TotalTariffAmt=[0,];CurAlreadyPayAmt=[0,];CurBackAmount=[0,];CurNeedPayAmt=[2043,];CurProceDureExp=[0,];ChangeAmt=[0,];checkPersons=[;1;,];workFlowNode=[1492538613612,];workFlowNodeName=[notApprove,];InvoiceStatus=[0,];NeedPayAmt=[2043,];CompanyCode=[0002T00007,];DepartmentCode=[00101,];EmployeeID=[1,];StockCode=[,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];ProjectCode=[,];Period=[11,];PeriodMonth=[11,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[2043,];BuyAskPriceID=[,];BuyOrderNo=[,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];PayDate=[,];CertificateNo=[,];AfterChangeAmt=[2043,];CurAfterChangeAmt=[0,];CurChangeAmt=[0,];SourceBillId=[,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-11-01 22:57:01,];lastUpdateBy=[1,];lastUpdateTime=[2017-11-01 22:59:59,];createBy=[1,];createTime=[2017-11-01 22:16:27,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[lm01-04,];tblBuyInStockDet_tblGoods_GoodsFullName=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_GoodsSpec=[力猛4L浅灰罐,];tblBuyInStockDet_tblGoods_BaseUnit=[个,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Qty=[454.0000,];tblBuyInStockDet_QuaQty=[454.0000,];tblBuyInStockDet_TaxPrice=[4.5000,];tblBuyInStockDet_TaxAmount=[2043.00,];tblBuyInStockDet_Price=[3.8461,];tblBuyInStockDet_Amount=[1746.15,];tblBuyInStockDet_tblStock_StockNumber1=[YL02,];tblBuyInStockDet_tblStock_StockName1=[包材仓,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_freightAmount=[0.00,];tblBuyInStockDet_tblGoods_BarCode=[,];tblBuyInStockDet_Seq_hid=[,];tblBuyInStockDet_CoTaxAmt=[296.85,];tblBuyInStockDet_CurPrice=[4.5000,];tblBuyInStockDet_CurAmount=[2043.00,];tblBuyInStockDet_ConsumeTaxAmt=[0.00,];tblBuyInStockDet_TariffAmt=[0.00,];tblBuyInStockDet_PresentSampleTypeName=[正常,];tblBuyInStockDet_PresentSampleType=[0,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_BuyOrderID=[1C49F0E0B36843A180381880D032BE,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00003000050002C,];tblBuyInStockDet_StockCode=[00009,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_Discount=[100.0000,];tblBuyInStockDet_DisPrice=[3.8461,];tblBuyInStockDet_DisBackAmt=[1746.15,];tblBuyInStockDet_DisAmount=[0.00,];tblBuyInStockDet_ApportionAmt=[0.00,];tblBuyInStockDet_SourceID=[fa69a5c9_1612231436218740117,];tblBuyInStockDet_InvoiceAmount=[0.00,];tblBuyInStockDet_NotPayQty=[454.0000,];tblBuyInStockDet_PayQty=[0.0000,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0.0000,];tblBuyInStockDet_PreferAmount=[0.00,];tblBuyInStockDet_hasCheck=[0,];tblBuyInStockDet_detsId=[97763882_1711012259593000227,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-11-01 23:00:03,889 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:03,897 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,902 Line:313 exeCondition:tblBuyInStock_Delete :'1' != '0'
 [DEBUG] 2017-11-01 23:00:03,903 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:03,904 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 23:00:03,904 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 23:00:03,904 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 23:00:03,905 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 23:00:03,905 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 23:00:03,905 Line:1270 0
 [DEBUG] 2017-11-01 23:00:03,905 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 23:00:03,905 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:03,908 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:03,908 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-11-01 23:00:03,908 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-11-01 23:00:03,909 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:03,909 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-11-01 23:00:03,910 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,911 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-11-01 23:00:03,911 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:03,911 Line:313 exeCondition:tblBuyInStock_Delete :'1' == '0' && false==false
 [DEBUG] 2017-11-01 23:00:03,913 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,916 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,freightAcc=?,freightAmount=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,BuyOrderID=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,ConsumeTax=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,TotalConsumeTaxAmt=?,CurTotalAmount=?,Attachment=?,AfterChangeAmt=?,CurAfterChangeAmt=?,TotalTariffAmt=?,SourceBillId=?,inType=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-11-01 23:00:03,916 Line:5993 1:2043.0
 [DEBUG] 2017-11-01 23:00:03,917 Line:5993 2:BI1711001
 [DEBUG] 2017-11-01 23:00:03,917 Line:5993 3:2017-11-01
 [DEBUG] 2017-11-01 23:00:03,917 Line:5993 4:0002T00007
 [DEBUG] 2017-11-01 23:00:03,917 Line:5993 5:00101
 [DEBUG] 2017-11-01 23:00:03,918 Line:5993 6:1
 [DEBUG] 2017-11-01 23:00:03,918 Line:5993 7:
 [DEBUG] 2017-11-01 23:00:03,918 Line:5993 8:2
 [DEBUG] 2017-11-01 23:00:03,918 Line:5993 9:0.0
 [DEBUG] 2017-11-01 23:00:03,918 Line:5993 10:0.0
 [DEBUG] 2017-11-01 23:00:03,919 Line:5993 11:0.0
 [DEBUG] 2017-11-01 23:00:03,919 Line:5993 12:0.0
 [DEBUG] 2017-11-01 23:00:03,919 Line:5993 13:100101
 [DEBUG] 2017-11-01 23:00:03,920 Line:5993 14:0.0
 [DEBUG] 2017-11-01 23:00:03,920 Line:5993 15:0.0
 [DEBUG] 2017-11-01 23:00:03,920 Line:5993 16:42428a07_1604181718549566965
 [DEBUG] 2017-11-01 23:00:03,921 Line:5993 17:0.0
 [DEBUG] 2017-11-01 23:00:03,921 Line:5993 18:0.0
 [DEBUG] 2017-11-01 23:00:03,921 Line:5993 19:0.0
 [DEBUG] 2017-11-01 23:00:03,922 Line:5993 20:11
 [DEBUG] 2017-11-01 23:00:03,922 Line:5993 21:11
 [DEBUG] 2017-11-01 23:00:03,922 Line:5993 22:2017
 [DEBUG] 2017-11-01 23:00:03,922 Line:5993 23:
 [DEBUG] 2017-11-01 23:00:03,923 Line:5993 24:0.0
 [DEBUG] 2017-11-01 23:00:03,923 Line:5993 25:0.0
 [DEBUG] 2017-11-01 23:00:03,923 Line:5993 26:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 23:00:03,924 Line:5993 27:0.0
 [DEBUG] 2017-11-01 23:00:03,924 Line:5993 28:100.0
 [DEBUG] 2017-11-01 23:00:03,924 Line:5993 29:0.0
 [DEBUG] 2017-11-01 23:00:03,924 Line:5993 30:17.0
 [DEBUG] 2017-11-01 23:00:03,925 Line:5993 31:
 [DEBUG] 2017-11-01 23:00:03,925 Line:5993 32:0.0
 [DEBUG] 2017-11-01 23:00:03,925 Line:5993 33:1.0
 [DEBUG] 2017-11-01 23:00:03,925 Line:5993 34:1746.15
 [DEBUG] 2017-11-01 23:00:03,926 Line:5993 35:2043.0
 [DEBUG] 2017-11-01 23:00:03,926 Line:5993 36:296.85
 [DEBUG] 2017-11-01 23:00:03,926 Line:5993 37:0.0
 [DEBUG] 2017-11-01 23:00:03,926 Line:5993 38:2043.0
 [DEBUG] 2017-11-01 23:00:03,927 Line:5993 39:
 [DEBUG] 2017-11-01 23:00:03,927 Line:5993 40:2043.0
 [DEBUG] 2017-11-01 23:00:03,927 Line:5993 41:0.0
 [DEBUG] 2017-11-01 23:00:03,927 Line:5993 42:0.0
 [DEBUG] 2017-11-01 23:00:03,928 Line:5993 43:
 [DEBUG] 2017-11-01 23:00:03,928 Line:5993 44:
 [DEBUG] 2017-11-01 23:00:03,929 Line:5993 45:1
 [DEBUG] 2017-11-01 23:00:03,929 Line:5993 46:2017-11-01 23:00:03
 [DEBUG] 2017-11-01 23:00:03,930 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-11-01 23:00:03,931 Line:5847  INSERT INTO  tblBuyInStockDet(BuyOrderID,f_ref,id,BuyAskPriceID,SalesOutID,GoodsCode,StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,QuaQty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,ConsumeTaxAmt,BackAmt,ApportionAmt,TariffAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,hasCheck,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-11-01 23:00:03,932 Line:5853 1:1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 23:00:03,932 Line:5853 2:97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,932 Line:5853 3:97763882_1711012300039310230
 [DEBUG] 2017-11-01 23:00:03,932 Line:5853 4:
 [DEBUG] 2017-11-01 23:00:03,932 Line:5853 5:
 [DEBUG] 2017-11-01 23:00:03,933 Line:5853 6:00003000050002C
 [DEBUG] 2017-11-01 23:00:03,933 Line:5853 7:00009
 [DEBUG] 2017-11-01 23:00:03,933 Line:5853 8:
 [DEBUG] 2017-11-01 23:00:03,933 Line:5853 9:
 [DEBUG] 2017-11-01 23:00:03,933 Line:5853 10:
 [DEBUG] 2017-11-01 23:00:03,934 Line:5853 11:
 [DEBUG] 2017-11-01 23:00:03,934 Line:5853 12:
 [DEBUG] 2017-11-01 23:00:03,934 Line:5853 13:
 [DEBUG] 2017-11-01 23:00:03,934 Line:5853 14:
 [DEBUG] 2017-11-01 23:00:03,934 Line:5853 15:454.0
 [DEBUG] 2017-11-01 23:00:03,935 Line:5853 16:454.0
 [DEBUG] 2017-11-01 23:00:03,935 Line:5853 17:3.8461
 [DEBUG] 2017-11-01 23:00:03,935 Line:5853 18:1746.15
 [DEBUG] 2017-11-01 23:00:03,936 Line:5853 19:0.0
 [DEBUG] 2017-11-01 23:00:03,936 Line:5853 20:0
 [DEBUG] 2017-11-01 23:00:03,936 Line:5853 21:0.0
 [DEBUG] 2017-11-01 23:00:03,936 Line:5853 22:0.0
 [DEBUG] 2017-11-01 23:00:03,937 Line:5853 23:0.0
 [DEBUG] 2017-11-01 23:00:03,937 Line:5853 24:100.0
 [DEBUG] 2017-11-01 23:00:03,937 Line:5853 25:3.8461
 [DEBUG] 2017-11-01 23:00:03,938 Line:5853 26:1746.15
 [DEBUG] 2017-11-01 23:00:03,938 Line:5853 27:0.0
 [DEBUG] 2017-11-01 23:00:03,938 Line:5853 28:4.5
 [DEBUG] 2017-11-01 23:00:03,938 Line:5853 29:2043.0
 [DEBUG] 2017-11-01 23:00:03,939 Line:5853 30:296.85
 [DEBUG] 2017-11-01 23:00:03,939 Line:5853 31:4.5
 [DEBUG] 2017-11-01 23:00:03,939 Line:5853 32:2043.0
 [DEBUG] 2017-11-01 23:00:03,939 Line:5853 33:0.0
 [DEBUG] 2017-11-01 23:00:03,940 Line:5853 34:0.0
 [DEBUG] 2017-11-01 23:00:03,940 Line:5853 35:0.0
 [DEBUG] 2017-11-01 23:00:03,940 Line:5853 36:0.0
 [DEBUG] 2017-11-01 23:00:03,940 Line:5853 37:0.0
 [DEBUG] 2017-11-01 23:00:03,940 Line:5853 38:0.0
 [DEBUG] 2017-11-01 23:00:03,941 Line:5853 39:0.0
 [DEBUG] 2017-11-01 23:00:03,941 Line:5853 40:fa69a5c9_1612231436218740117
 [DEBUG] 2017-11-01 23:00:03,941 Line:5853 41:0.0
 [DEBUG] 2017-11-01 23:00:03,941 Line:5853 42:0.0
 [DEBUG] 2017-11-01 23:00:03,941 Line:5853 43:0.0
 [DEBUG] 2017-11-01 23:00:03,942 Line:5853 44:0.0
 [DEBUG] 2017-11-01 23:00:03,942 Line:5853 45:0.0
 [DEBUG] 2017-11-01 23:00:03,942 Line:5853 46:0.0
 [DEBUG] 2017-11-01 23:00:03,942 Line:5853 47:0.0
 [DEBUG] 2017-11-01 23:00:03,942 Line:5853 48:0.0
 [DEBUG] 2017-11-01 23:00:03,943 Line:5853 49:0.0
 [DEBUG] 2017-11-01 23:00:03,943 Line:5853 50:0
 [DEBUG] 2017-11-01 23:00:03,943 Line:5853 51:0.0
 [DEBUG] 2017-11-01 23:00:03,943 Line:5853 52:0.0
 [DEBUG] 2017-11-01 23:00:03,944 Line:5853 53:0
 [DEBUG] 2017-11-01 23:00:03,944 Line:5853 54:0.0
 [DEBUG] 2017-11-01 23:00:03,944 Line:5853 55:454.0
 [DEBUG] 2017-11-01 23:00:03,944 Line:5853 56:0.0
 [DEBUG] 2017-11-01 23:00:03,944 Line:5853 57:0
 [DEBUG] 2017-11-01 23:00:03,945 Line:5853 58:0
 [DEBUG] 2017-11-01 23:00:03,945 Line:5853 59:
 [DEBUG] 2017-11-01 23:00:03,945 Line:5853 60:0.0
 [DEBUG] 2017-11-01 23:00:03,945 Line:5853 61:0.0
 [DEBUG] 2017-11-01 23:00:03,945 Line:5853 62:
 [DEBUG] 2017-11-01 23:00:03,946 Line:5853 63:0.0
 [DEBUG] 2017-11-01 23:00:03,946 Line:5853 64:0
 [DEBUG] 2017-11-01 23:00:03,946 Line:5853 65:00001
 [DEBUG] 2017-11-01 23:00:03,948 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty from tblBuyInStockDet where f_ref=? and Qty<=0
 [DEBUG] 2017-11-01 23:00:03,949 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,949 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,950 Line:1025 query condition columnName:Qty----value:0
 [DEBUG] 2017-11-01 23:00:03,950 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:03,950 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as Qty1 from tblBuyInStockDet where f_ref=? and Qty>isnull(QuaQty,0)
 [DEBUG] 2017-11-01 23:00:03,950 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,950 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,951 Line:1025 query condition columnName:Qty1----value:0
 [DEBUG] 2017-11-01 23:00:03,952 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:03,952 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 23:00:03,953 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,954 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 23:00:03,955 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,955 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') = 'Yes,' 
 [DEBUG] 2017-11-01 23:00:03,955 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,955 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,956 Line:1025 query condition columnName:hasDG----value:0
 [DEBUG] 2017-11-01 23:00:03,956 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:03,957 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDG from tblBuyInStockDet join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode where f_ref=? and isnull(tblGoods.inType,'') != 'Yes,' 
 [DEBUG] 2017-11-01 23:00:03,957 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,957 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,958 Line:1025 query condition columnName:nothasDG----value:1
 [DEBUG] 2017-11-01 23:00:03,958 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:03,958 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as hasDGC from tblBuyInStockDet where f_ref=? and StockCode = '0000A' 
 [DEBUG] 2017-11-01 23:00:03,958 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,958 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,959 Line:1025 query condition columnName:hasDGC----value:0
 [DEBUG] 2017-11-01 23:00:03,959 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:03,959 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Count(1) as nothasDGC from tblBuyInStockDet where f_ref=? and StockCode != '0000A' 
 [DEBUG] 2017-11-01 23:00:03,960 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,960 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,961 Line:1025 query condition columnName:nothasDGC----value:1
 [DEBUG] 2017-11-01 23:00:03,961 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:03,961 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 23:00:03,962 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,963 Line:313 exeCondition:tblBuyInStock_Add : '' == 'Yes,' && 1 >0  
 [DEBUG] 2017-11-01 23:00:03,964 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,964 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 23:00:03,965 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,965 Line:313 exeCondition:tblBuyInStock_Add : '' != 'Yes,' && 0 >0  
 [DEBUG] 2017-11-01 23:00:03,966 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,966 Line:313 exeCondition:tblBuyInStock_Add :2043 < 0
 [DEBUG] 2017-11-01 23:00:03,967 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,967 Line:313 exeCondition:tblBuyInStock_Add :('2'=='3'&&17!=0)||17<0
 [DEBUG] 2017-11-01 23:00:03,969 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,969 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-11-01 23:00:03,970 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,970 Line:313 exeCondition:tblBuyInStock_Add :0>0&&'100101'.length==0
 [DEBUG] 2017-11-01 23:00:03,971 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,972 Line:313 exeCondition:tblBuyInStock_Add :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 23:00:03,973 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:03,974 Line:1081 自定义执行的语句显示： tblBuyInStock_Add:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 23:00:03,974 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 23:00:03,974 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,981 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add,  影响行数=0
 [DEBUG] 2017-11-01 23:00:03,982 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-11-01 23:00:03,982 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-11-01 23:00:03,984 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,985 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 23:00:03,986 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:03,988 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-11-01 23:00:03,988 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,989 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,989 Line:988 2值：2017-11-01
 [DEBUG] 2017-11-01 23:00:03,990 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:03,991 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 23:00:03,992 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,992 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 23:00:03,992 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,993 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,993 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 23:00:03,994 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:03,994 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 23:00:03,995 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,996 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-11-01 23:00:03,996 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:03,996 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:03,996 Line:988 2值：0002T00007
 [DEBUG] 2017-11-01 23:00:03,997 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:03,998 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-11-01 23:00:03,999 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:03,999 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-11-01 23:00:03,999 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,000 Line:988 1值：true
 [DEBUG] 2017-11-01 23:00:04,000 Line:988 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,001 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-11-01 23:00:04,002 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 23:00:04,002 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-11-01 23:00:04,003 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,003 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-11-01 23:00:04,004 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,004 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,005 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,006 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,007 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,007 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 23:00:04,007 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,008 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,008 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:04,009 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,010 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,010 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsNumber as GoodsSample from tblBuyInStockDet,tblGoods where f_ref=? and tblGoods.classCode=tblBuyInStockDet.GoodsCode and tblBuyInStockDet.PresentSampleType in ('1') and isnull(tblBuyInStockDet.curPrice,0)!=0
 [DEBUG] 2017-11-01 23:00:04,010 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,011 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,011 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:04,012 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,013 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,013 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-11-01 23:00:04,014 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,014 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-11-01 23:00:04,015 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,015 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,016 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,016 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,017 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,018 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-11-01 23:00:04,018 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,018 Line:988 1值：2043
 [DEBUG] 2017-11-01 23:00:04,018 Line:988 2值：0
 [DEBUG] 2017-11-01 23:00:04,018 Line:988 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,020 Line:1025 query condition columnName:SumDetAmt----value:2043.0
 [DEBUG] 2017-11-01 23:00:04,020 Line:1025 query condition columnName:sumMainAmt----value:2043.0
 [DEBUG] 2017-11-01 23:00:04,020 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 23:00:04,021 Line:313 exeCondition:tblBuyInStock_Add :2043.0!=2043.0
 [DEBUG] 2017-11-01 23:00:04,022 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,022 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-11-01 23:00:04,023 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,023 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,024 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,024 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,025 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,026 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsNumber,GoodsFullName from tblBuyInStock a,tblBuyInStockDet b,tblGoods c where a.id=b.f_ref and a.BuyOrderID!=b.BuyOrderID and b.GoodsCode=c.classCode and a.id=?
 [DEBUG] 2017-11-01 23:00:04,026 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,026 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,027 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:04,027 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,028 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,046 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-11-01 23:00:04,046 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,047 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,048 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,048 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-11-01 23:00:04,061 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,061 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-11-01 23:00:04,061 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,062 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,062 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:04,063 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-11-01 23:00:04,064 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,065 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-11-01 23:00:04,065 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,065 Line:988 1值：
 [DEBUG] 2017-11-01 23:00:04,066 Line:988 2值：00001
 [DEBUG] 2017-11-01 23:00:04,067 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,067 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-11-01 23:00:04,068 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,068 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,068 Line:988 2值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 23:00:04,068 Line:988 3值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 23:00:04,069 Line:988 4值：42428a07_1604181718549566965
 [DEBUG] 2017-11-01 23:00:04,069 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,070 Line:313 exeCondition:tblBuyInStock_Add :'42428a07_1604181718549566965'.length>0 && 1 <= 0
 [DEBUG] 2017-11-01 23:00:04,072 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,072 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:04,074 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,074 Line:313 exeCondition:tblBuyInStock_Add : ('42428a07_1604181718549566965'.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-11-01 23:00:04,076 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,076 Line:313 exeCondition:tblBuyInStock_Add :'true'=='true'
 [DEBUG] 2017-11-01 23:00:04,078 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:04,079 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select count(0) as allowCount from tblUserSunCompany a,tblRightType b where ((a.userid=? and a.roleids like '%'+b.id+';%') or b.id=?) and rightType='allowMoreOrderIn' and hasRight=1
 [DEBUG] 2017-11-01 23:00:04,080 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,080 Line:988 1值：1
 [DEBUG] 2017-11-01 23:00:04,080 Line:988 2值：1
 [DEBUG] 2017-11-01 23:00:04,082 Line:1025 query condition columnName:allowCount----value:0
 [DEBUG] 2017-11-01 23:00:04,082 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 23:00:04,082 Line:921 自定义执行的语句显示： tblBuyInStock_Add_OverOrderIn_Validate :select l.BillNo,k.GoodsNumber,dbo.throwZero((select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)) as NotInQty from tblBuyInStockDet a,tblGoods k,tblBuyOrder l where f_ref=? and LEN(BuyOrderID)>0 and a.BuyOrderID=l.id and a.GoodsCode=k.classCode group by BuyOrderID,l.BillNo,GoodsCode,BatchNo,Inch,Hue,yearNO,k.GoodsNumber having SUM(Qty)>(select sum(NotInQty) from tblBuyOrderDet b where b.f_ref=a.BuyOrderID and a.GoodsCode=b.GoodsCode and a.BatchNo=b.BatchNo and a.Inch=b.Inch and a.Hue=b.Hue and a.yearNO=b.yearNO)
 [DEBUG] 2017-11-01 23:00:04,083 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:04,083 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,084 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-11-01 23:00:04,084 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&0==0&&'1'!='1'
 [DEBUG] 2017-11-01 23:00:04,085 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,086 Line:313 exeCondition:tblBuyInStock_Add_OverOrderIn_Validate :'null'!='null'&&(0!=0||'1'=='1')
 [DEBUG] 2017-11-01 23:00:04,087 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,087 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-11-01 23:00:04,089 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:04,090 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount*CurrencyRate+(case when freightAcc like '2202%' then freightAmount*CurrencyRate else 0 end),CurNeedPayAmt=CurTotalAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),AlreadyPayAmt=PayAmount*CurrencyRate,CurAlreadyPayAmt=PayAmount,BackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-11-01 23:00:04,090 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,091 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 23:00:04,092 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,092 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 23:00:04,092 Line:1154 1整数 值：2
 [DEBUG] 2017-11-01 23:00:04,093 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,093 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,094 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 23:00:04,094 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,094 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-11-01 23:00:04,094 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,095 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,096 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 23:00:04,096 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,097 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-11-01 23:00:04,097 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,098 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 23:00:04,099 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,099 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-11-01 23:00:04,100 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,101 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-11-01 23:00:04,101 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,101 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1C49F0E0B36843A180381880D032BE'.length>0
 [DEBUG] 2017-11-01 23:00:04,103 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:04,103 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set BuyOrderID=? where f_ref=? and len(isnull(BuyOrderID,''))=0
 [DEBUG] 2017-11-01 23:00:04,103 Line:1157 1值：1C49F0E0B36843A180381880D032BE
 [DEBUG] 2017-11-01 23:00:04,104 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,105 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 23:00:04,105 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,105 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-11-01 23:00:04,106 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:04,107 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 23:00:04,107 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,108 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 23:00:04,109 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,109 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-11-01 23:00:04,109 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,110 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-11-01 23:00:04,111 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:04,111 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 23:00:04,112 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:04,112 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 23:00:04,113 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 23:00:04,113 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 23:00:04,113 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 23:00:04,113 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 23:00:04,113 Line:1270 0
 [DEBUG] 2017-11-01 23:00:04,114 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 23:00:04,114 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:04,115 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:04,116 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 23:00:04,116 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' != '0'
 [DEBUG] 2017-11-01 23:00:04,117 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:04,117 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 23:00:04,118 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:04,118 Line:1270 add
 [DEBUG] 2017-11-01 23:00:04,120 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 23:00:04,120 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'1' == '0' && false==false
 [DEBUG] 2017-11-01 23:00:04,121 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:04,124 Line:1064  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:04,183 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblBuyInStock&keyId=97763882_1711012216276050131&fromAdvice=false&currNodeId=1492538613612&approveStatus=transing&nextNodeIds=null&department=00101&designId=16abe428_1603022152285291215&fromPage=erp&operation=82&winCurIndex=1
 [DEBUG] 2017-11-01 23:00:04,184 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];keyId=[97763882_1711012216276050131,];fromAdvice=[false,];currNodeId=[1492538613612,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[16abe428_1603022152285291215,];fromPage=[erp,];operation=[82,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 23:00:04,186 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:04,198 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:06,072 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-11-01 23:00:06,072 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[1,1,];keyId=[97763882_1711012216276050131,];attachFiles=[,];delFiles=[,];designId=[16abe428_1603022152285291215,];currNode=[1492538613612,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblBuyInStock,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[-1,];
 [DEBUG] 2017-11-01 23:00:06,072 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:06,078 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:06,089 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [DEBUG] 2017-11-01 23:00:06,137 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select tblGoods.GoodsNumber as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-11-01 23:00:06,137 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:06,138 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,138 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:06,139 Line:313 exeCondition:tblBuyInStock_Add_One :'null' != 'null'
 [DEBUG] 2017-11-01 23:00:06,140 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,140 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-11-01 23:00:06,141 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,141 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 23:00:06,142 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,143 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_updateStocksNotAudit(@GoodsCode=?,@StockCode=?,@BillType=?,@InstoreQty=?,@OutstoreQty=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 23:00:06,143 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 23:00:06,143 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 23:00:06,143 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 23:00:06,143 Line:1270 -1*tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 23:00:06,144 Line:1270 0
 [DEBUG] 2017-11-01 23:00:06,144 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 23:00:06,144 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:06,146 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.GoodsCode),'tblBuyInStock',tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,-1*tblBuyInStockDet.Qty,0,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)) from tblBuyInStockDet where f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:06,146 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 23:00:06,146 Line:313 exeCondition:tblBuyInStock_Add_One :'1' != '0'
 [DEBUG] 2017-11-01 23:00:06,147 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,147 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertSeqOutInDet(?,?,?,?)}
 [DEBUG] 2017-11-01 23:00:06,148 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,148 Line:1270 delete
 [DEBUG] 2017-11-01 23:00:06,149 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:06,149 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 23:00:06,150 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,150 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-11-01 23:00:06,151 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,151 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 23:00:06,152 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,152 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-11-01 23:00:06,153 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,153 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 23:00:06,153 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 23:00:06,154 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 23:00:06,155 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,155 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:
----------------------------------------------------------------------------				
	--入库单明细信息
declare @inDetID varchar(32)
declare @BuyOrderID varchar(32)
declare @GoodsCode varchar(50)
declare @BatchNo varchar(100)
declare @Inch varchar(100)
declare @Hue varchar(100)
declare @yearNO varchar(100)
declare @ProDate varchar(10)
declare @Availably varchar(10)
declare @InQty numeric(18,8)

--订单信息
declare @OrderDetID varchar(32)
declare @NotInQty numeric(18,8)
declare @OInQty numeric(18,8)

declare @allotQty numeric(18,8)
declare @orderallotId varchar(32) 
declare @reqId  varchar(32)
declare @appallotId varchar(32)
declare @reqQty numeric(18,8)

--分组查询多个订单的不同商品的总入库数量
declare cur_InDet cursor local for select id, BuyOrderID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,FactInQty from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0 
open cur_InDet
fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
while(@@FETCH_STATUS=0)
	begin	
		set @OrderDetID=''	
		--用这些总的入库数量依次更新订单明细的入库数量
		declare cur_OrderDet cursor local for select id,Qty-InQty from tblBuyOrderDet where f_ref=@BuyOrderID and GoodsCode=@GoodsCode and (BatchNo=@BatchNo or ISNULL(BatchNo,'')='') and (Inch=@Inch or ISNULL(Inch,'')='') and (Hue=@Hue or ISNULL(Hue,'')='') and (yearNO=@yearNO or ISNULL(yearNO,'')='') and (ProDate=@ProDate or ISNULL(ProDate,'')='') and (Availably=@Availably or ISNULL(Availably,'')='') order by detOrderNo
		open cur_OrderDet
		fetch next from cur_OrderDet into @OrderDetID,@NotInQty
		while(@@FETCH_STATUS=0)
			begin
				--当总的入库数量大于单个订单未入库数量，则此订单入库数量+未入库数量,否则减去
				set @allotQty = 0;
				if(@InQty>=@NotInQty)
					begin 
						update tblBuyOrderDet set InQty=InQty+@NotInQty,NotInQty=0 where id=@OrderDetID 
						set @allotQty = @NotInQty
						set @InQty=@InQty-@NotInQty  
					end
				else if(@InQty<@NotInQty and @InQty > 0)
					begin
						update tblBuyOrderDet set InQty=InQty+@InQty,NotInQty=Qty-InQty-@InQty where id=@OrderDetID 
						set @allotQty = @InQty
						set @InQty=0
					end	
				if(@allotQty > 0)
				begin
					--回填订购分配表
					declare reqCursor cursor local for select  ID,PDMRPReqDetId,appAllotId,Qty-isnull(InQty,0) NoInQty from PDBuyOrderAllot where orderDetId=@OrderDetID and Qty-isnull(InQty,0) > 0
					open reqCursor
					fetch reqCursor into  @orderallotId, @reqId ,@appallotId,@reqQty
					while(@@fetch_status=0)
					begin
						if(@allotQty > @reqQty )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@reqQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@reqQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@reqQty)
							set @allotQty=@allotQty - @reqQty
						end
						else if(@allotQty <= @reqQty and @allotQty >0 )
						begin
							update PDBuyOrderAllot set InQty=isnull(InQty,0)+@allotQty where id=@orderallotId
							update PDMRPReqDet set InQty=isnull(InQty,0)+@allotQty where id=@reqId
							INSERT INTO [PDBuyInStockAllot]([inStockDetId],[orderAllotId],[PDMRPReqDetId],[Qty])
								values(@inDetID,@orderallotId,@reqId,@allotQty)
							set @allotQty=0
						end
						fetch reqCursor into @orderallotId, @reqId ,@appallotId,@reqQty
					end
					close reqCursor
					deallocate reqCursor
				
				end
				fetch next from cur_OrderDet into @OrderDetID,@NotInQty
			end
			
		close cur_OrderDet
		deallocate cur_OrderDet
		
		
		fetch next from cur_InDet into @inDetID,@BuyOrderID,@GoodsCode,@BatchNo,@Inch,@Hue,@yearNO,@ProDate,@Availably,@InQty
	end

close cur_InDet
deallocate cur_InDet	
------------------------------------更新请购单入库数量
update tblBuyApplicationDet set InQty=isnull(InQty,0)+ aa.Qty,NotInQty=tblBuyApplicationDet.Qty- isnull(InQty,0) - aa.Qty from tblBuyApplicationDet join (
	select PDBuyApplicationAllot.appDetId,SUM(PDBuyInStockAllot.Qty) Qty from PDBuyInStockAllot 
	join tblBuyInStockDet on PDBuyInStockAllot.inStockDetId=tblBuyInStockDet.id   
	join PDBuyOrderAllot on PDBuyInStockAllot.orderAllotId=PDBuyOrderAllot.id
	join PDBuyApplicationAllot on PDBuyOrderAllot.appAllotId=PDBuyApplicationAllot.id
	where tblBuyInStockDet.f_ref=? group by PDBuyApplicationAllot.appDetId ) aa on tblBuyApplicationDet.id=aa.appDetId

update tblBuyOrderDet set FinishStatus=1 where f_ref in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and FinishStatus!=2 and NotInQty<=0
update tblBuyOrder set statusId=1 where id in (select distinct BuyOrderID from tblBuyInStockDet where f_ref=? and LEN(BuyOrderID)>0) and statusId!=2 and (select COUNT(0) from tblBuyOrderDet where f_ref=tblBuyOrder.id and NotInQty>0)=0
----------------------------------------------------------------------------				
			
 [DEBUG] 2017-11-01 23:00:06,156 Line:1157 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,156 Line:1157 2值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,156 Line:1157 3值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,156 Line:1157 4值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,158 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 23:00:06,159 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-11-01 23:00:06,159 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select BuyApplyID from tblBuyinstockDet a,tblBuyOrderDet b  where a.BuyOrderID=b.f_ref and a.SourceID=b.id and ISNULL(b.BuyApplyID,'')!='' and a.f_ref=?
 [DEBUG] 2017-11-01 23:00:06,159 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:06,159 Line:988 1值：97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,160 Line:1025 query condition columnName:BuyApplyID----value:b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 23:00:06,160 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:06,160 Line:313 exeCondition:tblBuyInStock_Add_One : 'b3b91156_1612191441214453742'!='null'
 [DEBUG] 2017-11-01 23:00:06,161 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,162 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:if not exists(select GoodsCode from tblBuyApplicationDet where f_ref=? and NotInQty>0)
				begin
					update tblBuyApplication set statusId='1' where id=?
				end
			
 [DEBUG] 2017-11-01 23:00:06,162 Line:1157 1值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 23:00:06,162 Line:1157 2值：b3b91156_1612191441214453742
 [DEBUG] 2017-11-01 23:00:06,163 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-11-01 23:00:06,163 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-11-01 23:00:06,163 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 23:00:06,164 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,165 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-11-01 23:00:06,165 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,165 Line:1270 add
 [DEBUG] 2017-11-01 23:00:06,166 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-11-01 23:00:06,167 Line:313 exeCondition:tblBuyInStock_Add_One : 2!=2
 [DEBUG] 2017-11-01 23:00:06,168 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,168 Line:313 exeCondition:tblBuyInStock_Add_One :2==2
 [DEBUG] 2017-11-01 23:00:06,169 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,169 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-11-01 23:00:06,170 Line:1270 11
 [DEBUG] 2017-11-01 23:00:06,170 Line:1270 2017
 [DEBUG] 2017-11-01 23:00:06,170 Line:1270 11
 [DEBUG] 2017-11-01 23:00:06,170 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-11-01 23:00:06,170 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-11-01 23:00:06,171 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,171 Line:1270 tblBuyInStock
 [DEBUG] 2017-11-01 23:00:06,171 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 23:00:06,171 Line:1270 BI1711001
 [DEBUG] 2017-11-01 23:00:06,171 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 23:00:06,172 Line:1270 (tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 23:00:06,172 Line:1270 tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt
 [DEBUG] 2017-11-01 23:00:06,172 Line:1270 1
 [DEBUG] 2017-11-01 23:00:06,172 Line:1270 1
 [DEBUG] 2017-11-01 23:00:06,172 Line:1270 2017-11-01 23:00:06
 [DEBUG] 2017-11-01 23:00:06,173 Line:1270 2017-11-01 23:00:03
 [DEBUG] 2017-11-01 23:00:06,173 Line:1270 00001
 [DEBUG] 2017-11-01 23:00:06,173 Line:1270 
 [DEBUG] 2017-11-01 23:00:06,173 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-11-01 23:00:06,173 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-11-01 23:00:06,174 Line:1270 0002T00007
 [DEBUG] 2017-11-01 23:00:06,174 Line:1270 1
 [DEBUG] 2017-11-01 23:00:06,174 Line:1270 00101
 [DEBUG] 2017-11-01 23:00:06,174 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-11-01 23:00:06,174 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-11-01 23:00:06,175 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-11-01 23:00:06,175 Line:1270 tblBuyInStockDet.DisBackAmt
 [DEBUG] 2017-11-01 23:00:06,175 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-11-01 23:00:06,175 Line:1270 0.0
 [DEBUG] 2017-11-01 23:00:06,175 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-11-01 23:00:06,176 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-11-01 23:00:06,176 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-11-01 23:00:06,176 Line:1270 f_ref='97763882_1711012216276050131'
 [DEBUG] 2017-11-01 23:00:06,193 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'97763882_1711012216276050131','2017-11-01','BI1711001','tblBuyInStock',11,2017,11,'0002T00007','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,round((tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt)/tblBuyInStockDet.Qty,4),tblBuyInStockDet.DisBackAmt+tblBuyInStockDet.freightAmount+tblBuyInStockDet.TariffAmt,0,round(0,4),0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisBackAmt,0.0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-11-01 23:00:06','2017-11-01 23:00:03','00001' from tblBuyInStockDet where f_ref='97763882_1711012216276050131' order by tblBuyInStockDet.id
 [DEBUG] 2017-11-01 23:00:06,193 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-11-01 23:00:06,193 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 23:00:06,193 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-11-01 23:00:06,194 Line:425 ************上述语句执行时间：25
 [DEBUG] 2017-11-01 23:00:06,194 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 23:00:06,195 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,196 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-11-01 23:00:06,196 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:06,197 Line:1025 query condition columnName:isUseSeq----value:isUsed
 [DEBUG] 2017-11-01 23:00:06,197 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-11-01 23:00:06,197 Line:313 exeCondition:validateSameSeq :'isUsed'!='null'
 [DEBUG] 2017-11-01 23:00:06,198 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,199 Line:1264 自定义执行的语句显示： validateSameSeq:{call proc_isExistSameSeq(?,?)}
 [DEBUG] 2017-11-01 23:00:06,205 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-11-01 23:00:06,206 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-11-01 23:00:06,207 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,207 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-11-01 23:00:06,208 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,209 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 23:00:06,209 Line:1270 zh_CN
 [DEBUG] 2017-11-01 23:00:06,209 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,209 Line:1270 00001
 [DEBUG] 2017-11-01 23:00:06,209 Line:1270 1
 [DEBUG] 2017-11-01 23:00:06,218 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblStockDet where BillId='97763882_1711012216276050131') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and (len(isnull(a.Seq,''))>0 or (len(isnull(a.Seq,''))=0 and a.lastMarker=1)) and totalQty<0) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-11-01 23:00:06,219 Line:1292 存储过程内部信息：  
 [DEBUG] 2017-11-01 23:00:06,219 Line:425 ************上述语句执行时间：11
 [DEBUG] 2017-11-01 23:00:06,219 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-11-01 23:00:06,219 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:06,220 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 23:00:06,220 Line:988 2值：0.0
 [DEBUG] 2017-11-01 23:00:06,220 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 23:00:06,220 Line:988 4值：0.0
 [DEBUG] 2017-11-01 23:00:06,221 Line:988 5值：0.0
 [DEBUG] 2017-11-01 23:00:06,221 Line:988 6值：1.00000000
 [DEBUG] 2017-11-01 23:00:06,222 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 23:00:06,222 Line:1023 query condition columnName:CRNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 23:00:06,222 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-11-01 23:00:06,222 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-11-01 23:00:06,222 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 23:00:06,223 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,224 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000>0
 [DEBUG] 2017-11-01 23:00:06,225 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,226 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-11-01 23:00:06,226 Line:1270 197763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,226 Line:1270 0002T00007
 [DEBUG] 2017-11-01 23:00:06,226 Line:1270 1
 [DEBUG] 2017-11-01 23:00:06,227 Line:1270 2017-11-01
 [DEBUG] 2017-11-01 23:00:06,227 Line:1270 Period=11@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=11@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=2043.00000000@SPFieldLink:RelationDocID=97763882_1711012216276050131@SPFieldLink:Currency=42428a07_1604181718549566965@SPFieldLink:CurrencyRate=1.00000000@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=2043.00000000@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-11-01 22:16:27@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-11-01 23:00:03@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1711001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0.0@SPFieldLink:Remark=
 [DEBUG] 2017-11-01 23:00:06,232 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('197763882_1711012216276050131',14,'0002T00007','2017-11-01','11','2017','11','0','2043.00000000','97763882_1711012216276050131','42428a07_1604181718549566965','1.00000000','0','2043.00000000','1','2017-11-01 22:16:27','1','2017-11-01 23:00:03','00001','tblBuyInStock','BI1711001','1','00101','0.0','')
 [DEBUG] 2017-11-01 23:00:06,232 Line:425 ************上述语句执行时间：7
 [DEBUG] 2017-11-01 23:00:06,232 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 2043.00000000>0 && 'false'=='false'
 [DEBUG] 2017-11-01 23:00:06,234 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,234 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='false'
 [DEBUG] 2017-11-01 23:00:06,235 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,235 Line:313 exeCondition:tblBuyInStock_Add_One :2043.00000000<0 && 'false'=='true'
 [DEBUG] 2017-11-01 23:00:06,236 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,236 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0&&2043.00000000>=0
 [DEBUG] 2017-11-01 23:00:06,237 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,238 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('2202')>=0
 [DEBUG] 2017-11-01 23:00:06,239 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,239 Line:313 exeCondition:tblBuyInStock_Add_One :'100101'.indexOf('1123')>=0
 [DEBUG] 2017-11-01 23:00:06,240 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,240 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-11-01 23:00:06,240 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-11-01 23:00:06,241 Line:988 1值：2043.00000000
 [DEBUG] 2017-11-01 23:00:06,241 Line:988 2值：0.0
 [DEBUG] 2017-11-01 23:00:06,242 Line:988 3值：2043.00000000
 [DEBUG] 2017-11-01 23:00:06,242 Line:988 4值：0.0
 [DEBUG] 2017-11-01 23:00:06,242 Line:988 5值：0.0
 [DEBUG] 2017-11-01 23:00:06,243 Line:988 6值：0.0
 [DEBUG] 2017-11-01 23:00:06,243 Line:1023 query condition columnName:RNeedPayAmt----value:2043.00000000
 [DEBUG] 2017-11-01 23:00:06,244 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-11-01 23:00:06,244 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-11-01 23:00:06,244 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-11-01 23:00:06,245 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 23:00:06,246 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,246 Line:313 exeCondition:tblBuyInStock_Add_One :0.0>0
 [DEBUG] 2017-11-01 23:00:06,248 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,248 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 23:00:06,249 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,250 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-11-01 23:00:06,251 Line:321 flag:false
 [DEBUG] 2017-11-01 23:00:06,252 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-11-01 23:00:06,253 Line:321 flag:true
 [DEBUG] 2017-11-01 23:00:06,253 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-11-01 23:00:06,253 Line:1270 97763882_1711012216276050131
 [DEBUG] 2017-11-01 23:00:06,254 Line:1270 add
 [DEBUG] 2017-11-01 23:00:06,256 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-11-01 23:00:07,772 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=97763882_1711012216276050131&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1
 [DEBUG] 2017-11-01 23:00:07,772 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[97763882_1711012216276050131,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];
 [DEBUG] 2017-11-01 23:00:07,773 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='97763882_1711012216276050131' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-11-01 23:00:07,786 Line:1525  select * from  tblBuyInStockDet where f_ref = '97763882_1711012216276050131' order by detOrderNo
 [ERROR] 2017-11-01 23:00:47,947 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 23:00:48,955 Line:3882 --------Refresh PopSelectConfig Failture---------------
 [ERROR] 2017-11-01 23:01:50,801 Line:68 -----------PopSelectConfig parseFile C:\koron\HFtomcat\tomcat7\bin\..\..\config_v7\popupSelect\QuoteMany\popuptblSaleReceive.xml error----------------
 java.lang.Exception: 弹出窗popuptblSaleReceive复合字段：isnull(tblCompany.ComFullName,tblFreightCom.ComFullName)未设置asName!!!!!
	at com.menyi.aio.web.customize.PopupSelectBean.parse(PopupSelectBean.java:371)
	at com.menyi.web.util.PopSelectConfig.parse(PopSelectConfig.java:63)
	at com.menyi.web.util.PopSelectConfig.parseConfig(PopSelectConfig.java:38)
	at com.menyi.web.util.InitMenData.initConfigFile(InitMenData.java:3881)
	at com.menyi.web.util.ConfigRefresh.run(ConfigRefresh.java:192)
[ERROR] 2017-11-01 23:01:51,700 Line:3882 --------Refresh PopSelectConfig Failture---------------
 