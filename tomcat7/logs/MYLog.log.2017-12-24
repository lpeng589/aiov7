[INFO ] 2017-12-24 12:26:15,472 Line:206 系统开始启动，最大内存：1792;目前总内存：252;目前空闲内存：160
 [INFO ] 2017-12-24 12:26:15,582 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 12:26:20,419 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 12:26:20,786 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 12:26:20,813 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 12:26:20,828 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 12:26:20,844 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 12:26:20,875 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 12:26:20,891 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 12:26:22,043 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 12:26:22,117 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 12:26:22,148 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 12:26:22,164 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 12:26:23,210 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 12:26:23,210 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 12:26:23,739 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 12:26:23,848 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 12:26:24,629 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 12:26:24,650 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 12:26:24,666 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 12:26:24,666 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 12:26:24,681 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 12:26:24,697 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 12:26:24,728 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 12:26:27,717 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 12:26:28,067 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 12:26:28,082 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 12:26:28,129 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-24 12:26:28,567 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 12:26:28,567 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 12:26:30,020 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-24 00:00:00
 [INFO ] 2017-12-24 12:26:30,020 Line:144 SAFE 备份任务开始执行，时间2017-12-24 12:26:30
 [INFO ] 2017-12-24 12:26:30,033 Line:137 SAFE 碎片任务启动，时间2017-12-24 00:00:00
 [INFO ] 2017-12-24 12:26:34,885 Line:148 SAFE 备份任务执行成功，时间2017-12-24 12:26:34
 [INFO ] 2017-12-24 12:26:34,897 Line:129 SAFE 碎片整理开始执行，时间2017-12-24 12:26:34
 [INFO ] 2017-12-24 12:26:40,491 Line:134 SAFE 碎片整理结束执行，时间2017-12-24 12:26:40
 [DEBUG] 2017-12-24 12:27:28,734 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 12:28:59,179 Line:5227 GlobalsTool.js 生成js 时间75:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:28:59,267 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 12:28:59,269 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 12:28:59,550 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514089739523
 [DEBUG] 2017-12-24 12:28:59,555 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514089739523,];
 [DEBUG] 2017-12-24 12:28:59,634 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 12:28:59,634 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 12:29:01,596 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514089741594
 [DEBUG] 2017-12-24 12:29:01,597 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514089741594,];
 [DEBUG] 2017-12-24 12:29:01,667 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514089741662
 [DEBUG] 2017-12-24 12:29:01,667 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514089741662,];
 [DEBUG] 2017-12-24 12:29:01,747 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 12:29:01,748 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 12:29:01,819 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 12:29:01,838 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 12:29:02,007 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 12:29:02,007 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 12:29:02,043 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:29:02,247 Line:5227 GlobalsTool.js 生成js 时间29:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:29:02,539 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 12:29:02,539 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 12:29:02,539 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 12:29:02,539 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:29:02,543 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:29:02,558 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 12:29:02,559 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:29:02,560 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:29:02,568 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 12:29:02,569 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:29:02,569 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:29:02,578 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 12:29:02,579 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:29:02,580 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:33:15,733 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 12:33:15,734 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 12:33:15,734 Line:215 ---------->SET Page 1 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-12-24 12:33:16,683 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-12-24 12:33:16,684 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-12-24 12:33:17,566 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=2
 [DEBUG] 2017-12-24 12:33:17,567 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-24 12:33:17,567 Line:215 ---------->SET Page 2 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2017-12-24 12:33:22,887 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2017-12-24 12:33:22,887 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[2,];search=[采购入库单,];
 [DEBUG] 2017-12-24 12:33:25,197 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblBuyInStock&search=%E9%87%87%E8%B4%AD%E5%85%A5%E5%BA%93%E5%8D%95&popWinName=TablemgtDiv
 [DEBUG] 2017-12-24 12:33:25,198 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblBuyInStock,];search=[é??è???????????,];popWinName=[TablemgtDiv,];
 [DEBUG] 2017-12-24 12:33:25,350 Line:5227 GlobalsTool.js 生成js 时间0:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:33:25,840 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=InvoiceType
 [DEBUG] 2017-12-24 12:33:25,841 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[InvoiceType,];
 [DEBUG] 2017-12-24 12:33:26,447 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 12:33:29,718 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineOp
 [DEBUG] 2017-12-24 12:33:29,719 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineOp,];
 [DEBUG] 2017-12-24 12:33:34,583 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineFile&id=tblBuyInStock_Add
 [DEBUG] 2017-12-24 12:33:34,584 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineFile,];id=[tblBuyInStock_Add,];
 [DEBUG] 2017-12-24 12:33:44,251 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 12:33:44,252 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 12:33:44,254 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:33:44,516 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 12:33:44,517 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 12:33:44,536 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 12:33:44,537 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:33:44,538 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:33:44,555 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 12:33:44,555 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:33:44,557 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:33:44,569 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 12:33:44,569 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:33:44,570 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:33:44,582 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 12:33:44,582 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:33:44,584 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:34:41,190 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 12:34:41,191 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 12:34:41,281 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 12:34:41,282 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 12:34:41,365 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514090081359
 [DEBUG] 2017-12-24 12:34:41,367 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514090081359,];
 [DEBUG] 2017-12-24 12:34:47,258 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514090087256
 [DEBUG] 2017-12-24 12:34:47,261 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514090087256,];
 [DEBUG] 2017-12-24 12:34:47,270 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514090087268
 [DEBUG] 2017-12-24 12:34:47,270 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514090087268,];
 [DEBUG] 2017-12-24 12:34:47,286 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 12:34:47,287 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 12:34:47,361 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 12:34:47,369 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 12:34:47,446 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 12:34:47,446 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 12:34:47,448 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:34:47,728 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 12:34:47,729 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 12:34:47,771 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 12:34:47,772 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:34:47,773 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:34:47,805 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 12:34:47,807 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:34:47,808 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:34:47,820 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 12:34:47,820 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:34:47,822 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:34:47,832 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 12:34:47,833 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:34:47,834 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:34:50,507 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 12:34:50,508 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 12:34:50,509 Line:215 ---------->SET Page 1 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-12-24 12:34:51,486 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-12-24 12:34:51,487 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-12-24 12:34:52,528 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=2
 [DEBUG] 2017-12-24 12:34:52,529 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-24 12:34:52,530 Line:215 ---------->SET Page 2 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2017-12-24 12:34:57,538 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2017-12-24 12:34:57,539 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[2,];search=[采购入库单,];
 [DEBUG] 2017-12-24 12:35:00,180 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblBuyInStock&search=%E9%87%87%E8%B4%AD%E5%85%A5%E5%BA%93%E5%8D%95&popWinName=TablemgtDiv
 [DEBUG] 2017-12-24 12:35:00,181 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblBuyInStock,];search=[é??è???????????,];popWinName=[TablemgtDiv,];
 [DEBUG] 2017-12-24 12:35:00,438 Line:135 BaseAction.execute 请求地址：/ClientSettingAction.do?operation=4&queryType=reloadEnum&enumerName=InvoiceType
 [DEBUG] 2017-12-24 12:35:00,438 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];queryType=[reloadEnum,];enumerName=[InvoiceType,];
 [DEBUG] 2017-12-24 12:35:01,083 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 12:35:07,660 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineOp
 [DEBUG] 2017-12-24 12:35:07,661 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineOp,];
 [DEBUG] 2017-12-24 12:35:12,256 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=defineFile&id=tblBuyInStock_Add
 [DEBUG] 2017-12-24 12:35:12,256 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[defineFile,];id=[tblBuyInStock_Add,];
 [DEBUG] 2017-12-24 12:35:12,346 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=getDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F7927666F31446F145622FDE4212056BC
 [DEBUG] 2017-12-24 12:35:12,349 Line:1653 ReportServlet 读define文件:D:\Project\aio\tomcat7\bin\..\..\config_v7\define\defineBuy.xml
 [DEBUG] 2017-12-24 12:40:48,139 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655FFC28E9AF2D7A71FC17BB8C487E591A94
 [ERROR] 2017-12-24 12:40:48,225 Line:119 ------保存成功
 [DEBUG] 2017-12-24 12:42:35,512 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F960EB1ACFB68774C0A1BB597E5395919
 [ERROR] 2017-12-24 12:42:35,572 Line:119 ------保存成功
 [DEBUG] 2017-12-24 12:43:17,229 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 12:43:17,231 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 12:43:17,234 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:43:17,372 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 12:43:17,373 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 12:43:17,384 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 12:43:17,385 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:43:17,386 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:43:17,394 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 12:43:17,394 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:43:17,395 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:43:17,401 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 12:43:17,401 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:43:17,402 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:43:17,408 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 12:43:17,408 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:43:17,408 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:43:19,151 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 12:43:19,151 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 12:43:19,151 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-24 12:43:19,698 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-24 12:43:19,698 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-24 12:43:19,823 Line:689 通过SQL读原始数据：125
 [DEBUG] 2017-12-24 12:43:19,823 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 12:43:19,979 Line:5227 GlobalsTool.js 生成js 时间15:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:43:20,010 Line:5227 GlobalsTool.js 生成js 时间31:/js/gen/defineList.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 12:43:22,369 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 12:43:22,370 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 12:43:22,704 Line:5227 GlobalsTool.js 生成js 时间232:/js/gen/define.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 12:43:25,046 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 12:43:25,046 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 12:43:25,133 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:43:25,133 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:43:25,134 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:43:25,134 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:43:25,135 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 12:43:25,180 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:43:25,275 Line:5227 GlobalsTool.js 生成js 时间25:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:43:25,304 Line:5227 GlobalsTool.js 生成js 时间28:/js/gen/popupPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:43:27,691 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 12:43:27,692 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 12:43:27,718 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:43:27,718 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:43:27,718 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:43:27,718 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 12:43:27,719 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:43:27,722 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:43:32,035 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 12:43:32,035 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 12:43:32,082 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:43:32,083 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:43:32,083 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:43:32,084 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:43:32,084 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 12:43:32,093 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:43:41,913 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 12:43:41,915 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240009,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 12:43:41,917 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 12:43:41,946 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:43:41,947 Line:5853 1:0.0
 [DEBUG] 2017-12-24 12:43:41,947 Line:5853 2:
 [DEBUG] 2017-12-24 12:43:41,947 Line:5853 3:99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:41,947 Line:5853 4:-1
 [DEBUG] 2017-12-24 12:43:41,948 Line:5853 5:finish
 [DEBUG] 2017-12-24 12:43:41,948 Line:5853 6:0.0
 [DEBUG] 2017-12-24 12:43:41,948 Line:5853 7:0
 [DEBUG] 2017-12-24 12:43:41,948 Line:5853 8:0.0
 [DEBUG] 2017-12-24 12:43:41,948 Line:5853 9:BI1712240009
 [DEBUG] 2017-12-24 12:43:41,948 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 12:43:41,949 Line:5853 11:00003
 [DEBUG] 2017-12-24 12:43:41,949 Line:5853 12:00101
 [DEBUG] 2017-12-24 12:43:41,949 Line:5853 13:1
 [DEBUG] 2017-12-24 12:43:41,949 Line:5853 14:00001
 [DEBUG] 2017-12-24 12:43:41,949 Line:5853 15:3
 [DEBUG] 2017-12-24 12:43:41,949 Line:5853 16:0.0
 [DEBUG] 2017-12-24 12:43:41,950 Line:5853 17:0.0
 [DEBUG] 2017-12-24 12:43:41,950 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:43:41,950 Line:5853 19:0.0
 [DEBUG] 2017-12-24 12:43:41,951 Line:5853 20:
 [DEBUG] 2017-12-24 12:43:41,951 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:43:41,952 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:43:41,952 Line:5853 23:0.0
 [DEBUG] 2017-12-24 12:43:41,952 Line:5853 24:
 [DEBUG] 2017-12-24 12:43:41,952 Line:5853 25:0.0
 [DEBUG] 2017-12-24 12:43:41,952 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:43:41,953 Line:5853 27:0.0
 [DEBUG] 2017-12-24 12:43:41,953 Line:5853 28:
 [DEBUG] 2017-12-24 12:43:41,953 Line:5853 29:12
 [DEBUG] 2017-12-24 12:43:41,953 Line:5853 30:12
 [DEBUG] 2017-12-24 12:43:41,953 Line:5853 31:2017
 [DEBUG] 2017-12-24 12:43:41,954 Line:5853 32:
 [DEBUG] 2017-12-24 12:43:41,954 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:43:41,954 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:43:41,954 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:43:41,954 Line:5853 36:
 [DEBUG] 2017-12-24 12:43:41,954 Line:5853 37:
 [DEBUG] 2017-12-24 12:43:41,955 Line:5853 38:
 [DEBUG] 2017-12-24 12:43:41,955 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:43:41,955 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:43:41,955 Line:5853 41:
 [DEBUG] 2017-12-24 12:43:41,956 Line:5853 42:
 [DEBUG] 2017-12-24 12:43:41,956 Line:5853 43:100.0
 [DEBUG] 2017-12-24 12:43:41,956 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:43:41,957 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:43:41,957 Line:5853 46:
 [DEBUG] 2017-12-24 12:43:41,957 Line:5853 47:1.0
 [DEBUG] 2017-12-24 12:43:41,957 Line:5853 48:1.0
 [DEBUG] 2017-12-24 12:43:41,958 Line:5853 49:1.0
 [DEBUG] 2017-12-24 12:43:41,958 Line:5853 50:0.0
 [DEBUG] 2017-12-24 12:43:41,958 Line:5853 51:1.0
 [DEBUG] 2017-12-24 12:43:41,959 Line:5853 52:
 [DEBUG] 2017-12-24 12:43:41,959 Line:5853 53:
 [DEBUG] 2017-12-24 12:43:41,959 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:43:41,959 Line:5853 55:0.0
 [DEBUG] 2017-12-24 12:43:41,960 Line:5853 56:0.0
 [DEBUG] 2017-12-24 12:43:41,960 Line:5853 57:0
 [DEBUG] 2017-12-24 12:43:41,960 Line:5853 58:00001
 [DEBUG] 2017-12-24 12:43:41,961 Line:5853 59:0
 [DEBUG] 2017-12-24 12:43:41,961 Line:5853 60:2017-12-24 12:43:41
 [DEBUG] 2017-12-24 12:43:41,961 Line:5853 61:1
 [DEBUG] 2017-12-24 12:43:41,961 Line:5853 62:2017-12-24 12:43:41
 [DEBUG] 2017-12-24 12:43:41,962 Line:5853 63:1
 [DEBUG] 2017-12-24 12:43:41,962 Line:5853 64:2017-12-24 12:43:41
 [DEBUG] 2017-12-24 12:43:41,985 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:43:41,986 Line:5853 1:99a5bb9e_1712241243419850006
 [DEBUG] 2017-12-24 12:43:41,987 Line:5853 2:99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:41,987 Line:5853 3:
 [DEBUG] 2017-12-24 12:43:41,988 Line:5853 4:
 [DEBUG] 2017-12-24 12:43:41,989 Line:5853 5:
 [DEBUG] 2017-12-24 12:43:41,989 Line:5853 6:
 [DEBUG] 2017-12-24 12:43:41,990 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 8:
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 9:
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 10:
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 11:
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 12:
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 13:
 [DEBUG] 2017-12-24 12:43:41,991 Line:5853 14:
 [DEBUG] 2017-12-24 12:43:41,992 Line:5853 15:1.0
 [DEBUG] 2017-12-24 12:43:41,992 Line:5853 16:1.0
 [DEBUG] 2017-12-24 12:43:41,992 Line:5853 17:1.0
 [DEBUG] 2017-12-24 12:43:41,992 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:43:41,992 Line:5853 19:0
 [DEBUG] 2017-12-24 12:43:41,992 Line:5853 20:0.0
 [DEBUG] 2017-12-24 12:43:41,993 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:43:41,993 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:43:41,993 Line:5853 23:100.0
 [DEBUG] 2017-12-24 12:43:41,993 Line:5853 24:1.0
 [DEBUG] 2017-12-24 12:43:41,993 Line:5853 25:1.0
 [DEBUG] 2017-12-24 12:43:41,993 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:43:41,994 Line:5853 27:1.0
 [DEBUG] 2017-12-24 12:43:41,994 Line:5853 28:1.0
 [DEBUG] 2017-12-24 12:43:41,994 Line:5853 29:0.0
 [DEBUG] 2017-12-24 12:43:41,994 Line:5853 30:1.0
 [DEBUG] 2017-12-24 12:43:41,994 Line:5853 31:1.0
 [DEBUG] 2017-12-24 12:43:41,994 Line:5853 32:0.0
 [DEBUG] 2017-12-24 12:43:41,995 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:43:41,995 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:43:41,995 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:43:41,995 Line:5853 36:0.0
 [DEBUG] 2017-12-24 12:43:41,995 Line:5853 37:
 [DEBUG] 2017-12-24 12:43:41,995 Line:5853 38:0.0
 [DEBUG] 2017-12-24 12:43:41,996 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:43:41,996 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:43:41,996 Line:5853 41:0.0
 [DEBUG] 2017-12-24 12:43:41,996 Line:5853 42:0.0
 [DEBUG] 2017-12-24 12:43:41,996 Line:5853 43:0.0
 [DEBUG] 2017-12-24 12:43:41,996 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:43:41,997 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:43:41,997 Line:5853 46:0.0
 [DEBUG] 2017-12-24 12:43:41,997 Line:5853 47:0
 [DEBUG] 2017-12-24 12:43:41,997 Line:5853 48:0.0
 [DEBUG] 2017-12-24 12:43:41,997 Line:5853 49:0.0
 [DEBUG] 2017-12-24 12:43:41,997 Line:5853 50:0
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 51:
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 52:0.0
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 53:0.0
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 55:0
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 56:0
 [DEBUG] 2017-12-24 12:43:41,998 Line:5853 57:
 [DEBUG] 2017-12-24 12:43:41,999 Line:5853 58:0.0
 [DEBUG] 2017-12-24 12:43:41,999 Line:5853 59:0.0
 [DEBUG] 2017-12-24 12:43:41,999 Line:5853 60:
 [DEBUG] 2017-12-24 12:43:41,999 Line:5853 61:0.0
 [DEBUG] 2017-12-24 12:43:41,999 Line:5853 62:00001
 [DEBUG] 2017-12-24 12:43:42,273 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,516 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,516 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,516 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,516 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,516 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,516 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:43:42,516 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,516 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 12:43:42,516 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,516 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,516 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 12:43:42,535 Line:1043 ---上述语句时间---19
 [DEBUG] 2017-12-24 12:43:42,535 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:43:42,536 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,537 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:43:42,537 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,538 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,538 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:43:42,543 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 12:43:42,544 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:43:42,545 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,545 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:43:42,545 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,545 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,545 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:43:42,555 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 12:43:42,555 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:43:42,556 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,556 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 12:43:42,556 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,557 Line:988 1值：false
 [DEBUG] 2017-12-24 12:43:42,557 Line:988 2值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,563 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 12:43:42,563 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-12-24 12:43:42,564 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 12:43:42,564 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,565 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 12:43:42,565 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,565 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,570 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:43:42,570 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,572 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,573 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:43:42,573 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,574 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,581 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 12:43:42,582 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,584 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,585 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:43:42,585 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,586 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,592 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-12-24 12:43:42,593 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,595 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,596 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 12:43:42,596 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,597 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,605 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 12:43:42,606 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,608 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,609 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,611 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,612 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 12:43:42,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,613 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,623 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-12-24 12:43:42,624 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,627 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,628 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 12:43:42,630 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,630 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 12:43:42,631 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,631 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,634 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:43:42,634 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,634 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,634 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 12:43:42,634 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,634 Line:988 1值：1
 [DEBUG] 2017-12-24 12:43:42,634 Line:988 2值：0
 [DEBUG] 2017-12-24 12:43:42,634 Line:988 3值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,676 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 12:43:42,676 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 12:43:42,676 Line:1043 ---上述语句时间---42
 [DEBUG] 2017-12-24 12:43:42,676 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 12:43:42,677 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,678 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 12:43:42,678 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,678 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,688 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 12:43:42,688 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,689 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,689 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 12:43:42,690 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,690 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,691 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:43:42,692 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:43:42,692 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,693 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 12:43:42,693 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,693 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,696 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:43:42,697 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 12:43:42,697 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,698 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 12:43:42,698 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,698 Line:988 1值：
 [DEBUG] 2017-12-24 12:43:42,698 Line:988 2值：00001
 [DEBUG] 2017-12-24 12:43:42,706 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 12:43:42,706 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 12:43:42,706 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:42,707 Line:988 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,707 Line:988 2值：
 [DEBUG] 2017-12-24 12:43:42,707 Line:988 3值：
 [DEBUG] 2017-12-24 12:43:42,707 Line:988 4值：
 [DEBUG] 2017-12-24 12:43:42,710 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:43:42,710 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 12:43:42,711 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,712 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:43:42,713 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,713 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 12:43:42,713 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,714 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 12:43:42,714 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,714 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:43:42,715 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,716 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 12:43:42,717 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:43:42,717 Line:1157 2值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,721 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,721 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 12:43:42,721 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:43:42,721 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:43:42,722 Line:1157 2值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,722 Line:1157 3值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,726 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,727 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 12:43:42,727 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:43:42,727 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,727 Line:1157 2值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,732 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,732 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 12:43:42,733 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 12:43:42,733 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,733 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,733 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:43:42,733 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 12:43:42,733 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,733 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,733 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:43:42,733 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 12:43:42,733 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,733 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 12:43:42,733 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,733 Line:1157 2值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,733 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,733 Line:408 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:43:42,733 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 12:43:42,733 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,733 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 12:43:42,733 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,733 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 12:43:42,733 Line:1270 99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,733 Line:1270 add
 [DEBUG] 2017-12-24 12:43:42,817 Line:425 ************上述语句执行时间：84
 [DEBUG] 2017-12-24 12:43:42,817 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 12:43:42,817 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,817 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:43:42,817 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,817 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:43:42,817 Line:408 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:43:42,817 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:43:42,817 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,836 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:43:42,837 Line:408 ************上述语句执行时间：20
 [DEBUG] 2017-12-24 12:43:42,837 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:43:42,838 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,839 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:43:42,840 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,840 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 12:43:42,840 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,876 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 12:43:42,877 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,877 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:43:42,877 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,878 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:43:42,878 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,878 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:43:42,879 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,879 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 12:43:42,880 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:42,880 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:43:42,881 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,881 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 12:43:42,881 Line:1157 1值：99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,884 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 12:43:42,884 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 12:43:42,884 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:43:42,885 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,886 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 12:43:42,886 Line:1270 99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,887 Line:1270 add
 [DEBUG] 2017-12-24 12:43:42,932 Line:425 ************上述语句执行时间：46
 [DEBUG] 2017-12-24 12:43:42,932 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 12:43:42,938 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:42,939 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 12:43:42,939 Line:1270 12
 [DEBUG] 2017-12-24 12:43:42,939 Line:1270 2017
 [DEBUG] 2017-12-24 12:43:42,939 Line:1270 12
 [DEBUG] 2017-12-24 12:43:42,939 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 12:43:42,939 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 BI1712240009
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:43:42,940 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 1
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 1
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 2017-12-24 12:43:41
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 2017-12-24 12:43:41
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 00001
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 
 [DEBUG] 2017-12-24 12:43:42,941 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 12:43:42,942 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:43:42,942 Line:1270 00003
 [DEBUG] 2017-12-24 12:43:42,942 Line:1270 1
 [DEBUG] 2017-12-24 12:43:42,942 Line:1270 00101
 [DEBUG] 2017-12-24 12:43:42,942 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 12:43:42,942 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 12:43:42,943 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:43:42,943 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 12:43:42,943 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 12:43:42,943 Line:1270 0
 [DEBUG] 2017-12-24 12:43:42,943 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 12:43:42,944 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 12:43:42,944 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 12:43:42,944 Line:1270 f_ref='99a5bb9e_1712241243419380005'
 [DEBUG] 2017-12-24 12:43:43,133 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'99a5bb9e_1712241243419380005','2017-12-24','BI1712240009','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 12:43:41','2017-12-24 12:43:41','00001' from tblBuyInStockDet where f_ref='99a5bb9e_1712241243419380005' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:43:43,134 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 12:43:43,134 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:43:43,134 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:43:43,134 Line:425 ************上述语句执行时间：195
 [DEBUG] 2017-12-24 12:43:43,134 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 12:43:43,135 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,135 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:43:43,136 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:43,137 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 12:43:43,137 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:43,139 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:43:43,140 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 12:43:43,141 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,141 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 12:43:43,142 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,142 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 12:43:43,143 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,143 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 12:43:43,143 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:43,144 Line:988 1值：1
 [DEBUG] 2017-12-24 12:43:43,144 Line:988 2值：0
 [DEBUG] 2017-12-24 12:43:43,144 Line:988 3值：1
 [DEBUG] 2017-12-24 12:43:43,144 Line:988 4值：0
 [DEBUG] 2017-12-24 12:43:43,145 Line:988 5值：0
 [DEBUG] 2017-12-24 12:43:43,145 Line:988 6值：1
 [DEBUG] 2017-12-24 12:43:43,146 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:43:43,147 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:43:43,147 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 12:43:43,148 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:43:43,148 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 12:43:43,149 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:43,216 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 12:43:43,216 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 12:43:43,232 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,256 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,274 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,283 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,283 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,298 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,331 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:43:43,347 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 12:43:43,503 Line:434 ************上述语句执行时间：353
 [DEBUG] 2017-12-24 12:43:43,522 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 12:43:43,527 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:43,528 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 12:43:43,528 Line:1270 199a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:43,530 Line:1270 00003
 [DEBUG] 2017-12-24 12:43:43,530 Line:1270 1
 [DEBUG] 2017-12-24 12:43:43,530 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:43:43,530 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=99a5bb9e_1712241243419380005@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 12:43:41@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 12:43:41@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240009@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 12:43:43,596 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('199a5bb9e_1712241243419380005',8,'00003','2017-12-24','12','2017','12','0','1','99a5bb9e_1712241243419380005','','1','0','1','1','2017-12-24 12:43:41','1','2017-12-24 12:43:41','00001','tblBuyInStock','BI1712240009','1','00101','0','')
 [DEBUG] 2017-12-24 12:43:43,596 Line:425 ************上述语句执行时间：69
 [DEBUG] 2017-12-24 12:43:43,596 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:43:43,598 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,598 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:43:43,600 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,601 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 12:43:43,602 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,603 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 12:43:43,605 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,605 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 12:43:43,608 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,609 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 12:43:43,610 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,611 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 12:43:43,611 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:43,611 Line:988 1值：1
 [DEBUG] 2017-12-24 12:43:43,611 Line:988 2值：0
 [DEBUG] 2017-12-24 12:43:43,612 Line:988 3值：1
 [DEBUG] 2017-12-24 12:43:43,612 Line:988 4值：0
 [DEBUG] 2017-12-24 12:43:43,612 Line:988 5值：0
 [DEBUG] 2017-12-24 12:43:43,612 Line:988 6值：0
 [DEBUG] 2017-12-24 12:43:43,614 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:43:43,614 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 12:43:43,615 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 12:43:43,615 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:43:43,615 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:43:43,616 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,618 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:43:43,620 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,620 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:43:43,621 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,621 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:43:43,622 Line:321 flag:false
 [DEBUG] 2017-12-24 12:43:43,623 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:43:43,623 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:43,624 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 12:43:43,624 Line:1270 99a5bb9e_1712241243419380005
 [DEBUG] 2017-12-24 12:43:43,624 Line:1270 add
 [DEBUG] 2017-12-24 12:43:43,635 Line:425 ************上述语句执行时间：11
 [DEBUG] 2017-12-24 12:43:43,635 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'OpenPackage' as opt,'OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 12:43:43,636 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:43:43,637 Line:1025 query condition columnName:opt----value:OpenPackage
 [DEBUG] 2017-12-24 12:43:43,637 Line:1025 query condition columnName:url----value:OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage
 [DEBUG] 2017-12-24 12:43:43,638 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 12:43:43,638 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 12:43:43,638 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 12:43:43,639 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 12:43:43,639 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 12:43:43,639 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:43:43,639 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:43:43,640 Line:321 flag:true
 [DEBUG] 2017-12-24 12:43:43,675 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(OpenPackage,OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [ERROR] 2017-12-24 12:44:49,650 Line:1768 DefineSQLBean.execClass Error
 java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.menyi.web.util.DefineSQLBean.execClass(DefineSQLBean.java:1757)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:437)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3888)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:198)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.StringIndexOutOfBoundsException: String index out of range: -1
	at java.lang.String.substring(String.java:1967)
	at tzhive.HiveServlet.optHive(HiveServlet.java:40)
	... 50 more
[ERROR] 2017-12-24 12:44:49,650 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=String index out of range: -1
 [DEBUG] 2017-12-24 12:46:44,189 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 12:46:44,192 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240009,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 12:46:44,193 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 12:46:44,209 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:46:44,209 Line:5853 1:0.0
 [DEBUG] 2017-12-24 12:46:44,210 Line:5853 2:
 [DEBUG] 2017-12-24 12:46:44,211 Line:5853 3:99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,211 Line:5853 4:-1
 [DEBUG] 2017-12-24 12:46:44,212 Line:5853 5:finish
 [DEBUG] 2017-12-24 12:46:44,212 Line:5853 6:0.0
 [DEBUG] 2017-12-24 12:46:44,212 Line:5853 7:0
 [DEBUG] 2017-12-24 12:46:44,212 Line:5853 8:0.0
 [DEBUG] 2017-12-24 12:46:44,212 Line:5853 9:BI1712240009
 [DEBUG] 2017-12-24 12:46:44,212 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 11:00003
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 12:00101
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 13:1
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 14:00001
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 15:3
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 16:0.0
 [DEBUG] 2017-12-24 12:46:44,213 Line:5853 17:0.0
 [DEBUG] 2017-12-24 12:46:44,214 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:46:44,214 Line:5853 19:0.0
 [DEBUG] 2017-12-24 12:46:44,214 Line:5853 20:
 [DEBUG] 2017-12-24 12:46:44,214 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:46:44,214 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:46:44,214 Line:5853 23:0.0
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 24:
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 25:0.0
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 27:0.0
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 28:
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 29:12
 [DEBUG] 2017-12-24 12:46:44,215 Line:5853 30:12
 [DEBUG] 2017-12-24 12:46:44,216 Line:5853 31:2017
 [DEBUG] 2017-12-24 12:46:44,216 Line:5853 32:
 [DEBUG] 2017-12-24 12:46:44,216 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:46:44,216 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:46:44,216 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:46:44,216 Line:5853 36:
 [DEBUG] 2017-12-24 12:46:44,217 Line:5853 37:
 [DEBUG] 2017-12-24 12:46:44,217 Line:5853 38:
 [DEBUG] 2017-12-24 12:46:44,217 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:46:44,217 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:46:44,217 Line:5853 41:
 [DEBUG] 2017-12-24 12:46:44,217 Line:5853 42:
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 43:100.0
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 46:
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 47:1.0
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 48:1.0
 [DEBUG] 2017-12-24 12:46:44,218 Line:5853 49:1.0
 [DEBUG] 2017-12-24 12:46:44,219 Line:5853 50:0.0
 [DEBUG] 2017-12-24 12:46:44,219 Line:5853 51:1.0
 [DEBUG] 2017-12-24 12:46:44,219 Line:5853 52:
 [DEBUG] 2017-12-24 12:46:44,219 Line:5853 53:
 [DEBUG] 2017-12-24 12:46:44,219 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:46:44,219 Line:5853 55:0.0
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 56:0.0
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 57:0
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 58:00001
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 59:0
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 60:2017-12-24 12:46:44
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 61:1
 [DEBUG] 2017-12-24 12:46:44,220 Line:5853 62:2017-12-24 12:46:44
 [DEBUG] 2017-12-24 12:46:44,221 Line:5853 63:1
 [DEBUG] 2017-12-24 12:46:44,221 Line:5853 64:2017-12-24 12:46:44
 [DEBUG] 2017-12-24 12:46:44,227 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:46:44,227 Line:5853 1:99a5bb9e_1712241246442260010
 [DEBUG] 2017-12-24 12:46:44,227 Line:5853 2:99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,227 Line:5853 3:
 [DEBUG] 2017-12-24 12:46:44,227 Line:5853 4:
 [DEBUG] 2017-12-24 12:46:44,228 Line:5853 5:
 [DEBUG] 2017-12-24 12:46:44,228 Line:5853 6:
 [DEBUG] 2017-12-24 12:46:44,228 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 12:46:44,228 Line:5853 8:
 [DEBUG] 2017-12-24 12:46:44,228 Line:5853 9:
 [DEBUG] 2017-12-24 12:46:44,228 Line:5853 10:
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 11:
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 12:
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 13:
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 14:
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 15:1.0
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 16:1.0
 [DEBUG] 2017-12-24 12:46:44,229 Line:5853 17:1.0
 [DEBUG] 2017-12-24 12:46:44,230 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:46:44,230 Line:5853 19:0
 [DEBUG] 2017-12-24 12:46:44,230 Line:5853 20:0.0
 [DEBUG] 2017-12-24 12:46:44,230 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:46:44,230 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:46:44,230 Line:5853 23:100.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 24:1.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 25:1.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 27:1.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 28:1.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 29:0.0
 [DEBUG] 2017-12-24 12:46:44,231 Line:5853 30:1.0
 [DEBUG] 2017-12-24 12:46:44,232 Line:5853 31:1.0
 [DEBUG] 2017-12-24 12:46:44,232 Line:5853 32:0.0
 [DEBUG] 2017-12-24 12:46:44,232 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:46:44,232 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:46:44,232 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:46:44,232 Line:5853 36:0.0
 [DEBUG] 2017-12-24 12:46:44,233 Line:5853 37:
 [DEBUG] 2017-12-24 12:46:44,233 Line:5853 38:0.0
 [DEBUG] 2017-12-24 12:46:44,233 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:46:44,233 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:46:44,233 Line:5853 41:0.0
 [DEBUG] 2017-12-24 12:46:44,233 Line:5853 42:0.0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 43:0.0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 46:0.0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 47:0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 48:0.0
 [DEBUG] 2017-12-24 12:46:44,234 Line:5853 49:0.0
 [DEBUG] 2017-12-24 12:46:44,235 Line:5853 50:0
 [DEBUG] 2017-12-24 12:46:44,235 Line:5853 51:
 [DEBUG] 2017-12-24 12:46:44,235 Line:5853 52:0.0
 [DEBUG] 2017-12-24 12:46:44,235 Line:5853 53:0.0
 [DEBUG] 2017-12-24 12:46:44,235 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:46:44,235 Line:5853 55:0
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 56:0
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 57:
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 58:0.0
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 59:0.0
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 60:
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 61:0.0
 [DEBUG] 2017-12-24 12:46:44,236 Line:5853 62:00001
 [DEBUG] 2017-12-24 12:46:44,250 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 12:46:44,251 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,251 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 12:46:44,252 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,252 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 12:46:44,253 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,253 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 12:46:44,255 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,255 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:46:44,256 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,257 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:46:44,257 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,258 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:46:44,259 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,260 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 12:46:44,261 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,261 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,261 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 12:46:44,273 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-12-24 12:46:44,273 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:46:44,274 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,274 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:46:44,275 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,275 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,275 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:46:44,285 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-12-24 12:46:44,286 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:46:44,287 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,287 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:46:44,287 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,287 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,288 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:46:44,290 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:46:44,290 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:46:44,290 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,299 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 12:46:44,299 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,299 Line:988 1值：false
 [DEBUG] 2017-12-24 12:46:44,299 Line:988 2值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,307 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 12:46:44,307 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 12:46:44,308 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 12:46:44,308 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,308 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 12:46:44,309 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,309 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,319 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-12-24 12:46:44,319 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,320 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,320 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:46:44,320 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,320 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,329 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 12:46:44,329 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,330 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,330 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:46:44,330 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,331 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,336 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 12:46:44,336 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,337 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,337 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 12:46:44,338 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,338 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,346 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 12:46:44,346 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,347 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,347 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,348 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,348 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 12:46:44,348 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,348 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,355 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-12-24 12:46:44,355 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,356 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,356 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 12:46:44,356 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,357 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 12:46:44,357 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,357 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,362 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:46:44,362 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,363 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,363 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 12:46:44,363 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,364 Line:988 1值：1
 [DEBUG] 2017-12-24 12:46:44,364 Line:988 2值：0
 [DEBUG] 2017-12-24 12:46:44,364 Line:988 3值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,403 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 12:46:44,403 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 12:46:44,403 Line:1043 ---上述语句时间---40
 [DEBUG] 2017-12-24 12:46:44,403 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 12:46:44,404 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,405 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 12:46:44,405 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,405 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,414 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 12:46:44,415 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,416 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,417 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 12:46:44,417 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,417 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,422 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 12:46:44,422 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:46:44,423 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,423 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 12:46:44,424 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,424 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,426 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:46:44,426 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 12:46:44,427 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,427 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 12:46:44,428 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,428 Line:988 1值：
 [DEBUG] 2017-12-24 12:46:44,428 Line:988 2值：00001
 [DEBUG] 2017-12-24 12:46:44,437 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 12:46:44,437 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 12:46:44,437 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,438 Line:988 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,438 Line:988 2值：
 [DEBUG] 2017-12-24 12:46:44,438 Line:988 3值：
 [DEBUG] 2017-12-24 12:46:44,438 Line:988 4值：
 [DEBUG] 2017-12-24 12:46:44,441 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:46:44,442 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 12:46:44,443 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,444 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:46:44,445 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,446 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 12:46:44,446 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,447 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 12:46:44,447 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,447 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:46:44,448 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,449 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 12:46:44,449 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:46:44,449 Line:1157 2值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,456 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,456 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 12:46:44,456 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:46:44,457 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:46:44,457 Line:1157 2值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,457 Line:1157 3值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,465 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,465 Line:229 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 12:46:44,465 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:46:44,466 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,466 Line:1157 2值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,473 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,473 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 12:46:44,473 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 12:46:44,473 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,473 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,473 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:46:44,473 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 12:46:44,473 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,473 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,473 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:46:44,473 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 12:46:44,489 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,489 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 12:46:44,489 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,489 Line:1157 2值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,496 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,496 Line:408 ************上述语句执行时间：7
 [DEBUG] 2017-12-24 12:46:44,497 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 12:46:44,497 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,498 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 12:46:44,498 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,498 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 12:46:44,499 Line:1270 99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,499 Line:1270 add
 [DEBUG] 2017-12-24 12:46:44,564 Line:425 ************上述语句执行时间：66
 [DEBUG] 2017-12-24 12:46:44,564 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 12:46:44,565 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,565 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:46:44,566 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,575 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:46:44,576 Line:408 ************上述语句执行时间：11
 [DEBUG] 2017-12-24 12:46:44,576 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:46:44,576 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,584 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:46:44,584 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 12:46:44,585 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:46:44,585 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,586 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:46:44,586 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,587 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 12:46:44,587 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,600 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 12:46:44,601 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,601 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:46:44,602 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,602 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:46:44,603 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,603 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:46:44,604 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,604 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 12:46:44,605 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,605 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:46:44,606 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,606 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 12:46:44,606 Line:1157 1值：99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,611 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 12:46:44,611 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 12:46:44,612 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:46:44,612 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,612 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 12:46:44,613 Line:1270 99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,613 Line:1270 add
 [DEBUG] 2017-12-24 12:46:44,660 Line:425 ************上述语句执行时间：48
 [DEBUG] 2017-12-24 12:46:44,660 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 12:46:44,661 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,661 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 12:46:44,661 Line:1270 12
 [DEBUG] 2017-12-24 12:46:44,662 Line:1270 2017
 [DEBUG] 2017-12-24 12:46:44,662 Line:1270 12
 [DEBUG] 2017-12-24 12:46:44,662 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 12:46:44,662 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 12:46:44,662 Line:1270 99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:44,662 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 12:46:44,663 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:46:44,663 Line:1270 BI1712240009
 [DEBUG] 2017-12-24 12:46:44,663 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:46:44,663 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:46:44,663 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 12:46:44,663 Line:1270 1
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 1
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 2017-12-24 12:46:44
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 2017-12-24 12:46:44
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 00001
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 12:46:44,664 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:46:44,665 Line:1270 00003
 [DEBUG] 2017-12-24 12:46:44,665 Line:1270 1
 [DEBUG] 2017-12-24 12:46:44,665 Line:1270 00101
 [DEBUG] 2017-12-24 12:46:44,665 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 12:46:44,665 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 12:46:44,665 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 0
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 12:46:44,666 Line:1270 f_ref='99a5bb9e_1712241246441950009'
 [DEBUG] 2017-12-24 12:46:44,875 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'99a5bb9e_1712241246441950009','2017-12-24','BI1712240009','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 12:46:44','2017-12-24 12:46:44','00001' from tblBuyInStockDet where f_ref='99a5bb9e_1712241246441950009' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:46:44,876 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 12:46:44,876 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:46:44,876 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:46:44,877 Line:425 ************上述语句执行时间：216
 [DEBUG] 2017-12-24 12:46:44,877 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 12:46:44,878 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,878 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:46:44,879 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,880 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 12:46:44,880 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,881 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 12:46:44,882 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 12:46:44,882 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,883 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 12:46:44,883 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,883 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 12:46:44,884 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:44,884 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 12:46:44,884 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:44,885 Line:988 1值：1
 [DEBUG] 2017-12-24 12:46:44,885 Line:988 2值：0
 [DEBUG] 2017-12-24 12:46:44,885 Line:988 3值：1
 [DEBUG] 2017-12-24 12:46:44,885 Line:988 4值：0
 [DEBUG] 2017-12-24 12:46:44,885 Line:988 5值：0
 [DEBUG] 2017-12-24 12:46:44,885 Line:988 6值：1
 [DEBUG] 2017-12-24 12:46:44,886 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:46:44,887 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:46:44,887 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 12:46:44,887 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:46:44,887 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 12:46:44,888 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:44,897 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 12:46:44,906 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 12:46:44,921 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:44,931 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:44,940 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:44,956 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:44,972 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:44,991 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:45,013 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:46:45,021 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 12:46:45,138 Line:434 ************上述语句执行时间：250
 [DEBUG] 2017-12-24 12:46:45,138 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 12:46:45,139 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:45,140 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 12:46:45,140 Line:1270 199a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:45,140 Line:1270 00003
 [DEBUG] 2017-12-24 12:46:45,140 Line:1270 1
 [DEBUG] 2017-12-24 12:46:45,140 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:46:45,140 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=99a5bb9e_1712241246441950009@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 12:46:44@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 12:46:44@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240009@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 12:46:45,194 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('199a5bb9e_1712241246441950009',8,'00003','2017-12-24','12','2017','12','0','1','99a5bb9e_1712241246441950009','','1','0','1','1','2017-12-24 12:46:44','1','2017-12-24 12:46:44','00001','tblBuyInStock','BI1712240009','1','00101','0','')
 [DEBUG] 2017-12-24 12:46:45,194 Line:425 ************上述语句执行时间：55
 [DEBUG] 2017-12-24 12:46:45,194 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:46:45,195 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,195 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:46:45,196 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,196 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 12:46:45,197 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,197 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 12:46:45,197 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,198 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 12:46:45,198 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,198 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 12:46:45,199 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,199 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 12:46:45,200 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:45,200 Line:988 1值：1
 [DEBUG] 2017-12-24 12:46:45,200 Line:988 2值：0
 [DEBUG] 2017-12-24 12:46:45,200 Line:988 3值：1
 [DEBUG] 2017-12-24 12:46:45,200 Line:988 4值：0
 [DEBUG] 2017-12-24 12:46:45,200 Line:988 5值：0
 [DEBUG] 2017-12-24 12:46:45,201 Line:988 6值：0
 [DEBUG] 2017-12-24 12:46:45,202 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:46:45,202 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 12:46:45,202 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 12:46:45,202 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:46:45,202 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:46:45,203 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,203 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:46:45,204 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,204 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:46:45,205 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,205 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:46:45,205 Line:321 flag:false
 [DEBUG] 2017-12-24 12:46:45,206 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:46:45,206 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:45,206 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 12:46:45,206 Line:1270 99a5bb9e_1712241246441950009
 [DEBUG] 2017-12-24 12:46:45,207 Line:1270 add
 [DEBUG] 2017-12-24 12:46:45,216 Line:425 ************上述语句执行时间：10
 [DEBUG] 2017-12-24 12:46:45,216 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'OpenPackage' as opt,'OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 12:46:45,216 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:46:45,217 Line:1025 query condition columnName:opt----value:OpenPackage
 [DEBUG] 2017-12-24 12:46:45,217 Line:1025 query condition columnName:url----value:OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage
 [DEBUG] 2017-12-24 12:46:45,217 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 12:46:45,218 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 12:46:45,218 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 12:46:45,218 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 12:46:45,218 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 12:46:45,218 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:46:45,218 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:46:45,219 Line:321 flag:true
 [DEBUG] 2017-12-24 12:46:45,219 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(OpenPackage,OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [ERROR] 2017-12-24 12:51:44,796 Line:1768 DefineSQLBean.execClass Error
 java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.menyi.web.util.DefineSQLBean.execClass(DefineSQLBean.java:1757)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:437)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3888)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:198)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.StringIndexOutOfBoundsException: String index out of range: -1
	at java.lang.String.substring(String.java:1967)
	at tzhive.HiveServlet.optHive(HiveServlet.java:40)
	... 50 more
[ERROR] 2017-12-24 12:51:44,800 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=String index out of range: -1
 [DEBUG] 2017-12-24 12:53:44,001 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F29C9A1F133D9547433A3E039F5C82ECB
 [ERROR] 2017-12-24 12:53:44,066 Line:119 ------保存成功
 [DEBUG] 2017-12-24 12:53:55,396 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 12:53:55,398 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240009,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 12:53:55,400 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 12:53:55,427 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:53:55,427 Line:5853 1:0.0
 [DEBUG] 2017-12-24 12:53:55,427 Line:5853 2:
 [DEBUG] 2017-12-24 12:53:55,427 Line:5853 3:99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,427 Line:5853 4:-1
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 5:finish
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 6:0.0
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 7:0
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 8:0.0
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 9:BI1712240009
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 12:53:55,428 Line:5853 11:00003
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 12:00101
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 13:1
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 14:00001
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 15:3
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 16:0.0
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 17:0.0
 [DEBUG] 2017-12-24 12:53:55,429 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:53:55,430 Line:5853 19:0.0
 [DEBUG] 2017-12-24 12:53:55,430 Line:5853 20:
 [DEBUG] 2017-12-24 12:53:55,430 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:53:55,430 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:53:55,430 Line:5853 23:0.0
 [DEBUG] 2017-12-24 12:53:55,430 Line:5853 24:
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 25:0.0
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 27:0.0
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 28:
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 29:12
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 30:12
 [DEBUG] 2017-12-24 12:53:55,431 Line:5853 31:2017
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 32:
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 36:
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 37:
 [DEBUG] 2017-12-24 12:53:55,432 Line:5853 38:
 [DEBUG] 2017-12-24 12:53:55,433 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:53:55,433 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:53:55,433 Line:5853 41:
 [DEBUG] 2017-12-24 12:53:55,433 Line:5853 42:
 [DEBUG] 2017-12-24 12:53:55,433 Line:5853 43:100.0
 [DEBUG] 2017-12-24 12:53:55,433 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:53:55,434 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:53:55,434 Line:5853 46:
 [DEBUG] 2017-12-24 12:53:55,435 Line:5853 47:1.0
 [DEBUG] 2017-12-24 12:53:55,435 Line:5853 48:1.0
 [DEBUG] 2017-12-24 12:53:55,435 Line:5853 49:1.0
 [DEBUG] 2017-12-24 12:53:55,435 Line:5853 50:0.0
 [DEBUG] 2017-12-24 12:53:55,435 Line:5853 51:1.0
 [DEBUG] 2017-12-24 12:53:55,435 Line:5853 52:
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 53:
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 55:0.0
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 56:0.0
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 57:0
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 58:00001
 [DEBUG] 2017-12-24 12:53:55,436 Line:5853 59:0
 [DEBUG] 2017-12-24 12:53:55,437 Line:5853 60:2017-12-24 12:53:55
 [DEBUG] 2017-12-24 12:53:55,437 Line:5853 61:1
 [DEBUG] 2017-12-24 12:53:55,437 Line:5853 62:2017-12-24 12:53:55
 [DEBUG] 2017-12-24 12:53:55,437 Line:5853 63:1
 [DEBUG] 2017-12-24 12:53:55,437 Line:5853 64:2017-12-24 12:53:55
 [DEBUG] 2017-12-24 12:53:55,442 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:53:55,442 Line:5853 1:99a5bb9e_1712241253554420015
 [DEBUG] 2017-12-24 12:53:55,442 Line:5853 2:99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,442 Line:5853 3:
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 4:
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 5:
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 6:
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 8:
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 9:
 [DEBUG] 2017-12-24 12:53:55,443 Line:5853 10:
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 11:
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 12:
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 13:
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 14:
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 15:1.0
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 16:1.0
 [DEBUG] 2017-12-24 12:53:55,444 Line:5853 17:1.0
 [DEBUG] 2017-12-24 12:53:55,445 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:53:55,445 Line:5853 19:0
 [DEBUG] 2017-12-24 12:53:55,445 Line:5853 20:0.0
 [DEBUG] 2017-12-24 12:53:55,445 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:53:55,445 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:53:55,445 Line:5853 23:100.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 24:1.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 25:1.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 27:1.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 28:1.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 29:0.0
 [DEBUG] 2017-12-24 12:53:55,446 Line:5853 30:1.0
 [DEBUG] 2017-12-24 12:53:55,447 Line:5853 31:1.0
 [DEBUG] 2017-12-24 12:53:55,447 Line:5853 32:0.0
 [DEBUG] 2017-12-24 12:53:55,447 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:53:55,447 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:53:55,447 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:53:55,447 Line:5853 36:0.0
 [DEBUG] 2017-12-24 12:53:55,448 Line:5853 37:
 [DEBUG] 2017-12-24 12:53:55,448 Line:5853 38:0.0
 [DEBUG] 2017-12-24 12:53:55,448 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:53:55,448 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:53:55,448 Line:5853 41:0.0
 [DEBUG] 2017-12-24 12:53:55,449 Line:5853 42:0.0
 [DEBUG] 2017-12-24 12:53:55,449 Line:5853 43:0.0
 [DEBUG] 2017-12-24 12:53:55,449 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:53:55,449 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:53:55,449 Line:5853 46:0.0
 [DEBUG] 2017-12-24 12:53:55,450 Line:5853 47:0
 [DEBUG] 2017-12-24 12:53:55,450 Line:5853 48:0.0
 [DEBUG] 2017-12-24 12:53:55,450 Line:5853 49:0.0
 [DEBUG] 2017-12-24 12:53:55,450 Line:5853 50:0
 [DEBUG] 2017-12-24 12:53:55,451 Line:5853 51:
 [DEBUG] 2017-12-24 12:53:55,451 Line:5853 52:0.0
 [DEBUG] 2017-12-24 12:53:55,451 Line:5853 53:0.0
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 55:0
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 56:0
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 57:
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 58:0.0
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 59:0.0
 [DEBUG] 2017-12-24 12:53:55,452 Line:5853 60:
 [DEBUG] 2017-12-24 12:53:55,453 Line:5853 61:0.0
 [DEBUG] 2017-12-24 12:53:55,453 Line:5853 62:00001
 [DEBUG] 2017-12-24 12:53:55,465 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 12:53:55,469 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,469 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 12:53:55,470 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,470 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 12:53:55,471 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,471 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 12:53:55,472 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,473 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:53:55,474 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,474 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:53:55,475 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,475 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:53:55,476 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,477 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 12:53:55,477 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,477 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,477 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 12:53:55,492 Line:1043 ---上述语句时间---15
 [DEBUG] 2017-12-24 12:53:55,492 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:53:55,493 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,493 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:53:55,493 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,493 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,493 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:53:55,507 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-12-24 12:53:55,508 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:53:55,508 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,508 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:53:55,509 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,509 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,509 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:53:55,516 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 12:53:55,518 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:53:55,518 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,519 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 12:53:55,519 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,519 Line:988 1值：false
 [DEBUG] 2017-12-24 12:53:55,519 Line:988 2值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,528 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 12:53:55,528 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 12:53:55,529 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 12:53:55,529 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,530 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 12:53:55,530 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,530 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,533 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:53:55,533 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,533 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,533 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:53:55,533 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,533 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,549 Line:1043 ---上述语句时间---16
 [DEBUG] 2017-12-24 12:53:55,549 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,550 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,551 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:53:55,551 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,551 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,555 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:53:55,556 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,557 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,557 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 12:53:55,558 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,558 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,562 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:53:55,562 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,563 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,563 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,564 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,564 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 12:53:55,564 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,564 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,568 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:53:55,568 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,569 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,569 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 12:53:55,570 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,570 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 12:53:55,570 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,571 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,573 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:53:55,573 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,574 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,574 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 12:53:55,574 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,574 Line:988 1值：1
 [DEBUG] 2017-12-24 12:53:55,574 Line:988 2值：0
 [DEBUG] 2017-12-24 12:53:55,574 Line:988 3值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,606 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 12:53:55,606 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 12:53:55,607 Line:1043 ---上述语句时间---33
 [DEBUG] 2017-12-24 12:53:55,607 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 12:53:55,608 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,608 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 12:53:55,608 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,608 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,620 Line:1043 ---上述语句时间---12
 [DEBUG] 2017-12-24 12:53:55,620 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,621 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,622 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 12:53:55,622 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,622 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,624 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:53:55,624 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:53:55,625 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,625 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 12:53:55,625 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,625 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,627 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:53:55,628 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 12:53:55,628 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,629 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 12:53:55,629 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,629 Line:988 1值：
 [DEBUG] 2017-12-24 12:53:55,629 Line:988 2值：00001
 [DEBUG] 2017-12-24 12:53:55,639 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 12:53:55,639 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 12:53:55,639 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:55,639 Line:988 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,640 Line:988 2值：
 [DEBUG] 2017-12-24 12:53:55,640 Line:988 3值：
 [DEBUG] 2017-12-24 12:53:55,640 Line:988 4值：
 [DEBUG] 2017-12-24 12:53:55,643 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:53:55,643 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 12:53:55,644 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,644 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:53:55,645 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,645 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 12:53:55,646 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,646 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 12:53:55,647 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,647 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:53:55,647 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,648 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 12:53:55,648 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:53:55,649 Line:1157 2值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,650 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,650 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 12:53:55,650 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:53:55,650 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:53:55,650 Line:1157 2值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,650 Line:1157 3值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,650 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,650 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:53:55,650 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:53:55,650 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,650 Line:1157 2值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,663 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,663 Line:229 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 12:53:55,663 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 12:53:55,664 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,669 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,669 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 12:53:55,669 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 12:53:55,670 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,673 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,673 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 12:53:55,673 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 12:53:55,674 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,674 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 12:53:55,675 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,675 Line:1157 2值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,678 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,678 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 12:53:55,679 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 12:53:55,679 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,680 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 12:53:55,680 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,681 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 12:53:55,681 Line:1270 99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,681 Line:1270 add
 [DEBUG] 2017-12-24 12:53:55,746 Line:425 ************上述语句执行时间：66
 [DEBUG] 2017-12-24 12:53:55,746 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 12:53:55,747 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,748 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:53:55,748 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,757 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:53:55,758 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 12:53:55,758 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:53:55,758 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,766 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:53:55,766 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 12:53:55,766 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:53:55,767 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,767 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:53:55,768 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,768 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 12:53:55,769 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,785 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 12:53:55,787 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,787 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:53:55,789 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,789 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:53:55,790 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,790 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:53:55,791 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,791 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 12:53:55,792 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:55,793 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:53:55,794 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,794 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 12:53:55,795 Line:1157 1值：99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,797 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 12:53:55,797 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 12:53:55,798 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:53:55,799 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,801 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 12:53:55,801 Line:1270 99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,801 Line:1270 add
 [DEBUG] 2017-12-24 12:53:55,855 Line:425 ************上述语句执行时间：55
 [DEBUG] 2017-12-24 12:53:55,856 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 12:53:55,856 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:55,857 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 12:53:55,857 Line:1270 12
 [DEBUG] 2017-12-24 12:53:55,857 Line:1270 2017
 [DEBUG] 2017-12-24 12:53:55,857 Line:1270 12
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 BI1712240009
 [DEBUG] 2017-12-24 12:53:55,858 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 1
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 1
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 2017-12-24 12:53:55
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 2017-12-24 12:53:55
 [DEBUG] 2017-12-24 12:53:55,859 Line:1270 00001
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 00003
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 1
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 00101
 [DEBUG] 2017-12-24 12:53:55,860 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 0
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 12:53:55,861 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 12:53:55,862 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 12:53:55,862 Line:1270 f_ref='99a5bb9e_1712241253554020014'
 [DEBUG] 2017-12-24 12:53:56,052 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'99a5bb9e_1712241253554020014','2017-12-24','BI1712240009','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 12:53:55','2017-12-24 12:53:55','00001' from tblBuyInStockDet where f_ref='99a5bb9e_1712241253554020014' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:53:56,052 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 12:53:56,052 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:53:56,053 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:53:56,053 Line:425 ************上述语句执行时间：196
 [DEBUG] 2017-12-24 12:53:56,053 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 12:53:56,054 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,054 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:53:56,054 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:56,055 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 12:53:56,055 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:56,057 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:53:56,057 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 12:53:56,058 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,058 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 12:53:56,058 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,059 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 12:53:56,059 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,059 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 12:53:56,060 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:56,060 Line:988 1值：1
 [DEBUG] 2017-12-24 12:53:56,060 Line:988 2值：0
 [DEBUG] 2017-12-24 12:53:56,060 Line:988 3值：1
 [DEBUG] 2017-12-24 12:53:56,060 Line:988 4值：0
 [DEBUG] 2017-12-24 12:53:56,060 Line:988 5值：0
 [DEBUG] 2017-12-24 12:53:56,061 Line:988 6值：1
 [DEBUG] 2017-12-24 12:53:56,062 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:53:56,062 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:53:56,062 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 12:53:56,062 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:53:56,062 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 12:53:56,063 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:56,071 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 12:53:56,077 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 12:53:56,088 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,094 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,101 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,107 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,114 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,121 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,136 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:53:56,147 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 12:53:56,249 Line:434 ************上述语句执行时间：186
 [DEBUG] 2017-12-24 12:53:56,249 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 12:53:56,249 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:56,249 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 12:53:56,249 Line:1270 199a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:56,249 Line:1270 00003
 [DEBUG] 2017-12-24 12:53:56,249 Line:1270 1
 [DEBUG] 2017-12-24 12:53:56,249 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:53:56,249 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=99a5bb9e_1712241253554020014@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 12:53:55@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 12:53:55@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240009@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 12:53:56,312 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('199a5bb9e_1712241253554020014',8,'00003','2017-12-24','12','2017','12','0','1','99a5bb9e_1712241253554020014','','1','0','1','1','2017-12-24 12:53:55','1','2017-12-24 12:53:55','00001','tblBuyInStock','BI1712240009','1','00101','0','')
 [DEBUG] 2017-12-24 12:53:56,313 Line:425 ************上述语句执行时间：64
 [DEBUG] 2017-12-24 12:53:56,313 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:53:56,314 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,314 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:53:56,315 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,315 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 12:53:56,315 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,316 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 12:53:56,316 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,317 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 12:53:56,317 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,317 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 12:53:56,318 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,318 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 12:53:56,318 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:56,319 Line:988 1值：1
 [DEBUG] 2017-12-24 12:53:56,319 Line:988 2值：0
 [DEBUG] 2017-12-24 12:53:56,319 Line:988 3值：1
 [DEBUG] 2017-12-24 12:53:56,319 Line:988 4值：0
 [DEBUG] 2017-12-24 12:53:56,319 Line:988 5值：0
 [DEBUG] 2017-12-24 12:53:56,319 Line:988 6值：0
 [DEBUG] 2017-12-24 12:53:56,320 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:53:56,321 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 12:53:56,321 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 12:53:56,321 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:53:56,321 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:53:56,322 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,322 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:53:56,323 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,323 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:53:56,325 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,325 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:53:56,326 Line:321 flag:false
 [DEBUG] 2017-12-24 12:53:56,326 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:53:56,326 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:56,327 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 12:53:56,327 Line:1270 99a5bb9e_1712241253554020014
 [DEBUG] 2017-12-24 12:53:56,327 Line:1270 add
 [DEBUG] 2017-12-24 12:53:56,337 Line:425 ************上述语句执行时间：10
 [DEBUG] 2017-12-24 12:53:56,337 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'OpenPackage' as opt,'OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 12:53:56,337 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:53:56,338 Line:1025 query condition columnName:opt----value:OpenPackage
 [DEBUG] 2017-12-24 12:53:56,338 Line:1025 query condition columnName:url----value:OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage
 [DEBUG] 2017-12-24 12:53:56,338 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 12:53:56,338 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 12:53:56,339 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 12:53:56,339 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 12:53:56,339 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 12:53:56,339 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:53:56,339 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:53:56,340 Line:321 flag:true
 [DEBUG] 2017-12-24 12:53:56,340 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 12:55:06,725 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 12:55:06,727 Line:443 ************上述语句执行时间：70387
 [DEBUG] 2017-12-24 12:55:08,273 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=99a5bb9e_1712241253554020014&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 12:55:08,273 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[99a5bb9e_1712241253554020014,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 12:55:08,282 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='99a5bb9e_1712241253554020014' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 12:55:08,446 Line:1525  select * from  tblBuyInStockDet where f_ref = '99a5bb9e_1712241253554020014' order by detOrderNo
 [DEBUG] 2017-12-24 12:55:08,477 Line:1525  select * from  tblBuyPayAccount where f_ref = '99a5bb9e_1712241253554020014' order by detOrderNo
 [DEBUG] 2017-12-24 12:56:51,735 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655FBFD40D1E048320455038F594B7A91F37
 [ERROR] 2017-12-24 12:56:51,787 Line:119 ------保存成功
 [DEBUG] 2017-12-24 12:56:59,076 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655FBFD40D1E048320451E744B5FB9F213DE
 [ERROR] 2017-12-24 12:56:59,140 Line:119 ------保存成功
 [DEBUG] 2017-12-24 12:57:03,765 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 12:57:03,766 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 12:57:05,941 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 12:57:05,941 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 12:57:05,970 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:57:05,970 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:57:05,970 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:57:05,971 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:57:05,972 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 12:57:05,976 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:57:08,869 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 12:57:08,869 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 12:57:08,893 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:57:08,893 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:57:08,894 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:57:08,894 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:57:08,895 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 12:57:08,896 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:57:11,523 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 12:57:11,523 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 12:57:11,563 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:57:11,563 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:57:11,563 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:57:11,564 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:57:11,564 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 12:57:11,571 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:57:18,479 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 12:57:18,481 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240010,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0002,];tblBuyInStockDet_tblGoods_GoodsFullName=[流沙包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300002,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 12:57:18,482 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 12:57:18,493 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:57:18,493 Line:5853 1:0.0
 [DEBUG] 2017-12-24 12:57:18,494 Line:5853 2:
 [DEBUG] 2017-12-24 12:57:18,494 Line:5853 3:99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,494 Line:5853 4:-1
 [DEBUG] 2017-12-24 12:57:18,494 Line:5853 5:finish
 [DEBUG] 2017-12-24 12:57:18,494 Line:5853 6:0.0
 [DEBUG] 2017-12-24 12:57:18,495 Line:5853 7:0
 [DEBUG] 2017-12-24 12:57:18,495 Line:5853 8:0.0
 [DEBUG] 2017-12-24 12:57:18,495 Line:5853 9:BI1712240010
 [DEBUG] 2017-12-24 12:57:18,495 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 12:57:18,495 Line:5853 11:00003
 [DEBUG] 2017-12-24 12:57:18,495 Line:5853 12:00101
 [DEBUG] 2017-12-24 12:57:18,496 Line:5853 13:1
 [DEBUG] 2017-12-24 12:57:18,496 Line:5853 14:00001
 [DEBUG] 2017-12-24 12:57:18,497 Line:5853 15:3
 [DEBUG] 2017-12-24 12:57:18,498 Line:5853 16:0.0
 [DEBUG] 2017-12-24 12:57:18,498 Line:5853 17:0.0
 [DEBUG] 2017-12-24 12:57:18,498 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:57:18,498 Line:5853 19:0.0
 [DEBUG] 2017-12-24 12:57:18,498 Line:5853 20:
 [DEBUG] 2017-12-24 12:57:18,499 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:57:18,499 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:57:18,499 Line:5853 23:0.0
 [DEBUG] 2017-12-24 12:57:18,499 Line:5853 24:
 [DEBUG] 2017-12-24 12:57:18,500 Line:5853 25:0.0
 [DEBUG] 2017-12-24 12:57:18,500 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:57:18,500 Line:5853 27:0.0
 [DEBUG] 2017-12-24 12:57:18,500 Line:5853 28:
 [DEBUG] 2017-12-24 12:57:18,500 Line:5853 29:12
 [DEBUG] 2017-12-24 12:57:18,501 Line:5853 30:12
 [DEBUG] 2017-12-24 12:57:18,502 Line:5853 31:2017
 [DEBUG] 2017-12-24 12:57:18,502 Line:5853 32:
 [DEBUG] 2017-12-24 12:57:18,502 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:57:18,503 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:57:18,503 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:57:18,504 Line:5853 36:
 [DEBUG] 2017-12-24 12:57:18,504 Line:5853 37:
 [DEBUG] 2017-12-24 12:57:18,504 Line:5853 38:
 [DEBUG] 2017-12-24 12:57:18,504 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:57:18,504 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:57:18,504 Line:5853 41:
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 42:
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 43:100.0
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 46:
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 47:1.0
 [DEBUG] 2017-12-24 12:57:18,505 Line:5853 48:1.0
 [DEBUG] 2017-12-24 12:57:18,506 Line:5853 49:1.0
 [DEBUG] 2017-12-24 12:57:18,506 Line:5853 50:0.0
 [DEBUG] 2017-12-24 12:57:18,506 Line:5853 51:1.0
 [DEBUG] 2017-12-24 12:57:18,506 Line:5853 52:
 [DEBUG] 2017-12-24 12:57:18,506 Line:5853 53:
 [DEBUG] 2017-12-24 12:57:18,506 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 55:0.0
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 56:0.0
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 57:0
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 58:00001
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 59:0
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 60:2017-12-24 12:57:18
 [DEBUG] 2017-12-24 12:57:18,507 Line:5853 61:1
 [DEBUG] 2017-12-24 12:57:18,508 Line:5853 62:2017-12-24 12:57:18
 [DEBUG] 2017-12-24 12:57:18,508 Line:5853 63:1
 [DEBUG] 2017-12-24 12:57:18,508 Line:5853 64:2017-12-24 12:57:18
 [DEBUG] 2017-12-24 12:57:18,512 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:57:18,512 Line:5853 1:99a5bb9e_1712241257185120022
 [DEBUG] 2017-12-24 12:57:18,512 Line:5853 2:99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,512 Line:5853 3:
 [DEBUG] 2017-12-24 12:57:18,513 Line:5853 4:
 [DEBUG] 2017-12-24 12:57:18,513 Line:5853 5:
 [DEBUG] 2017-12-24 12:57:18,513 Line:5853 6:
 [DEBUG] 2017-12-24 12:57:18,513 Line:5853 7:0000300002
 [DEBUG] 2017-12-24 12:57:18,513 Line:5853 8:
 [DEBUG] 2017-12-24 12:57:18,513 Line:5853 9:
 [DEBUG] 2017-12-24 12:57:18,514 Line:5853 10:
 [DEBUG] 2017-12-24 12:57:18,514 Line:5853 11:
 [DEBUG] 2017-12-24 12:57:18,514 Line:5853 12:
 [DEBUG] 2017-12-24 12:57:18,514 Line:5853 13:
 [DEBUG] 2017-12-24 12:57:18,514 Line:5853 14:
 [DEBUG] 2017-12-24 12:57:18,514 Line:5853 15:1.0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 16:1.0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 17:1.0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 19:0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 20:0.0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:57:18,515 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:57:18,516 Line:5853 23:100.0
 [DEBUG] 2017-12-24 12:57:18,516 Line:5853 24:1.0
 [DEBUG] 2017-12-24 12:57:18,516 Line:5853 25:1.0
 [DEBUG] 2017-12-24 12:57:18,516 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:57:18,516 Line:5853 27:1.0
 [DEBUG] 2017-12-24 12:57:18,517 Line:5853 28:1.0
 [DEBUG] 2017-12-24 12:57:18,517 Line:5853 29:0.0
 [DEBUG] 2017-12-24 12:57:18,517 Line:5853 30:1.0
 [DEBUG] 2017-12-24 12:57:18,517 Line:5853 31:1.0
 [DEBUG] 2017-12-24 12:57:18,517 Line:5853 32:0.0
 [DEBUG] 2017-12-24 12:57:18,518 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:57:18,518 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:57:18,518 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:57:18,518 Line:5853 36:0.0
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 37:
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 38:0.0
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 41:0.0
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 42:0.0
 [DEBUG] 2017-12-24 12:57:18,519 Line:5853 43:0.0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 46:0.0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 47:0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 48:0.0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 49:0.0
 [DEBUG] 2017-12-24 12:57:18,520 Line:5853 50:0
 [DEBUG] 2017-12-24 12:57:18,521 Line:5853 51:
 [DEBUG] 2017-12-24 12:57:18,521 Line:5853 52:0.0
 [DEBUG] 2017-12-24 12:57:18,521 Line:5853 53:0.0
 [DEBUG] 2017-12-24 12:57:18,521 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:57:18,521 Line:5853 55:0
 [DEBUG] 2017-12-24 12:57:18,521 Line:5853 56:0
 [DEBUG] 2017-12-24 12:57:18,522 Line:5853 57:
 [DEBUG] 2017-12-24 12:57:18,522 Line:5853 58:0.0
 [DEBUG] 2017-12-24 12:57:18,522 Line:5853 59:0.0
 [DEBUG] 2017-12-24 12:57:18,522 Line:5853 60:
 [DEBUG] 2017-12-24 12:57:18,522 Line:5853 61:0.0
 [DEBUG] 2017-12-24 12:57:18,522 Line:5853 62:00001
 [DEBUG] 2017-12-24 12:57:18,530 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 12:57:18,531 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,532 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 12:57:18,533 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,533 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 12:57:18,534 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,534 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 12:57:18,536 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,537 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:57:18,539 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,539 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:57:18,540 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,540 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:57:18,541 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,542 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 12:57:18,542 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,542 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,542 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 12:57:18,550 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 12:57:18,551 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:57:18,552 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,552 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:57:18,552 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,553 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,553 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:57:18,557 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:57:18,557 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:57:18,558 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,558 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:57:18,558 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,558 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,559 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:57:18,565 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-12-24 12:57:18,565 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:57:18,566 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,566 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 12:57:18,566 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,567 Line:988 1值：false
 [DEBUG] 2017-12-24 12:57:18,567 Line:988 2值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,567 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 12:57:18,567 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 12:57:18,567 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 12:57:18,567 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,567 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 12:57:18,567 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,567 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,567 Line:1043 ---上述语句时间---0
 [DEBUG] 2017-12-24 12:57:18,567 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,567 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,567 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:57:18,567 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,567 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,585 Line:1043 ---上述语句时间---18
 [DEBUG] 2017-12-24 12:57:18,585 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,586 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,586 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:57:18,586 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,586 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,589 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:57:18,590 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,590 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,591 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 12:57:18,591 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,591 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,595 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:57:18,596 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,597 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,598 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,598 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,598 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 12:57:18,599 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,599 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,604 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 12:57:18,604 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,605 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,605 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 12:57:18,606 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,606 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 12:57:18,606 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,606 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,608 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:57:18,609 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,609 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,610 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 12:57:18,610 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,610 Line:988 1值：1
 [DEBUG] 2017-12-24 12:57:18,610 Line:988 2值：0
 [DEBUG] 2017-12-24 12:57:18,610 Line:988 3值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,639 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 12:57:18,640 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 12:57:18,640 Line:1043 ---上述语句时间---31
 [DEBUG] 2017-12-24 12:57:18,640 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 12:57:18,641 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,641 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 12:57:18,642 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,642 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,654 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-12-24 12:57:18,655 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,656 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,657 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 12:57:18,658 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,658 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,660 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:57:18,660 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:57:18,661 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,661 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 12:57:18,661 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,661 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,664 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:57:18,664 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 12:57:18,664 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,665 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 12:57:18,665 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,665 Line:988 1值：
 [DEBUG] 2017-12-24 12:57:18,665 Line:988 2值：00001
 [DEBUG] 2017-12-24 12:57:18,674 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 12:57:18,674 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 12:57:18,674 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:18,675 Line:988 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,675 Line:988 2值：
 [DEBUG] 2017-12-24 12:57:18,675 Line:988 3值：
 [DEBUG] 2017-12-24 12:57:18,675 Line:988 4值：
 [DEBUG] 2017-12-24 12:57:18,679 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:57:18,679 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 12:57:18,680 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,680 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:57:18,680 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,681 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 12:57:18,681 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,682 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 12:57:18,682 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,683 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:57:18,684 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,684 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 12:57:18,685 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:57:18,685 Line:1157 2值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,689 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,689 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 12:57:18,689 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:57:18,690 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:57:18,690 Line:1157 2值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,690 Line:1157 3值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,695 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,695 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 12:57:18,696 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:57:18,696 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,696 Line:1157 2值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,700 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,700 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 12:57:18,700 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 12:57:18,700 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,700 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,700 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:57:18,700 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 12:57:18,700 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,700 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,700 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:57:18,700 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 12:57:18,700 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,700 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 12:57:18,700 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,700 Line:1157 2值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,700 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,700 Line:408 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:57:18,700 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 12:57:18,715 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,716 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 12:57:18,716 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,717 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 12:57:18,717 Line:1270 99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,717 Line:1270 add
 [DEBUG] 2017-12-24 12:57:18,784 Line:425 ************上述语句执行时间：67
 [DEBUG] 2017-12-24 12:57:18,784 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 12:57:18,785 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,785 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:57:18,786 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,798 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:57:18,798 Line:408 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 12:57:18,798 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:57:18,798 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,800 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:57:18,800 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 12:57:18,800 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:57:18,800 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,800 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:57:18,800 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,800 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 12:57:18,800 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,800 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,815 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,815 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,815 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,815 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:18,815 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,815 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 12:57:18,815 Line:1157 1值：99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,815 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 12:57:18,815 Line:408 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 12:57:18,815 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:57:18,815 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,815 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 12:57:18,815 Line:1270 99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,815 Line:1270 add
 [DEBUG] 2017-12-24 12:57:18,877 Line:425 ************上述语句执行时间：62
 [DEBUG] 2017-12-24 12:57:18,877 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 12:57:18,878 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:18,878 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 12:57:18,879 Line:1270 12
 [DEBUG] 2017-12-24 12:57:18,879 Line:1270 2017
 [DEBUG] 2017-12-24 12:57:18,879 Line:1270 12
 [DEBUG] 2017-12-24 12:57:18,879 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 12:57:18,879 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 12:57:18,879 Line:1270 99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 BI1712240010
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 12:57:18,880 Line:1270 1
 [DEBUG] 2017-12-24 12:57:18,881 Line:1270 1
 [DEBUG] 2017-12-24 12:57:18,881 Line:1270 2017-12-24 12:57:18
 [DEBUG] 2017-12-24 12:57:18,881 Line:1270 2017-12-24 12:57:18
 [DEBUG] 2017-12-24 12:57:18,881 Line:1270 00001
 [DEBUG] 2017-12-24 12:57:18,881 Line:1270 
 [DEBUG] 2017-12-24 12:57:18,881 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 12:57:18,882 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:57:18,882 Line:1270 00003
 [DEBUG] 2017-12-24 12:57:18,882 Line:1270 1
 [DEBUG] 2017-12-24 12:57:18,882 Line:1270 00101
 [DEBUG] 2017-12-24 12:57:18,882 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 12:57:18,882 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 0
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 12:57:18,883 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 12:57:18,884 Line:1270 f_ref='99a5bb9e_1712241257184850021'
 [DEBUG] 2017-12-24 12:57:19,050 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'99a5bb9e_1712241257184850021','2017-12-24','BI1712240010','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 12:57:18','2017-12-24 12:57:18','00001' from tblBuyInStockDet where f_ref='99a5bb9e_1712241257184850021' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:57:19,050 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 12:57:19,050 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:57:19,050 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:57:19,050 Line:425 ************上述语句执行时间：172
 [DEBUG] 2017-12-24 12:57:19,050 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 12:57:19,050 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,050 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:57:19,050 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:19,050 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 12:57:19,050 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:19,050 Line:1043 ---上述语句时间---0
 [DEBUG] 2017-12-24 12:57:19,050 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 12:57:19,066 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,066 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 12:57:19,066 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,066 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 12:57:19,066 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,066 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 12:57:19,066 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:19,066 Line:988 1值：1
 [DEBUG] 2017-12-24 12:57:19,066 Line:988 2值：0
 [DEBUG] 2017-12-24 12:57:19,066 Line:988 3值：1
 [DEBUG] 2017-12-24 12:57:19,066 Line:988 4值：0
 [DEBUG] 2017-12-24 12:57:19,066 Line:988 5值：0
 [DEBUG] 2017-12-24 12:57:19,066 Line:988 6值：1
 [DEBUG] 2017-12-24 12:57:19,066 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:57:19,066 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:57:19,066 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 12:57:19,066 Line:1043 ---上述语句时间---0
 [DEBUG] 2017-12-24 12:57:19,066 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 12:57:19,066 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:19,066 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 12:57:19,085 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 12:57:19,097 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,105 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,111 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,119 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,126 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,132 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,147 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:57:19,157 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 12:57:19,267 Line:434 ************上述语句执行时间：201
 [DEBUG] 2017-12-24 12:57:19,268 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 12:57:19,269 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:19,269 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 12:57:19,269 Line:1270 199a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:19,269 Line:1270 00003
 [DEBUG] 2017-12-24 12:57:19,270 Line:1270 1
 [DEBUG] 2017-12-24 12:57:19,270 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:57:19,270 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=99a5bb9e_1712241257184850021@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 12:57:18@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 12:57:18@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240010@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 12:57:19,319 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('199a5bb9e_1712241257184850021',9,'00003','2017-12-24','12','2017','12','0','1','99a5bb9e_1712241257184850021','','1','0','1','1','2017-12-24 12:57:18','1','2017-12-24 12:57:18','00001','tblBuyInStock','BI1712240010','1','00101','0','')
 [DEBUG] 2017-12-24 12:57:19,320 Line:425 ************上述语句执行时间：51
 [DEBUG] 2017-12-24 12:57:19,320 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:57:19,322 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,322 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:57:19,323 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,323 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 12:57:19,324 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,324 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 12:57:19,325 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,325 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 12:57:19,326 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,326 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 12:57:19,327 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,327 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 12:57:19,328 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:19,328 Line:988 1值：1
 [DEBUG] 2017-12-24 12:57:19,328 Line:988 2值：0
 [DEBUG] 2017-12-24 12:57:19,328 Line:988 3值：1
 [DEBUG] 2017-12-24 12:57:19,328 Line:988 4值：0
 [DEBUG] 2017-12-24 12:57:19,328 Line:988 5值：0
 [DEBUG] 2017-12-24 12:57:19,329 Line:988 6值：0
 [DEBUG] 2017-12-24 12:57:19,330 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 12:57:19,330 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 12:57:19,330 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 12:57:19,330 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:57:19,331 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:57:19,331 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,332 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:57:19,332 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,333 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:57:19,335 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,335 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:57:19,335 Line:321 flag:false
 [DEBUG] 2017-12-24 12:57:19,336 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:57:19,336 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:19,337 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 12:57:19,337 Line:1270 99a5bb9e_1712241257184850021
 [DEBUG] 2017-12-24 12:57:19,337 Line:1270 add
 [DEBUG] 2017-12-24 12:57:19,345 Line:425 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 12:57:19,346 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'OpenPackage' as opt,'http://fc.tz1288.com/fc.asmx/OpenPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 12:57:19,346 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:57:19,347 Line:1025 query condition columnName:opt----value:OpenPackage
 [DEBUG] 2017-12-24 12:57:19,347 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/OpenPackage
 [DEBUG] 2017-12-24 12:57:19,347 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 12:57:19,347 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 12:57:19,348 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 12:57:19,348 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 12:57:19,348 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 12:57:19,348 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:57:19,348 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:57:19,349 Line:321 flag:true
 [DEBUG] 2017-12-24 12:57:19,349 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 12:57:33,292 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 12:57:33,293 Line:443 ************上述语句执行时间：13944
 [DEBUG] 2017-12-24 12:57:34,827 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=99a5bb9e_1712241257184850021&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 12:57:34,828 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[99a5bb9e_1712241257184850021,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 12:57:34,829 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='99a5bb9e_1712241257184850021' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 12:57:34,893 Line:1525  select * from  tblBuyInStockDet where f_ref = '99a5bb9e_1712241257184850021' order by detOrderNo
 [DEBUG] 2017-12-24 12:57:34,909 Line:1525  select * from  tblBuyPayAccount where f_ref = '99a5bb9e_1712241257184850021' order by detOrderNo
 [DEBUG] 2017-12-24 12:57:52,762 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 12:58:19,678 Line:73 --------Destroy Config Refresh Thread---------------
 [DEBUG] 2017-12-24 12:58:19,691 Line:105 --------Destroy Hibernate---------------
 [INFO ] 2017-12-24 12:58:19,692 Line:127 测试执行路径
 java.lang.Exception
	at com.menyi.web.util.BaseFilter.destroy(BaseFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:313)
	at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:4890)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5711)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1591)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1580)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[INFO ] 2017-12-24 12:58:26,927 Line:206 系统开始启动，最大内存：1792;目前总内存：302;目前空闲内存：208
 [INFO ] 2017-12-24 12:58:27,005 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 12:58:31,305 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 12:58:31,477 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 12:58:31,477 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 12:58:31,477 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 12:58:31,492 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 12:58:31,492 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 12:58:31,509 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 12:58:32,583 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 12:58:32,610 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 12:58:32,632 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 12:58:32,648 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 12:58:33,701 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 12:58:33,701 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 12:58:34,232 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 12:58:34,330 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 12:58:35,269 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 12:58:35,327 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 12:58:35,335 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 12:58:35,365 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 12:58:35,383 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 12:58:35,398 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 12:58:35,461 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 12:58:38,936 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 12:58:39,309 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 12:58:39,325 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 12:58:39,383 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-24 12:58:39,935 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 12:58:39,935 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 12:58:41,499 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 12:58:41,501 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 12:58:54,498 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 12:58:54,498 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 12:58:54,506 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 12:58:54,983 Line:5227 GlobalsTool.js 生成js 时间79:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:58:55,026 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 12:58:55,026 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 12:58:55,251 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514091535236
 [DEBUG] 2017-12-24 12:58:55,251 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514091535236,];
 [DEBUG] 2017-12-24 12:58:55,345 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 12:58:55,345 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 12:58:56,610 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514091536609
 [DEBUG] 2017-12-24 12:58:56,611 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514091536609,];
 [DEBUG] 2017-12-24 12:58:56,680 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514091536680
 [DEBUG] 2017-12-24 12:58:56,680 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514091536680,];
 [DEBUG] 2017-12-24 12:58:56,755 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 12:58:56,755 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 12:58:56,821 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 12:58:56,836 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 12:58:56,971 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 12:58:56,972 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 12:58:56,983 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:58:57,289 Line:5227 GlobalsTool.js 生成js 时间31:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:58:57,471 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 12:58:57,471 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 12:58:57,471 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:58:57,472 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 12:58:57,473 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:58:57,491 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 12:58:57,491 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:58:57,492 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:58:57,502 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 12:58:57,502 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:58:57,503 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:58:57,512 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 12:58:57,513 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 12:58:57,513 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 12:59:05,507 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 12:59:05,508 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 12:59:05,509 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-24 12:59:06,006 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-24 12:59:06,022 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-24 12:59:06,053 Line:689 通过SQL读原始数据：31
 [DEBUG] 2017-12-24 12:59:06,053 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 12:59:06,473 Line:5227 GlobalsTool.js 生成js 时间114:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:59:06,622 Line:5227 GlobalsTool.js 生成js 时间149:/js/gen/defineList.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 12:59:07,769 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 12:59:07,770 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 12:59:08,170 Line:5227 GlobalsTool.js 生成js 时间20:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:59:09,163 Line:5227 GlobalsTool.js 生成js 时间993:/js/gen/define.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 12:59:12,430 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 12:59:12,431 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 12:59:12,500 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:59:12,500 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:59:12,500 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:59:12,501 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:59:12,501 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 12:59:12,539 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:59:12,697 Line:5227 GlobalsTool.js 生成js 时间13:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:59:12,744 Line:5227 GlobalsTool.js 生成js 时间47:/js/gen/popupPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 12:59:15,277 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 12:59:15,278 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 12:59:15,303 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:59:15,304 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:59:15,304 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:59:15,305 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:59:15,306 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 12:59:15,310 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:59:27,723 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 12:59:27,724 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 12:59:27,765 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 12:59:27,766 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 12:59:27,767 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 12:59:27,767 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 12:59:27,768 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 12:59:27,783 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 12:59:40,163 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 12:59:43,428 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 12:59:43,430 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240011,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[11,];TotalTaxAmount=[11,];TotalCoTaxAmt=[0,];CurTotalAmount=[11,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bs0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[干蒸馅,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[11,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[11,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[00001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[11,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[11,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[11,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 12:59:43,432 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 12:59:43,459 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:59:43,460 Line:5853 1:0.0
 [DEBUG] 2017-12-24 12:59:43,460 Line:5853 2:
 [DEBUG] 2017-12-24 12:59:43,460 Line:5853 3:b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:43,460 Line:5853 4:-1
 [DEBUG] 2017-12-24 12:59:43,460 Line:5853 5:finish
 [DEBUG] 2017-12-24 12:59:43,461 Line:5853 6:0.0
 [DEBUG] 2017-12-24 12:59:43,461 Line:5853 7:0
 [DEBUG] 2017-12-24 12:59:43,461 Line:5853 8:0.0
 [DEBUG] 2017-12-24 12:59:43,461 Line:5853 9:BI1712240011
 [DEBUG] 2017-12-24 12:59:43,461 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 12:59:43,461 Line:5853 11:00003
 [DEBUG] 2017-12-24 12:59:43,462 Line:5853 12:00101
 [DEBUG] 2017-12-24 12:59:43,462 Line:5853 13:1
 [DEBUG] 2017-12-24 12:59:43,462 Line:5853 14:00001
 [DEBUG] 2017-12-24 12:59:43,462 Line:5853 15:3
 [DEBUG] 2017-12-24 12:59:43,463 Line:5853 16:0.0
 [DEBUG] 2017-12-24 12:59:43,463 Line:5853 17:0.0
 [DEBUG] 2017-12-24 12:59:43,463 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:59:43,463 Line:5853 19:0.0
 [DEBUG] 2017-12-24 12:59:43,463 Line:5853 20:
 [DEBUG] 2017-12-24 12:59:43,464 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:59:43,464 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:59:43,464 Line:5853 23:0.0
 [DEBUG] 2017-12-24 12:59:43,464 Line:5853 24:
 [DEBUG] 2017-12-24 12:59:43,464 Line:5853 25:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 27:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 28:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 29:12
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 30:12
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 31:2017
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 32:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 36:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 37:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 38:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 41:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 42:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 43:100.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 46:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 47:1.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 48:11.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 49:11.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 50:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 51:11.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 52:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 53:
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 55:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 56:0.0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 57:0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 58:00001
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 59:0
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 60:2017-12-24 12:59:43
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 61:1
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 62:2017-12-24 12:59:43
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 63:1
 [DEBUG] 2017-12-24 12:59:43,465 Line:5853 64:2017-12-24 12:59:43
 [DEBUG] 2017-12-24 12:59:43,554 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 12:59:43,554 Line:5853 1:b74e474f_1712241259435540003
 [DEBUG] 2017-12-24 12:59:43,555 Line:5853 2:b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:43,555 Line:5853 3:
 [DEBUG] 2017-12-24 12:59:43,555 Line:5853 4:
 [DEBUG] 2017-12-24 12:59:43,555 Line:5853 5:
 [DEBUG] 2017-12-24 12:59:43,555 Line:5853 6:
 [DEBUG] 2017-12-24 12:59:43,555 Line:5853 7:00001
 [DEBUG] 2017-12-24 12:59:43,556 Line:5853 8:
 [DEBUG] 2017-12-24 12:59:43,556 Line:5853 9:
 [DEBUG] 2017-12-24 12:59:43,556 Line:5853 10:
 [DEBUG] 2017-12-24 12:59:43,556 Line:5853 11:
 [DEBUG] 2017-12-24 12:59:43,556 Line:5853 12:
 [DEBUG] 2017-12-24 12:59:43,556 Line:5853 13:
 [DEBUG] 2017-12-24 12:59:43,557 Line:5853 14:
 [DEBUG] 2017-12-24 12:59:43,557 Line:5853 15:11.0
 [DEBUG] 2017-12-24 12:59:43,557 Line:5853 16:1.0
 [DEBUG] 2017-12-24 12:59:43,557 Line:5853 17:11.0
 [DEBUG] 2017-12-24 12:59:43,557 Line:5853 18:0.0
 [DEBUG] 2017-12-24 12:59:43,557 Line:5853 19:0
 [DEBUG] 2017-12-24 12:59:43,558 Line:5853 20:0.0
 [DEBUG] 2017-12-24 12:59:43,558 Line:5853 21:0.0
 [DEBUG] 2017-12-24 12:59:43,558 Line:5853 22:0.0
 [DEBUG] 2017-12-24 12:59:43,558 Line:5853 23:100.0
 [DEBUG] 2017-12-24 12:59:43,558 Line:5853 24:1.0
 [DEBUG] 2017-12-24 12:59:43,559 Line:5853 25:11.0
 [DEBUG] 2017-12-24 12:59:43,559 Line:5853 26:0.0
 [DEBUG] 2017-12-24 12:59:43,559 Line:5853 27:1.0
 [DEBUG] 2017-12-24 12:59:43,559 Line:5853 28:11.0
 [DEBUG] 2017-12-24 12:59:43,559 Line:5853 29:0.0
 [DEBUG] 2017-12-24 12:59:43,560 Line:5853 30:1.0
 [DEBUG] 2017-12-24 12:59:43,560 Line:5853 31:11.0
 [DEBUG] 2017-12-24 12:59:43,560 Line:5853 32:0.0
 [DEBUG] 2017-12-24 12:59:43,560 Line:5853 33:0.0
 [DEBUG] 2017-12-24 12:59:43,560 Line:5853 34:0.0
 [DEBUG] 2017-12-24 12:59:43,560 Line:5853 35:0.0
 [DEBUG] 2017-12-24 12:59:43,561 Line:5853 36:0.0
 [DEBUG] 2017-12-24 12:59:43,561 Line:5853 37:
 [DEBUG] 2017-12-24 12:59:43,561 Line:5853 38:0.0
 [DEBUG] 2017-12-24 12:59:43,561 Line:5853 39:0.0
 [DEBUG] 2017-12-24 12:59:43,561 Line:5853 40:0.0
 [DEBUG] 2017-12-24 12:59:43,561 Line:5853 41:0.0
 [DEBUG] 2017-12-24 12:59:43,562 Line:5853 42:0.0
 [DEBUG] 2017-12-24 12:59:43,562 Line:5853 43:0.0
 [DEBUG] 2017-12-24 12:59:43,562 Line:5853 44:0.0
 [DEBUG] 2017-12-24 12:59:43,562 Line:5853 45:0.0
 [DEBUG] 2017-12-24 12:59:43,562 Line:5853 46:0.0
 [DEBUG] 2017-12-24 12:59:43,563 Line:5853 47:0
 [DEBUG] 2017-12-24 12:59:43,563 Line:5853 48:0.0
 [DEBUG] 2017-12-24 12:59:43,563 Line:5853 49:0.0
 [DEBUG] 2017-12-24 12:59:43,563 Line:5853 50:0
 [DEBUG] 2017-12-24 12:59:43,564 Line:5853 51:
 [DEBUG] 2017-12-24 12:59:43,564 Line:5853 52:0.0
 [DEBUG] 2017-12-24 12:59:43,566 Line:5853 53:0.0
 [DEBUG] 2017-12-24 12:59:43,566 Line:5853 54:0.0
 [DEBUG] 2017-12-24 12:59:43,566 Line:5853 55:0
 [DEBUG] 2017-12-24 12:59:43,567 Line:5853 56:0
 [DEBUG] 2017-12-24 12:59:43,567 Line:5853 57:
 [DEBUG] 2017-12-24 12:59:43,567 Line:5853 58:0.0
 [DEBUG] 2017-12-24 12:59:43,567 Line:5853 59:0.0
 [DEBUG] 2017-12-24 12:59:43,567 Line:5853 60:
 [DEBUG] 2017-12-24 12:59:43,567 Line:5853 61:0.0
 [DEBUG] 2017-12-24 12:59:43,568 Line:5853 62:00001
 [DEBUG] 2017-12-24 12:59:43,816 Line:313 exeCondition:tblBuyInStock_Add :11 < 0
 [DEBUG] 2017-12-24 12:59:44,085 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,086 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 12:59:44,089 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,089 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 12:59:44,090 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,090 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 12:59:44,091 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,092 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:59:44,093 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,093 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 12:59:44,094 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,094 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:59:44,095 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,095 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 12:59:44,096 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,096 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,096 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 12:59:44,100 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:59:44,100 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:59:44,101 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,101 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:59:44,102 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,102 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,102 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:59:44,105 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:59:44,106 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:59:44,107 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,107 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 12:59:44,107 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,107 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,107 Line:988 2值：00003
 [DEBUG] 2017-12-24 12:59:44,111 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:59:44,112 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:59:44,113 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,113 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 12:59:44,113 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,113 Line:988 1值：false
 [DEBUG] 2017-12-24 12:59:44,114 Line:988 2值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,119 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 12:59:44,119 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 12:59:44,119 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 12:59:44,120 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,120 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 12:59:44,120 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,121 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,125 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:59:44,126 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,127 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,127 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:59:44,127 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,127 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,131 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:59:44,131 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,132 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,132 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 12:59:44,133 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,133 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,137 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:59:44,137 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,138 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,138 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 12:59:44,139 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,139 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,148 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 12:59:44,149 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,150 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,151 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,152 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,153 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 12:59:44,153 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,154 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,157 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:59:44,158 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,160 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,160 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 12:59:44,162 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,162 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 12:59:44,163 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,163 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,168 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 12:59:44,169 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,170 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,171 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 12:59:44,171 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,172 Line:988 1值：11
 [DEBUG] 2017-12-24 12:59:44,172 Line:988 2值：0
 [DEBUG] 2017-12-24 12:59:44,172 Line:988 3值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,189 Line:1025 query condition columnName:SumDetAmt----value:11.0
 [DEBUG] 2017-12-24 12:59:44,189 Line:1025 query condition columnName:sumMainAmt----value:11.0
 [DEBUG] 2017-12-24 12:59:44,190 Line:1043 ---上述语句时间---19
 [DEBUG] 2017-12-24 12:59:44,190 Line:313 exeCondition:tblBuyInStock_Add :11.0!=11.0
 [DEBUG] 2017-12-24 12:59:44,192 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,192 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 12:59:44,192 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,193 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,209 Line:1043 ---上述语句时间---17
 [DEBUG] 2017-12-24 12:59:44,210 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,213 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,214 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 12:59:44,214 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,216 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,219 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 12:59:44,220 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 12:59:44,222 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,223 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 12:59:44,223 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,223 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,226 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:59:44,226 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 12:59:44,227 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,228 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 12:59:44,228 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,228 Line:988 1值：
 [DEBUG] 2017-12-24 12:59:44,228 Line:988 2值：00001
 [DEBUG] 2017-12-24 12:59:44,232 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 12:59:44,232 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 12:59:44,232 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,233 Line:988 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,233 Line:988 2值：
 [DEBUG] 2017-12-24 12:59:44,233 Line:988 3值：
 [DEBUG] 2017-12-24 12:59:44,233 Line:988 4值：
 [DEBUG] 2017-12-24 12:59:44,239 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-12-24 12:59:44,240 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 12:59:44,242 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,243 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 12:59:44,245 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,246 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 12:59:44,248 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,249 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 12:59:44,251 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,251 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:59:44,253 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,256 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 12:59:44,258 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:59:44,258 Line:1157 2值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,263 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,264 Line:229 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 12:59:44,265 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:59:44,265 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 12:59:44,266 Line:1157 2值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,266 Line:1157 3值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,276 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,276 Line:229 ************上述语句执行时间：11
 [DEBUG] 2017-12-24 12:59:44,276 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 12:59:44,277 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,277 Line:1157 2值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,284 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,284 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 12:59:44,285 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 12:59:44,285 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,289 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,289 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 12:59:44,290 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 12:59:44,290 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,294 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,294 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 12:59:44,295 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 12:59:44,296 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,296 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 12:59:44,296 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,297 Line:1157 2值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,302 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,303 Line:408 ************上述语句执行时间：7
 [DEBUG] 2017-12-24 12:59:44,304 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 12:59:44,305 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,306 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 12:59:44,307 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,307 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 12:59:44,307 Line:1270 b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,308 Line:1270 add
 [DEBUG] 2017-12-24 12:59:44,395 Line:425 ************上述语句执行时间：88
 [DEBUG] 2017-12-24 12:59:44,397 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 12:59:44,400 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,400 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:59:44,401 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,413 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:59:44,414 Line:408 ************上述语句执行时间：14
 [DEBUG] 2017-12-24 12:59:44,414 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 12:59:44,415 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,424 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 12:59:44,425 Line:408 ************上述语句执行时间：11
 [DEBUG] 2017-12-24 12:59:44,425 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:59:44,426 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,427 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 12:59:44,428 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,428 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 12:59:44,429 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,454 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 12:59:44,456 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,456 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:59:44,457 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,457 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 12:59:44,458 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,459 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:59:44,460 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,460 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 12:59:44,461 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,461 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:59:44,462 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,463 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 12:59:44,463 Line:1157 1值：b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,467 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 12:59:44,467 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 12:59:44,468 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:59:44,468 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,469 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 12:59:44,469 Line:1270 b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,469 Line:1270 add
 [DEBUG] 2017-12-24 12:59:44,525 Line:425 ************上述语句执行时间：56
 [DEBUG] 2017-12-24 12:59:44,526 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 12:59:44,527 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,528 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 12:59:44,528 Line:1270 12
 [DEBUG] 2017-12-24 12:59:44,528 Line:1270 2017
 [DEBUG] 2017-12-24 12:59:44,528 Line:1270 12
 [DEBUG] 2017-12-24 12:59:44,529 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 12:59:44,529 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 12:59:44,529 Line:1270 b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,530 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 12:59:44,530 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:59:44,530 Line:1270 BI1712240011
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 1
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 1
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 2017-12-24 12:59:43
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 2017-12-24 12:59:43
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 00001
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 00003
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 1
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 00101
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 0
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 12:59:44,531 Line:1270 f_ref='b74e474f_1712241259434520002'
 [DEBUG] 2017-12-24 12:59:44,704 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'b74e474f_1712241259434520002','2017-12-24','BI1712240011','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 12:59:43','2017-12-24 12:59:43','00001' from tblBuyInStockDet where f_ref='b74e474f_1712241259434520002' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 12:59:44,705 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 12:59:44,705 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:59:44,705 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 12:59:44,705 Line:425 ************上述语句执行时间：178
 [DEBUG] 2017-12-24 12:59:44,706 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 12:59:44,706 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,707 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:59:44,707 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,708 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 12:59:44,708 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,709 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 12:59:44,710 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 12:59:44,711 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,711 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 12:59:44,711 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,712 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 12:59:44,712 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,713 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 12:59:44,713 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,713 Line:988 1值：11
 [DEBUG] 2017-12-24 12:59:44,713 Line:988 2值：0
 [DEBUG] 2017-12-24 12:59:44,713 Line:988 3值：11
 [DEBUG] 2017-12-24 12:59:44,714 Line:988 4值：0
 [DEBUG] 2017-12-24 12:59:44,714 Line:988 5值：0
 [DEBUG] 2017-12-24 12:59:44,714 Line:988 6值：1
 [DEBUG] 2017-12-24 12:59:44,715 Line:1023 query condition columnName:RNeedPayAmt----value:11.00000000
 [DEBUG] 2017-12-24 12:59:44,715 Line:1023 query condition columnName:CRNeedPayAmt----value:11.00000000
 [DEBUG] 2017-12-24 12:59:44,716 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 12:59:44,716 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:59:44,716 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 12:59:44,717 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,768 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 12:59:44,771 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 12:59:44,779 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,785 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,792 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,798 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,807 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,813 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,825 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 12:59:44,838 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 12:59:44,935 Line:434 ************上述语句执行时间：218
 [DEBUG] 2017-12-24 12:59:44,936 Line:313 exeCondition:tblBuyInStock_Add_One :11>0
 [DEBUG] 2017-12-24 12:59:44,937 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:44,937 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 12:59:44,938 Line:1270 1b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:44,938 Line:1270 00003
 [DEBUG] 2017-12-24 12:59:44,938 Line:1270 1
 [DEBUG] 2017-12-24 12:59:44,938 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 12:59:44,938 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=11@SPFieldLink:RelationDocID=b74e474f_1712241259434520002@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=11@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 12:59:43@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 12:59:43@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240011@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 12:59:44,987 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1b74e474f_1712241259434520002',10,'00003','2017-12-24','12','2017','12','0','11','b74e474f_1712241259434520002','','1','0','11','1','2017-12-24 12:59:43','1','2017-12-24 12:59:43','00001','tblBuyInStock','BI1712240011','1','00101','0','')
 [DEBUG] 2017-12-24 12:59:44,987 Line:425 ************上述语句执行时间：50
 [DEBUG] 2017-12-24 12:59:44,987 Line:313 exeCondition:tblBuyInStock_Add_One :11.00000000<0 && 11>0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:59:44,988 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,989 Line:313 exeCondition:tblBuyInStock_Add_One :11.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 12:59:44,989 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,990 Line:313 exeCondition:tblBuyInStock_Add_One :11.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 12:59:44,991 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,991 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&11.00000000>=0
 [DEBUG] 2017-12-24 12:59:44,991 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,992 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 12:59:44,992 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,993 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 12:59:44,993 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,994 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 12:59:44,994 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:44,994 Line:988 1值：11
 [DEBUG] 2017-12-24 12:59:44,994 Line:988 2值：0
 [DEBUG] 2017-12-24 12:59:44,994 Line:988 3值：11
 [DEBUG] 2017-12-24 12:59:44,994 Line:988 4值：0
 [DEBUG] 2017-12-24 12:59:44,995 Line:988 5值：0
 [DEBUG] 2017-12-24 12:59:44,995 Line:988 6值：0
 [DEBUG] 2017-12-24 12:59:44,996 Line:1023 query condition columnName:RNeedPayAmt----value:11.00000000
 [DEBUG] 2017-12-24 12:59:44,996 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 12:59:44,997 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 12:59:44,997 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 12:59:44,997 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:59:44,999 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:44,999 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 12:59:45,000 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:45,000 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:59:45,001 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:45,001 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 12:59:45,002 Line:321 flag:false
 [DEBUG] 2017-12-24 12:59:45,002 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 12:59:45,002 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:45,003 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 12:59:45,003 Line:1270 b74e474f_1712241259434520002
 [DEBUG] 2017-12-24 12:59:45,003 Line:1270 add
 [DEBUG] 2017-12-24 12:59:45,009 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 12:59:45,010 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'OpenPackage' as opt,'http://fc.tz1288.com/fc.asmx/OpenPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 12:59:45,010 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 12:59:45,011 Line:1025 query condition columnName:opt----value:OpenPackage
 [DEBUG] 2017-12-24 12:59:45,011 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/OpenPackage
 [DEBUG] 2017-12-24 12:59:45,011 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 12:59:45,011 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 12:59:45,012 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 12:59:45,012 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 12:59:45,012 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 12:59:45,012 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 12:59:45,012 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 12:59:45,013 Line:321 flag:true
 [DEBUG] 2017-12-24 12:59:45,023 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(OpenPackage,http://fc.tz1288.com/fc.asmx/OpenPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 13:00:09,891 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 13:00:09,893 Line:443 ************上述语句执行时间：24880
 [DEBUG] 2017-12-24 13:00:11,503 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=b74e474f_1712241259434520002&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 13:00:11,503 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[b74e474f_1712241259434520002,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 13:00:11,509 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='b74e474f_1712241259434520002' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 13:00:11,634 Line:1525  select * from  tblBuyInStockDet where f_ref = 'b74e474f_1712241259434520002' order by detOrderNo
 [DEBUG] 2017-12-24 13:00:11,634 Line:1525  select * from  tblBuyPayAccount where f_ref = 'b74e474f_1712241259434520002' order by detOrderNo
 [DEBUG] 2017-12-24 13:30:03,066 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 14:10:41,756 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 14:46:23,506 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 15:13:54,326 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:13:54,327 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:13:54,473 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:13:54,473 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:13:54,545 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514099634542
 [DEBUG] 2017-12-24 15:13:54,546 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514099634542,];
 [DEBUG] 2017-12-24 15:13:54,742 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:13:54,743 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:13:54,783 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:13:54,783 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:13:54,824 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514099634821
 [DEBUG] 2017-12-24 15:13:54,824 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514099634821,];
 [DEBUG] 2017-12-24 15:15:40,802 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F8555B65D63DB031B8AD219FA989EC390
 [ERROR] 2017-12-24 15:15:40,876 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:15:55,763 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:15:55,764 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 15:15:55,765 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 15:15:55,848 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:15:55,848 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:15:55,871 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:15:55,872 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:15:56,063 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514099756060
 [DEBUG] 2017-12-24 15:15:56,063 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514099756060,];
 [DEBUG] 2017-12-24 15:15:57,619 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514099757616
 [DEBUG] 2017-12-24 15:15:57,619 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514099757616,];
 [DEBUG] 2017-12-24 15:15:57,624 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514099757621
 [DEBUG] 2017-12-24 15:15:57,624 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514099757621,];
 [DEBUG] 2017-12-24 15:15:57,632 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 15:15:57,633 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 15:15:57,677 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 15:15:57,687 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 15:15:57,745 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:15:57,745 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:15:57,746 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:15:57,864 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 15:15:57,864 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 15:15:57,880 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 15:15:57,880 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:15:57,882 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:15:57,895 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 15:15:57,895 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:15:57,896 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:15:57,907 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 15:15:57,907 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:15:57,908 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:15:57,916 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 15:15:57,916 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:15:57,917 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:16:00,010 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 15:16:00,010 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 15:16:00,011 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-24 15:16:00,056 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-24 15:16:00,057 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-24 15:16:00,100 Line:689 通过SQL读原始数据：43
 [DEBUG] 2017-12-24 15:16:00,104 Line:1391 整理数据：3
 [DEBUG] 2017-12-24 15:16:01,345 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:16:01,346 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:16:03,670 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:16:03,671 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:16:03,695 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:16:03,695 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:16:03,695 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:16:03,696 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:16:03,696 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 15:16:03,715 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:16:06,118 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:16:06,118 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:16:06,142 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:16:06,142 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:16:06,143 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:16:06,144 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:16:06,144 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 15:16:06,146 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:16:08,348 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 15:16:08,348 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 15:16:08,375 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:16:08,375 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:16:08,376 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:16:08,376 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:16:08,376 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 15:16:08,385 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:16:13,356 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:16:13,357 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240012,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:16:13,358 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:16:13,362 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:16:13,363 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:16:13,364 Line:5853 2:
 [DEBUG] 2017-12-24 15:16:13,365 Line:5853 3:b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,365 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:16:13,365 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:16:13,365 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:16:13,365 Line:5853 7:0
 [DEBUG] 2017-12-24 15:16:13,365 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 9:BI1712240012
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 13:1
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:16:13,366 Line:5853 15:3
 [DEBUG] 2017-12-24 15:16:13,367 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:16:13,367 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:16:13,367 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:16:13,367 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:16:13,369 Line:5853 20:
 [DEBUG] 2017-12-24 15:16:13,369 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:16:13,369 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:16:13,369 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:16:13,370 Line:5853 24:
 [DEBUG] 2017-12-24 15:16:13,370 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:16:13,370 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:16:13,370 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:16:13,370 Line:5853 28:
 [DEBUG] 2017-12-24 15:16:13,370 Line:5853 29:12
 [DEBUG] 2017-12-24 15:16:13,371 Line:5853 30:12
 [DEBUG] 2017-12-24 15:16:13,372 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:16:13,372 Line:5853 32:
 [DEBUG] 2017-12-24 15:16:13,372 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:16:13,372 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:16:13,372 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:16:13,373 Line:5853 36:
 [DEBUG] 2017-12-24 15:16:13,373 Line:5853 37:
 [DEBUG] 2017-12-24 15:16:13,373 Line:5853 38:
 [DEBUG] 2017-12-24 15:16:13,373 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:16:13,373 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 41:
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 42:
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 46:
 [DEBUG] 2017-12-24 15:16:13,374 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:16:13,375 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:16:13,375 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:16:13,375 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:16:13,375 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:16:13,375 Line:5853 52:
 [DEBUG] 2017-12-24 15:16:13,375 Line:5853 53:
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 57:0
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 59:0
 [DEBUG] 2017-12-24 15:16:13,376 Line:5853 60:2017-12-24 15:16:13
 [DEBUG] 2017-12-24 15:16:13,377 Line:5853 61:1
 [DEBUG] 2017-12-24 15:16:13,377 Line:5853 62:2017-12-24 15:16:13
 [DEBUG] 2017-12-24 15:16:13,377 Line:5853 63:1
 [DEBUG] 2017-12-24 15:16:13,377 Line:5853 64:2017-12-24 15:16:13
 [DEBUG] 2017-12-24 15:16:13,387 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:16:13,387 Line:5853 1:b74e474f_1712241516133860010
 [DEBUG] 2017-12-24 15:16:13,388 Line:5853 2:b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,388 Line:5853 3:
 [DEBUG] 2017-12-24 15:16:13,388 Line:5853 4:
 [DEBUG] 2017-12-24 15:16:13,389 Line:5853 5:
 [DEBUG] 2017-12-24 15:16:13,389 Line:5853 6:
 [DEBUG] 2017-12-24 15:16:13,389 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:16:13,389 Line:5853 8:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 9:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 10:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 11:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 12:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 13:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 14:
 [DEBUG] 2017-12-24 15:16:13,390 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:16:13,391 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:16:13,391 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:16:13,391 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:16:13,391 Line:5853 19:0
 [DEBUG] 2017-12-24 15:16:13,391 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:16:13,391 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:16:13,392 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:16:13,392 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:16:13,392 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:16:13,392 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:16:13,392 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:16:13,392 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:16:13,393 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:16:13,393 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:16:13,393 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:16:13,393 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:16:13,393 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:16:13,393 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:16:13,394 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:16:13,394 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:16:13,394 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:16:13,394 Line:5853 37:
 [DEBUG] 2017-12-24 15:16:13,394 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:16:13,394 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:16:13,395 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:16:13,396 Line:5853 47:0
 [DEBUG] 2017-12-24 15:16:13,396 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:16:13,396 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:16:13,396 Line:5853 50:0
 [DEBUG] 2017-12-24 15:16:13,396 Line:5853 51:
 [DEBUG] 2017-12-24 15:16:13,396 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 55:0
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 56:0
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 57:
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:16:13,397 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:16:13,398 Line:5853 60:
 [DEBUG] 2017-12-24 15:16:13,398 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:16:13,398 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:16:13,404 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:16:13,405 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,406 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:16:13,406 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,407 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:16:13,407 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,407 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:16:13,408 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,408 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:16:13,409 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,409 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:16:13,410 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,410 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:16:13,411 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,412 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:16:13,412 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,412 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,413 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:16:13,420 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 15:16:13,420 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:16:13,421 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,421 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:16:13,421 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,422 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,422 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:16:13,429 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 15:16:13,429 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:16:13,430 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,430 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:16:13,430 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,431 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,431 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:16:13,439 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 15:16:13,439 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:16:13,440 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,440 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:16:13,441 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,441 Line:988 1值：false
 [DEBUG] 2017-12-24 15:16:13,441 Line:988 2值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,447 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:16:13,448 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 15:16:13,448 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:16:13,449 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,449 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:16:13,449 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,449 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,457 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 15:16:13,458 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,458 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,459 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:16:13,459 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,459 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,465 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:16:13,465 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,466 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,466 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:16:13,466 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,467 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,472 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:16:13,473 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,473 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,474 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:16:13,474 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,474 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,482 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 15:16:13,482 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,483 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,483 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,485 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,486 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:16:13,486 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,486 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,492 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:16:13,492 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,493 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,494 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:16:13,495 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,495 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:16:13,495 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,496 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,501 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:16:13,501 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,502 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,502 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:16:13,502 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,502 Line:988 1值：1
 [DEBUG] 2017-12-24 15:16:13,503 Line:988 2值：0
 [DEBUG] 2017-12-24 15:16:13,503 Line:988 3值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,539 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:16:13,539 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:16:13,539 Line:1043 ---上述语句时间---37
 [DEBUG] 2017-12-24 15:16:13,540 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:16:13,541 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,541 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:16:13,541 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,541 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,550 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 15:16:13,551 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,553 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,554 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:16:13,554 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,554 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,559 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:16:13,559 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:16:13,560 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,560 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:16:13,560 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,560 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,563 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:16:13,564 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:16:13,565 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,565 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:16:13,565 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,565 Line:988 1值：
 [DEBUG] 2017-12-24 15:16:13,566 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:16:13,568 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:16:13,568 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:16:13,568 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:13,569 Line:988 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,569 Line:988 2值：
 [DEBUG] 2017-12-24 15:16:13,569 Line:988 3值：
 [DEBUG] 2017-12-24 15:16:13,569 Line:988 4值：
 [DEBUG] 2017-12-24 15:16:13,595 Line:1043 ---上述语句时间---27
 [DEBUG] 2017-12-24 15:16:13,596 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:16:13,597 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,598 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:16:13,599 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,599 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:16:13,600 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,600 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:16:13,601 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,602 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:16:13,603 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,606 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:16:13,606 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:16:13,606 Line:1157 2值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,615 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,615 Line:229 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:16:13,615 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:16:13,615 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:16:13,616 Line:1157 2值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,616 Line:1157 3值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,627 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,627 Line:229 ************上述语句执行时间：12
 [DEBUG] 2017-12-24 15:16:13,627 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:16:13,627 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,628 Line:1157 2值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,635 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,636 Line:229 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:16:13,636 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:16:13,636 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,642 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,642 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:16:13,642 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:16:13,643 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,649 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,649 Line:229 ************上述语句执行时间：7
 [DEBUG] 2017-12-24 15:16:13,649 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:16:13,650 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,651 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:16:13,651 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,652 Line:1157 2值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,660 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,660 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:16:13,660 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:16:13,661 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,661 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:16:13,662 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,662 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:16:13,662 Line:1270 b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,662 Line:1270 add
 [DEBUG] 2017-12-24 15:16:13,729 Line:425 ************上述语句执行时间：67
 [DEBUG] 2017-12-24 15:16:13,729 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:16:13,730 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,730 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:16:13,731 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,742 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:16:13,743 Line:408 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 15:16:13,743 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:16:13,743 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,751 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:16:13,751 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 15:16:13,751 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:16:13,752 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,752 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:16:13,753 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,753 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:16:13,753 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,757 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:16:13,758 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,758 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:16:13,759 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,759 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:16:13,760 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,760 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:16:13,761 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,761 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:16:13,762 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:13,762 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:16:13,762 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,763 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:16:13,763 Line:1157 1值：b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,768 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:16:13,768 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:16:13,768 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:16:13,769 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,770 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:16:13,770 Line:1270 b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,770 Line:1270 add
 [DEBUG] 2017-12-24 15:16:13,816 Line:425 ************上述语句执行时间：46
 [DEBUG] 2017-12-24 15:16:13,816 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:16:13,817 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:13,817 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 12
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 2017
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 12
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:13,818 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:16:13,819 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:16:13,819 Line:1270 BI1712240012
 [DEBUG] 2017-12-24 15:16:13,823 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:16:13,823 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:16:13,823 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:16:13,824 Line:1270 1
 [DEBUG] 2017-12-24 15:16:13,824 Line:1270 1
 [DEBUG] 2017-12-24 15:16:13,824 Line:1270 2017-12-24 15:16:13
 [DEBUG] 2017-12-24 15:16:13,824 Line:1270 2017-12-24 15:16:13
 [DEBUG] 2017-12-24 15:16:13,824 Line:1270 00001
 [DEBUG] 2017-12-24 15:16:13,824 Line:1270 
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 00003
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 1
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 00101
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:16:13,825 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:16:13,826 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:16:13,826 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:16:13,826 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:16:13,826 Line:1270 0
 [DEBUG] 2017-12-24 15:16:13,826 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:16:13,826 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:16:13,827 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:16:13,827 Line:1270 f_ref='b74e474f_1712241516133600009'
 [DEBUG] 2017-12-24 15:16:14,002 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'b74e474f_1712241516133600009','2017-12-24','BI1712240012','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:16:13','2017-12-24 15:16:13','00001' from tblBuyInStockDet where f_ref='b74e474f_1712241516133600009' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:16:14,003 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:16:14,003 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:16:14,003 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:16:14,003 Line:425 ************上述语句执行时间：186
 [DEBUG] 2017-12-24 15:16:14,003 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:16:14,007 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,007 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:16:14,007 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:14,008 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:16:14,008 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:14,009 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:16:14,010 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:16:14,010 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,011 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:16:14,011 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,012 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:16:14,013 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,013 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:16:14,014 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:14,014 Line:988 1值：1
 [DEBUG] 2017-12-24 15:16:14,014 Line:988 2值：0
 [DEBUG] 2017-12-24 15:16:14,014 Line:988 3值：1
 [DEBUG] 2017-12-24 15:16:14,015 Line:988 4值：0
 [DEBUG] 2017-12-24 15:16:14,015 Line:988 5值：0
 [DEBUG] 2017-12-24 15:16:14,015 Line:988 6值：1
 [DEBUG] 2017-12-24 15:16:14,016 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:16:14,016 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:16:14,016 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:16:14,016 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:16:14,017 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:16:14,018 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:14,025 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:16:14,031 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:16:14,044 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,053 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,063 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,071 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,079 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,089 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,103 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:16:14,115 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:16:14,225 Line:434 ************上述语句执行时间：206
 [DEBUG] 2017-12-24 15:16:14,225 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:16:14,226 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:14,227 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:16:14,227 Line:1270 1b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:14,227 Line:1270 00003
 [DEBUG] 2017-12-24 15:16:14,227 Line:1270 1
 [DEBUG] 2017-12-24 15:16:14,227 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:16:14,227 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=b74e474f_1712241516133600009@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:16:13@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:16:13@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240012@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:16:14,281 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1b74e474f_1712241516133600009',11,'00003','2017-12-24','12','2017','12','0','1','b74e474f_1712241516133600009','','1','0','1','1','2017-12-24 15:16:13','1','2017-12-24 15:16:13','00001','tblBuyInStock','BI1712240012','1','00101','0','')
 [DEBUG] 2017-12-24 15:16:14,281 Line:425 ************上述语句执行时间：55
 [DEBUG] 2017-12-24 15:16:14,282 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:16:14,282 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,283 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:16:14,283 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,284 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:16:14,284 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,285 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:16:14,285 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,286 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:16:14,286 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,286 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:16:14,287 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,288 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:16:14,288 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:14,288 Line:988 1值：1
 [DEBUG] 2017-12-24 15:16:14,289 Line:988 2值：0
 [DEBUG] 2017-12-24 15:16:14,289 Line:988 3值：1
 [DEBUG] 2017-12-24 15:16:14,289 Line:988 4值：0
 [DEBUG] 2017-12-24 15:16:14,289 Line:988 5值：0
 [DEBUG] 2017-12-24 15:16:14,290 Line:988 6值：0
 [DEBUG] 2017-12-24 15:16:14,291 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:16:14,291 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:16:14,291 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:16:14,292 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:16:14,292 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:16:14,293 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,293 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:16:14,293 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,294 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:16:14,294 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,295 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:16:14,295 Line:321 flag:false
 [DEBUG] 2017-12-24 15:16:14,295 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:16:14,296 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:14,296 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:16:14,297 Line:1270 b74e474f_1712241516133600009
 [DEBUG] 2017-12-24 15:16:14,297 Line:1270 add
 [DEBUG] 2017-12-24 15:16:14,305 Line:425 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:16:14,305 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'RenewPackage' as opt,'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:16:14,305 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:16:14,306 Line:1025 query condition columnName:opt----value:RenewPackage
 [DEBUG] 2017-12-24 15:16:14,306 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:16:14,307 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:16:14,307 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:16:14,307 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:16:14,307 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:16:14,307 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:16:14,307 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:16:14,307 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:16:14,308 Line:321 flag:true
 [DEBUG] 2017-12-24 15:16:14,309 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(RenewPackage,http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:16:31,971 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:16:31,973 Line:443 ************上述语句执行时间：17664
 [DEBUG] 2017-12-24 15:16:33,512 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=b74e474f_1712241516133600009&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:16:33,512 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[b74e474f_1712241516133600009,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:16:33,512 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='b74e474f_1712241516133600009' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:16:33,540 Line:1525  select * from  tblBuyInStockDet where f_ref = 'b74e474f_1712241516133600009' order by detOrderNo
 [DEBUG] 2017-12-24 15:16:33,548 Line:1525  select * from  tblBuyPayAccount where f_ref = 'b74e474f_1712241516133600009' order by detOrderNo
 [DEBUG] 2017-12-24 15:17:18,350 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 15:17:57,282 Line:215 ---------->SET Page 2 DEFAULT URL = /LogManageAction.do
 [DEBUG] 2017-12-24 15:19:24,712 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655FAD3B5075B391164A1A9149AA833C7396
 [ERROR] 2017-12-24 15:19:24,762 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:19:44,537 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F8A8BF4370B519E411A9149AA833C7396
 [ERROR] 2017-12-24 15:19:44,592 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:24:47,044 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F168F8D42B7E54ADE7686458C02F7B7F6
 [ERROR] 2017-12-24 15:24:47,107 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:29:56,710 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:29:56,711 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:29:56,713 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:56,910 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 15:29:56,910 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 15:29:56,921 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 15:29:56,922 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:56,922 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:56,935 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 15:29:56,935 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:56,936 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:56,941 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 15:29:56,941 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:56,942 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:56,946 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 15:29:56,946 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:56,947 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:58,059 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:29:58,060 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:29:58,063 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:58,204 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 15:29:58,205 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 15:29:58,211 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 15:29:58,211 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:58,212 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:58,220 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 15:29:58,220 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:58,221 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:58,227 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 15:29:58,228 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:58,228 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:29:58,235 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 15:29:58,235 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:29:58,236 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:30:00,144 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 15:30:00,145 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 15:30:00,145 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-24 15:30:00,211 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-24 15:30:00,212 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-24 15:30:00,307 Line:689 通过SQL读原始数据：95
 [DEBUG] 2017-12-24 15:30:00,309 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 15:30:05,354 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:30:05,355 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:30:06,957 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:30:06,958 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:30:06,982 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:30:06,983 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:30:06,983 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 15:30:06,983 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:30:06,984 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:30:06,987 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:30:09,626 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:30:09,627 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:30:09,652 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:30:09,652 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:30:09,653 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:30:09,653 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:30:09,654 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 15:30:09,656 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:30:11,659 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 15:30:11,660 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 15:30:11,685 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:30:11,686 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:30:11,686 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:30:11,687 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:30:11,687 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 15:30:11,694 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:30:15,765 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:30:15,766 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240013,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0002,];tblBuyInStockDet_tblGoods_GoodsFullName=[流沙包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300002,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:30:15,767 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:30:15,772 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 2:
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 3:b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:30:15,773 Line:5853 7:0
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 9:BI1712240013
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 13:1
 [DEBUG] 2017-12-24 15:30:15,774 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 15:3
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 20:
 [DEBUG] 2017-12-24 15:30:15,775 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:30:15,776 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:30:15,776 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:30:15,776 Line:5853 24:
 [DEBUG] 2017-12-24 15:30:15,776 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:30:15,776 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:30:15,776 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 28:
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 29:12
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 30:12
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 32:
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:30:15,777 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:30:15,778 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:30:15,778 Line:5853 36:
 [DEBUG] 2017-12-24 15:30:15,778 Line:5853 37:
 [DEBUG] 2017-12-24 15:30:15,779 Line:5853 38:
 [DEBUG] 2017-12-24 15:30:15,780 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:30:15,780 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:30:15,780 Line:5853 41:
 [DEBUG] 2017-12-24 15:30:15,780 Line:5853 42:
 [DEBUG] 2017-12-24 15:30:15,780 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:30:15,780 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:30:15,781 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:30:15,781 Line:5853 46:
 [DEBUG] 2017-12-24 15:30:15,781 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:30:15,781 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:30:15,782 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:30:15,782 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:30:15,782 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:30:15,782 Line:5853 52:
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 53:
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 57:0
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:30:15,783 Line:5853 59:0
 [DEBUG] 2017-12-24 15:30:15,784 Line:5853 60:2017-12-24 15:30:15
 [DEBUG] 2017-12-24 15:30:15,784 Line:5853 61:1
 [DEBUG] 2017-12-24 15:30:15,784 Line:5853 62:2017-12-24 15:30:15
 [DEBUG] 2017-12-24 15:30:15,784 Line:5853 63:1
 [DEBUG] 2017-12-24 15:30:15,784 Line:5853 64:2017-12-24 15:30:15
 [DEBUG] 2017-12-24 15:30:15,793 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:30:15,793 Line:5853 1:b74e474f_1712241530157930018
 [DEBUG] 2017-12-24 15:30:15,793 Line:5853 2:b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,794 Line:5853 3:
 [DEBUG] 2017-12-24 15:30:15,794 Line:5853 4:
 [DEBUG] 2017-12-24 15:30:15,794 Line:5853 5:
 [DEBUG] 2017-12-24 15:30:15,794 Line:5853 6:
 [DEBUG] 2017-12-24 15:30:15,794 Line:5853 7:0000300002
 [DEBUG] 2017-12-24 15:30:15,794 Line:5853 8:
 [DEBUG] 2017-12-24 15:30:15,795 Line:5853 9:
 [DEBUG] 2017-12-24 15:30:15,796 Line:5853 10:
 [DEBUG] 2017-12-24 15:30:15,796 Line:5853 11:
 [DEBUG] 2017-12-24 15:30:15,796 Line:5853 12:
 [DEBUG] 2017-12-24 15:30:15,796 Line:5853 13:
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 14:
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 19:0
 [DEBUG] 2017-12-24 15:30:15,797 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:30:15,798 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:30:15,798 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:30:15,798 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:30:15,798 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:30:15,798 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:30:15,798 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:30:15,799 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 37:
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:30:15,800 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:30:15,801 Line:5853 47:0
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 50:0
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 51:
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:30:15,802 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 55:0
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 56:0
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 57:
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 60:
 [DEBUG] 2017-12-24 15:30:15,803 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:30:15,804 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:30:15,811 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:30:15,812 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,812 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:30:15,813 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,813 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:30:15,814 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,814 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:30:15,815 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,815 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:30:15,816 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,816 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:30:15,817 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,817 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:30:15,817 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:15,818 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:30:15,819 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,819 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,819 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:30:15,823 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:30:15,823 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:30:15,824 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,824 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:30:15,824 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,825 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,825 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:30:15,829 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:30:15,830 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:30:15,830 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,831 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:30:15,831 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,831 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,831 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:30:15,837 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:30:15,837 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:30:15,838 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,838 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:30:15,838 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,838 Line:988 1值：false
 [DEBUG] 2017-12-24 15:30:15,839 Line:988 2值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,846 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:30:15,846 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-24 15:30:15,847 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:30:15,847 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,848 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:30:15,848 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,848 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,853 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:30:15,853 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,854 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,854 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:30:15,854 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,855 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,857 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:30:15,858 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,858 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,859 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:30:15,859 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,859 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,862 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:30:15,862 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,863 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,863 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:30:15,863 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,863 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,867 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:30:15,868 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,868 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,869 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,869 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,869 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:30:15,869 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,870 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,873 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:30:15,873 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,874 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,874 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:30:15,875 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,875 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:30:15,875 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,875 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,877 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:30:15,878 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,878 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,879 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:30:15,879 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,879 Line:988 1值：1
 [DEBUG] 2017-12-24 15:30:15,879 Line:988 2值：0
 [DEBUG] 2017-12-24 15:30:15,880 Line:988 3值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,911 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:30:15,911 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:30:15,911 Line:1043 ---上述语句时间---32
 [DEBUG] 2017-12-24 15:30:15,912 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:30:15,912 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,913 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:30:15,913 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,913 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,923 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-12-24 15:30:15,923 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,924 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,924 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:30:15,925 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,925 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,926 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:30:15,927 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:30:15,927 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,928 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:30:15,928 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,928 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,931 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:30:15,931 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:30:15,931 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,933 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:30:15,933 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,933 Line:988 1值：
 [DEBUG] 2017-12-24 15:30:15,933 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:30:15,940 Line:1043 ---上述语句时间---7
 [DEBUG] 2017-12-24 15:30:15,942 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:30:15,942 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:15,943 Line:988 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,943 Line:988 2值：
 [DEBUG] 2017-12-24 15:30:15,943 Line:988 3值：
 [DEBUG] 2017-12-24 15:30:15,943 Line:988 4值：
 [DEBUG] 2017-12-24 15:30:15,948 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:30:15,948 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:30:15,949 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,949 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:30:15,950 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,950 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:30:15,951 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,951 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:30:15,952 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,952 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:30:15,952 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:15,953 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:30:15,954 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:30:15,954 Line:1157 2值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,957 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:30:15,957 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:30:15,958 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:30:15,958 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:30:15,958 Line:1157 2值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,958 Line:1157 3值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,963 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:30:15,964 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:30:15,964 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:30:15,964 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,964 Line:1157 2值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,969 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:30:15,969 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:30:15,969 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:30:15,969 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,972 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:30:15,972 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:30:15,972 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:30:15,972 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,976 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:30:15,976 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:30:15,976 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:30:15,977 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:15,977 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:30:15,977 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,978 Line:1157 2值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,981 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:30:15,981 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:30:15,981 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:30:15,982 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:15,982 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:30:15,983 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:15,983 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:30:15,983 Line:1270 b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:15,983 Line:1270 add
 [DEBUG] 2017-12-24 15:30:16,049 Line:425 ************上述语句执行时间：66
 [DEBUG] 2017-12-24 15:30:16,049 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:30:16,050 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,050 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:30:16,050 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,062 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:30:16,062 Line:408 ************上述语句执行时间：12
 [DEBUG] 2017-12-24 15:30:16,062 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:30:16,063 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,071 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:30:16,072 Line:408 ************上述语句执行时间：10
 [DEBUG] 2017-12-24 15:30:16,072 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:30:16,073 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,073 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:30:16,073 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,074 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:30:16,074 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,080 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:30:16,081 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,081 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:30:16,082 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,082 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:30:16,083 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,083 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:30:16,083 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,084 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:30:16,084 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,084 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:30:16,085 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,085 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:30:16,086 Line:1157 1值：b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,088 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:30:16,088 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:30:16,088 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:30:16,089 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,089 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:30:16,089 Line:1270 b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,089 Line:1270 add
 [DEBUG] 2017-12-24 15:30:16,135 Line:425 ************上述语句执行时间：46
 [DEBUG] 2017-12-24 15:30:16,136 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:30:16,136 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,137 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:30:16,137 Line:1270 12
 [DEBUG] 2017-12-24 15:30:16,137 Line:1270 2017
 [DEBUG] 2017-12-24 15:30:16,137 Line:1270 12
 [DEBUG] 2017-12-24 15:30:16,138 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:30:16,138 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:30:16,138 Line:1270 b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,138 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:30:16,138 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:30:16,138 Line:1270 BI1712240013
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 1
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 1
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 2017-12-24 15:30:15
 [DEBUG] 2017-12-24 15:30:16,139 Line:1270 2017-12-24 15:30:15
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 00001
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 00003
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 1
 [DEBUG] 2017-12-24 15:30:16,140 Line:1270 00101
 [DEBUG] 2017-12-24 15:30:16,141 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:30:16,141 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:30:16,141 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:30:16,141 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:30:16,141 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:30:16,141 Line:1270 0
 [DEBUG] 2017-12-24 15:30:16,142 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:30:16,142 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:30:16,142 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:30:16,142 Line:1270 f_ref='b74e474f_1712241530157690017'
 [DEBUG] 2017-12-24 15:30:16,335 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'b74e474f_1712241530157690017','2017-12-24','BI1712240013','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:30:15','2017-12-24 15:30:15','00001' from tblBuyInStockDet where f_ref='b74e474f_1712241530157690017' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:30:16,336 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:30:16,336 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:30:16,336 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:30:16,337 Line:425 ************上述语句执行时间：200
 [DEBUG] 2017-12-24 15:30:16,337 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:30:16,338 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,338 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:30:16,339 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,340 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:30:16,340 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:16,341 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:30:16,341 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:30:16,342 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,342 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:30:16,343 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,343 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:30:16,344 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,344 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:30:16,344 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:16,344 Line:988 1值：1
 [DEBUG] 2017-12-24 15:30:16,344 Line:988 2值：0
 [DEBUG] 2017-12-24 15:30:16,345 Line:988 3值：1
 [DEBUG] 2017-12-24 15:30:16,345 Line:988 4值：0
 [DEBUG] 2017-12-24 15:30:16,345 Line:988 5值：0
 [DEBUG] 2017-12-24 15:30:16,345 Line:988 6值：1
 [DEBUG] 2017-12-24 15:30:16,346 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:30:16,347 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:30:16,347 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:30:16,347 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:30:16,347 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:30:16,348 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,356 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:30:16,363 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:30:16,375 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,382 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,388 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,399 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,416 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,429 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,442 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:30:16,451 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:30:16,556 Line:434 ************上述语句执行时间：208
 [DEBUG] 2017-12-24 15:30:16,557 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:30:16,557 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,558 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:30:16,558 Line:1270 1b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,558 Line:1270 00003
 [DEBUG] 2017-12-24 15:30:16,558 Line:1270 1
 [DEBUG] 2017-12-24 15:30:16,559 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:30:16,559 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=b74e474f_1712241530157690017@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:30:15@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:30:15@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240013@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:30:16,613 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1b74e474f_1712241530157690017',12,'00003','2017-12-24','12','2017','12','0','1','b74e474f_1712241530157690017','','1','0','1','1','2017-12-24 15:30:15','1','2017-12-24 15:30:15','00001','tblBuyInStock','BI1712240013','1','00101','0','')
 [DEBUG] 2017-12-24 15:30:16,613 Line:425 ************上述语句执行时间：55
 [DEBUG] 2017-12-24 15:30:16,613 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:30:16,614 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,614 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:30:16,615 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,615 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:30:16,616 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,616 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:30:16,617 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,617 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:30:16,617 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,618 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:30:16,618 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,618 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:30:16,619 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:16,619 Line:988 1值：1
 [DEBUG] 2017-12-24 15:30:16,619 Line:988 2值：0
 [DEBUG] 2017-12-24 15:30:16,619 Line:988 3值：1
 [DEBUG] 2017-12-24 15:30:16,619 Line:988 4值：0
 [DEBUG] 2017-12-24 15:30:16,619 Line:988 5值：0
 [DEBUG] 2017-12-24 15:30:16,619 Line:988 6值：0
 [DEBUG] 2017-12-24 15:30:16,621 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:30:16,621 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:30:16,621 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:30:16,621 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:30:16,621 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:30:16,622 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,622 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:30:16,623 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,623 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:30:16,623 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,624 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:30:16,624 Line:321 flag:false
 [DEBUG] 2017-12-24 15:30:16,624 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:30:16,625 Line:321 flag:true
 [DEBUG] 2017-12-24 15:30:16,625 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:30:16,625 Line:1270 b74e474f_1712241530157690017
 [DEBUG] 2017-12-24 15:30:16,625 Line:1270 add
 [DEBUG] 2017-12-24 15:30:16,634 Line:425 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:30:16,634 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:30:16,635 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:30:16,636 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:30:16,636 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:30:16,636 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:30:16,636 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:30:16,636 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:30:16,636 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:30:16,637 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:30:16,637 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:30:16,637 Line:321 flag:true
 [ERROR] 2017-12-24 15:30:16,638 Line:1774 DefineSQLBean.execClass Error
 java.lang.NoSuchMethodException: tzhive.HiveServlet.optHive(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)
	at java.lang.Class.getMethod(Class.java:1786)
	at com.menyi.web.util.DefineSQLBean.execClass(DefineSQLBean.java:1746)
	at com.menyi.web.util.DefineSQLBean.execute(DefineSQLBean.java:437)
	at com.menyi.aio.dyndb.DynDBManager.defineSql(DynDBManager.java:4483)
	at com.menyi.aio.dyndb.DynDBManager.execAdd(DynDBManager.java:3862)
	at com.menyi.aio.dyndb.DynDBManager$21$1.execute(DynDBManager.java:4151)
	at org.hibernate.impl.SessionImpl.doWork(SessionImpl.java:1850)
	at com.menyi.aio.dyndb.DynDBManager$21.exec(DynDBManager.java:4070)
	at com.dbfactory.hibernate.DBUtil.execute(DBUtil.java:260)
	at com.menyi.aio.dyndb.DynDBManager.add(DynDBManager.java:4068)
	at com.menyi.aio.web.userFunction.UserFunctionAction.add(UserFunctionAction.java:3888)
	at com.menyi.aio.web.userFunction.UserFunctionAction.exe(UserFunctionAction.java:198)
	at com.menyi.web.util.BaseAction.execute(BaseAction.java:264)
	at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
	at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
	at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304)
	at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190)
	at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
	at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:646)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at com.menyi.web.util.BaseFilter.doFilter(BaseFilter.java:172)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
[ERROR] 2017-12-24 15:30:16,639 Line:3872 DynDBManager After add defineSql Error code = -2104 Msg=tzhive.HiveServlet.optHive(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)
 [DEBUG] 2017-12-24 15:30:40,074 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F6F2769A30ACDB64C8AD219FA989EC390
 [ERROR] 2017-12-24 15:30:40,138 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:31:02,294 Line:73 --------Destroy Config Refresh Thread---------------
 [DEBUG] 2017-12-24 15:31:02,295 Line:105 --------Destroy Hibernate---------------
 [INFO ] 2017-12-24 15:31:02,305 Line:127 测试执行路径
 java.lang.Exception
	at com.menyi.web.util.BaseFilter.destroy(BaseFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:313)
	at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:4890)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5711)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1591)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1580)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[INFO ] 2017-12-24 15:31:10,398 Line:206 系统开始启动，最大内存：1792;目前总内存：253;目前空闲内存：164
 [INFO ] 2017-12-24 15:31:10,507 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 15:31:14,528 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 15:31:14,851 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 15:31:14,863 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 15:31:14,868 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 15:31:14,873 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 15:31:14,890 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 15:31:14,901 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 15:31:16,188 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 15:31:16,214 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 15:31:16,244 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 15:31:16,256 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 15:31:17,214 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 15:31:17,214 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 15:31:17,836 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 15:31:17,945 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 15:31:18,697 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 15:31:18,727 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 15:31:18,732 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 15:31:18,746 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 15:31:18,760 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 15:31:18,767 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 15:31:18,801 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 15:31:21,392 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 15:31:21,571 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 15:31:21,580 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 15:31:21,606 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-24 15:31:22,225 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 15:31:22,226 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 15:31:24,076 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 15:31:24,076 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 15:31:30,695 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:31:30,698 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 15:31:30,698 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 15:31:31,171 Line:5227 GlobalsTool.js 生成js 时间69:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:31:31,221 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:31:31,222 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:31:31,497 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514100691473
 [DEBUG] 2017-12-24 15:31:31,509 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514100691473,];
 [DEBUG] 2017-12-24 15:31:31,531 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:31:31,532 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:31:32,574 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514100692571
 [DEBUG] 2017-12-24 15:31:32,574 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514100692571,];
 [DEBUG] 2017-12-24 15:31:32,649 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514100692647
 [DEBUG] 2017-12-24 15:31:32,649 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514100692647,];
 [DEBUG] 2017-12-24 15:31:32,725 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 15:31:32,725 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 15:31:32,779 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 15:31:32,794 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 15:31:32,894 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:31:32,895 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:31:32,904 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:31:33,156 Line:5227 GlobalsTool.js 生成js 时间33:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:31:33,333 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 15:31:33,333 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 15:31:33,333 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 15:31:33,334 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:31:33,335 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:31:33,355 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 15:31:33,355 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:31:33,356 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:31:33,368 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 15:31:33,368 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:31:33,369 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:31:33,379 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 15:31:33,379 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:31:33,380 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:31:34,650 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 15:31:34,651 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 15:31:34,651 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-24 15:31:35,153 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-24 15:31:35,163 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-24 15:31:35,187 Line:689 通过SQL读原始数据：24
 [DEBUG] 2017-12-24 15:31:35,193 Line:1391 整理数据：5
 [DEBUG] 2017-12-24 15:31:35,559 Line:5227 GlobalsTool.js 生成js 时间112:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:31:35,695 Line:5227 GlobalsTool.js 生成js 时间135:/js/gen/defineList.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 15:31:36,609 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:31:36,611 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:31:37,267 Line:5227 GlobalsTool.js 生成js 时间36:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:31:38,103 Line:5227 GlobalsTool.js 生成js 时间835:/js/gen/define.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 15:31:39,947 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:31:39,947 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:31:40,078 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:31:40,078 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:31:40,079 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:31:40,080 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:31:40,081 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 15:31:40,151 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:31:40,436 Line:5227 GlobalsTool.js 生成js 时间29:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:31:40,463 Line:5227 GlobalsTool.js 生成js 时间26:/js/gen/popupPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:31:42,253 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:31:42,255 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:31:42,284 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:31:42,285 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:31:42,285 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:31:42,285 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 15:31:42,285 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:31:42,291 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:31:44,951 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 15:31:44,951 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 15:31:44,979 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:31:44,980 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:31:44,981 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:31:44,981 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 15:31:44,981 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:31:44,993 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:31:49,140 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:31:49,142 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240014,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:31:49,143 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:31:49,169 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:31:49,169 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:31:49,169 Line:5853 2:
 [DEBUG] 2017-12-24 15:31:49,169 Line:5853 3:18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,170 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:31:49,170 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:31:49,170 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:31:49,170 Line:5853 7:0
 [DEBUG] 2017-12-24 15:31:49,170 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:31:49,171 Line:5853 9:BI1712240014
 [DEBUG] 2017-12-24 15:31:49,171 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:31:49,171 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 13:1
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 15:3
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:31:49,173 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:31:49,174 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:31:49,174 Line:5853 20:
 [DEBUG] 2017-12-24 15:31:49,174 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:31:49,174 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:31:49,174 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:31:49,175 Line:5853 24:
 [DEBUG] 2017-12-24 15:31:49,175 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:31:49,175 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:31:49,175 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:31:49,175 Line:5853 28:
 [DEBUG] 2017-12-24 15:31:49,175 Line:5853 29:12
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 30:12
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 32:
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:31:49,176 Line:5853 36:
 [DEBUG] 2017-12-24 15:31:49,177 Line:5853 37:
 [DEBUG] 2017-12-24 15:31:49,177 Line:5853 38:
 [DEBUG] 2017-12-24 15:31:49,177 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:31:49,178 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:31:49,178 Line:5853 41:
 [DEBUG] 2017-12-24 15:31:49,178 Line:5853 42:
 [DEBUG] 2017-12-24 15:31:49,178 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:31:49,179 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:31:49,179 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:31:49,179 Line:5853 46:
 [DEBUG] 2017-12-24 15:31:49,179 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:31:49,179 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:31:49,179 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:31:49,180 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:31:49,180 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:31:49,180 Line:5853 52:
 [DEBUG] 2017-12-24 15:31:49,180 Line:5853 53:
 [DEBUG] 2017-12-24 15:31:49,180 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:31:49,180 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:31:49,181 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:31:49,181 Line:5853 57:0
 [DEBUG] 2017-12-24 15:31:49,181 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:31:49,181 Line:5853 59:0
 [DEBUG] 2017-12-24 15:31:49,181 Line:5853 60:2017-12-24 15:31:49
 [DEBUG] 2017-12-24 15:31:49,181 Line:5853 61:1
 [DEBUG] 2017-12-24 15:31:49,182 Line:5853 62:2017-12-24 15:31:49
 [DEBUG] 2017-12-24 15:31:49,182 Line:5853 63:1
 [DEBUG] 2017-12-24 15:31:49,182 Line:5853 64:2017-12-24 15:31:49
 [DEBUG] 2017-12-24 15:31:49,264 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:31:49,264 Line:5853 1:18971718_1712241531492640003
 [DEBUG] 2017-12-24 15:31:49,265 Line:5853 2:18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,265 Line:5853 3:
 [DEBUG] 2017-12-24 15:31:49,265 Line:5853 4:
 [DEBUG] 2017-12-24 15:31:49,265 Line:5853 5:
 [DEBUG] 2017-12-24 15:31:49,265 Line:5853 6:
 [DEBUG] 2017-12-24 15:31:49,265 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:31:49,266 Line:5853 8:
 [DEBUG] 2017-12-24 15:31:49,266 Line:5853 9:
 [DEBUG] 2017-12-24 15:31:49,266 Line:5853 10:
 [DEBUG] 2017-12-24 15:31:49,267 Line:5853 11:
 [DEBUG] 2017-12-24 15:31:49,267 Line:5853 12:
 [DEBUG] 2017-12-24 15:31:49,267 Line:5853 13:
 [DEBUG] 2017-12-24 15:31:49,267 Line:5853 14:
 [DEBUG] 2017-12-24 15:31:49,267 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:31:49,268 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:31:49,268 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:31:49,268 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:31:49,268 Line:5853 19:0
 [DEBUG] 2017-12-24 15:31:49,268 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:31:49,269 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:31:49,269 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:31:49,269 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:31:49,269 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:31:49,269 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:31:49,270 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:31:49,270 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:31:49,270 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:31:49,270 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:31:49,270 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:31:49,270 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:31:49,271 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:31:49,271 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:31:49,271 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:31:49,271 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:31:49,271 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:31:49,271 Line:5853 37:
 [DEBUG] 2017-12-24 15:31:49,272 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:31:49,272 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:31:49,272 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:31:49,272 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:31:49,273 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:31:49,273 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:31:49,274 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:31:49,274 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:31:49,274 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:31:49,274 Line:5853 47:0
 [DEBUG] 2017-12-24 15:31:49,274 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:31:49,274 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:31:49,275 Line:5853 50:0
 [DEBUG] 2017-12-24 15:31:49,275 Line:5853 51:
 [DEBUG] 2017-12-24 15:31:49,275 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:31:49,275 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:31:49,276 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:31:49,276 Line:5853 55:0
 [DEBUG] 2017-12-24 15:31:49,276 Line:5853 56:0
 [DEBUG] 2017-12-24 15:31:49,276 Line:5853 57:
 [DEBUG] 2017-12-24 15:31:49,276 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:31:49,277 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:31:49,277 Line:5853 60:
 [DEBUG] 2017-12-24 15:31:49,277 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:31:49,277 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:31:49,500 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:31:49,747 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,747 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:31:49,749 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,750 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:31:49,750 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,751 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:31:49,752 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,752 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:31:49,753 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,753 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:31:49,754 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,754 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:31:49,755 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:49,757 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:31:49,757 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,757 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,757 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:31:49,760 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:31:49,761 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:31:49,762 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,762 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:31:49,762 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,762 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,762 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:31:49,766 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:31:49,766 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:31:49,767 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,767 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:31:49,768 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,768 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,768 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:31:49,772 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:31:49,772 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:31:49,773 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,773 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:31:49,773 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,774 Line:988 1值：false
 [DEBUG] 2017-12-24 15:31:49,774 Line:988 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,778 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:31:49,778 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:31:49,779 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:31:49,780 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,780 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:31:49,780 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,780 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,785 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:31:49,786 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,786 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,787 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:31:49,787 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,787 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,790 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:31:49,791 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,792 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,792 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:31:49,793 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,793 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,796 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:31:49,796 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,799 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,799 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:31:49,799 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,799 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,803 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:31:49,804 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,805 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,807 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,808 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,809 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:31:49,809 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,809 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,812 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:31:49,813 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,814 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,814 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:31:49,815 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,815 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:31:49,816 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,816 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,818 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:31:49,819 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,820 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,820 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:31:49,821 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,821 Line:988 1值：1
 [DEBUG] 2017-12-24 15:31:49,822 Line:988 2值：0
 [DEBUG] 2017-12-24 15:31:49,822 Line:988 3值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,829 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:31:49,830 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:31:49,830 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-24 15:31:49,830 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:31:49,832 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,832 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:31:49,832 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,832 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,843 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-12-24 15:31:49,843 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,844 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,845 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:31:49,845 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,845 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,847 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:31:49,848 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:31:49,849 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,849 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:31:49,850 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,850 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,854 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:31:49,854 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:31:49,856 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,856 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:31:49,856 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,857 Line:988 1值：
 [DEBUG] 2017-12-24 15:31:49,857 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:31:49,861 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:31:49,861 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:31:49,861 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:49,861 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,862 Line:988 2值：
 [DEBUG] 2017-12-24 15:31:49,862 Line:988 3值：
 [DEBUG] 2017-12-24 15:31:49,862 Line:988 4值：
 [DEBUG] 2017-12-24 15:31:49,865 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:31:49,866 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:31:49,867 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,867 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:31:49,868 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,869 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:31:49,870 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,870 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:31:49,873 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,873 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:31:49,875 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:49,876 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:31:49,876 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:31:49,877 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,881 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:31:49,881 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:31:49,882 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:31:49,882 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:31:49,882 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,882 Line:1157 3值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,888 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:31:49,888 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:31:49,888 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:31:49,889 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,889 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,894 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:31:49,894 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:31:49,895 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:31:49,895 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,898 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:31:49,898 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:31:49,898 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:31:49,899 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,903 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:31:49,904 Line:229 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:31:49,904 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:31:49,905 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:49,906 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:31:49,907 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,907 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,911 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:31:49,912 Line:408 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:31:49,912 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:31:49,913 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:49,913 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:31:49,914 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:49,915 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:31:49,915 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:49,915 Line:1270 add
 [DEBUG] 2017-12-24 15:31:50,003 Line:425 ************上述语句执行时间：89
 [DEBUG] 2017-12-24 15:31:50,004 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:31:50,005 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,006 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:31:50,006 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,018 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:31:50,019 Line:408 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 15:31:50,019 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:31:50,019 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,028 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:31:50,028 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:31:50,029 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:31:50,029 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,030 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:31:50,030 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,031 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:31:50,032 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,053 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:31:50,054 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,055 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:31:50,057 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,057 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:31:50,058 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,058 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:31:50,059 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,059 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:31:50,061 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,061 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:31:50,062 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,063 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:31:50,063 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,066 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:31:50,066 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:31:50,066 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:31:50,067 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,068 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:31:50,068 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,068 Line:1270 add
 [DEBUG] 2017-12-24 15:31:50,116 Line:425 ************上述语句执行时间：48
 [DEBUG] 2017-12-24 15:31:50,116 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:31:50,117 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,118 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:31:50,119 Line:1270 12
 [DEBUG] 2017-12-24 15:31:50,119 Line:1270 2017
 [DEBUG] 2017-12-24 15:31:50,119 Line:1270 12
 [DEBUG] 2017-12-24 15:31:50,119 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:31:50,120 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:31:50,120 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,120 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:31:50,121 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:31:50,121 Line:1270 BI1712240014
 [DEBUG] 2017-12-24 15:31:50,121 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:31:50,121 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:31:50,122 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:31:50,122 Line:1270 1
 [DEBUG] 2017-12-24 15:31:50,122 Line:1270 1
 [DEBUG] 2017-12-24 15:31:50,122 Line:1270 2017-12-24 15:31:49
 [DEBUG] 2017-12-24 15:31:50,123 Line:1270 2017-12-24 15:31:49
 [DEBUG] 2017-12-24 15:31:50,123 Line:1270 00001
 [DEBUG] 2017-12-24 15:31:50,123 Line:1270 
 [DEBUG] 2017-12-24 15:31:50,123 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:31:50,124 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:31:50,124 Line:1270 00003
 [DEBUG] 2017-12-24 15:31:50,124 Line:1270 1
 [DEBUG] 2017-12-24 15:31:50,124 Line:1270 00101
 [DEBUG] 2017-12-24 15:31:50,125 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:31:50,125 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:31:50,125 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:31:50,126 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:31:50,126 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:31:50,126 Line:1270 0
 [DEBUG] 2017-12-24 15:31:50,126 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:31:50,127 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:31:50,127 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:31:50,127 Line:1270 f_ref='18971718_1712241531491610002'
 [DEBUG] 2017-12-24 15:31:50,279 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'18971718_1712241531491610002','2017-12-24','BI1712240014','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:31:49','2017-12-24 15:31:49','00001' from tblBuyInStockDet where f_ref='18971718_1712241531491610002' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:31:50,279 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:31:50,279 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:31:50,279 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:31:50,279 Line:425 ************上述语句执行时间：161
 [DEBUG] 2017-12-24 15:31:50,280 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:31:50,280 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,281 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:31:50,281 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,282 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:31:50,282 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:50,284 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:31:50,284 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:31:50,285 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,285 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:31:50,286 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,286 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:31:50,287 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,287 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:31:50,287 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:50,287 Line:988 1值：1
 [DEBUG] 2017-12-24 15:31:50,287 Line:988 2值：0
 [DEBUG] 2017-12-24 15:31:50,288 Line:988 3值：1
 [DEBUG] 2017-12-24 15:31:50,288 Line:988 4值：0
 [DEBUG] 2017-12-24 15:31:50,289 Line:988 5值：0
 [DEBUG] 2017-12-24 15:31:50,290 Line:988 6值：1
 [DEBUG] 2017-12-24 15:31:50,291 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:31:50,291 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:31:50,292 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:31:50,292 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:31:50,292 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:31:50,293 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,344 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:31:50,347 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:31:50,353 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,360 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,366 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,372 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,379 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,385 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,396 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:31:50,409 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:31:50,504 Line:434 ************上述语句执行时间：211
 [DEBUG] 2017-12-24 15:31:50,505 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:31:50,505 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,506 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:31:50,506 Line:1270 118971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,506 Line:1270 00003
 [DEBUG] 2017-12-24 15:31:50,507 Line:1270 1
 [DEBUG] 2017-12-24 15:31:50,507 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:31:50,507 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=18971718_1712241531491610002@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:31:49@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:31:49@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240014@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:31:50,553 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('118971718_1712241531491610002',12,'00003','2017-12-24','12','2017','12','0','1','18971718_1712241531491610002','','1','0','1','1','2017-12-24 15:31:49','1','2017-12-24 15:31:49','00001','tblBuyInStock','BI1712240014','1','00101','0','')
 [DEBUG] 2017-12-24 15:31:50,554 Line:425 ************上述语句执行时间：48
 [DEBUG] 2017-12-24 15:31:50,554 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:31:50,555 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,556 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:31:50,556 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,557 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:31:50,557 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,558 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:31:50,558 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,558 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:31:50,559 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,559 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:31:50,560 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,560 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:31:50,560 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:50,561 Line:988 1值：1
 [DEBUG] 2017-12-24 15:31:50,561 Line:988 2值：0
 [DEBUG] 2017-12-24 15:31:50,561 Line:988 3值：1
 [DEBUG] 2017-12-24 15:31:50,561 Line:988 4值：0
 [DEBUG] 2017-12-24 15:31:50,561 Line:988 5值：0
 [DEBUG] 2017-12-24 15:31:50,561 Line:988 6值：0
 [DEBUG] 2017-12-24 15:31:50,563 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:31:50,563 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:31:50,563 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:31:50,563 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:31:50,563 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:31:50,564 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,564 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:31:50,565 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,565 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:31:50,565 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,566 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:31:50,566 Line:321 flag:false
 [DEBUG] 2017-12-24 15:31:50,566 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:31:50,567 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,567 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:31:50,567 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:31:50,567 Line:1270 add
 [DEBUG] 2017-12-24 15:31:50,573 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:31:50,573 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:31:50,573 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:31:50,574 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:31:50,575 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:31:50,575 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:31:50,575 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:31:50,575 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:31:50,576 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:31:50,576 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:31:50,576 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:31:50,577 Line:321 flag:true
 [DEBUG] 2017-12-24 15:31:50,584 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:31:51,666 Line:48 易站通接口连接失败: "reason":  "褰块姘ｏ拷娓st9527008ユ绱辨妤甸存濮锟
 [DEBUG] 2017-12-24 15:31:51,667 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:31:51,668 Line:443 ************上述语句执行时间：1091
 [DEBUG] 2017-12-24 15:31:53,228 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=18971718_1712241531491610002&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:31:53,230 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[18971718_1712241531491610002,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:31:53,231 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='18971718_1712241531491610002' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:31:53,352 Line:1525  select * from  tblBuyInStockDet where f_ref = '18971718_1712241531491610002' order by detOrderNo
 [DEBUG] 2017-12-24 15:31:53,359 Line:1525  select * from  tblBuyPayAccount where f_ref = '18971718_1712241531491610002' order by detOrderNo
 [DEBUG] 2017-12-24 15:31:58,879 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F6A5A1E8E9255D0EE17BB8C487E591A94
 [ERROR] 2017-12-24 15:31:58,954 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:32:16,396 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655FF7F4D4DAE3DC47230C98562ED3F03CD4
 [ERROR] 2017-12-24 15:32:16,453 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:32:22,399 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 15:32:31,809 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:32:31,812 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[18971718_1712241531491610002,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[false,];designId=[,];approveStatus=[transing,];id=[18971718_1712241531491610002,];parentCode=[,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];CurNeedPayAmt=[1,];InvoiceStatus=[0,];NeedPayAmt=[1,];BillNo=[BI1712240014,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[12,];PeriodMonth=[12,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[1,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[018971718_1712241531491610002,];AfterChangeAmt=[1,];CurAfterChangeAmt=[1,];CurChangeAmt=[0,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-12-24 15:31:49,];lastUpdateBy=[1,];lastUpdateTime=[2017-12-24 15:31:49,];createBy=[1,];createTime=[2017-12-24 15:31:49,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[00001,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[0,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[1,];tblBuyInStockDet_PayQty=[0,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0,];tblBuyInStockDet_PreferAmount=[0,];tblBuyInStockDet_detsId=[18971718_1712241531492640003,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:32:31,825 Line:1525  select * from  tblBuyInStockDet where f_ref = '18971718_1712241531491610002' order by detOrderNo
 [DEBUG] 2017-12-24 15:32:31,826 Line:1525  select * from  tblBuyPayAccount where f_ref = '18971718_1712241531491610002' order by detOrderNo
 [DEBUG] 2017-12-24 15:32:31,852 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,855 Line:313 exeCondition:tblBuyInStock_Delete :true
 [DEBUG] 2017-12-24 15:32:31,856 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,857 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:31,857 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,857 Line:1270 delete
 [DEBUG] 2017-12-24 15:32:31,858 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:31,858 Line:313 exeCondition:tblBuyInStock_Delete :'0' != '0'
 [DEBUG] 2017-12-24 15:32:31,859 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,860 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-12-24 15:32:31,861 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,861 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-12-24 15:32:31,861 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,862 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-12-24 15:32:31,863 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:31,863 Line:313 exeCondition:tblBuyInStock_Delete :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:32:31,865 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,866 Line:313 exeCondition:tblBuyInStock_Delete_One :"0"!= "0"&&"update"=="returnAuditing"
 [DEBUG] 2017-12-24 15:32:31,867 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,867 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,867 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,867 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,870 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:31,870 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,871 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,871 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-12-24 15:32:31,872 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,872 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,874 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:31,875 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,875 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,876 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,876 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,876 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,880 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:32:31,880 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,881 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,881 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,881 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,881 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,887 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:32:31,888 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,889 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,889 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-12-24 15:32:31,889 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,889 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,891 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:31,891 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,892 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,892 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,892 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,892 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,895 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:31,895 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,896 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,896 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,896 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,897 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,900 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:32:31,900 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,901 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,901 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,901 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,902 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,904 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:31,904 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,905 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,905 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,905 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,905 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,910 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:32:31,911 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,911 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,912 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:32:31,912 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,912 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,914 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:31,914 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,915 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,915 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-12-24 15:32:31,916 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,916 Line:988 1值：0
 [DEBUG] 2017-12-24 15:32:31,916 Line:988 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,918 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:31,919 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:32:31,919 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,920 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-12-24 15:32:31,920 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:31,920 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,922 Line:1025 query condition columnName:BuyOrderID----value:
 [DEBUG] 2017-12-24 15:32:31,922 Line:1025 query condition columnName:StockCode----value:00001
 [DEBUG] 2017-12-24 15:32:31,923 Line:1023 query condition columnName:NeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:31,923 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-12-24 15:32:31,923 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-12-24 15:32:31,924 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:32:31,925 Line:313 exeCondition:tblBuyInStock_Delete_One :'0' != '0'
 [DEBUG] 2017-12-24 15:32:31,926 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,926 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:32:31,927 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,927 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:31,927 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,928 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:32:31,928 Line:1270 1
 [DEBUG] 2017-12-24 15:32:31,962 Line:425 ************上述语句执行时间：35
 [DEBUG] 2017-12-24 15:32:31,962 Line:313 exeCondition:tblBuyInStock_Delete_One :'update' !='update'
 [DEBUG] 2017-12-24 15:32:31,963 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:31,963 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:32:31,964 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,964 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:31,964 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:31,965 Line:1270 delete
 [DEBUG] 2017-12-24 15:32:31,966 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:31,966 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:32:31,967 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,967 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:31,967 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'true'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='18971718_1712241531491610002'
 [DEBUG] 2017-12-24 15:32:31,967 Line:1270 proc_deleteComIni
 [DEBUG] 2017-12-24 15:32:31,968 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-12-24 15:32:31,982 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'true'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='18971718_1712241531491610002'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-12-24 15:32:31,982 Line:425 ************上述语句执行时间：15
 [DEBUG] 2017-12-24 15:32:31,983 Line:313 exeCondition:tblBuyInStock_Delete_One : 'true'=='true'
 [DEBUG] 2017-12-24 15:32:31,984 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:31,985 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delAccAndRefOper(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:31,985 Line:1270 0
 [DEBUG] 2017-12-24 15:32:31,985 Line:1270 update
 [DEBUG] 2017-12-24 15:32:31,985 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,013 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-24 15:32:32,013 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-24 15:32:32,014 Line:425 ************上述语句执行时间：29
 [DEBUG] 2017-12-24 15:32:32,014 Line:313 exeCondition:tblBuyInStock_Delete_One :'update' =='update'
 [DEBUG] 2017-12-24 15:32:32,015 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,015 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:update tblBuyInStock set CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:32:32,015 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,017 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,018 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:32:32,018 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-12-24 15:32:32,019 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,019 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:32:32,020 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,020 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:32,020 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,021 Line:1270 delete
 [DEBUG] 2017-12-24 15:32:32,022 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:32,024 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,CurTotalAmount=?,Attachment=?,CertificateNo=?,AfterChangeAmt=?,CurAfterChangeAmt=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-12-24 15:32:32,024 Line:5993 1:1.0
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 2:BI1712240014
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 3:2017-12-24
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 4:00003
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 5:00101
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 6:1
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 7:00001
 [DEBUG] 2017-12-24 15:32:32,025 Line:5993 8:3
 [DEBUG] 2017-12-24 15:32:32,026 Line:5993 9:0.0
 [DEBUG] 2017-12-24 15:32:32,026 Line:5993 10:0.0
 [DEBUG] 2017-12-24 15:32:32,026 Line:5993 11:0.0
 [DEBUG] 2017-12-24 15:32:32,026 Line:5993 12:0.0
 [DEBUG] 2017-12-24 15:32:32,026 Line:5993 13:0.0
 [DEBUG] 2017-12-24 15:32:32,026 Line:5993 14:
 [DEBUG] 2017-12-24 15:32:32,027 Line:5993 15:0.0
 [DEBUG] 2017-12-24 15:32:32,027 Line:5993 16:0.0
 [DEBUG] 2017-12-24 15:32:32,027 Line:5993 17:0.0
 [DEBUG] 2017-12-24 15:32:32,027 Line:5993 18:12
 [DEBUG] 2017-12-24 15:32:32,027 Line:5993 19:12
 [DEBUG] 2017-12-24 15:32:32,028 Line:5993 20:2017
 [DEBUG] 2017-12-24 15:32:32,028 Line:5993 21:
 [DEBUG] 2017-12-24 15:32:32,028 Line:5993 22:0.0
 [DEBUG] 2017-12-24 15:32:32,028 Line:5993 23:0.0
 [DEBUG] 2017-12-24 15:32:32,028 Line:5993 24:0.0
 [DEBUG] 2017-12-24 15:32:32,028 Line:5993 25:100.0
 [DEBUG] 2017-12-24 15:32:32,029 Line:5993 26:0.0
 [DEBUG] 2017-12-24 15:32:32,029 Line:5993 27:0.0
 [DEBUG] 2017-12-24 15:32:32,029 Line:5993 28:
 [DEBUG] 2017-12-24 15:32:32,029 Line:5993 29:1.0
 [DEBUG] 2017-12-24 15:32:32,029 Line:5993 30:1.0
 [DEBUG] 2017-12-24 15:32:32,029 Line:5993 31:1.0
 [DEBUG] 2017-12-24 15:32:32,030 Line:5993 32:0.0
 [DEBUG] 2017-12-24 15:32:32,030 Line:5993 33:1.0
 [DEBUG] 2017-12-24 15:32:32,030 Line:5993 34:
 [DEBUG] 2017-12-24 15:32:32,030 Line:5993 35:018971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,030 Line:5993 36:1.0
 [DEBUG] 2017-12-24 15:32:32,030 Line:5993 37:1.0
 [DEBUG] 2017-12-24 15:32:32,031 Line:5993 38:1
 [DEBUG] 2017-12-24 15:32:32,031 Line:5993 39:2017-12-24 15:32:31
 [DEBUG] 2017-12-24 15:32:32,038 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-12-24 15:32:32,040 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:32:32,040 Line:5853 1:18971718_1712241532320400009
 [DEBUG] 2017-12-24 15:32:32,041 Line:5853 2:18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,041 Line:5853 3:00001
 [DEBUG] 2017-12-24 15:32:32,041 Line:5853 4:
 [DEBUG] 2017-12-24 15:32:32,041 Line:5853 5:
 [DEBUG] 2017-12-24 15:32:32,041 Line:5853 6:
 [DEBUG] 2017-12-24 15:32:32,041 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 8:
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 9:
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 10:
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 11:
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 12:
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 13:
 [DEBUG] 2017-12-24 15:32:32,042 Line:5853 14:
 [DEBUG] 2017-12-24 15:32:32,043 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:32:32,043 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:32:32,043 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:32:32,043 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:32:32,043 Line:5853 19:0
 [DEBUG] 2017-12-24 15:32:32,044 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:32:32,044 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:32:32,044 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:32:32,044 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:32:32,044 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:32:32,045 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:32:32,045 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:32:32,045 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:32:32,045 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:32:32,045 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:32:32,046 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:32:32,046 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:32:32,046 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:32:32,046 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:32:32,047 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:32:32,047 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:32:32,047 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:32:32,047 Line:5853 37:
 [DEBUG] 2017-12-24 15:32:32,048 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:32:32,049 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:32:32,049 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:32:32,049 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:32:32,049 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:32:32,049 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:32:32,049 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:32:32,050 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:32:32,050 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:32:32,050 Line:5853 47:0
 [DEBUG] 2017-12-24 15:32:32,050 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:32:32,050 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 50:
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 51:0.0
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 52:1.0
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 54:0
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 55:0
 [DEBUG] 2017-12-24 15:32:32,051 Line:5853 56:
 [DEBUG] 2017-12-24 15:32:32,052 Line:5853 57:0.0
 [DEBUG] 2017-12-24 15:32:32,052 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:32:32,052 Line:5853 59:
 [DEBUG] 2017-12-24 15:32:32,052 Line:5853 60:0.0
 [DEBUG] 2017-12-24 15:32:32,052 Line:5853 61:00001
 [DEBUG] 2017-12-24 15:32:32,056 Line:5894  DELETE FROM  tblBuyPayAccount  WHERE f_ref = ? 
 [DEBUG] 2017-12-24 15:32:32,058 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:32:32,059 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,060 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:32:32,060 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,061 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:32:32,061 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,062 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:32:32,063 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,064 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:32:32,064 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,065 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:32:32,065 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,065 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:32:32,066 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,067 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:32:32,067 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,068 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,068 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:32:32,069 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:32,069 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:32,070 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,070 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:32:32,071 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,071 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,071 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:32:32,072 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:32,072 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:32,073 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,074 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:32:32,074 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,074 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,074 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:32:32,075 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,075 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:32,076 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,076 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:32:32,077 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,077 Line:988 1值：false
 [DEBUG] 2017-12-24 15:32:32,077 Line:988 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,078 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:32:32,079 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:32,080 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:32:32,081 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,081 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:32:32,081 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,081 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,082 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,082 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,083 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,084 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:32:32,084 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,084 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,085 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,085 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,086 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,086 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:32:32,086 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,086 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,087 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,087 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,088 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,088 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:32:32,089 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,089 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,089 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,090 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,091 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,091 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,092 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,093 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:32:32,093 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,094 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,095 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:32,095 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,096 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,097 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:32:32,098 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,098 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:32:32,098 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,098 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,099 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,100 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,101 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,101 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:32:32,101 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,101 Line:988 1值：1
 [DEBUG] 2017-12-24 15:32:32,101 Line:988 2值：0
 [DEBUG] 2017-12-24 15:32:32,102 Line:988 3值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,103 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:32:32,104 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:32:32,104 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:32,104 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:32:32,106 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,107 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:32:32,107 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,107 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,108 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,108 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,109 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,110 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:32:32,110 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,110 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,111 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,111 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:32,112 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,113 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:32:32,113 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,114 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,114 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,115 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:32:32,115 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,116 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:32:32,116 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,116 Line:988 1值：
 [DEBUG] 2017-12-24 15:32:32,116 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:32:32,117 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,117 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:32:32,117 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,118 Line:988 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,118 Line:988 2值：
 [DEBUG] 2017-12-24 15:32:32,118 Line:988 3值：
 [DEBUG] 2017-12-24 15:32:32,118 Line:988 4值：
 [DEBUG] 2017-12-24 15:32:32,119 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:32,119 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:32:32,120 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,120 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:32,121 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,121 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:32:32,122 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,122 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:32:32,123 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,123 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:32:32,124 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,124 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:32:32,125 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:32:32,125 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,125 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,126 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:32,126 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:32:32,126 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:32:32,126 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,126 Line:1157 3值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,127 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,127 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,127 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:32:32,128 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,128 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,128 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,129 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:32,129 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:32:32,129 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,129 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,130 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,130 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:32:32,130 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,130 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,131 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,131 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:32:32,132 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,132 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:32:32,132 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,132 Line:1157 2值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,133 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,133 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,133 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:32:32,134 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,134 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:32:32,135 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,135 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:32,135 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,136 Line:1270 add
 [DEBUG] 2017-12-24 15:32:32,136 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,137 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:32:32,137 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,138 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:32:32,138 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,138 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:32:32,138 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,139 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:32:32,139 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,139 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:32:32,139 Line:408 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 15:32:32,140 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:32:32,140 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,141 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:32:32,141 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,141 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:32:32,142 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,144 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:32:32,145 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,145 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:32:32,146 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,146 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:32:32,146 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,147 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:32:32,147 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,147 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:32:32,148 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,148 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:32,149 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,150 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:32:32,150 Line:1157 1值：18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,150 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:32:32,151 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,151 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:32,151 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,152 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:32,152 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,152 Line:1270 add
 [DEBUG] 2017-12-24 15:32:32,153 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:32,153 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:32:32,154 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,154 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:32:32,155 Line:1270 12
 [DEBUG] 2017-12-24 15:32:32,155 Line:1270 2017
 [DEBUG] 2017-12-24 15:32:32,155 Line:1270 12
 [DEBUG] 2017-12-24 15:32:32,155 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:32:32,155 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:32:32,155 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,156 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:32:32,156 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:32:32,156 Line:1270 BI1712240014
 [DEBUG] 2017-12-24 15:32:32,156 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:32:32,156 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:32:32,156 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 1
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 1
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 2017-12-24 15:31:49
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 2017-12-24 15:32:31
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 00001
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 
 [DEBUG] 2017-12-24 15:32:32,157 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:32:32,158 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:32:32,158 Line:1270 00003
 [DEBUG] 2017-12-24 15:32:32,158 Line:1270 1
 [DEBUG] 2017-12-24 15:32:32,158 Line:1270 00101
 [DEBUG] 2017-12-24 15:32:32,159 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:32:32,159 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:32:32,159 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:32:32,159 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:32:32,159 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:32:32,159 Line:1270 0
 [DEBUG] 2017-12-24 15:32:32,160 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:32:32,160 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:32:32,160 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:32:32,160 Line:1270 f_ref='18971718_1712241531491610002'
 [DEBUG] 2017-12-24 15:32:32,225 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'18971718_1712241531491610002','2017-12-24','BI1712240014','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:31:49','2017-12-24 15:32:31','00001' from tblBuyInStockDet where f_ref='18971718_1712241531491610002' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:32:32,225 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:32:32,226 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:32:32,226 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:32:32,226 Line:425 ************上述语句执行时间：72
 [DEBUG] 2017-12-24 15:32:32,226 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:32:32,227 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,227 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:32,229 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,230 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:32:32,230 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,231 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:32,231 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:32:32,232 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,232 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:32:32,233 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,233 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-12-24 15:32:32,234 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,234 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:32,235 Line:1270 zh_CN
 [DEBUG] 2017-12-24 15:32:32,235 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,235 Line:1270 00001
 [DEBUG] 2017-12-24 15:32:32,235 Line:1270 1
 [DEBUG] 2017-12-24 15:32:32,335 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='18971718_1712241531491610002') or goodPropHash in (select goodPropHash from tblStockDet where BillId='18971718_1712241531491610002') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and totalQty<0 and((periodYear=2017 and period>=12) or periodYear>2017)) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-12-24 15:32:32,335 Line:425 ************上述语句执行时间：101
 [DEBUG] 2017-12-24 15:32:32,335 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:32:32,335 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,336 Line:988 1值：1
 [DEBUG] 2017-12-24 15:32:32,336 Line:988 2值：0
 [DEBUG] 2017-12-24 15:32:32,336 Line:988 3值：1
 [DEBUG] 2017-12-24 15:32:32,336 Line:988 4值：0
 [DEBUG] 2017-12-24 15:32:32,336 Line:988 5值：0
 [DEBUG] 2017-12-24 15:32:32,336 Line:988 6值：1
 [DEBUG] 2017-12-24 15:32:32,337 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:32,337 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:32,337 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:32:32,338 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:32:32,338 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:32:32,339 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,340 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:32:32,341 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:32:32,342 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,343 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,343 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,344 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,345 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,346 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,348 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:32,349 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:32:32,355 Line:434 ************上述语句执行时间：16
 [DEBUG] 2017-12-24 15:32:32,355 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:32:32,356 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,357 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:32,357 Line:1270 118971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,357 Line:1270 00003
 [DEBUG] 2017-12-24 15:32:32,357 Line:1270 1
 [DEBUG] 2017-12-24 15:32:32,357 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:32:32,357 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=18971718_1712241531491610002@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:31:49@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:32:31@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240014@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:32:32,360 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('118971718_1712241531491610002',12,'00003','2017-12-24','12','2017','12','0','1','18971718_1712241531491610002','','1','0','1','1','2017-12-24 15:31:49','1','2017-12-24 15:32:31','00001','tblBuyInStock','BI1712240014','1','00101','0','')
 [DEBUG] 2017-12-24 15:32:32,360 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:32:32,360 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:32:32,362 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,362 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:32:32,363 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,363 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:32:32,364 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,364 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:32:32,365 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,365 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:32:32,366 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,366 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:32:32,366 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,367 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:32:32,367 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,367 Line:988 1值：1
 [DEBUG] 2017-12-24 15:32:32,367 Line:988 2值：0
 [DEBUG] 2017-12-24 15:32:32,367 Line:988 3值：1
 [DEBUG] 2017-12-24 15:32:32,368 Line:988 4值：0
 [DEBUG] 2017-12-24 15:32:32,368 Line:988 5值：0
 [DEBUG] 2017-12-24 15:32:32,368 Line:988 6值：0
 [DEBUG] 2017-12-24 15:32:32,368 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:32,369 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:32:32,369 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:32:32,369 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:32,369 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:32:32,370 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,370 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:32:32,371 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,371 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:32:32,371 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,372 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:32:32,372 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:32,372 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:32,373 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,373 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:32,374 Line:1270 18971718_1712241531491610002
 [DEBUG] 2017-12-24 15:32:32,374 Line:1270 add
 [DEBUG] 2017-12-24 15:32:32,375 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:32,376 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:32:32,376 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:32,376 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:32:32,377 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:32:32,377 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:32:32,377 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:32:32,377 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:32:32,377 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:32:32,378 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:32,378 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:32:32,379 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:32,379 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:32:32,401 Line:48 易站通接口连接失败: "reason":  "褰块姘ｏ拷娓st9527008ユ绱辨妤甸存濮锟
 [DEBUG] 2017-12-24 15:32:32,402 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:32:32,402 Line:443 ************上述语句执行时间：23
 [DEBUG] 2017-12-24 15:32:33,875 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=18971718_1712241531491610002&parentCode=null&f_brother=&draftQuery=&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:32:33,877 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[18971718_1712241531491610002,];parentCode=[null,];f_brother=[,];draftQuery=[,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:32:33,878 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='18971718_1712241531491610002' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:32:33,893 Line:1525  select * from  tblBuyInStockDet where f_ref = '18971718_1712241531491610002' order by detOrderNo
 [DEBUG] 2017-12-24 15:32:33,904 Line:1525  select * from  tblBuyPayAccount where f_ref = '18971718_1712241531491610002' order by detOrderNo
 [DEBUG] 2017-12-24 15:32:36,185 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:32:36,186 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:32:37,574 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:32:37,574 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:32:37,599 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:32:37,599 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:32:37,600 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:32:37,600 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:32:37,600 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 15:32:37,610 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:32:39,651 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:32:39,651 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:32:39,673 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:32:39,673 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:32:39,674 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:32:39,674 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:32:39,675 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 15:32:39,678 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:32:41,982 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 15:32:41,982 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 15:32:42,012 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:32:42,013 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:32:42,013 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:32:42,013 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:32:42,014 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 15:32:42,021 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:32:46,003 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:32:46,005 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240015,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:32:46,006 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:32:46,010 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:32:46,011 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:32:46,012 Line:5853 2:
 [DEBUG] 2017-12-24 15:32:46,012 Line:5853 3:18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 7:0
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 9:BI1712240015
 [DEBUG] 2017-12-24 15:32:46,013 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 13:1
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 15:3
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:32:46,014 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:32:46,015 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:32:46,015 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:32:46,015 Line:5853 20:
 [DEBUG] 2017-12-24 15:32:46,015 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:32:46,015 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:32:46,015 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 24:
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 28:
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 29:12
 [DEBUG] 2017-12-24 15:32:46,016 Line:5853 30:12
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 32:
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 36:
 [DEBUG] 2017-12-24 15:32:46,017 Line:5853 37:
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 38:
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 41:
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 42:
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:32:46,018 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:32:46,019 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:32:46,019 Line:5853 46:
 [DEBUG] 2017-12-24 15:32:46,019 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:32:46,019 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:32:46,019 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:32:46,019 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 52:
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 53:
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:32:46,020 Line:5853 57:0
 [DEBUG] 2017-12-24 15:32:46,021 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:32:46,021 Line:5853 59:0
 [DEBUG] 2017-12-24 15:32:46,021 Line:5853 60:2017-12-24 15:32:46
 [DEBUG] 2017-12-24 15:32:46,021 Line:5853 61:1
 [DEBUG] 2017-12-24 15:32:46,021 Line:5853 62:2017-12-24 15:32:46
 [DEBUG] 2017-12-24 15:32:46,021 Line:5853 63:1
 [DEBUG] 2017-12-24 15:32:46,022 Line:5853 64:2017-12-24 15:32:46
 [DEBUG] 2017-12-24 15:32:46,022 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:32:46,023 Line:5853 1:18971718_1712241532460220014
 [DEBUG] 2017-12-24 15:32:46,023 Line:5853 2:18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,023 Line:5853 3:
 [DEBUG] 2017-12-24 15:32:46,023 Line:5853 4:
 [DEBUG] 2017-12-24 15:32:46,023 Line:5853 5:
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 6:
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 8:
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 9:
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 10:
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 11:
 [DEBUG] 2017-12-24 15:32:46,024 Line:5853 12:
 [DEBUG] 2017-12-24 15:32:46,025 Line:5853 13:
 [DEBUG] 2017-12-24 15:32:46,025 Line:5853 14:
 [DEBUG] 2017-12-24 15:32:46,025 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:32:46,025 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:32:46,026 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:32:46,026 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:32:46,026 Line:5853 19:0
 [DEBUG] 2017-12-24 15:32:46,026 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:32:46,026 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:32:46,027 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:32:46,027 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:32:46,027 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:32:46,027 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:32:46,027 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:32:46,027 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:32:46,028 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:32:46,029 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:32:46,029 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:32:46,029 Line:5853 37:
 [DEBUG] 2017-12-24 15:32:46,029 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:32:46,029 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:32:46,029 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:32:46,030 Line:5853 47:0
 [DEBUG] 2017-12-24 15:32:46,031 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:32:46,031 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:32:46,031 Line:5853 50:0
 [DEBUG] 2017-12-24 15:32:46,031 Line:5853 51:
 [DEBUG] 2017-12-24 15:32:46,031 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:32:46,031 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 55:0
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 56:0
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 57:
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:32:46,032 Line:5853 60:
 [DEBUG] 2017-12-24 15:32:46,033 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:32:46,033 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:32:46,034 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:32:46,035 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,035 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:32:46,036 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,036 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:32:46,037 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,037 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:32:46,037 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,038 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:32:46,038 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,038 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:32:46,039 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,039 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:32:46,040 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,040 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:32:46,041 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,041 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,041 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:32:46,042 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:46,042 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:46,043 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,043 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:32:46,043 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,044 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,044 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:32:46,044 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,045 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:46,045 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,046 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:32:46,046 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,046 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,046 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:32:46,047 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,047 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:46,047 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,048 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:32:46,048 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,048 Line:988 1值：false
 [DEBUG] 2017-12-24 15:32:46,048 Line:988 2值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,049 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:32:46,049 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,049 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:32:46,050 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,050 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:32:46,050 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,050 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,051 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,051 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,052 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,052 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:32:46,053 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,053 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,053 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,054 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,054 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,055 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:32:46,055 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,055 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,056 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,056 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,057 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,057 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:32:46,057 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,057 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,058 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,058 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,059 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,060 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,061 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,062 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:32:46,062 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,062 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,063 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,063 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,064 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,064 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:32:46,065 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,065 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:32:46,065 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,065 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,066 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,066 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,067 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,067 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:32:46,068 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,068 Line:988 1值：1
 [DEBUG] 2017-12-24 15:32:46,068 Line:988 2值：0
 [DEBUG] 2017-12-24 15:32:46,068 Line:988 3值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,069 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:32:46,069 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:32:46,069 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:46,070 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:32:46,070 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,071 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:32:46,071 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,071 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,072 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,072 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,073 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,073 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:32:46,073 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,074 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,074 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,075 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:32:46,077 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,077 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:32:46,077 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,077 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,078 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,078 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:32:46,079 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,079 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:32:46,079 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,079 Line:988 1值：
 [DEBUG] 2017-12-24 15:32:46,079 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:32:46,080 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,080 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:32:46,080 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,081 Line:988 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,081 Line:988 2值：
 [DEBUG] 2017-12-24 15:32:46,081 Line:988 3值：
 [DEBUG] 2017-12-24 15:32:46,081 Line:988 4值：
 [DEBUG] 2017-12-24 15:32:46,082 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:46,082 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:32:46,083 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,083 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:32:46,084 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,084 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:32:46,085 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,085 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:32:46,086 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,086 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:32:46,086 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,087 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:32:46,087 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:32:46,087 Line:1157 2值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,088 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,088 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,088 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:32:46,088 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:32:46,089 Line:1157 2值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,089 Line:1157 3值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,089 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,089 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,090 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:32:46,090 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,090 Line:1157 2值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,091 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,091 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,091 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:32:46,092 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,092 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,092 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,092 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:32:46,093 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,093 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,093 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,093 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:32:46,094 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,094 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:32:46,095 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,095 Line:1157 2值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,095 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,095 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,096 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:32:46,096 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,096 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:32:46,097 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,097 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:46,097 Line:1270 18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,098 Line:1270 add
 [DEBUG] 2017-12-24 15:32:46,098 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,099 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:32:46,099 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,100 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:32:46,100 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,100 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:32:46,101 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,101 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:32:46,101 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,101 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:32:46,102 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,102 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:32:46,102 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,103 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:32:46,103 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,104 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:32:46,105 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,106 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:32:46,107 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,108 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:32:46,108 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,109 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:32:46,109 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,110 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:32:46,110 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,110 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:32:46,111 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,111 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:46,112 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,112 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:32:46,112 Line:1157 1值：18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,113 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:32:46,113 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,113 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:46,114 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,114 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:46,114 Line:1270 18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,115 Line:1270 add
 [DEBUG] 2017-12-24 15:32:46,116 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:32:46,116 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:32:46,117 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,118 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:32:46,118 Line:1270 12
 [DEBUG] 2017-12-24 15:32:46,118 Line:1270 2017
 [DEBUG] 2017-12-24 15:32:46,119 Line:1270 12
 [DEBUG] 2017-12-24 15:32:46,119 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:32:46,120 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:32:46,120 Line:1270 18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,120 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:32:46,121 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:32:46,121 Line:1270 BI1712240015
 [DEBUG] 2017-12-24 15:32:46,121 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:32:46,121 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:32:46,121 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:32:46,121 Line:1270 1
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 1
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 2017-12-24 15:32:46
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 2017-12-24 15:32:46
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 00001
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:32:46,122 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:32:46,123 Line:1270 00003
 [DEBUG] 2017-12-24 15:32:46,123 Line:1270 1
 [DEBUG] 2017-12-24 15:32:46,123 Line:1270 00101
 [DEBUG] 2017-12-24 15:32:46,123 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:32:46,123 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:32:46,123 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:32:46,124 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:32:46,124 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:32:46,124 Line:1270 0
 [DEBUG] 2017-12-24 15:32:46,124 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:32:46,124 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:32:46,124 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:32:46,125 Line:1270 f_ref='18971718_1712241532460090013'
 [DEBUG] 2017-12-24 15:32:46,131 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'18971718_1712241532460090013','2017-12-24','BI1712240015','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:32:46','2017-12-24 15:32:46','00001' from tblBuyInStockDet where f_ref='18971718_1712241532460090013' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:32:46,132 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:32:46,132 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:32:46,132 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:32:46,132 Line:425 ************上述语句执行时间：14
 [DEBUG] 2017-12-24 15:32:46,132 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:32:46,133 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,133 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:46,134 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,134 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:32:46,135 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,135 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:32:46,135 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:32:46,136 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,136 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:32:46,137 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,137 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:32:46,138 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,138 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:32:46,138 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,138 Line:988 1值：1
 [DEBUG] 2017-12-24 15:32:46,139 Line:988 2值：0
 [DEBUG] 2017-12-24 15:32:46,139 Line:988 3值：1
 [DEBUG] 2017-12-24 15:32:46,139 Line:988 4值：0
 [DEBUG] 2017-12-24 15:32:46,139 Line:988 5值：0
 [DEBUG] 2017-12-24 15:32:46,139 Line:988 6值：1
 [DEBUG] 2017-12-24 15:32:46,140 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:46,140 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:46,140 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:32:46,140 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:46,140 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:32:46,141 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,142 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:32:46,143 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:32:46,144 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,145 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,145 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,146 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,146 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,147 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,148 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:32:46,149 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:32:46,155 Line:434 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 15:32:46,156 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:32:46,156 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,157 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:46,157 Line:1270 118971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,157 Line:1270 00003
 [DEBUG] 2017-12-24 15:32:46,158 Line:1270 1
 [DEBUG] 2017-12-24 15:32:46,158 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:32:46,158 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=18971718_1712241532460090013@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:32:46@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:32:46@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240015@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:32:46,160 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('118971718_1712241532460090013',13,'00003','2017-12-24','12','2017','12','0','1','18971718_1712241532460090013','','1','0','1','1','2017-12-24 15:32:46','1','2017-12-24 15:32:46','00001','tblBuyInStock','BI1712240015','1','00101','0','')
 [DEBUG] 2017-12-24 15:32:46,160 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:32:46,160 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:32:46,161 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,161 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:32:46,162 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,162 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:32:46,163 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,163 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:32:46,164 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,164 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:32:46,165 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,165 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:32:46,166 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,166 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:32:46,166 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,166 Line:988 1值：1
 [DEBUG] 2017-12-24 15:32:46,167 Line:988 2值：0
 [DEBUG] 2017-12-24 15:32:46,167 Line:988 3值：1
 [DEBUG] 2017-12-24 15:32:46,167 Line:988 4值：0
 [DEBUG] 2017-12-24 15:32:46,167 Line:988 5值：0
 [DEBUG] 2017-12-24 15:32:46,167 Line:988 6值：0
 [DEBUG] 2017-12-24 15:32:46,168 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:32:46,168 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:32:46,168 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:32:46,168 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:46,169 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:32:46,169 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,169 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:32:46,170 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,170 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:32:46,171 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,171 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:32:46,172 Line:321 flag:false
 [DEBUG] 2017-12-24 15:32:46,172 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:32:46,172 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,173 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:32:46,173 Line:1270 18971718_1712241532460090013
 [DEBUG] 2017-12-24 15:32:46,173 Line:1270 add
 [DEBUG] 2017-12-24 15:32:46,174 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:32:46,174 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:32:46,175 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:32:46,175 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:32:46,175 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:32:46,175 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:32:46,176 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:32:46,176 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:32:46,176 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:32:46,176 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:32:46,176 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:32:46,177 Line:321 flag:true
 [DEBUG] 2017-12-24 15:32:46,178 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:32:46,193 Line:48 易站通接口连接失败: "reason":  "褰块姘ｏ拷娓st9527008ユ绱辨妤甸存濮锟
 [DEBUG] 2017-12-24 15:32:46,194 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:32:46,194 Line:443 ************上述语句执行时间：17
 [DEBUG] 2017-12-24 15:32:47,651 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=18971718_1712241532460090013&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:32:47,653 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[18971718_1712241532460090013,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:32:47,654 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='18971718_1712241532460090013' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:32:47,696 Line:1525  select * from  tblBuyInStockDet where f_ref = '18971718_1712241532460090013' order by detOrderNo
 [DEBUG] 2017-12-24 15:32:47,698 Line:1525  select * from  tblBuyPayAccount where f_ref = '18971718_1712241532460090013' order by detOrderNo
 [DEBUG] 2017-12-24 15:33:00,470 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F83DD302221CDCC358AD219FA989EC390
 [ERROR] 2017-12-24 15:33:00,513 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:33:07,829 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:33:07,830 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:33:09,662 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:33:09,662 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:33:09,688 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:33:09,688 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:33:09,688 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:33:09,688 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:33:09,689 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 15:33:09,693 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:33:11,606 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:33:11,606 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:33:11,628 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:33:11,628 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:33:11,628 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:33:11,629 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 15:33:11,629 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:33:11,631 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:33:13,596 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 15:33:13,597 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 15:33:13,624 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:33:13,624 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:33:13,624 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:33:13,625 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:33:13,625 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 15:33:13,633 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:33:16,958 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:33:16,959 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240016,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:33:16,960 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:33:16,964 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:33:16,964 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:33:16,964 Line:5853 2:
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 3:18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 7:0
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:33:16,965 Line:5853 9:BI1712240016
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 13:1
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 15:3
 [DEBUG] 2017-12-24 15:33:16,966 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:33:16,967 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:33:16,967 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:33:16,967 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:33:16,967 Line:5853 20:
 [DEBUG] 2017-12-24 15:33:16,968 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:33:16,969 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:33:16,969 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:33:16,969 Line:5853 24:
 [DEBUG] 2017-12-24 15:33:16,969 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:33:16,970 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:33:16,970 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:33:16,970 Line:5853 28:
 [DEBUG] 2017-12-24 15:33:16,970 Line:5853 29:12
 [DEBUG] 2017-12-24 15:33:16,971 Line:5853 30:12
 [DEBUG] 2017-12-24 15:33:16,971 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:33:16,971 Line:5853 32:
 [DEBUG] 2017-12-24 15:33:16,971 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 36:
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 37:
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 38:
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:33:16,972 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:33:16,973 Line:5853 41:
 [DEBUG] 2017-12-24 15:33:16,973 Line:5853 42:
 [DEBUG] 2017-12-24 15:33:16,973 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:33:16,973 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:33:16,973 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:33:16,973 Line:5853 46:
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 52:
 [DEBUG] 2017-12-24 15:33:16,974 Line:5853 53:
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 57:0
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 59:0
 [DEBUG] 2017-12-24 15:33:16,975 Line:5853 60:2017-12-24 15:33:16
 [DEBUG] 2017-12-24 15:33:16,976 Line:5853 61:1
 [DEBUG] 2017-12-24 15:33:16,976 Line:5853 62:2017-12-24 15:33:16
 [DEBUG] 2017-12-24 15:33:16,976 Line:5853 63:1
 [DEBUG] 2017-12-24 15:33:16,976 Line:5853 64:2017-12-24 15:33:16
 [DEBUG] 2017-12-24 15:33:16,977 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:33:16,977 Line:5853 1:18971718_1712241533169770020
 [DEBUG] 2017-12-24 15:33:16,977 Line:5853 2:18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:16,977 Line:5853 3:
 [DEBUG] 2017-12-24 15:33:16,977 Line:5853 4:
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 5:
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 6:
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 8:
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 9:
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 10:
 [DEBUG] 2017-12-24 15:33:16,978 Line:5853 11:
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 12:
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 13:
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 14:
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:33:16,979 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:33:16,980 Line:5853 19:0
 [DEBUG] 2017-12-24 15:33:16,980 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:33:16,980 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:33:16,980 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:33:16,980 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:33:16,980 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:33:16,981 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 37:
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:33:16,982 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:33:16,983 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:33:16,984 Line:5853 47:0
 [DEBUG] 2017-12-24 15:33:16,984 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:33:16,984 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:33:16,984 Line:5853 50:0
 [DEBUG] 2017-12-24 15:33:16,985 Line:5853 51:
 [DEBUG] 2017-12-24 15:33:16,985 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:33:16,985 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:33:16,985 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:33:16,985 Line:5853 55:0
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 56:0
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 57:
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 60:
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:33:16,986 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:33:16,988 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:33:16,989 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:16,989 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:33:16,990 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:16,990 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:33:16,990 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:16,991 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:33:16,991 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:16,991 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:33:16,992 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:16,992 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:33:16,993 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:16,993 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:33:16,993 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:16,994 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:33:16,994 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:16,995 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:16,995 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:33:16,998 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:33:16,999 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:33:16,999 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,000 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:33:17,000 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,000 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,000 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:33:17,004 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:33:17,004 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:33:17,005 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,005 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:33:17,005 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,005 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,005 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:33:17,009 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:33:17,009 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:33:17,010 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,010 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:33:17,010 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,010 Line:988 1值：false
 [DEBUG] 2017-12-24 15:33:17,011 Line:988 2值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,011 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:33:17,012 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:33:17,012 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:33:17,013 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,013 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:33:17,013 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,013 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,017 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:33:17,017 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,018 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,018 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:33:17,018 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,019 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,023 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:33:17,023 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,024 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,024 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:33:17,024 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,025 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,028 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:33:17,029 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,029 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,029 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:33:17,030 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,030 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,035 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:33:17,035 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,036 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,036 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,037 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,037 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:33:17,037 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,037 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,043 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-24 15:33:17,043 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,044 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,044 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:33:17,045 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,045 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:33:17,045 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,045 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,049 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:33:17,049 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,050 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,050 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:33:17,050 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,051 Line:988 1值：1
 [DEBUG] 2017-12-24 15:33:17,051 Line:988 2值：0
 [DEBUG] 2017-12-24 15:33:17,051 Line:988 3值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,058 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:33:17,058 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:33:17,059 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-24 15:33:17,059 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:33:17,060 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,060 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:33:17,060 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,061 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,061 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:33:17,061 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,062 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,063 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:33:17,063 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,063 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,067 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:33:17,067 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:33:17,068 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,068 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:33:17,069 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,069 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,069 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:33:17,070 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:33:17,070 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,070 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:33:17,071 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,071 Line:988 1值：
 [DEBUG] 2017-12-24 15:33:17,071 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:33:17,072 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:33:17,073 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:33:17,073 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,073 Line:988 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,074 Line:988 2值：
 [DEBUG] 2017-12-24 15:33:17,074 Line:988 3值：
 [DEBUG] 2017-12-24 15:33:17,075 Line:988 4值：
 [DEBUG] 2017-12-24 15:33:17,076 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:33:17,076 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:33:17,077 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,078 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:33:17,078 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,079 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:33:17,079 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,079 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:33:17,080 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,080 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:33:17,081 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,082 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:33:17,082 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:33:17,082 Line:1157 2值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,086 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,086 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:33:17,086 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:33:17,086 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:33:17,087 Line:1157 2值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,087 Line:1157 3值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,093 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,094 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 15:33:17,094 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:33:17,094 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,094 Line:1157 2值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,098 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,098 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:33:17,098 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:33:17,098 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,102 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,102 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:33:17,102 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:33:17,103 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,106 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,106 Line:229 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:33:17,106 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:33:17,107 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,107 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:33:17,108 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,108 Line:1157 2值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,114 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,115 Line:408 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 15:33:17,115 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:33:17,115 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,116 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:33:17,116 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,117 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:33:17,117 Line:1270 18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,117 Line:1270 add
 [DEBUG] 2017-12-24 15:33:17,118 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:33:17,118 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:33:17,119 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,119 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:33:17,119 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,120 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:33:17,120 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:33:17,120 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:33:17,120 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,121 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:33:17,121 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:33:17,121 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:33:17,122 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,122 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:33:17,123 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,123 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:33:17,124 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,125 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:33:17,126 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,126 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:33:17,127 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,127 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:33:17,128 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,128 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:33:17,129 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,129 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:33:17,129 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,130 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:33:17,130 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,131 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:33:17,131 Line:1157 1值：18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,135 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:33:17,135 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:33:17,135 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:33:17,137 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,137 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:33:17,138 Line:1270 18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,138 Line:1270 add
 [DEBUG] 2017-12-24 15:33:17,139 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:33:17,139 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:33:17,140 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,141 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:33:17,141 Line:1270 12
 [DEBUG] 2017-12-24 15:33:17,142 Line:1270 2017
 [DEBUG] 2017-12-24 15:33:17,142 Line:1270 12
 [DEBUG] 2017-12-24 15:33:17,142 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:33:17,142 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:33:17,143 Line:1270 18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,143 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:33:17,143 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:33:17,143 Line:1270 BI1712240016
 [DEBUG] 2017-12-24 15:33:17,144 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:33:17,144 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:33:17,144 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:33:17,144 Line:1270 1
 [DEBUG] 2017-12-24 15:33:17,144 Line:1270 1
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 2017-12-24 15:33:16
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 2017-12-24 15:33:16
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 00001
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:33:17,145 Line:1270 00003
 [DEBUG] 2017-12-24 15:33:17,146 Line:1270 1
 [DEBUG] 2017-12-24 15:33:17,146 Line:1270 00101
 [DEBUG] 2017-12-24 15:33:17,146 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:33:17,146 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:33:17,146 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:33:17,146 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:33:17,147 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:33:17,147 Line:1270 0
 [DEBUG] 2017-12-24 15:33:17,147 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:33:17,147 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:33:17,147 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:33:17,147 Line:1270 f_ref='18971718_1712241533169610019'
 [DEBUG] 2017-12-24 15:33:17,154 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'18971718_1712241533169610019','2017-12-24','BI1712240016','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:33:16','2017-12-24 15:33:16','00001' from tblBuyInStockDet where f_ref='18971718_1712241533169610019' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:33:17,155 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:33:17,155 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:33:17,156 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:33:17,156 Line:425 ************上述语句执行时间：15
 [DEBUG] 2017-12-24 15:33:17,156 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:33:17,157 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,157 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:33:17,158 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,159 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:33:17,159 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,160 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:33:17,160 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:33:17,161 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,161 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:33:17,162 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,162 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:33:17,163 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,163 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:33:17,163 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,163 Line:988 1值：1
 [DEBUG] 2017-12-24 15:33:17,164 Line:988 2值：0
 [DEBUG] 2017-12-24 15:33:17,164 Line:988 3值：1
 [DEBUG] 2017-12-24 15:33:17,164 Line:988 4值：0
 [DEBUG] 2017-12-24 15:33:17,164 Line:988 5值：0
 [DEBUG] 2017-12-24 15:33:17,164 Line:988 6值：1
 [DEBUG] 2017-12-24 15:33:17,165 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:33:17,165 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:33:17,165 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:33:17,165 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:33:17,166 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:33:17,166 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,168 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:33:17,171 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:33:17,176 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,181 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,185 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,189 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,189 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,195 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,200 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:33:17,206 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:33:17,218 Line:434 ************上述语句执行时间：51
 [DEBUG] 2017-12-24 15:33:17,219 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:33:17,219 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,220 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:33:17,220 Line:1270 118971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,220 Line:1270 00003
 [DEBUG] 2017-12-24 15:33:17,220 Line:1270 1
 [DEBUG] 2017-12-24 15:33:17,221 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:33:17,221 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=18971718_1712241533169610019@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:33:16@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:33:16@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240016@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:33:17,223 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('118971718_1712241533169610019',14,'00003','2017-12-24','12','2017','12','0','1','18971718_1712241533169610019','','1','0','1','1','2017-12-24 15:33:16','1','2017-12-24 15:33:16','00001','tblBuyInStock','BI1712240016','1','00101','0','')
 [DEBUG] 2017-12-24 15:33:17,223 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:33:17,223 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:33:17,224 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,224 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:33:17,225 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,225 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:33:17,226 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,226 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:33:17,226 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,227 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:33:17,227 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,227 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:33:17,228 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,228 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:33:17,228 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,229 Line:988 1值：1
 [DEBUG] 2017-12-24 15:33:17,229 Line:988 2值：0
 [DEBUG] 2017-12-24 15:33:17,229 Line:988 3值：1
 [DEBUG] 2017-12-24 15:33:17,229 Line:988 4值：0
 [DEBUG] 2017-12-24 15:33:17,229 Line:988 5值：0
 [DEBUG] 2017-12-24 15:33:17,229 Line:988 6值：0
 [DEBUG] 2017-12-24 15:33:17,230 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:33:17,230 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:33:17,230 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:33:17,231 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:33:17,231 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:33:17,231 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,232 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:33:17,232 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,232 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:33:17,233 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,233 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:33:17,234 Line:321 flag:false
 [DEBUG] 2017-12-24 15:33:17,234 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:33:17,235 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,235 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:33:17,235 Line:1270 18971718_1712241533169610019
 [DEBUG] 2017-12-24 15:33:17,235 Line:1270 add
 [DEBUG] 2017-12-24 15:33:17,236 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:33:17,237 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:33:17,237 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:33:17,237 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:33:17,238 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:33:17,238 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:33:17,238 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:33:17,238 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:33:17,238 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:33:17,238 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:33:17,238 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:33:17,239 Line:321 flag:true
 [DEBUG] 2017-12-24 15:33:17,239 Line:372 ---error，返回信息：123url=
 [ERROR] 2017-12-24 15:33:17,240 Line:3868 DynDBManager After add defineSql Error code = -2102 Msg=123
 [DEBUG] 2017-12-24 15:33:44,117 Line:73 --------Destroy Config Refresh Thread---------------
 [DEBUG] 2017-12-24 15:33:44,118 Line:105 --------Destroy Hibernate---------------
 [INFO ] 2017-12-24 15:33:44,125 Line:127 测试执行路径
 java.lang.Exception
	at com.menyi.web.util.BaseFilter.destroy(BaseFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:313)
	at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:4890)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5711)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1591)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1580)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[INFO ] 2017-12-24 15:33:56,845 Line:206 系统开始启动，最大内存：1792;目前总内存：305;目前空闲内存：212
 [INFO ] 2017-12-24 15:33:57,037 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 15:34:01,758 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 15:34:01,894 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 15:34:01,896 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 15:34:01,897 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 15:34:01,898 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 15:34:01,905 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 15:34:01,907 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 15:34:02,686 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 15:34:02,705 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 15:34:02,729 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 15:34:02,740 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 15:34:03,437 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 15:34:03,438 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 15:34:03,812 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 15:34:03,882 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 15:34:04,648 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 15:34:04,670 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 15:34:04,672 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 15:34:04,679 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 15:34:04,692 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 15:34:04,694 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 15:34:04,716 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 15:34:06,839 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 15:34:07,158 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 15:34:07,173 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 15:34:07,227 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-24 15:34:07,602 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 15:34:07,602 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 15:34:08,858 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 15:34:08,858 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 15:34:18,328 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:34:18,330 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 15:34:18,330 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 15:34:18,812 Line:5227 GlobalsTool.js 生成js 时间71:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:34:18,869 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:34:18,870 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:34:19,096 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514100859092
 [DEBUG] 2017-12-24 15:34:19,117 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514100859092,];
 [DEBUG] 2017-12-24 15:34:19,195 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:34:19,195 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:34:20,686 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514100860684
 [DEBUG] 2017-12-24 15:34:20,687 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514100860684,];
 [DEBUG] 2017-12-24 15:34:20,753 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514100860751
 [DEBUG] 2017-12-24 15:34:20,753 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514100860751,];
 [DEBUG] 2017-12-24 15:34:20,827 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 15:34:20,827 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 15:34:20,867 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 15:34:20,880 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 15:34:20,978 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:34:20,978 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:34:20,987 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:34:21,228 Line:5227 GlobalsTool.js 生成js 时间32:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:34:21,393 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 15:34:21,393 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 15:34:21,393 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:34:21,394 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 15:34:21,395 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:34:21,413 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 15:34:21,413 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:34:21,414 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:34:21,424 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 15:34:21,425 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:34:21,425 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:34:21,433 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 15:34:21,434 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:34:21,435 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:34:24,004 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 15:34:24,005 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 15:34:24,005 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-24 15:34:24,517 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-24 15:34:24,527 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-24 15:34:24,532 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-24 15:34:24,538 Line:1391 整理数据：6
 [DEBUG] 2017-12-24 15:34:24,866 Line:5227 GlobalsTool.js 生成js 时间85:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:34:24,970 Line:5227 GlobalsTool.js 生成js 时间104:/js/gen/defineList.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 15:34:26,386 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:34:26,388 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:34:26,657 Line:5227 GlobalsTool.js 生成js 时间14:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:34:27,460 Line:5227 GlobalsTool.js 生成js 时间803:/js/gen/define.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-24 15:34:29,653 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:34:29,653 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:34:29,740 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-24&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:34:29,740 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:34:29,740 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-24,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:34:29,741 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:34:29,742 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-24 15:34:29,782 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-24'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:34:29,954 Line:5227 GlobalsTool.js 生成js 时间29:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:34:29,984 Line:5227 GlobalsTool.js 生成js 时间30:/js/gen/popupPage.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:34:32,869 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-24 15:34:32,871 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-24 15:34:32,901 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:34:32,901 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:34:32,901 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:34:32,902 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:34:32,902 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-24 15:34:32,905 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:34:35,348 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-24 15:34:35,348 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-24 15:34:35,377 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-24 15:34:35,377 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-24 15:34:35,377 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 15:34:35,378 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-24 15:34:35,378 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 15:34:35,392 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-24 15:34:39,264 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:34:39,266 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240017,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:34:39,268 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:34:39,292 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:34:39,292 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:34:39,293 Line:5853 2:
 [DEBUG] 2017-12-24 15:34:39,293 Line:5853 3:915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,293 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:34:39,293 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:34:39,293 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:34:39,294 Line:5853 7:0
 [DEBUG] 2017-12-24 15:34:39,294 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:34:39,294 Line:5853 9:BI1712240017
 [DEBUG] 2017-12-24 15:34:39,294 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:34:39,294 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:34:39,295 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:34:39,295 Line:5853 13:1
 [DEBUG] 2017-12-24 15:34:39,295 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:34:39,295 Line:5853 15:3
 [DEBUG] 2017-12-24 15:34:39,295 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:34:39,296 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:34:39,296 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:34:39,296 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:34:39,296 Line:5853 20:
 [DEBUG] 2017-12-24 15:34:39,297 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:34:39,297 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:34:39,297 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:34:39,297 Line:5853 24:
 [DEBUG] 2017-12-24 15:34:39,297 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:34:39,298 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:34:39,298 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:34:39,298 Line:5853 28:
 [DEBUG] 2017-12-24 15:34:39,298 Line:5853 29:12
 [DEBUG] 2017-12-24 15:34:39,298 Line:5853 30:12
 [DEBUG] 2017-12-24 15:34:39,299 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:34:39,299 Line:5853 32:
 [DEBUG] 2017-12-24 15:34:39,299 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:34:39,299 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:34:39,299 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:34:39,299 Line:5853 36:
 [DEBUG] 2017-12-24 15:34:39,300 Line:5853 37:
 [DEBUG] 2017-12-24 15:34:39,300 Line:5853 38:
 [DEBUG] 2017-12-24 15:34:39,300 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:34:39,300 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:34:39,300 Line:5853 41:
 [DEBUG] 2017-12-24 15:34:39,300 Line:5853 42:
 [DEBUG] 2017-12-24 15:34:39,301 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:34:39,301 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:34:39,301 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:34:39,301 Line:5853 46:
 [DEBUG] 2017-12-24 15:34:39,302 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:34:39,302 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:34:39,302 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:34:39,302 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:34:39,302 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:34:39,302 Line:5853 52:
 [DEBUG] 2017-12-24 15:34:39,303 Line:5853 53:
 [DEBUG] 2017-12-24 15:34:39,303 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:34:39,303 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:34:39,303 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:34:39,303 Line:5853 57:0
 [DEBUG] 2017-12-24 15:34:39,304 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:34:39,304 Line:5853 59:0
 [DEBUG] 2017-12-24 15:34:39,304 Line:5853 60:2017-12-24 15:34:39
 [DEBUG] 2017-12-24 15:34:39,304 Line:5853 61:1
 [DEBUG] 2017-12-24 15:34:39,304 Line:5853 62:2017-12-24 15:34:39
 [DEBUG] 2017-12-24 15:34:39,304 Line:5853 63:1
 [DEBUG] 2017-12-24 15:34:39,305 Line:5853 64:2017-12-24 15:34:39
 [DEBUG] 2017-12-24 15:34:39,433 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:34:39,433 Line:5853 1:915c9061_1712241534394330003
 [DEBUG] 2017-12-24 15:34:39,433 Line:5853 2:915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,433 Line:5853 3:
 [DEBUG] 2017-12-24 15:34:39,434 Line:5853 4:
 [DEBUG] 2017-12-24 15:34:39,434 Line:5853 5:
 [DEBUG] 2017-12-24 15:34:39,434 Line:5853 6:
 [DEBUG] 2017-12-24 15:34:39,434 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:34:39,434 Line:5853 8:
 [DEBUG] 2017-12-24 15:34:39,434 Line:5853 9:
 [DEBUG] 2017-12-24 15:34:39,435 Line:5853 10:
 [DEBUG] 2017-12-24 15:34:39,435 Line:5853 11:
 [DEBUG] 2017-12-24 15:34:39,435 Line:5853 12:
 [DEBUG] 2017-12-24 15:34:39,435 Line:5853 13:
 [DEBUG] 2017-12-24 15:34:39,435 Line:5853 14:
 [DEBUG] 2017-12-24 15:34:39,436 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:34:39,436 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:34:39,436 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:34:39,436 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:34:39,436 Line:5853 19:0
 [DEBUG] 2017-12-24 15:34:39,436 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:34:39,437 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:34:39,437 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:34:39,437 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:34:39,437 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:34:39,438 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:34:39,438 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:34:39,438 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:34:39,438 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:34:39,438 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:34:39,439 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:34:39,439 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:34:39,439 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:34:39,439 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:34:39,440 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:34:39,440 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:34:39,440 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:34:39,441 Line:5853 37:
 [DEBUG] 2017-12-24 15:34:39,441 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:34:39,441 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:34:39,441 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:34:39,441 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:34:39,441 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:34:39,442 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:34:39,442 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:34:39,442 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:34:39,442 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:34:39,442 Line:5853 47:0
 [DEBUG] 2017-12-24 15:34:39,442 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:34:39,443 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:34:39,443 Line:5853 50:0
 [DEBUG] 2017-12-24 15:34:39,443 Line:5853 51:
 [DEBUG] 2017-12-24 15:34:39,443 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:34:39,443 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:34:39,443 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:34:39,444 Line:5853 55:0
 [DEBUG] 2017-12-24 15:34:39,444 Line:5853 56:0
 [DEBUG] 2017-12-24 15:34:39,444 Line:5853 57:
 [DEBUG] 2017-12-24 15:34:39,444 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:34:39,444 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:34:39,445 Line:5853 60:
 [DEBUG] 2017-12-24 15:34:39,445 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:34:39,445 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:34:39,666 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:34:39,934 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,934 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:34:39,936 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,937 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:34:39,938 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,938 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:34:39,939 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,939 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:34:39,940 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,940 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:34:39,941 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,941 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:34:39,942 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:39,943 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:34:39,943 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,943 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,944 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:34:39,944 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,944 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:39,946 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,946 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:34:39,946 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,947 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,947 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:34:39,948 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:39,948 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:39,949 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,949 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:34:39,949 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,949 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,950 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:34:39,950 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,951 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:39,951 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,952 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:34:39,952 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,952 Line:988 1值：false
 [DEBUG] 2017-12-24 15:34:39,952 Line:988 2值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,953 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:34:39,953 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,953 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:34:39,954 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,955 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:34:39,955 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,955 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,956 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:39,956 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,957 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,957 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:34:39,957 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,958 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,958 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,958 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,959 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,960 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:34:39,960 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,960 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,961 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,961 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,962 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,963 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:34:39,963 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,963 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,964 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,965 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,966 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,966 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,967 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,967 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:34:39,968 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,968 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,969 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:39,969 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,970 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,971 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:34:39,972 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,973 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:34:39,973 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,974 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,975 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:39,975 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,977 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,977 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:34:39,977 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,977 Line:988 1值：1
 [DEBUG] 2017-12-24 15:34:39,978 Line:988 2值：0
 [DEBUG] 2017-12-24 15:34:39,978 Line:988 3值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,979 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:34:39,980 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:34:39,980 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:34:39,981 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:34:39,983 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,984 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:34:39,985 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,985 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,986 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:39,986 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:39,988 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,989 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:34:39,989 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,990 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,991 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:39,991 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:39,992 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,993 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:34:39,993 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,993 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:39,994 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:39,995 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:34:39,996 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:39,996 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:34:39,997 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:39,997 Line:988 1值：
 [DEBUG] 2017-12-24 15:34:39,998 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:34:39,999 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:34:40,000 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:34:40,000 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:40,000 Line:988 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,000 Line:988 2值：
 [DEBUG] 2017-12-24 15:34:40,001 Line:988 3值：
 [DEBUG] 2017-12-24 15:34:40,001 Line:988 4值：
 [DEBUG] 2017-12-24 15:34:40,001 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:40,002 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:34:40,003 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,004 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:40,005 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,005 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:34:40,006 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,007 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:34:40,007 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,008 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:34:40,009 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,010 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:34:40,011 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:34:40,011 Line:1157 2值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,012 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,013 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:34:40,013 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:34:40,013 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:34:40,014 Line:1157 2值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,014 Line:1157 3值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,015 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,015 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,015 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:34:40,015 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,016 Line:1157 2值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,016 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,017 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,017 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:34:40,017 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,018 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,018 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:34:40,018 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:34:40,019 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,020 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,020 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,020 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:34:40,022 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,022 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:34:40,022 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,023 Line:1157 2值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,024 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,024 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,024 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:34:40,025 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,026 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:34:40,027 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,027 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:40,028 Line:1270 915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,028 Line:1270 add
 [DEBUG] 2017-12-24 15:34:40,029 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,030 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:34:40,031 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,032 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:34:40,032 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,033 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:34:40,033 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:34:40,033 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:34:40,034 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,035 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:34:40,035 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,036 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:34:40,037 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,037 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:34:40,039 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,040 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:34:40,043 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,062 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:34:40,063 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,063 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:34:40,064 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,064 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:34:40,065 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,065 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:34:40,066 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,066 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:34:40,068 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,068 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:40,069 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,069 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:34:40,070 Line:1157 1值：915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,071 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:34:40,071 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,071 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:40,073 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,073 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:40,073 Line:1270 915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,073 Line:1270 add
 [DEBUG] 2017-12-24 15:34:40,075 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:40,075 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:34:40,076 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,077 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:34:40,077 Line:1270 12
 [DEBUG] 2017-12-24 15:34:40,078 Line:1270 2017
 [DEBUG] 2017-12-24 15:34:40,078 Line:1270 12
 [DEBUG] 2017-12-24 15:34:40,078 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:34:40,078 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:34:40,078 Line:1270 915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,078 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:34:40,079 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:34:40,079 Line:1270 BI1712240017
 [DEBUG] 2017-12-24 15:34:40,079 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:34:40,079 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:34:40,079 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:34:40,080 Line:1270 1
 [DEBUG] 2017-12-24 15:34:40,080 Line:1270 1
 [DEBUG] 2017-12-24 15:34:40,080 Line:1270 2017-12-24 15:34:39
 [DEBUG] 2017-12-24 15:34:40,080 Line:1270 2017-12-24 15:34:39
 [DEBUG] 2017-12-24 15:34:40,080 Line:1270 00001
 [DEBUG] 2017-12-24 15:34:40,080 Line:1270 
 [DEBUG] 2017-12-24 15:34:40,081 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:34:40,081 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:34:40,081 Line:1270 00003
 [DEBUG] 2017-12-24 15:34:40,081 Line:1270 1
 [DEBUG] 2017-12-24 15:34:40,081 Line:1270 00101
 [DEBUG] 2017-12-24 15:34:40,082 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:34:40,082 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:34:40,082 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:34:40,082 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:34:40,082 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:34:40,083 Line:1270 0
 [DEBUG] 2017-12-24 15:34:40,083 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:34:40,083 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:34:40,083 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:34:40,083 Line:1270 f_ref='915c9061_1712241534392850002'
 [DEBUG] 2017-12-24 15:34:40,091 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'915c9061_1712241534392850002','2017-12-24','BI1712240017','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:34:39','2017-12-24 15:34:39','00001' from tblBuyInStockDet where f_ref='915c9061_1712241534392850002' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:34:40,092 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:34:40,092 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:34:40,092 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:34:40,092 Line:425 ************上述语句执行时间：15
 [DEBUG] 2017-12-24 15:34:40,092 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:34:40,093 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,094 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:40,094 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,095 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:34:40,095 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:40,096 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:40,096 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:34:40,097 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,097 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:34:40,098 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,099 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:34:40,101 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,101 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:34:40,102 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:40,102 Line:988 1值：1
 [DEBUG] 2017-12-24 15:34:40,102 Line:988 2值：0
 [DEBUG] 2017-12-24 15:34:40,102 Line:988 3值：1
 [DEBUG] 2017-12-24 15:34:40,103 Line:988 4值：0
 [DEBUG] 2017-12-24 15:34:40,103 Line:988 5值：0
 [DEBUG] 2017-12-24 15:34:40,103 Line:988 6值：1
 [DEBUG] 2017-12-24 15:34:40,104 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:34:40,104 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:34:40,105 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:34:40,105 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:34:40,105 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:34:40,106 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,161 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:34:40,162 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:34:40,166 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,168 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,169 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,172 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,173 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,175 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,176 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:40,178 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:34:40,189 Line:434 ************上述语句执行时间：83
 [DEBUG] 2017-12-24 15:34:40,189 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:34:40,191 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,192 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:40,192 Line:1270 1915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,192 Line:1270 00003
 [DEBUG] 2017-12-24 15:34:40,193 Line:1270 1
 [DEBUG] 2017-12-24 15:34:40,193 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:34:40,193 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=915c9061_1712241534392850002@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:34:39@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:34:39@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240017@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:34:40,197 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1915c9061_1712241534392850002',14,'00003','2017-12-24','12','2017','12','0','1','915c9061_1712241534392850002','','1','0','1','1','2017-12-24 15:34:39','1','2017-12-24 15:34:39','00001','tblBuyInStock','BI1712240017','1','00101','0','')
 [DEBUG] 2017-12-24 15:34:40,197 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:34:40,198 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:34:40,199 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,200 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:34:40,201 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,202 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:34:40,203 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,204 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:34:40,205 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,205 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:34:40,206 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,207 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:34:40,209 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,209 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:34:40,210 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:40,210 Line:988 1值：1
 [DEBUG] 2017-12-24 15:34:40,210 Line:988 2值：0
 [DEBUG] 2017-12-24 15:34:40,210 Line:988 3值：1
 [DEBUG] 2017-12-24 15:34:40,211 Line:988 4值：0
 [DEBUG] 2017-12-24 15:34:40,211 Line:988 5值：0
 [DEBUG] 2017-12-24 15:34:40,211 Line:988 6值：0
 [DEBUG] 2017-12-24 15:34:40,212 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:34:40,212 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:34:40,213 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:34:40,213 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:34:40,213 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:34:40,214 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,215 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:34:40,216 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,217 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:34:40,218 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,218 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:34:40,220 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:40,221 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:40,223 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,224 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:40,225 Line:1270 915c9061_1712241534392850002
 [DEBUG] 2017-12-24 15:34:40,225 Line:1270 add
 [DEBUG] 2017-12-24 15:34:40,227 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:34:40,228 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:34:40,229 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:40,229 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:34:40,230 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:34:40,230 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:34:40,230 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:34:40,230 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:34:40,231 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:34:40,232 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-24 15:34:40,232 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:34:40,233 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:40,234 Line:372 ---error，返回信息：123url=
 [ERROR] 2017-12-24 15:34:40,234 Line:3868 DynDBManager After add defineSql Error code = -2102 Msg=123
 [DEBUG] 2017-12-24 15:34:46,423 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveDefineFile&fileName=config_v7\define\defineBuy.xml&SESSION=B4DD617BF8A22602926F07199E2871F0691E39027585D00EB7782F4C45AF5476628882BFEC0F655F4525A884C52DD52A0C98562ED3F03CD4
 [ERROR] 2017-12-24 15:34:46,502 Line:119 ------保存成功
 [DEBUG] 2017-12-24 15:34:48,941 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:34:48,942 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712240017,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[,];tblBuyInStockDet_PayQty=[,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[,];tblBuyInStockDet_PreferAmount=[,];tblBuyInStockDet_detsId=[,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:34:48,945 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-24 15:34:48,947 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:34:48,947 Line:5853 1:0.0
 [DEBUG] 2017-12-24 15:34:48,948 Line:5853 2:
 [DEBUG] 2017-12-24 15:34:48,948 Line:5853 3:915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,948 Line:5853 4:-1
 [DEBUG] 2017-12-24 15:34:48,948 Line:5853 5:finish
 [DEBUG] 2017-12-24 15:34:48,949 Line:5853 6:0.0
 [DEBUG] 2017-12-24 15:34:48,949 Line:5853 7:0
 [DEBUG] 2017-12-24 15:34:48,949 Line:5853 8:0.0
 [DEBUG] 2017-12-24 15:34:48,950 Line:5853 9:BI1712240017
 [DEBUG] 2017-12-24 15:34:48,950 Line:5853 10:2017-12-24
 [DEBUG] 2017-12-24 15:34:48,951 Line:5853 11:00003
 [DEBUG] 2017-12-24 15:34:48,951 Line:5853 12:00101
 [DEBUG] 2017-12-24 15:34:48,951 Line:5853 13:1
 [DEBUG] 2017-12-24 15:34:48,951 Line:5853 14:00001
 [DEBUG] 2017-12-24 15:34:48,951 Line:5853 15:3
 [DEBUG] 2017-12-24 15:34:48,951 Line:5853 16:0.0
 [DEBUG] 2017-12-24 15:34:48,952 Line:5853 17:0.0
 [DEBUG] 2017-12-24 15:34:48,952 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:34:48,952 Line:5853 19:0.0
 [DEBUG] 2017-12-24 15:34:48,952 Line:5853 20:
 [DEBUG] 2017-12-24 15:34:48,952 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:34:48,952 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:34:48,953 Line:5853 23:0.0
 [DEBUG] 2017-12-24 15:34:48,953 Line:5853 24:
 [DEBUG] 2017-12-24 15:34:48,953 Line:5853 25:0.0
 [DEBUG] 2017-12-24 15:34:48,953 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:34:48,953 Line:5853 27:0.0
 [DEBUG] 2017-12-24 15:34:48,953 Line:5853 28:
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 29:12
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 30:12
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 31:2017
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 32:
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:34:48,954 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 36:
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 37:
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 38:
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 41:
 [DEBUG] 2017-12-24 15:34:48,955 Line:5853 42:
 [DEBUG] 2017-12-24 15:34:48,956 Line:5853 43:100.0
 [DEBUG] 2017-12-24 15:34:48,956 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:34:48,956 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:34:48,956 Line:5853 46:
 [DEBUG] 2017-12-24 15:34:48,956 Line:5853 47:1.0
 [DEBUG] 2017-12-24 15:34:48,956 Line:5853 48:1.0
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 49:1.0
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 50:0.0
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 51:1.0
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 52:
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 53:
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:34:48,957 Line:5853 55:0.0
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 56:0.0
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 57:0
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 58:00001
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 59:0
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 60:2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 61:1
 [DEBUG] 2017-12-24 15:34:48,958 Line:5853 62:2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:34:48,959 Line:5853 63:1
 [DEBUG] 2017-12-24 15:34:48,959 Line:5853 64:2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:34:48,960 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:34:48,960 Line:5853 1:915c9061_1712241534489600008
 [DEBUG] 2017-12-24 15:34:48,960 Line:5853 2:915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,960 Line:5853 3:
 [DEBUG] 2017-12-24 15:34:48,961 Line:5853 4:
 [DEBUG] 2017-12-24 15:34:48,961 Line:5853 5:
 [DEBUG] 2017-12-24 15:34:48,961 Line:5853 6:
 [DEBUG] 2017-12-24 15:34:48,961 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:34:48,962 Line:5853 8:
 [DEBUG] 2017-12-24 15:34:48,962 Line:5853 9:
 [DEBUG] 2017-12-24 15:34:48,963 Line:5853 10:
 [DEBUG] 2017-12-24 15:34:48,963 Line:5853 11:
 [DEBUG] 2017-12-24 15:34:48,963 Line:5853 12:
 [DEBUG] 2017-12-24 15:34:48,963 Line:5853 13:
 [DEBUG] 2017-12-24 15:34:48,963 Line:5853 14:
 [DEBUG] 2017-12-24 15:34:48,963 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:34:48,964 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:34:48,964 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:34:48,964 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:34:48,964 Line:5853 19:0
 [DEBUG] 2017-12-24 15:34:48,964 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:34:48,964 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:34:48,965 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:34:48,966 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:34:48,966 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:34:48,966 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:34:48,966 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:34:48,966 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:34:48,966 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 37:
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:34:48,967 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:34:48,968 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:34:48,968 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:34:48,968 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:34:48,968 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:34:48,968 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:34:48,968 Line:5853 47:0
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 50:0
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 51:
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 52:0.0
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:34:48,969 Line:5853 54:0.0
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 55:0
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 56:0
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 57:
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 59:0.0
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 60:
 [DEBUG] 2017-12-24 15:34:48,970 Line:5853 61:0.0
 [DEBUG] 2017-12-24 15:34:48,971 Line:5853 62:00001
 [DEBUG] 2017-12-24 15:34:48,973 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:34:48,974 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,974 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:34:48,975 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,975 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:34:48,975 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,976 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:34:48,976 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,976 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:34:48,977 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,978 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:34:48,978 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,979 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:34:48,980 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:48,980 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:34:48,980 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,980 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,981 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:34:48,981 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:48,982 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:48,982 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,983 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:34:48,983 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,983 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,983 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:34:48,984 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:48,984 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:48,985 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,985 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:34:48,985 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,986 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,986 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:34:48,987 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:48,987 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:48,988 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,988 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:34:48,988 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,989 Line:988 1值：false
 [DEBUG] 2017-12-24 15:34:48,989 Line:988 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,989 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:34:48,990 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:48,990 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:34:48,991 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,991 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:34:48,991 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,991 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,992 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:48,992 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:48,993 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,993 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:34:48,993 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,994 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,994 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:48,994 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:48,995 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:48,996 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:34:48,996 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:48,997 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:48,998 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:48,999 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,000 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,000 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:34:49,000 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,000 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,001 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,001 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,002 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,002 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,003 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,003 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:34:49,003 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,004 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,004 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,004 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,005 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,005 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:34:49,006 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,006 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:34:49,006 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,006 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,007 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,007 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,008 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,008 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:34:49,008 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,009 Line:988 1值：1
 [DEBUG] 2017-12-24 15:34:49,009 Line:988 2值：0
 [DEBUG] 2017-12-24 15:34:49,009 Line:988 3值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,010 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:34:49,010 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:34:49,010 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:49,010 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:34:49,011 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,012 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:34:49,013 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,013 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,014 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:49,014 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,015 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,016 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:34:49,016 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,016 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,017 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,017 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:34:49,018 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,019 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:34:49,019 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,020 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,020 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,021 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:34:49,022 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,022 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:34:49,022 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,023 Line:988 1值：
 [DEBUG] 2017-12-24 15:34:49,023 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:34:49,024 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:34:49,024 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:34:49,025 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,025 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,026 Line:988 2值：
 [DEBUG] 2017-12-24 15:34:49,026 Line:988 3值：
 [DEBUG] 2017-12-24 15:34:49,027 Line:988 4值：
 [DEBUG] 2017-12-24 15:34:49,029 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-24 15:34:49,029 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:34:49,031 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,031 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:34:49,033 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,033 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:34:49,034 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,035 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:34:49,036 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,036 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:34:49,037 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,039 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:34:49,039 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:34:49,039 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,040 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,040 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:49,041 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:34:49,041 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:34:49,041 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,042 Line:1157 3值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,042 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,043 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:49,043 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:34:49,044 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,044 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,045 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,045 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:49,046 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:34:49,046 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,046 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,046 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 15:34:49,047 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:34:49,047 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,047 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,047 Line:229 ************上述语句执行时间：0
 [DEBUG] 2017-12-24 15:34:49,048 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:34:49,048 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,049 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:34:49,049 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,049 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,050 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,050 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:34:49,050 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:34:49,051 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,051 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:34:49,052 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,052 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:49,052 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,053 Line:1270 add
 [DEBUG] 2017-12-24 15:34:49,054 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:49,054 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:34:49,055 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,055 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:34:49,056 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,064 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:34:49,064 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-12-24 15:34:49,065 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:34:49,065 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,069 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:34:49,070 Line:408 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:34:49,070 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:34:49,072 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,072 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:34:49,073 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,074 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:34:49,075 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,079 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:34:49,080 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,080 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:34:49,082 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,082 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:34:49,083 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,084 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:34:49,085 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,085 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:34:49,087 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,087 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:49,088 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,088 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:34:49,089 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,089 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:34:49,089 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:34:49,089 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:49,090 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,090 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:49,091 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,091 Line:1270 add
 [DEBUG] 2017-12-24 15:34:49,092 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:34:49,092 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:34:49,093 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,093 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 12
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 2017
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 12
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,094 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:34:49,095 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:34:49,095 Line:1270 BI1712240017
 [DEBUG] 2017-12-24 15:34:49,095 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:34:49,095 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:34:49,095 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:34:49,095 Line:1270 1
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 1
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 00001
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:34:49,096 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:34:49,097 Line:1270 00003
 [DEBUG] 2017-12-24 15:34:49,097 Line:1270 1
 [DEBUG] 2017-12-24 15:34:49,097 Line:1270 00101
 [DEBUG] 2017-12-24 15:34:49,097 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:34:49,097 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:34:49,097 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:34:49,098 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:34:49,098 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:34:49,098 Line:1270 0
 [DEBUG] 2017-12-24 15:34:49,098 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:34:49,098 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:34:49,098 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:34:49,099 Line:1270 f_ref='915c9061_1712241534489460007'
 [DEBUG] 2017-12-24 15:34:49,104 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'915c9061_1712241534489460007','2017-12-24','BI1712240017','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:34:48','2017-12-24 15:34:48','00001' from tblBuyInStockDet where f_ref='915c9061_1712241534489460007' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:34:49,105 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:34:49,105 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:34:49,105 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:34:49,105 Line:425 ************上述语句执行时间：12
 [DEBUG] 2017-12-24 15:34:49,105 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:34:49,106 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,106 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:49,107 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,108 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:34:49,108 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,109 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,109 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:34:49,110 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,110 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:34:49,111 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,111 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-24 15:34:49,111 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,112 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:34:49,112 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,112 Line:988 1值：1
 [DEBUG] 2017-12-24 15:34:49,112 Line:988 2值：0
 [DEBUG] 2017-12-24 15:34:49,112 Line:988 3值：1
 [DEBUG] 2017-12-24 15:34:49,112 Line:988 4值：0
 [DEBUG] 2017-12-24 15:34:49,113 Line:988 5值：0
 [DEBUG] 2017-12-24 15:34:49,113 Line:988 6值：1
 [DEBUG] 2017-12-24 15:34:49,113 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:34:49,113 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:34:49,114 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:34:49,114 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:34:49,114 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:34:49,115 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,117 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:34:49,118 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:34:49,119 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,120 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,121 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,122 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,123 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,124 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,125 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:34:49,127 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:34:49,140 Line:434 ************上述语句执行时间：25
 [DEBUG] 2017-12-24 15:34:49,140 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:34:49,141 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,142 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:49,142 Line:1270 1915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,143 Line:1270 00003
 [DEBUG] 2017-12-24 15:34:49,143 Line:1270 1
 [DEBUG] 2017-12-24 15:34:49,143 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:34:49,143 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=915c9061_1712241534489460007@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:34:48@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:34:48@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240017@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:34:49,147 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1915c9061_1712241534489460007',14,'00003','2017-12-24','12','2017','12','0','1','915c9061_1712241534489460007','','1','0','1','1','2017-12-24 15:34:48','1','2017-12-24 15:34:48','00001','tblBuyInStock','BI1712240017','1','00101','0','')
 [DEBUG] 2017-12-24 15:34:49,148 Line:425 ************上述语句执行时间：6
 [DEBUG] 2017-12-24 15:34:49,148 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:34:49,150 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,150 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:34:49,151 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,152 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:34:49,152 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,153 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:34:49,154 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,154 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:34:49,155 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,156 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:34:49,157 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,157 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:34:49,158 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,158 Line:988 1值：1
 [DEBUG] 2017-12-24 15:34:49,158 Line:988 2值：0
 [DEBUG] 2017-12-24 15:34:49,158 Line:988 3值：1
 [DEBUG] 2017-12-24 15:34:49,158 Line:988 4值：0
 [DEBUG] 2017-12-24 15:34:49,159 Line:988 5值：0
 [DEBUG] 2017-12-24 15:34:49,159 Line:988 6值：0
 [DEBUG] 2017-12-24 15:34:49,159 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:34:49,160 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:34:49,160 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:34:49,160 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-24 15:34:49,160 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:34:49,161 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,162 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:34:49,162 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,163 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:34:49,164 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,164 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:34:49,165 Line:321 flag:false
 [DEBUG] 2017-12-24 15:34:49,165 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:34:49,165 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,166 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:34:49,166 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:34:49,166 Line:1270 add
 [DEBUG] 2017-12-24 15:34:49,167 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:34:49,168 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:34:49,168 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:34:49,168 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:34:49,169 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:34:49,169 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:34:49,169 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:34:49,169 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:34:49,169 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:34:49,169 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:34:49,169 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:34:49,170 Line:321 flag:true
 [DEBUG] 2017-12-24 15:34:49,182 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:35:07,749 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 15:35:27,750 Line:48 易站通接口连接失败: "reason":  "褰块姘ｏ拷娓st9527008ユ绱辨妤甸存濮锟
 [DEBUG] 2017-12-24 15:35:27,752 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:35:27,753 Line:443 ************上述语句执行时间：38582
 [DEBUG] 2017-12-24 15:35:29,334 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=915c9061_1712241534489460007&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:35:29,335 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[915c9061_1712241534489460007,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:35:29,335 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='915c9061_1712241534489460007' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:35:29,375 Line:1525  select * from  tblBuyInStockDet where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:35:29,379 Line:1525  select * from  tblBuyPayAccount where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:35:36,988 Line:215 ---------->SET Page 2 DEFAULT URL = /LogManageAction.do
 [DEBUG] 2017-12-24 15:36:50,963 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:36:50,966 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[915c9061_1712241534489460007,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[false,];designId=[,];approveStatus=[transing,];id=[915c9061_1712241534489460007,];parentCode=[,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];CurNeedPayAmt=[1,];InvoiceStatus=[0,];NeedPayAmt=[1,];BillNo=[BI1712240017,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[12,];PeriodMonth=[12,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[1,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[0915c9061_1712241534489460007,];AfterChangeAmt=[1,];CurAfterChangeAmt=[1,];CurChangeAmt=[0,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-12-24 15:34:48,];lastUpdateBy=[1,];lastUpdateTime=[2017-12-24 15:34:48,];createBy=[1,];createTime=[2017-12-24 15:34:48,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[00001,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[0,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[1,];tblBuyInStockDet_PayQty=[0,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0,];tblBuyInStockDet_PreferAmount=[0,];tblBuyInStockDet_detsId=[915c9061_1712241534489600008,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:36:50,984 Line:1525  select * from  tblBuyInStockDet where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:36:50,987 Line:1525  select * from  tblBuyPayAccount where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:36:51,009 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,012 Line:313 exeCondition:tblBuyInStock_Delete :true
 [DEBUG] 2017-12-24 15:36:51,013 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,014 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,014 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,015 Line:1270 delete
 [DEBUG] 2017-12-24 15:36:51,016 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:36:51,016 Line:313 exeCondition:tblBuyInStock_Delete :'0' != '0'
 [DEBUG] 2017-12-24 15:36:51,018 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,019 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-12-24 15:36:51,020 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,020 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-12-24 15:36:51,020 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,021 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-12-24 15:36:51,021 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,021 Line:313 exeCondition:tblBuyInStock_Delete :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:36:51,022 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,023 Line:313 exeCondition:tblBuyInStock_Delete_One :"0"!= "0"&&"update"=="returnAuditing"
 [DEBUG] 2017-12-24 15:36:51,023 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,024 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,024 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,024 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,025 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,025 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,026 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,026 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-12-24 15:36:51,026 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,026 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,027 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,028 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,028 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,028 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,029 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,029 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,029 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,030 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,031 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,031 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,031 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,032 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,033 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,034 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,035 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,035 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-12-24 15:36:51,035 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,035 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,036 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,036 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,037 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,037 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,037 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,038 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,038 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,039 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,039 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,040 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,040 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,040 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,041 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,041 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,042 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,042 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,042 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,043 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,043 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,043 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,044 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,045 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,045 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,045 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,046 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,046 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,047 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,047 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:36:51,047 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,047 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,048 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,049 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,049 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,049 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-12-24 15:36:51,050 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,050 Line:988 1值：0
 [DEBUG] 2017-12-24 15:36:51,050 Line:988 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,051 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,051 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,052 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,052 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-12-24 15:36:51,052 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,053 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,053 Line:1025 query condition columnName:BuyOrderID----value:
 [DEBUG] 2017-12-24 15:36:51,053 Line:1025 query condition columnName:StockCode----value:00001
 [DEBUG] 2017-12-24 15:36:51,054 Line:1023 query condition columnName:NeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:36:51,054 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-12-24 15:36:51,054 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-12-24 15:36:51,054 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,054 Line:313 exeCondition:tblBuyInStock_Delete_One :'0' != '0'
 [DEBUG] 2017-12-24 15:36:51,055 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,055 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:36:51,056 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,056 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,056 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,056 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:36:51,057 Line:1270 1
 [DEBUG] 2017-12-24 15:36:51,059 Line:425 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:36:51,059 Line:313 exeCondition:tblBuyInStock_Delete_One :'update' !='update'
 [DEBUG] 2017-12-24 15:36:51,060 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,060 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:36:51,061 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,061 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,061 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,061 Line:1270 delete
 [DEBUG] 2017-12-24 15:36:51,062 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,062 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:36:51,063 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,064 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,064 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'true'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='915c9061_1712241534489460007'
 [DEBUG] 2017-12-24 15:36:51,064 Line:1270 proc_deleteComIni
 [DEBUG] 2017-12-24 15:36:51,065 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-12-24 15:36:51,068 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'true'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='915c9061_1712241534489460007'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-12-24 15:36:51,069 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:36:51,069 Line:313 exeCondition:tblBuyInStock_Delete_One : 'true'=='true'
 [DEBUG] 2017-12-24 15:36:51,070 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,070 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delAccAndRefOper(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,070 Line:1270 0
 [DEBUG] 2017-12-24 15:36:51,070 Line:1270 update
 [DEBUG] 2017-12-24 15:36:51,071 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,077 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-24 15:36:51,078 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-24 15:36:51,078 Line:425 ************上述语句执行时间：8
 [DEBUG] 2017-12-24 15:36:51,078 Line:313 exeCondition:tblBuyInStock_Delete_One :'update' =='update'
 [DEBUG] 2017-12-24 15:36:51,079 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,079 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:update tblBuyInStock set CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:36:51,080 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,081 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,081 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:36:51,082 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-12-24 15:36:51,083 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,083 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:36:51,085 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,085 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,086 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,086 Line:1270 delete
 [DEBUG] 2017-12-24 15:36:51,087 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:36:51,088 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,CurTotalAmount=?,Attachment=?,CertificateNo=?,AfterChangeAmt=?,CurAfterChangeAmt=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-12-24 15:36:51,088 Line:5993 1:1.0
 [DEBUG] 2017-12-24 15:36:51,088 Line:5993 2:BI1712240017
 [DEBUG] 2017-12-24 15:36:51,089 Line:5993 3:2017-12-24
 [DEBUG] 2017-12-24 15:36:51,089 Line:5993 4:00003
 [DEBUG] 2017-12-24 15:36:51,089 Line:5993 5:00101
 [DEBUG] 2017-12-24 15:36:51,089 Line:5993 6:1
 [DEBUG] 2017-12-24 15:36:51,089 Line:5993 7:00001
 [DEBUG] 2017-12-24 15:36:51,089 Line:5993 8:3
 [DEBUG] 2017-12-24 15:36:51,090 Line:5993 9:0.0
 [DEBUG] 2017-12-24 15:36:51,090 Line:5993 10:0.0
 [DEBUG] 2017-12-24 15:36:51,090 Line:5993 11:0.0
 [DEBUG] 2017-12-24 15:36:51,090 Line:5993 12:0.0
 [DEBUG] 2017-12-24 15:36:51,090 Line:5993 13:0.0
 [DEBUG] 2017-12-24 15:36:51,091 Line:5993 14:
 [DEBUG] 2017-12-24 15:36:51,091 Line:5993 15:0.0
 [DEBUG] 2017-12-24 15:36:51,091 Line:5993 16:0.0
 [DEBUG] 2017-12-24 15:36:51,091 Line:5993 17:0.0
 [DEBUG] 2017-12-24 15:36:51,091 Line:5993 18:12
 [DEBUG] 2017-12-24 15:36:51,091 Line:5993 19:12
 [DEBUG] 2017-12-24 15:36:51,092 Line:5993 20:2017
 [DEBUG] 2017-12-24 15:36:51,092 Line:5993 21:
 [DEBUG] 2017-12-24 15:36:51,092 Line:5993 22:0.0
 [DEBUG] 2017-12-24 15:36:51,092 Line:5993 23:0.0
 [DEBUG] 2017-12-24 15:36:51,092 Line:5993 24:0.0
 [DEBUG] 2017-12-24 15:36:51,092 Line:5993 25:100.0
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 26:0.0
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 27:0.0
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 28:
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 29:1.0
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 30:1.0
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 31:1.0
 [DEBUG] 2017-12-24 15:36:51,093 Line:5993 32:0.0
 [DEBUG] 2017-12-24 15:36:51,094 Line:5993 33:1.0
 [DEBUG] 2017-12-24 15:36:51,094 Line:5993 34:
 [DEBUG] 2017-12-24 15:36:51,094 Line:5993 35:0915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,094 Line:5993 36:1.0
 [DEBUG] 2017-12-24 15:36:51,094 Line:5993 37:1.0
 [DEBUG] 2017-12-24 15:36:51,094 Line:5993 38:1
 [DEBUG] 2017-12-24 15:36:51,095 Line:5993 39:2017-12-24 15:36:50
 [DEBUG] 2017-12-24 15:36:51,096 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-12-24 15:36:51,096 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:36:51,097 Line:5853 1:915c9061_1712241536510960012
 [DEBUG] 2017-12-24 15:36:51,097 Line:5853 2:915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,097 Line:5853 3:00001
 [DEBUG] 2017-12-24 15:36:51,097 Line:5853 4:
 [DEBUG] 2017-12-24 15:36:51,098 Line:5853 5:
 [DEBUG] 2017-12-24 15:36:51,098 Line:5853 6:
 [DEBUG] 2017-12-24 15:36:51,098 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:36:51,098 Line:5853 8:
 [DEBUG] 2017-12-24 15:36:51,099 Line:5853 9:
 [DEBUG] 2017-12-24 15:36:51,100 Line:5853 10:
 [DEBUG] 2017-12-24 15:36:51,100 Line:5853 11:
 [DEBUG] 2017-12-24 15:36:51,100 Line:5853 12:
 [DEBUG] 2017-12-24 15:36:51,100 Line:5853 13:
 [DEBUG] 2017-12-24 15:36:51,100 Line:5853 14:
 [DEBUG] 2017-12-24 15:36:51,100 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:36:51,101 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:36:51,101 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:36:51,101 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:36:51,101 Line:5853 19:0
 [DEBUG] 2017-12-24 15:36:51,101 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:36:51,101 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:36:51,102 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:36:51,103 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:36:51,103 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:36:51,103 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:36:51,103 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:36:51,103 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:36:51,103 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:36:51,104 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:36:51,104 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:36:51,104 Line:5853 37:
 [DEBUG] 2017-12-24 15:36:51,104 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:36:51,104 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:36:51,104 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:36:51,105 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:36:51,105 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:36:51,105 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:36:51,105 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:36:51,105 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:36:51,105 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:36:51,106 Line:5853 47:0
 [DEBUG] 2017-12-24 15:36:51,106 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:36:51,106 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:36:51,106 Line:5853 50:
 [DEBUG] 2017-12-24 15:36:51,106 Line:5853 51:0.0
 [DEBUG] 2017-12-24 15:36:51,106 Line:5853 52:1.0
 [DEBUG] 2017-12-24 15:36:51,107 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:36:51,107 Line:5853 54:0
 [DEBUG] 2017-12-24 15:36:51,107 Line:5853 55:0
 [DEBUG] 2017-12-24 15:36:51,107 Line:5853 56:
 [DEBUG] 2017-12-24 15:36:51,107 Line:5853 57:0.0
 [DEBUG] 2017-12-24 15:36:51,107 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:36:51,108 Line:5853 59:
 [DEBUG] 2017-12-24 15:36:51,108 Line:5853 60:0.0
 [DEBUG] 2017-12-24 15:36:51,108 Line:5853 61:00001
 [DEBUG] 2017-12-24 15:36:51,109 Line:5894  DELETE FROM  tblBuyPayAccount  WHERE f_ref = ? 
 [DEBUG] 2017-12-24 15:36:51,110 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:36:51,111 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,111 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:36:51,112 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,113 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:36:51,114 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,114 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:36:51,115 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,115 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:36:51,116 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,116 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:36:51,117 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,117 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:36:51,118 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,119 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:36:51,119 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,119 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,120 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:36:51,120 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,121 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,122 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,122 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:36:51,122 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,122 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,123 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:36:51,123 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,124 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,124 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,125 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:36:51,125 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,125 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,125 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:36:51,126 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,126 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,127 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,127 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:36:51,127 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,127 Line:988 1值：false
 [DEBUG] 2017-12-24 15:36:51,128 Line:988 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,128 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:36:51,129 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,129 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:36:51,130 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,130 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:36:51,130 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,131 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,132 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,132 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,133 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,133 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:36:51,134 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,134 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,135 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,136 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,137 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,138 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:36:51,139 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,139 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,140 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,140 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,141 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,141 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:36:51,142 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,142 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,142 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,143 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,144 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,144 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,145 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,145 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:36:51,145 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,145 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,146 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,147 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,148 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,149 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:36:51,150 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,150 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:36:51,150 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,151 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,151 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,152 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,153 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,153 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:36:51,153 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,153 Line:988 1值：1
 [DEBUG] 2017-12-24 15:36:51,153 Line:988 2值：0
 [DEBUG] 2017-12-24 15:36:51,154 Line:988 3值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,155 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:36:51,155 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:36:51,155 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,155 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:36:51,156 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,156 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:36:51,157 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,157 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,157 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,158 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,158 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,159 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:36:51,159 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,159 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,160 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,160 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,161 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,161 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:36:51,161 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,162 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,162 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:36:51,163 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:36:51,164 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,164 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:36:51,164 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,165 Line:988 1值：
 [DEBUG] 2017-12-24 15:36:51,165 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:36:51,166 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,166 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:36:51,166 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,167 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,167 Line:988 2值：
 [DEBUG] 2017-12-24 15:36:51,167 Line:988 3值：
 [DEBUG] 2017-12-24 15:36:51,167 Line:988 4值：
 [DEBUG] 2017-12-24 15:36:51,168 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,168 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:36:51,169 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,169 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:36:51,170 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,170 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:36:51,171 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,172 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:36:51,173 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,173 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:36:51,174 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,175 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:36:51,175 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:36:51,175 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,176 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,176 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,176 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:36:51,176 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:36:51,177 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,177 Line:1157 3值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,177 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,178 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:36:51,178 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:36:51,178 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,178 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,179 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,179 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,179 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:36:51,180 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,180 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,180 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,181 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:36:51,181 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,182 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,182 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,182 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:36:51,183 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,183 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:36:51,183 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,183 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,184 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,184 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,185 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:36:51,185 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,186 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:36:51,186 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,187 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,187 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,187 Line:1270 add
 [DEBUG] 2017-12-24 15:36:51,188 Line:425 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,188 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:36:51,189 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,189 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:36:51,190 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,190 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:36:51,190 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,190 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:36:51,191 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,191 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:36:51,191 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,191 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:36:51,192 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,192 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:36:51,193 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,193 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:36:51,194 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,197 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:36:51,198 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,199 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:36:51,200 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,201 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:36:51,203 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,203 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:36:51,204 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,205 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:36:51,206 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,206 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:36:51,207 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,207 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:36:51,207 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,208 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:36:51,208 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:36:51,208 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:36:51,209 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,209 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,209 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,209 Line:1270 add
 [DEBUG] 2017-12-24 15:36:51,211 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:36:51,211 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:36:51,212 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,213 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:36:51,213 Line:1270 12
 [DEBUG] 2017-12-24 15:36:51,213 Line:1270 2017
 [DEBUG] 2017-12-24 15:36:51,213 Line:1270 12
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 BI1712240017
 [DEBUG] 2017-12-24 15:36:51,214 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:36:51,215 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:36:51,215 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:36:51,215 Line:1270 1
 [DEBUG] 2017-12-24 15:36:51,215 Line:1270 1
 [DEBUG] 2017-12-24 15:36:51,216 Line:1270 2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:36:51,216 Line:1270 2017-12-24 15:36:50
 [DEBUG] 2017-12-24 15:36:51,217 Line:1270 00001
 [DEBUG] 2017-12-24 15:36:51,217 Line:1270 
 [DEBUG] 2017-12-24 15:36:51,217 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:36:51,217 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:36:51,217 Line:1270 00003
 [DEBUG] 2017-12-24 15:36:51,217 Line:1270 1
 [DEBUG] 2017-12-24 15:36:51,218 Line:1270 00101
 [DEBUG] 2017-12-24 15:36:51,218 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:36:51,218 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:36:51,218 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:36:51,218 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:36:51,218 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:36:51,219 Line:1270 0
 [DEBUG] 2017-12-24 15:36:51,219 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:36:51,219 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:36:51,219 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:36:51,219 Line:1270 f_ref='915c9061_1712241534489460007'
 [DEBUG] 2017-12-24 15:36:51,225 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'915c9061_1712241534489460007','2017-12-24','BI1712240017','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:34:48','2017-12-24 15:36:50','00001' from tblBuyInStockDet where f_ref='915c9061_1712241534489460007' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:36:51,226 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:36:51,226 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:36:51,226 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:36:51,226 Line:425 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 15:36:51,227 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:36:51,228 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,228 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:36:51,229 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,230 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:36:51,230 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,230 Line:1043 ---上述语句时间---0
 [DEBUG] 2017-12-24 15:36:51,231 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:36:51,232 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,233 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:36:51,234 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,234 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-12-24 15:36:51,235 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,235 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,235 Line:1270 zh_CN
 [DEBUG] 2017-12-24 15:36:51,235 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,236 Line:1270 00001
 [DEBUG] 2017-12-24 15:36:51,236 Line:1270 1
 [DEBUG] 2017-12-24 15:36:51,289 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='915c9061_1712241534489460007') or goodPropHash in (select goodPropHash from tblStockDet where BillId='915c9061_1712241534489460007') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and totalQty<0 and((periodYear=2017 and period>=12) or periodYear>2017)) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-12-24 15:36:51,290 Line:425 ************上述语句执行时间：55
 [DEBUG] 2017-12-24 15:36:51,290 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:36:51,290 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,290 Line:988 1值：1
 [DEBUG] 2017-12-24 15:36:51,291 Line:988 2值：0
 [DEBUG] 2017-12-24 15:36:51,291 Line:988 3值：1
 [DEBUG] 2017-12-24 15:36:51,291 Line:988 4值：0
 [DEBUG] 2017-12-24 15:36:51,291 Line:988 5值：0
 [DEBUG] 2017-12-24 15:36:51,291 Line:988 6值：1
 [DEBUG] 2017-12-24 15:36:51,292 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:36:51,292 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:36:51,292 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:36:51,292 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,293 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:36:51,293 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,295 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:36:51,295 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:36:51,296 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,298 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,299 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,300 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,301 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,302 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,303 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:36:51,305 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:36:51,316 Line:434 ************上述语句执行时间：22
 [DEBUG] 2017-12-24 15:36:51,316 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:36:51,317 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,319 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,319 Line:1270 1915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,319 Line:1270 00003
 [DEBUG] 2017-12-24 15:36:51,319 Line:1270 1
 [DEBUG] 2017-12-24 15:36:51,319 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:36:51,320 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=915c9061_1712241534489460007@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:34:48@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:36:50@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240017@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:36:51,322 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1915c9061_1712241534489460007',14,'00003','2017-12-24','12','2017','12','0','1','915c9061_1712241534489460007','','1','0','1','1','2017-12-24 15:34:48','1','2017-12-24 15:36:50','00001','tblBuyInStock','BI1712240017','1','00101','0','')
 [DEBUG] 2017-12-24 15:36:51,322 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:36:51,322 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:36:51,323 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,323 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:36:51,324 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,324 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:36:51,325 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,325 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:36:51,326 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,326 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:36:51,327 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,327 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:36:51,328 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,328 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:36:51,328 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,328 Line:988 1值：1
 [DEBUG] 2017-12-24 15:36:51,328 Line:988 2值：0
 [DEBUG] 2017-12-24 15:36:51,329 Line:988 3值：1
 [DEBUG] 2017-12-24 15:36:51,329 Line:988 4值：0
 [DEBUG] 2017-12-24 15:36:51,329 Line:988 5值：0
 [DEBUG] 2017-12-24 15:36:51,329 Line:988 6值：0
 [DEBUG] 2017-12-24 15:36:51,330 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:36:51,330 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:36:51,330 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:36:51,330 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,330 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:36:51,332 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,333 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:36:51,333 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,334 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:36:51,334 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,335 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:36:51,335 Line:321 flag:false
 [DEBUG] 2017-12-24 15:36:51,335 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:36:51,336 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,336 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:36:51,336 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:36:51,337 Line:1270 add
 [DEBUG] 2017-12-24 15:36:51,338 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:36:51,338 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:36:51,338 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:36:51,339 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:36:51,339 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:36:51,339 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:36:51,339 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:36:51,339 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:36:51,340 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:36:51,340 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:36:51,340 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:36:51,341 Line:321 flag:true
 [DEBUG] 2017-12-24 15:36:51,341 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:37:27,627 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:37:27,628 Line:443 ************上述语句执行时间：36287
 [DEBUG] 2017-12-24 15:37:29,128 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=915c9061_1712241534489460007&parentCode=null&f_brother=&draftQuery=&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:37:29,129 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[915c9061_1712241534489460007,];parentCode=[null,];f_brother=[,];draftQuery=[,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:37:29,129 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='915c9061_1712241534489460007' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:37:29,132 Line:1525  select * from  tblBuyInStockDet where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:37:29,135 Line:1525  select * from  tblBuyPayAccount where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:38:30,384 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-24 15:38:30,386 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];button=[,];frameName=[$fName,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[915c9061_1712241534489460007,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[false,];designId=[,];approveStatus=[transing,];id=[915c9061_1712241534489460007,];parentCode=[,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[-1,];workFlowNodeName=[finish,];CurNeedPayAmt=[1,];InvoiceStatus=[0,];NeedPayAmt=[1,];BillNo=[BI1712240017,];BillDate=[2017-12-24,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[12,];PeriodMonth=[12,];PeriodYear=[2017,];InvoiceAmount=[0,];NoInvoiceAmount=[1,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[1,];TotalTaxAmount=[1,];TotalCoTaxAmt=[0,];CurTotalAmount=[1,];CertificateNo=[0915c9061_1712241534489460007,];AfterChangeAmt=[1,];CurAfterChangeAmt=[1,];CurChangeAmt=[0,];printCount=[0,];SCompanyID=[00001,];statusId=[0,];finishTime=[2017-12-24 15:34:48,];lastUpdateBy=[1,];lastUpdateTime=[2017-12-24 15:36:50,];createBy=[1,];createTime=[2017-12-24 15:34:48,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,];tblBuyInStockDet_tblGoods_BaseUnit=[,];tblBuyInStockDet_Qty=[1,];tblBuyInStockDet_Price=[1,];tblBuyInStockDet_Amount=[1,];tblBuyInStockDet_Remark=[,];tblBuyInStockDet_StockCode=[00001,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];tblBuyInStockDet_SalesOutID=[,];tblBuyInStockDet_GoodsCode=[0000300001,];tblBuyInStockDet_BatchNo=[,];tblBuyInStockDet_Inch=[,];tblBuyInStockDet_Hue=[,];tblBuyInStockDet_yearNO=[,];tblBuyInStockDet_ProDate=[,];tblBuyInStockDet_Availably=[,];tblBuyInStockDet_Seq=[,];tblBuyInStockDet_Discount=[100,];tblBuyInStockDet_DisPrice=[1,];tblBuyInStockDet_DisBackAmt=[1,];tblBuyInStockDet_DisAmount=[0,];tblBuyInStockDet_TaxPrice=[1,];tblBuyInStockDet_TaxAmount=[1,];tblBuyInStockDet_CoTaxAmt=[0,];tblBuyInStockDet_CurPrice=[1,];tblBuyInStockDet_CurAmount=[1,];tblBuyInStockDet_ApportionAmt=[0,];tblBuyInStockDet_SourceID=[,];tblBuyInStockDet_InvoiceAmount=[0,];tblBuyInStockDet_PresentSampleType=[,];tblBuyInStockDet_NotPayQty=[1,];tblBuyInStockDet_PayQty=[0,];tblBuyInStockDet_SecQty=[0,];tblBuyInStockDet_BaseQty=[0,];tblBuyInStockDet_CheckBarCode=[,];tblBuyInStockDet_BackPayQty=[0,];tblBuyInStockDet_PreferAmount=[0,];tblBuyInStockDet_detsId=[915c9061_1712241536510960012,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-24 15:38:30,394 Line:1525  select * from  tblBuyInStockDet where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:38:30,397 Line:1525  select * from  tblBuyPayAccount where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:38:30,400 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblBuyInStock where id= ? id= 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,402 Line:313 exeCondition:tblBuyInStock_Delete :true
 [DEBUG] 2017-12-24 15:38:30,403 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,403 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,404 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,404 Line:1270 delete
 [DEBUG] 2017-12-24 15:38:30,405 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,405 Line:313 exeCondition:tblBuyInStock_Delete :'0' != '0'
 [DEBUG] 2017-12-24 15:38:30,406 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,406 Line:313 exeCondition:tblBuyInStock_Delete :'update' =='delete'||'update' =='update'
 [DEBUG] 2017-12-24 15:38:30,407 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,408 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete:delete from tblSeqAuditing where BillID=?
 [DEBUG] 2017-12-24 15:38:30,408 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,409 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete,  影响行数=0
 [DEBUG] 2017-12-24 15:38:30,409 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:38:30,409 Line:313 exeCondition:tblBuyInStock_Delete :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:38:30,410 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,411 Line:313 exeCondition:tblBuyInStock_Delete_One :"0"!= "0"&&"update"=="returnAuditing"
 [DEBUG] 2017-12-24 15:38:30,411 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,412 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as BuyOutNo from tblBuyOutStock a,tblBuyOutStockDet b where a.id=b.f_ref and b.BuyInStockID=? and a.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,412 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,412 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,413 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,413 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,414 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,414 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNO as SalesOutNo from tblSalesOutStock where BuyInID=?
 [DEBUG] 2017-12-24 15:38:30,414 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,414 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,415 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,415 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,416 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,416 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=? and tblPay.AutoBillMarker=0 and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,416 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,417 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,417 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,417 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,418 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,418 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as PayReNo from tblPayDet left join tblPay on tblPay.id =tblPayDet.f_ref where tblPayDet.RefbillID=(select a.id from tblPay a,tblPayDet b where a.id=b.f_ref and RefbillID=? and a.AutoBillMarker=1) and tblPay.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,418 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,419 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,419 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,419 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,420 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,420 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BillNo as BuyReplaceNo from tblBuyReplace where BuyInStockID=?
 [DEBUG] 2017-12-24 15:38:30,420 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,420 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,421 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,421 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,422 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,422 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as InvoiceNo from tblBuyInfoDet,tblBuyInvoiceInfo where tblBuyInvoiceInfo.id=tblBuyInfoDet.f_ref and refbillID=? and tblBuyInvoiceInfo.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,422 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,422 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,423 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,423 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,424 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,424 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale2.BillNo as TFS2No from tblTransferSale2 where RefBillNo=(select BillNo from tblBuyInStock where id=?) and workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,424 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,424 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,425 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,425 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,425 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,426 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale3.BillNo as TFS3No from tblTransferSaleDet3,tblTransferSale3 where tblTransferSale3.id=tblTransferSaleDet3.f_ref and refbillID=? and tblTransferSale3.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,426 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,426 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,427 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,427 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,427 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,427 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select tblTransferSale4.BillNo as TFS4No from tblTransferSaleDet4,tblTransferSale4 where tblTransferSale4.id=tblTransferSaleDet4.f_ref and refbillID=(select BillNo from tblBuyInStock where id=?) and tblTransferSale4.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,428 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,428 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,428 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,429 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,429 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,429 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select  BillNo as AdjustNo from tblPayAdjustdet,tblPayAdjust where tblPayAdjust.id=tblPayAdjustdet.f_ref and tblPayAdjustdet.RefbillID=? and tblPayAdjust.workFlowNodeName!='print'
 [DEBUG] 2017-12-24 15:38:30,430 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,430 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,430 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,431 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,431 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,431 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select CredTypeID,OrderNo from tblAccMain where ?=1 and RefBillID=? and  workFlowNodeName='finish'
 [DEBUG] 2017-12-24 15:38:30,432 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,432 Line:988 1值：0
 [DEBUG] 2017-12-24 15:38:30,432 Line:988 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,432 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,433 Line:313 exeCondition:tblBuyInStock_Delete_One :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,433 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,433 Line:921 自定义执行的语句显示： tblBuyInStock_Delete_One :select BuyOrderID,StockCode,NeedPayAmt,PayAmount,CurAlrPayAmt from tblBuyInStock where id=?
 [DEBUG] 2017-12-24 15:38:30,434 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,434 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,434 Line:1025 query condition columnName:BuyOrderID----value:
 [DEBUG] 2017-12-24 15:38:30,435 Line:1025 query condition columnName:StockCode----value:00001
 [DEBUG] 2017-12-24 15:38:30,435 Line:1023 query condition columnName:NeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:38:30,435 Line:1023 query condition columnName:PayAmount----value:0E-8
 [DEBUG] 2017-12-24 15:38:30,435 Line:1023 query condition columnName:CurAlrPayAmt----value:0E-8
 [DEBUG] 2017-12-24 15:38:30,435 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,435 Line:313 exeCondition:tblBuyInStock_Delete_One :'0' != '0'
 [DEBUG] 2017-12-24 15:38:30,436 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,436 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:38:30,437 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,437 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delStockDet(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,437 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,437 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:38:30,437 Line:1270 1
 [DEBUG] 2017-12-24 15:38:30,439 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,440 Line:313 exeCondition:tblBuyInStock_Delete_One :'update' !='update'
 [DEBUG] 2017-12-24 15:38:30,441 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,441 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:38:30,442 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,442 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,442 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,443 Line:1270 delete
 [DEBUG] 2017-12-24 15:38:30,444 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,444 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:38:30,445 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,445 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_iterateExeProc(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,445 Line:1270 select id as IniId@SPFieldLink:case when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then 1 when isnull(PayTotalDebit@RepComma:0)!=0 or isnull(PayTotalLend@RepComma:0)!=0 then (case when 'true'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='915c9061_1712241534489460007'
 [DEBUG] 2017-12-24 15:38:30,445 Line:1270 proc_deleteComIni
 [DEBUG] 2017-12-24 15:38:30,446 Line:1270 @IniId@ParamLink:@ComType
 [DEBUG] 2017-12-24 15:38:30,447 Line:1292 存储过程内部信息： declare @IniId varchar(500) declare @ComType varchar(500)  declare @param1 varchar(5000)  declare @param2 varchar(5000)  declare iterCursor cursor for select id as IniId,case when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then 1 when isnull(PayTotalDebit,0)!=0 or isnull(PayTotalLend,0)!=0 then (case when 'true'='true' then 1 else 3 end) end as ComType from tblCompanyIni where relationDocID='915c9061_1712241534489460007'
open iterCursor
fetch next from iterCursor into @IniId,@ComType

declare @retCode int
declare @retVal  varchar(100)

while(@@fetch_status=0)
     begin	 set @param1=@IniId set @param2=@ComType exec proc_deleteComIni @param1,@param2, @retCode output,@retVal output  fetch next from iterCursor into @IniId,@ComType    end	

deallocate iterCursor
 [DEBUG] 2017-12-24 15:38:30,447 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,447 Line:313 exeCondition:tblBuyInStock_Delete_One : 'true'=='true'
 [DEBUG] 2017-12-24 15:38:30,448 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,448 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_delAccAndRefOper(?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,448 Line:1270 0
 [DEBUG] 2017-12-24 15:38:30,449 Line:1270 update
 [DEBUG] 2017-12-24 15:38:30,449 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,453 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-24 15:38:30,453 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-24 15:38:30,453 Line:425 ************上述语句执行时间：5
 [DEBUG] 2017-12-24 15:38:30,453 Line:313 exeCondition:tblBuyInStock_Delete_One :'update' =='update'
 [DEBUG] 2017-12-24 15:38:30,454 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,454 Line:1081 自定义执行的语句显示： tblBuyInStock_Delete_One:update tblBuyInStock set CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:38:30,454 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,455 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Delete_One,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,455 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:38:30,455 Line:313 exeCondition:tblBuyInStock_Delete_One :0.0>0
 [DEBUG] 2017-12-24 15:38:30,456 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,456 Line:313 exeCondition:tblBuyInStock_Delete_One :true
 [DEBUG] 2017-12-24 15:38:30,457 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,458 Line:1264 自定义执行的语句显示： tblBuyInStock_Delete_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,458 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,459 Line:1270 delete
 [DEBUG] 2017-12-24 15:38:30,460 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,460 Line:5984  UPDATE tblBuyInStock SET CurNeedPayAmt=?,BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,InVoiceType=?,PayAmount=?,ProceDureExp=?,AccAmt=?,FactOutcome=?,DiscountAmount=?,Currency=?,CurAlrPayAmt=?,CurDiscountAmount=?,CurProceDureExp=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,InvoiceAmount=?,CurBackAmount=?,CurAlreadyPayAmt=?,Discount=?,DisAmount=?,Tax=?,PayDate=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,CurTotalAmount=?,Attachment=?,CertificateNo=?,AfterChangeAmt=?,CurAfterChangeAmt=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-12-24 15:38:30,461 Line:5993 1:1.0
 [DEBUG] 2017-12-24 15:38:30,461 Line:5993 2:BI1712240017
 [DEBUG] 2017-12-24 15:38:30,461 Line:5993 3:2017-12-24
 [DEBUG] 2017-12-24 15:38:30,461 Line:5993 4:00003
 [DEBUG] 2017-12-24 15:38:30,461 Line:5993 5:00101
 [DEBUG] 2017-12-24 15:38:30,461 Line:5993 6:1
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 7:00001
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 8:3
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 9:0.0
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 10:0.0
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 11:0.0
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 12:0.0
 [DEBUG] 2017-12-24 15:38:30,462 Line:5993 13:0.0
 [DEBUG] 2017-12-24 15:38:30,463 Line:5993 14:
 [DEBUG] 2017-12-24 15:38:30,463 Line:5993 15:0.0
 [DEBUG] 2017-12-24 15:38:30,463 Line:5993 16:0.0
 [DEBUG] 2017-12-24 15:38:30,463 Line:5993 17:0.0
 [DEBUG] 2017-12-24 15:38:30,463 Line:5993 18:12
 [DEBUG] 2017-12-24 15:38:30,463 Line:5993 19:12
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 20:2017
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 21:
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 22:0.0
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 23:0.0
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 24:0.0
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 25:100.0
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 26:0.0
 [DEBUG] 2017-12-24 15:38:30,464 Line:5993 27:0.0
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 28:
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 29:1.0
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 30:1.0
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 31:1.0
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 32:0.0
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 33:1.0
 [DEBUG] 2017-12-24 15:38:30,465 Line:5993 34:
 [DEBUG] 2017-12-24 15:38:30,466 Line:5993 35:0915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,466 Line:5993 36:1.0
 [DEBUG] 2017-12-24 15:38:30,466 Line:5993 37:1.0
 [DEBUG] 2017-12-24 15:38:30,466 Line:5993 38:1
 [DEBUG] 2017-12-24 15:38:30,466 Line:5993 39:2017-12-24 15:38:30
 [DEBUG] 2017-12-24 15:38:30,467 Line:5894  DELETE FROM  tblBuyInStockDet  WHERE f_ref = ? 
 [DEBUG] 2017-12-24 15:38:30,468 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-24 15:38:30,468 Line:5853 1:915c9061_1712241538304680016
 [DEBUG] 2017-12-24 15:38:30,468 Line:5853 2:915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,468 Line:5853 3:00001
 [DEBUG] 2017-12-24 15:38:30,468 Line:5853 4:
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 5:
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 6:
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 7:0000300001
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 8:
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 9:
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 10:
 [DEBUG] 2017-12-24 15:38:30,469 Line:5853 11:
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 12:
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 13:
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 14:
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 15:1.0
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 16:1.0
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 17:1.0
 [DEBUG] 2017-12-24 15:38:30,470 Line:5853 18:0.0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 19:0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 20:0.0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 21:0.0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 22:0.0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 23:100.0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 24:1.0
 [DEBUG] 2017-12-24 15:38:30,471 Line:5853 25:1.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 26:0.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 27:1.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 28:1.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 29:0.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 30:1.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 31:1.0
 [DEBUG] 2017-12-24 15:38:30,472 Line:5853 32:0.0
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 33:0.0
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 34:0.0
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 35:0.0
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 36:0.0
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 37:
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 38:0.0
 [DEBUG] 2017-12-24 15:38:30,473 Line:5853 39:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 40:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 41:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 42:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 43:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 44:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 45:0.0
 [DEBUG] 2017-12-24 15:38:30,474 Line:5853 46:0.0
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 47:0
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 48:0.0
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 49:0.0
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 50:
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 51:0.0
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 52:1.0
 [DEBUG] 2017-12-24 15:38:30,475 Line:5853 53:0.0
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 54:0
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 55:0
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 56:
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 57:0.0
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 58:0.0
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 59:
 [DEBUG] 2017-12-24 15:38:30,476 Line:5853 60:0.0
 [DEBUG] 2017-12-24 15:38:30,477 Line:5853 61:00001
 [DEBUG] 2017-12-24 15:38:30,477 Line:5894  DELETE FROM  tblBuyPayAccount  WHERE f_ref = ? 
 [DEBUG] 2017-12-24 15:38:30,478 Line:313 exeCondition:tblBuyInStock_Add :1 < 0
 [DEBUG] 2017-12-24 15:38:30,479 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,480 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-24 15:38:30,480 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,480 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-24 15:38:30,481 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,481 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-24 15:38:30,482 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,482 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:38:30,483 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,483 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-24 15:38:30,483 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,484 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:38:30,484 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,485 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-24 15:38:30,485 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,486 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,486 Line:988 2值：2017-12-24
 [DEBUG] 2017-12-24 15:38:30,486 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,487 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,487 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,488 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:38:30,488 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,488 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,488 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:38:30,489 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,489 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,490 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,490 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-24 15:38:30,491 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,491 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,491 Line:988 2值：00003
 [DEBUG] 2017-12-24 15:38:30,492 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,492 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,492 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,493 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-24 15:38:30,493 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,493 Line:988 1值：false
 [DEBUG] 2017-12-24 15:38:30,493 Line:988 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,494 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-24 15:38:30,494 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,494 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-24 15:38:30,495 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,495 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-24 15:38:30,495 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,495 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,496 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,496 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,497 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,497 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:38:30,497 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,498 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,499 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,499 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,501 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,501 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-24 15:38:30,501 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,502 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,502 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,503 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,503 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,503 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-24 15:38:30,504 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,504 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,504 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,505 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,505 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,506 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,507 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,508 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-24 15:38:30,508 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,509 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,509 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,510 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,511 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,511 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-24 15:38:30,512 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,512 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-24 15:38:30,513 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,513 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,514 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,514 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,515 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,516 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-24 15:38:30,516 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,516 Line:988 1值：1
 [DEBUG] 2017-12-24 15:38:30,516 Line:988 2值：0
 [DEBUG] 2017-12-24 15:38:30,516 Line:988 3值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,518 Line:1025 query condition columnName:SumDetAmt----value:1.0
 [DEBUG] 2017-12-24 15:38:30,518 Line:1025 query condition columnName:sumMainAmt----value:1.0
 [DEBUG] 2017-12-24 15:38:30,518 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,518 Line:313 exeCondition:tblBuyInStock_Add :1.0!=1.0
 [DEBUG] 2017-12-24 15:38:30,519 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,519 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-24 15:38:30,520 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,520 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,521 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,521 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,522 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,524 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-24 15:38:30,524 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,525 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,525 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,526 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,526 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,527 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-24 15:38:30,527 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,527 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,528 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,528 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-24 15:38:30,529 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,529 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-24 15:38:30,529 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,530 Line:988 1值：
 [DEBUG] 2017-12-24 15:38:30,530 Line:988 2值：00001
 [DEBUG] 2017-12-24 15:38:30,531 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,531 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-24 15:38:30,532 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,532 Line:988 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,532 Line:988 2值：
 [DEBUG] 2017-12-24 15:38:30,532 Line:988 3值：
 [DEBUG] 2017-12-24 15:38:30,532 Line:988 4值：
 [DEBUG] 2017-12-24 15:38:30,533 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,533 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-24 15:38:30,534 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,536 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-24 15:38:30,536 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,536 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-24 15:38:30,536 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,538 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-24 15:38:30,539 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,539 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:38:30,540 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,541 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-24 15:38:30,542 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:38:30,542 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,543 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,543 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,543 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:38:30,543 Line:1154 1整数 值：2
 [DEBUG] 2017-12-24 15:38:30,543 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,544 Line:1157 3值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,544 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,545 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,545 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-24 15:38:30,545 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,545 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,546 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,546 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:38:30,546 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-24 15:38:30,547 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,548 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,548 Line:229 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,548 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-24 15:38:30,548 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,549 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,549 Line:229 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:38:30,550 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-24 15:38:30,550 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,551 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-24 15:38:30,551 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,551 Line:1157 2值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,552 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,552 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:38:30,552 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-24 15:38:30,553 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,553 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-24 15:38:30,554 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,554 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,555 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,555 Line:1270 add
 [DEBUG] 2017-12-24 15:38:30,556 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,557 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-24 15:38:30,557 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,558 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:38:30,558 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,559 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:38:30,560 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,560 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-24 15:38:30,561 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,563 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-24 15:38:30,563 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-24 15:38:30,564 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:38:30,565 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,565 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-24 15:38:30,566 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,566 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-24 15:38:30,567 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,569 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-24 15:38:30,570 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,570 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:38:30,571 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,571 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-24 15:38:30,572 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,572 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:38:30,573 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,573 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-24 15:38:30,574 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,574 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:38:30,576 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,576 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-24 15:38:30,576 Line:1157 1值：915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,577 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=1
 [DEBUG] 2017-12-24 15:38:30,577 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-24 15:38:30,577 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:38:30,578 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,578 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,579 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,579 Line:1270 add
 [DEBUG] 2017-12-24 15:38:30,580 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,581 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-24 15:38:30,581 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,582 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-24 15:38:30,582 Line:1270 12
 [DEBUG] 2017-12-24 15:38:30,582 Line:1270 2017
 [DEBUG] 2017-12-24 15:38:30,582 Line:1270 12
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 BI1712240017
 [DEBUG] 2017-12-24 15:38:30,583 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 1
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 1
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 2017-12-24 15:34:48
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 2017-12-24 15:38:30
 [DEBUG] 2017-12-24 15:38:30,584 Line:1270 00001
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 00003
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 1
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 00101
 [DEBUG] 2017-12-24 15:38:30,585 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 0
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-24 15:38:30,586 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-24 15:38:30,587 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-24 15:38:30,587 Line:1270 f_ref='915c9061_1712241534489460007'
 [DEBUG] 2017-12-24 15:38:30,594 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'915c9061_1712241534489460007','2017-12-24','BI1712240017','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-24 15:34:48','2017-12-24 15:38:30','00001' from tblBuyInStockDet where f_ref='915c9061_1712241534489460007' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-24 15:38:30,594 Line:1292 存储过程内部信息： 1
 [DEBUG] 2017-12-24 15:38:30,594 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:38:30,595 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-24 15:38:30,595 Line:425 ************上述语句执行时间：13
 [DEBUG] 2017-12-24 15:38:30,595 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-24 15:38:30,596 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,596 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:38:30,597 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,597 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-24 15:38:30,598 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,598 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-24 15:38:30,598 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-24 15:38:30,599 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,599 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-24 15:38:30,600 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,600 Line:313 exeCondition:tblBuyInStock_Add_One :'update' == 'update'
 [DEBUG] 2017-12-24 15:38:30,601 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,601 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_negativeStock(?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,601 Line:1270 zh_CN
 [DEBUG] 2017-12-24 15:38:30,601 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,601 Line:1270 00001
 [DEBUG] 2017-12-24 15:38:30,602 Line:1270 1
 [DEBUG] 2017-12-24 15:38:30,605 Line:1292 存储过程内部信息： declare goods_cursor cursor for select billNo,goods,StockFullName,prop,case when len(isnull(Seq,''))=0 then '  ('+dbo.throwZero(cast(sum(totalQty) as varchar(30)))+')' else '' end,lastMarker from (select a.billNo,b.GoodsNumber+' '+b.GoodsFullName as goods,c.StockFullName,isnull(BatchNo,'')+' '+isnull(Inch,'')+' '+isnull(yearNO,'')+' '+isnull(Hue,'')+' '+isnull(ProDate,'')+' '+isnull(Availably,'')+' '+isnull(Seq,'') as prop,totalQty,isnull(Seq,'') as Seq,a.lastMarker from tblStockDet a,tblGoods b,tblStock c where (goodPropHash in (select goodPropHash from tblNegativeBill where BillId='915c9061_1712241534489460007') or goodPropHash in (select goodPropHash from tblStockDet where BillId='915c9061_1712241534489460007') ) and a.goodsCode=b.classCode and a.stockCode=c.classCode and totalQty<0 and((periodYear=2017 and period>=12) or periodYear>2017)) as tab group by billNo,goods,StockFullName,prop,Seq,lastMarker order by lastMarker,billNo,StockFullName
 [DEBUG] 2017-12-24 15:38:30,605 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:38:30,606 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-24 15:38:30,606 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,606 Line:988 1值：1
 [DEBUG] 2017-12-24 15:38:30,606 Line:988 2值：0
 [DEBUG] 2017-12-24 15:38:30,606 Line:988 3值：1
 [DEBUG] 2017-12-24 15:38:30,606 Line:988 4值：0
 [DEBUG] 2017-12-24 15:38:30,607 Line:988 5值：0
 [DEBUG] 2017-12-24 15:38:30,607 Line:988 6值：1
 [DEBUG] 2017-12-24 15:38:30,608 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:38:30,608 Line:1023 query condition columnName:CRNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:38:30,608 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-24 15:38:30,608 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,608 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-24 15:38:30,609 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,610 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-24 15:38:30,611 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-24 15:38:30,612 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,612 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,613 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,614 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,614 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,615 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,615 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-24 15:38:30,616 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-24 15:38:30,623 Line:434 ************上述语句执行时间：14
 [DEBUG] 2017-12-24 15:38:30,623 Line:313 exeCondition:tblBuyInStock_Add_One :1>0
 [DEBUG] 2017-12-24 15:38:30,624 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,625 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,625 Line:1270 1915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,625 Line:1270 00003
 [DEBUG] 2017-12-24 15:38:30,625 Line:1270 1
 [DEBUG] 2017-12-24 15:38:30,626 Line:1270 2017-12-24
 [DEBUG] 2017-12-24 15:38:30,626 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=1@SPFieldLink:RelationDocID=915c9061_1712241534489460007@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=1@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-24 15:34:48@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-24 15:38:30@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712240017@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-24 15:38:30,629 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1915c9061_1712241534489460007',14,'00003','2017-12-24','12','2017','12','0','1','915c9061_1712241534489460007','','1','0','1','1','2017-12-24 15:34:48','1','2017-12-24 15:38:30','00001','tblBuyInStock','BI1712240017','1','00101','0','')
 [DEBUG] 2017-12-24 15:38:30,629 Line:425 ************上述语句执行时间：4
 [DEBUG] 2017-12-24 15:38:30,629 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 1>0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:38:30,630 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,630 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-24 15:38:30,631 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,631 Line:313 exeCondition:tblBuyInStock_Add_One :1.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-24 15:38:30,632 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,632 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&1.00000000>=0
 [DEBUG] 2017-12-24 15:38:30,632 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,633 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-24 15:38:30,633 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,634 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-24 15:38:30,634 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,635 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-24 15:38:30,635 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,635 Line:988 1值：1
 [DEBUG] 2017-12-24 15:38:30,635 Line:988 2值：0
 [DEBUG] 2017-12-24 15:38:30,635 Line:988 3值：1
 [DEBUG] 2017-12-24 15:38:30,635 Line:988 4值：0
 [DEBUG] 2017-12-24 15:38:30,636 Line:988 5值：0
 [DEBUG] 2017-12-24 15:38:30,636 Line:988 6值：0
 [DEBUG] 2017-12-24 15:38:30,636 Line:1023 query condition columnName:RNeedPayAmt----value:1.00000000
 [DEBUG] 2017-12-24 15:38:30,637 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-24 15:38:30,637 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-24 15:38:30,637 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,637 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:38:30,638 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,638 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-24 15:38:30,638 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,639 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:38:30,639 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,639 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-24 15:38:30,640 Line:321 flag:false
 [DEBUG] 2017-12-24 15:38:30,640 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-24 15:38:30,642 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,642 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-24 15:38:30,643 Line:1270 915c9061_1712241534489460007
 [DEBUG] 2017-12-24 15:38:30,643 Line:1270 add
 [DEBUG] 2017-12-24 15:38:30,644 Line:425 ************上述语句执行时间：2
 [DEBUG] 2017-12-24 15:38:30,644 Line:921 自定义执行的语句显示： tblBuyInStock_Add :			
			select 'http://fc.tz1288.com/fc.asmx/RenewPackage' as url,'xst9527008' as UserName,'2017-12-20' as StartDateTime, '2018-12-20' as EndDateTime, '20' as wsCount, 'bc2731782e6b86b01303d9c6d6d22ff9' as Token
		
 [DEBUG] 2017-12-24 15:38:30,644 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-24 15:38:30,645 Line:1025 query condition columnName:url----value:http://fc.tz1288.com/fc.asmx/RenewPackage
 [DEBUG] 2017-12-24 15:38:30,645 Line:1025 query condition columnName:UserName----value:xst9527008
 [DEBUG] 2017-12-24 15:38:30,645 Line:1025 query condition columnName:StartDateTime----value:2017-12-20
 [DEBUG] 2017-12-24 15:38:30,645 Line:1025 query condition columnName:EndDateTime----value:2018-12-20
 [DEBUG] 2017-12-24 15:38:30,645 Line:1025 query condition columnName:wsCount----value:20
 [DEBUG] 2017-12-24 15:38:30,646 Line:1025 query condition columnName:Token----value:bc2731782e6b86b01303d9c6d6d22ff9
 [DEBUG] 2017-12-24 15:38:30,646 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-24 15:38:30,646 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-24 15:38:30,646 Line:321 flag:true
 [DEBUG] 2017-12-24 15:38:30,647 Line:1753 自定义执行的语句显示： tblBuyInStock_Add: 开始执行java方法tzhive.HiveServlet.optHive(http://fc.tz1288.com/fc.asmx/RenewPackage,xst9527008,2017-12-20,2018-12-20,20,bc2731782e6b86b01303d9c6d6d22ff9)
 [DEBUG] 2017-12-24 15:39:10,402 Line:1763 自定义执行的语句显示： tblBuyInStock_Add: 执行java方法完毕返回：void
 [DEBUG] 2017-12-24 15:39:10,403 Line:443 ************上述语句执行时间：39756
 [DEBUG] 2017-12-24 15:39:11,877 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=915c9061_1712241534489460007&parentCode=null&f_brother=&draftQuery=&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-24 15:39:11,877 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[915c9061_1712241534489460007,];parentCode=[null,];f_brother=[,];draftQuery=[,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-24 15:39:11,878 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='915c9061_1712241534489460007' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-24 15:39:11,881 Line:1525  select * from  tblBuyInStockDet where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:39:11,883 Line:1525  select * from  tblBuyPayAccount where f_ref = '915c9061_1712241534489460007' order by detOrderNo
 [DEBUG] 2017-12-24 15:49:02,184 Line:73 --------Destroy Config Refresh Thread---------------
 [DEBUG] 2017-12-24 15:49:02,186 Line:105 --------Destroy Hibernate---------------
 [INFO ] 2017-12-24 15:49:02,197 Line:127 测试执行路径
 java.lang.Exception
	at com.menyi.web.util.BaseFilter.destroy(BaseFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:313)
	at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:4890)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5711)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.StandardContext.reload(StandardContext.java:4026)
	at org.apache.catalina.startup.HostConfig.reload(HostConfig.java:1479)
	at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1462)
	at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1646)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:328)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1374)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1546)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1556)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1524)
	at java.lang.Thread.run(Thread.java:745)
[INFO ] 2017-12-24 15:49:32,281 Line:206 系统开始启动，最大内存：1792;目前总内存：700;目前空闲内存：282
 [INFO ] 2017-12-24 15:49:32,291 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 15:49:38,617 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 15:49:38,967 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 15:49:38,970 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 15:49:38,971 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 15:49:38,973 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 15:49:38,989 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 15:49:38,992 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 15:49:40,735 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 15:49:40,773 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 15:49:40,818 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 15:49:40,839 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 15:49:42,506 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 15:49:42,506 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 15:49:43,319 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 15:49:43,374 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 15:49:44,204 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 15:49:44,227 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 15:49:44,229 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 15:49:44,236 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 15:49:44,249 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 15:49:44,251 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 15:49:44,272 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 15:49:46,916 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 15:49:47,299 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 15:49:47,315 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 15:49:47,375 Line:2994 --------Init SMS Start ---------------
 [ERROR] 2017-12-24 15:49:47,819 Line:3005 --------Init MSGConnectCenter Failture-----------
 [INFO ] 2017-12-24 15:49:47,819 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 15:49:47,819 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 15:49:50,899 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 15:49:50,900 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 15:50:47,949 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 15:51:34,590 Line:73 --------Destroy Config Refresh Thread---------------
 [DEBUG] 2017-12-24 15:51:34,591 Line:105 --------Destroy Hibernate---------------
 [INFO ] 2017-12-24 15:51:34,599 Line:127 测试执行路径
 java.lang.Exception
	at com.menyi.web.util.BaseFilter.destroy(BaseFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:313)
	at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:4890)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5711)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.StandardContext.reload(StandardContext.java:4026)
	at org.apache.catalina.startup.HostConfig.reload(HostConfig.java:1479)
	at org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1462)
	at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1646)
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:328)
	at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
	at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1374)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1546)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1556)
	at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1524)
	at java.lang.Thread.run(Thread.java:745)
[INFO ] 2017-12-24 15:52:01,951 Line:206 系统开始启动，最大内存：1792;目前总内存：657;目前空闲内存：338
 [INFO ] 2017-12-24 15:52:01,975 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 15:52:08,486 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 15:52:08,858 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 15:52:08,861 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 15:52:08,862 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 15:52:08,864 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 15:52:08,885 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 15:52:08,888 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 15:52:10,653 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 15:52:10,700 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 15:52:10,745 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 15:52:10,765 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 15:52:12,504 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 15:52:12,504 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 15:52:13,475 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 15:52:13,618 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 15:52:15,317 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 15:52:15,378 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 15:52:15,381 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 15:52:15,395 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 15:52:15,423 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 15:52:15,426 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 15:52:15,467 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 15:52:18,123 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 15:52:18,476 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 15:52:18,494 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 15:52:18,556 Line:2994 --------Init SMS Start ---------------
 [ERROR] 2017-12-24 15:52:18,976 Line:3005 --------Init MSGConnectCenter Failture-----------
 [INFO ] 2017-12-24 15:52:18,976 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 15:52:18,976 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 15:52:22,054 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 15:52:22,055 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 15:53:03,539 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:53:03,541 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 15:53:03,541 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 15:53:03,988 Line:5227 GlobalsTool.js 生成js 时间67:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:53:04,033 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:53:04,033 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:53:04,147 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514101984137
 [DEBUG] 2017-12-24 15:53:04,161 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514101984137,];
 [DEBUG] 2017-12-24 15:53:04,341 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:53:04,341 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:53:05,413 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514101985412
 [DEBUG] 2017-12-24 15:53:05,413 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514101985412,];
 [DEBUG] 2017-12-24 15:53:05,481 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514101985480
 [DEBUG] 2017-12-24 15:53:05,481 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514101985480,];
 [DEBUG] 2017-12-24 15:53:05,553 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 15:53:05,554 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 15:53:05,593 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 15:53:05,605 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 15:53:05,700 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:53:05,700 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:53:12,079 Line:73 --------Destroy Config Refresh Thread---------------
 [DEBUG] 2017-12-24 15:53:12,080 Line:105 --------Destroy Hibernate---------------
 [INFO ] 2017-12-24 15:53:12,089 Line:127 测试执行路径
 java.lang.Exception
	at com.menyi.web.util.BaseFilter.destroy(BaseFilter.java:125)
	at org.apache.catalina.core.ApplicationFilterConfig.release(ApplicationFilterConfig.java:313)
	at org.apache.catalina.core.StandardContext.filterStop(StandardContext.java:4890)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5711)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1591)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1580)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[INFO ] 2017-12-24 15:53:21,207 Line:206 系统开始启动，最大内存：1792;目前总内存：305;目前空闲内存：212
 [INFO ] 2017-12-24 15:53:21,396 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 15:53:25,383 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 15:53:25,679 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 15:53:25,682 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 15:53:25,685 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 15:53:25,687 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 15:53:25,701 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 15:53:25,705 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 15:53:26,798 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 15:53:26,817 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 15:53:26,841 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 15:53:26,850 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 15:53:27,620 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 15:53:27,620 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 15:53:28,125 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 15:53:28,197 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 15:53:28,959 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 15:53:28,981 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 15:53:28,983 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 15:53:28,990 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 15:53:29,003 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 15:53:29,004 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 15:53:29,024 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 15:53:31,729 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 15:53:32,056 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 15:53:32,070 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 15:53:32,124 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-24 15:53:32,624 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 15:53:32,624 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 15:53:33,896 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 15:53:33,897 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 15:53:54,847 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:53:54,848 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 15:53:54,849 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 15:53:55,286 Line:5227 GlobalsTool.js 生成js 时间63:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:53:55,332 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 15:53:55,333 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 15:53:55,548 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514102035537
 [DEBUG] 2017-12-24 15:53:55,565 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514102035537,];
 [DEBUG] 2017-12-24 15:53:55,644 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 15:53:55,645 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 15:53:56,909 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514102036908
 [DEBUG] 2017-12-24 15:53:56,910 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514102036908,];
 [DEBUG] 2017-12-24 15:53:56,976 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514102036975
 [DEBUG] 2017-12-24 15:53:56,976 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514102036975,];
 [DEBUG] 2017-12-24 15:53:57,050 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 15:53:57,050 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 15:53:57,090 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 15:53:57,103 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 15:53:57,201 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 15:53:57,201 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 15:53:57,210 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:53:57,439 Line:5227 GlobalsTool.js 生成js 时间29:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-24 15:53:57,599 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 15:53:57,599 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 15:53:57,599 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 15:53:57,599 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:53:57,601 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:53:57,616 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 15:53:57,616 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:53:57,617 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:53:57,627 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 15:53:57,628 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:53:57,629 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:53:57,637 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 15:53:57,638 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 15:53:57,639 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 15:54:32,768 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [INFO ] 2017-12-24 21:11:43,532 Line:206 系统开始启动，最大内存：1792;目前总内存：300;目前空闲内存：200
 [INFO ] 2017-12-24 21:11:43,780 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-24 21:11:50,759 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-24 21:11:50,987 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-24 21:11:51,005 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-24 21:11:51,008 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-24 21:11:51,011 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-24 21:11:51,020 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-24 21:11:51,030 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-24 21:11:52,136 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-24 21:11:52,165 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-24 21:11:52,203 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-24 21:11:52,217 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-24 21:11:54,188 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-24 21:11:54,188 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-24 21:11:55,336 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-24 21:11:55,511 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-24 21:11:56,312 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-24 21:11:56,341 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-24 21:11:56,346 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-24 21:11:56,359 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-24 21:11:56,376 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-24 21:11:56,382 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-24 21:11:56,416 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-24 21:11:59,673 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-24 21:12:00,045 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-24 21:12:00,063 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-24 21:12:00,121 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-24 21:12:00,864 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-24 21:12:00,865 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-24 21:12:03,500 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-25 00:00:00
 [INFO ] 2017-12-24 21:12:03,501 Line:137 SAFE 碎片任务启动，时间2017-12-31 00:00:00
 [DEBUG] 2017-12-24 21:12:06,123 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 21:12:06,125 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-24 21:12:06,125 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-24 21:12:06,726 Line:5227 GlobalsTool.js 生成js 时间135:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-24 21:12:06,866 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-24 21:12:06,869 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-24 21:12:07,277 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514121127264
 [DEBUG] 2017-12-24 21:12:07,313 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514121127264,];
 [DEBUG] 2017-12-24 21:12:07,505 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-24 21:12:07,506 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-24 21:12:09,263 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514121129261
 [DEBUG] 2017-12-24 21:12:09,263 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514121129261,];
 [DEBUG] 2017-12-24 21:12:09,328 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514121129327
 [DEBUG] 2017-12-24 21:12:09,329 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514121129327,];
 [DEBUG] 2017-12-24 21:12:09,404 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 21:12:09,405 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[4bb014178122135956636fc13eb8033c,];
 [DEBUG] 2017-12-24 21:12:14,837 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514121134834
 [DEBUG] 2017-12-24 21:12:14,838 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514121134834,];
 [DEBUG] 2017-12-24 21:12:14,843 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514121134840
 [DEBUG] 2017-12-24 21:12:14,844 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514121134840,];
 [DEBUG] 2017-12-24 21:12:14,857 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-24 21:12:14,858 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-24 21:12:14,915 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-24 21:12:14,930 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-24 21:12:14,997 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-24 21:12:14,997 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-24 21:12:15,019 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 21:12:15,324 Line:5227 GlobalsTool.js 生成js 时间37:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-24 21:12:15,574 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-24 21:12:15,574 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-24 21:12:15,575 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-24 21:12:15,575 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-24 21:12:15,576 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 21:12:15,588 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-24 21:12:15,589 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-24 21:12:15,590 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 21:12:15,599 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-24 21:12:15,600 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-24 21:12:15,600 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 21:12:15,609 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-24 21:12:15,609 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-24 21:12:15,610 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-24 21:13:01,058 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 21:14:38,795 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:14:38,796 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:14:38,796 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:14:38,847 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:14:38,907 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-24 21:14:38,907 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-24 21:14:38,908 Line:243 AIOApi op=getEnum&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:14:38,914 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-24 21:15:04,450 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-24 21:15:04,451 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-24 21:15:04,451 Line:243 AIOApi op=popup&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:04,469 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-24 21:15:04,480 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-24 21:15:05,971 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-24 21:15:05,974 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-24T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-24 21:15:05,976 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:06,562 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-24 21:15:06,574 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-24 21:15:06,575 Line:582 ReportDataMgt.getReportData 参数2:2017-12-24T16:00:00.000Z
 [DEBUG] 2017-12-24 21:15:06,609 Line:689 通过SQL读原始数据：35
 [DEBUG] 2017-12-24 21:15:06,610 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:15:06,646 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-24T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-24 21:15:08,191 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-24 21:15:08,193 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-24T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-24 21:15:08,193 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:08,210 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-24 21:15:08,211 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-24 21:15:08,211 Line:582 ReportDataMgt.getReportData 参数2:2017-12-24T16:00:00.000Z
 [DEBUG] 2017-12-24 21:15:08,243 Line:689 通过SQL读原始数据：32
 [DEBUG] 2017-12-24 21:15:08,261 Line:1391 整理数据：18
 [DEBUG] 2017-12-24 21:15:08,266 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-24T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-24 21:15:09,971 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:15:09,972 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:15:09,973 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:09,999 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:15:10,000 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:15:10,000 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:15:10,000 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:15:10,000 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:15:10,001 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:15:10,001 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:15:10,001 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:15:10,002 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:15:10,003 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:15:10,004 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:15:10,005 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:15:10,005 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:15:10,007 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:15:10,008 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:15:10,008 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:15:10,009 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:15:10,009 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:15:10,009 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:15:10,057 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:15:10,057 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:15:10,057 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:10,058 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:10,058 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:15:10,058 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:10,058 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:15:10,058 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:15:10,059 Line:689 通过SQL读原始数据：59
 [DEBUG] 2017-12-24 21:15:10,060 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:15:10,104 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:15:11,441 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:15:11,442 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:15:11,443 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:11,465 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:15:11,466 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:15:11,467 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:15:11,467 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:15:11,468 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:15:11,468 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:15:11,470 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:15:11,470 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:15:11,470 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:15:11,471 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:15:11,472 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:15:11,472 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:15:11,473 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:15:11,473 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:15:11,473 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:15:11,473 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:15:11,474 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:15:11,474 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:15:11,474 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:15:11,476 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:15:11,476 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:15:11,477 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:11,477 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:11,477 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:15:11,477 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:11,477 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:15:11,478 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:15:11,478 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-24 21:15:11,479 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:15:11,494 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:15:21,097 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:15:21,098 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[00003,];StockCode=[,];
 [DEBUG] 2017-12-24 21:15:21,098 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:21,110 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:15:21,111 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:15:21,111 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:15:21,111 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:15:21,111 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:15:21,111 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:15:21,112 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:15:21,113 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:15:21,113 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:15:21,113 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:15:21,113 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:15:21,113 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:15:21,113 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:15:21,137 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:15:21,138 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:15:21,138 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:21,139 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:21,140 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:15:21,140 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:21,141 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:15:21,141 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:15:21,141 Line:689 通过SQL读原始数据：30
 [DEBUG] 2017-12-24 21:15:21,142 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:15:21,147 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:15:24,293 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:15:24,294 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[0000300001,];StockCode=[,];
 [DEBUG] 2017-12-24 21:15:24,294 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:15:24,313 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:15:24,315 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:15:24,316 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:15:24,317 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:15:24,318 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:15:24,319 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:15:24,319 Line:582 ReportDataMgt.getReportData 参数6:0000300001
 [DEBUG] 2017-12-24 21:15:24,320 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:15:24,320 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:15:24,321 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:15:24,321 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:15:24,322 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:15:24,322 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:15:24,322 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:15:24,322 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:15:24,323 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:15:24,323 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:15:24,323 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:15:24,323 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:15:24,346 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:15:24,347 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:15:24,347 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:24,347 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:24,347 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:15:24,347 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:15:24,348 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:15:24,348 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '0000300001_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '0000300001%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '0000300001%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '0000300001%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:15:24,348 Line:689 通过SQL读原始数据：33
 [DEBUG] 2017-12-24 21:15:24,348 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:15:24,352 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:19:41,173 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=1
 [DEBUG] 2017-12-24 21:19:41,174 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-24 21:19:41,175 Line:215 ---------->SET Page 1 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-12-24 21:19:42,111 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-12-24 21:19:42,111 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-12-24 21:19:43,648 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do?src=menu&winCurIndex=2
 [DEBUG] 2017-12-24 21:19:43,649 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-24 21:19:43,649 Line:215 ---------->SET Page 2 DEFAULT URL = /ReportSetQueryAction.do
 [DEBUG] 2017-12-24 21:19:49,213 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do
 [DEBUG] 2017-12-24 21:19:49,213 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[2,2,];styleType=[,];reportNames=[虚拟库存,];statusIds=[0,];reportType=[,];reportModule=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:19:52,753 Line:135 BaseAction.execute 请求地址：/ReportSetAction.do?operation=7&keyId=fc26a1c0_0911091911043430204&winCurIndex=2&reportNames=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98
 [DEBUG] 2017-12-24 21:19:52,754 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[fc26a1c0_0911091911043430204,];winCurIndex=[2,];reportNames=[è???????????,];
 [DEBUG] 2017-12-24 21:19:52,993 Line:5227 GlobalsTool.js 生成js 时间118:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-24 21:21:15,221 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do?winCurIndex=2&reportNames=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98
 [DEBUG] 2017-12-24 21:21:15,222 Line:146 BaseAction.execute 操作人:admin;请求数据：winCurIndex=[2,];reportNames=[è???????????,];
 [DEBUG] 2017-12-24 21:21:16,918 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=getTablList&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD2800F0321459CD79230C98562ED3F03CD4
 [DEBUG] 2017-12-24 21:21:17,007 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=getSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD2800F0321459CD79237686458C02F7B7F6
 [DEBUG] 2017-12-24 21:21:17,893 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=getSysType&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD2800F0321459CD79237686458C02F7B7F6&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD2800F0321459CD79237686458C02F7B7F6
 [DEBUG] 2017-12-24 21:23:01,697 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD284BA3FE8880DE75CD5038F594B7A91F37
 [DEBUG] 2017-12-24 21:23:46,215 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:23:46,217 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:23:46,218 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:23:46,300 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:23:46,301 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:23:46,301 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:23:46,301 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:23:46,302 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:23:46,302 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:23:46,302 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:23:46,302 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:23:46,302 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:23:46,302 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:23:46,302 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:23:46,303 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:23:46,304 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:23:46,401 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:23:46,401 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:23:46,402 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:46,402 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:46,402 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:23:46,402 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:46,402 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:23:46,402 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:23:46,403 Line:689 通过SQL读原始数据：102
 [DEBUG] 2017-12-24 21:23:46,404 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:23:46,416 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:23:49,323 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:23:49,324 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[00001,];StockCode=[,];
 [DEBUG] 2017-12-24 21:23:49,324 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:23:49,337 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:23:49,337 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:23:49,337 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:23:49,337 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:23:49,337 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:23:49,338 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:23:49,338 Line:582 ReportDataMgt.getReportData 参数6:00001
 [DEBUG] 2017-12-24 21:23:49,338 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:23:49,338 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:23:49,338 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:23:49,338 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:23:49,338 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:23:49,339 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:23:49,362 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:23:49,363 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:23:49,363 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:49,363 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:49,364 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:23:49,364 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:49,364 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:23:49,364 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00001_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00001%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00001%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00001%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:23:49,364 Line:689 通过SQL读原始数据：27
 [DEBUG] 2017-12-24 21:23:49,364 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:23:49,366 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:23:54,871 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:23:54,874 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:23:54,876 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:23:54,898 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:23:54,898 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:23:54,898 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:23:54,899 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:23:54,899 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:23:54,899 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:23:54,899 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:23:54,899 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:23:54,899 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:23:54,899 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:23:54,900 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:23:54,900 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:23:54,900 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:23:54,900 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:23:54,900 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:23:54,900 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:23:54,901 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:23:54,901 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:23:54,901 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:23:54,903 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:23:54,904 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:23:54,904 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:54,904 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:54,904 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:23:54,904 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:23:54,904 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:23:54,905 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:23:54,905 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-24 21:23:54,906 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:23:54,915 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:24:40,727 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD28DA2BF65EDD40B1A38AD219FA989EC390
 [DEBUG] 2017-12-24 21:24:57,984 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD28696A428BB839D9177686458C02F7B7F6
 [DEBUG] 2017-12-24 21:25:02,805 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD280AACF59D66D64D495622FDE4212056BC
 [DEBUG] 2017-12-24 21:25:14,110 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=3
 [DEBUG] 2017-12-24 21:25:14,111 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[3,];
 [DEBUG] 2017-12-24 21:25:14,111 Line:215 ---------->SET Page 3 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:25:14,244 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-24 21:25:14,244 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=3&checkTab=Y
 [DEBUG] 2017-12-24 21:25:14,245 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-24 21:25:14,245 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[3,];checkTab=[Y,];
 [DEBUG] 2017-12-24 21:25:14,246 Line:215 ---------->SET Page 3 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:25:14,246 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-24 21:25:14,653 Line:5227 GlobalsTool.js 生成js 时间14:/js/gen/report.vjs_zh_CN.js
 [DEBUG] 2017-12-24 21:25:16,074 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:25:16,074 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:25:16,085 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:25:16,086 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:25:16,086 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:25:16,086 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:25:16,086 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:25:16,086 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:25:16,086 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:25:16,087 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:25:16,087 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:25:16,087 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:25:16,088 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:25:16,089 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:25:16,089 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:25:16,089 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:25:16,090 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:25:16,090 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:25:16,090 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:25:16,091 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:25:16,091 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:25:16,166 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:25:16,166 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:25:16,166 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:16,167 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:16,167 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:25:16,167 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:16,167 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:25:16,167 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:25:16,168 Line:689 通过SQL读原始数据：82
 [DEBUG] 2017-12-24 21:25:16,169 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:25:36,256 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:25:36,257 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:25:36,329 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:25:36,329 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:25:36,330 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:25:36,330 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:25:36,330 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:25:36,330 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:25:36,330 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:25:36,330 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:25:36,330 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:25:36,331 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:25:36,331 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:25:36,331 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:25:36,331 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:25:36,331 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:25:36,331 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:25:36,332 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:25:36,332 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:25:36,332 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:25:36,333 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:25:36,419 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:25:36,420 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:25:36,420 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:36,420 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:36,420 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:25:36,420 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:36,420 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:25:36,421 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:25:36,421 Line:689 通过SQL读原始数据：92
 [DEBUG] 2017-12-24 21:25:36,423 Line:1391 整理数据：2
 [DEBUG] 2017-12-24 21:25:48,421 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:25:48,422 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:25:48,422 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:25:48,423 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:25:48,742 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:25:48,743 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:25:48,743 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:25:48,754 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:25:48,754 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:25:48,754 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:25:48,754 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:25:48,755 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:25:48,755 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:25:48,755 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:25:48,755 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:25:48,757 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:25:48,759 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:25:48,759 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:25:48,768 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:25:48,768 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:25:48,769 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:48,769 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:48,769 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:25:48,769 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:48,769 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:25:48,769 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:25:48,770 Line:689 通过SQL读原始数据：16
 [DEBUG] 2017-12-24 21:25:48,771 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:25:48,783 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["isCatalog","10","int","","isCatalog"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","fl等等！
 [DEBUG] 2017-12-24 21:25:50,203 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:25:50,205 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:25:50,206 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:25:50,236 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:25:50,236 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:25:50,237 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:25:50,237 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:25:50,237 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:25:50,237 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:25:50,237 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:25:50,237 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:25:50,237 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:25:50,237 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:25:50,238 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:25:50,239 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:25:50,239 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:25:50,240 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:25:50,241 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:25:50,242 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-24 21:25:50,243 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:25:50,250 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["isCatalog","10","int","","isCatalog"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","fl等等！
 [DEBUG] 2017-12-24 21:26:22,330 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD28696420FF155661A05622FDE4212056BC
 [DEBUG] 2017-12-24 21:26:27,754 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:26:27,756 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:26:27,768 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:26:27,768 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:26:27,768 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:26:27,768 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:26:27,769 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:26:27,769 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:26:27,769 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:26:27,769 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:26:27,769 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:26:27,770 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:26:27,770 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:26:27,771 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:26:27,771 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:26:27,771 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:26:27,772 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:26:27,772 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:26:27,773 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:26:27,773 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:26:27,773 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:26:27,775 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:26:27,775 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:26:27,775 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:27,775 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:27,775 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:26:27,776 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:27,776 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:26:27,776 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:26:27,776 Line:689 通过SQL读原始数据：8
 [DEBUG] 2017-12-24 21:26:27,777 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:26:35,212 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:26:35,213 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:26:35,213 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:26:35,214 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:26:35,523 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:26:35,524 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:26:35,524 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:26:35,578 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:26:35,578 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:26:35,579 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:26:35,579 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:26:35,579 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:26:35,580 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:26:35,580 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:26:35,580 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:26:35,581 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:26:35,582 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:26:35,582 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:26:35,582 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:26:35,582 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:26:35,583 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:26:35,583 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:26:35,583 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:26:35,583 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:26:35,584 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:26:35,584 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:26:35,682 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:26:35,683 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:26:35,684 Line:689 通过SQL读原始数据：106
 [DEBUG] 2017-12-24 21:26:35,686 Line:1391 整理数据：2
 [DEBUG] 2017-12-24 21:26:35,693 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:26:36,989 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:26:36,991 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:26:36,992 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:26:37,028 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:26:37,029 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:26:37,030 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:26:37,031 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:26:37,031 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:26:37,032 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:26:37,033 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:26:37,033 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:26:37,034 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:26:37,035 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:26:37,037 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:26:37,038 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:26:37,039 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:26:37,040 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:26:37,041 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:26:37,041 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:26:37,042 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:26:37,042 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:26:37,043 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:26:37,049 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:26:37,051 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:26:37,051 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:37,053 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:37,054 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:26:37,055 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:26:37,056 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:26:37,057 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:26:37,059 Line:689 通过SQL读原始数据：30
 [DEBUG] 2017-12-24 21:26:37,061 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:26:37,074 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:27:25,935 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD281612A775B2D7E4310A1BB597E5395919
 [DEBUG] 2017-12-24 21:27:30,889 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:27:30,891 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:27:30,908 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:27:30,909 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:27:30,909 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:27:30,910 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:27:30,910 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:27:30,911 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:27:30,911 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:27:30,911 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:27:30,911 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:27:30,911 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:27:30,911 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:27:30,912 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:27:30,913 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:27:30,914 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:27:30,915 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:27:30,915 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:30,915 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:30,915 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:27:30,915 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:30,916 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:27:30,916 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:27:30,916 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-24 21:27:30,917 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:27:42,771 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:27:42,772 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:27:42,772 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:27:42,773 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:27:43,106 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:27:43,106 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:27:43,106 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:27:43,142 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:27:43,143 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:27:43,143 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:27:43,143 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:27:43,143 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:27:43,144 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:27:43,144 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:27:43,144 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:27:43,144 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:27:43,144 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:27:43,144 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:27:43,145 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:27:43,146 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:27:43,192 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:27:43,193 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:27:43,193 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:43,193 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:43,193 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:27:43,193 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:43,194 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:27:43,194 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:27:43,194 Line:689 通过SQL读原始数据：51
 [DEBUG] 2017-12-24 21:27:43,195 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:27:43,201 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["isCatalog","1","string","","isCatalog"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","等等！
 [DEBUG] 2017-12-24 21:27:44,562 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:27:44,563 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:27:44,564 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:27:44,586 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:27:44,588 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:27:44,589 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:27:44,589 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:27:44,590 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:27:44,590 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:27:44,591 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:27:44,591 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:27:44,591 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:27:44,592 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:27:44,592 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:27:44,593 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:27:44,593 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:27:44,593 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:27:44,594 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:27:44,594 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:27:44,595 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:27:44,595 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:27:44,595 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:27:44,600 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:27:44,601 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:27:44,601 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:44,603 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:44,604 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:27:44,605 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:27:44,606 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:27:44,606 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:27:44,607 Line:689 通过SQL读原始数据：19
 [DEBUG] 2017-12-24 21:27:44,609 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:27:44,626 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["isCatalog","1","string","","isCatalog"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","等等！
 [DEBUG] 2017-12-24 21:28:32,541 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD281F1F3A474E661E085622FDE4212056BC
 [DEBUG] 2017-12-24 21:28:35,755 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:28:35,756 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:28:35,774 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:28:35,774 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:28:35,775 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:28:35,775 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:28:35,775 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:28:35,775 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:28:35,775 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:28:35,775 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:28:35,776 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:28:35,776 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:28:35,776 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:28:35,776 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:28:35,776 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:28:35,776 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:28:35,777 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:28:35,777 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:28:35,777 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:28:35,777 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:28:35,777 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:28:35,779 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:28:35,779 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:28:35,779 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:28:35,780 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:28:35,780 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:28:35,780 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:28:35,780 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:28:35,780 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:28:35,781 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-24 21:28:35,781 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:28:37,396 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:28:37,397 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:28:37,409 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:28:37,410 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:28:37,410 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:28:37,410 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:28:37,410 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:28:37,410 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:28:37,410 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:28:37,411 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:28:37,411 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:28:37,411 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:28:37,411 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:28:37,411 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:28:37,411 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:28:37,412 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:28:37,412 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:28:37,412 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:28:37,412 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:28:37,412 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:28:37,412 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:28:37,414 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:28:37,414 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:28:37,414 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:28:37,415 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:28:37,415 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:28:37,415 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:28:37,415 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:28:37,415 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:28:37,416 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-24 21:28:37,416 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:29:16,333 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD28575D3178AC1BA36E0C98562ED3F03CD4
 [DEBUG] 2017-12-24 21:29:19,378 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:29:19,379 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:29:19,405 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:29:19,406 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:29:19,406 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:29:19,406 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:29:19,406 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:29:19,406 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:29:19,406 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:29:19,407 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:29:19,408 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:29:19,408 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:29:19,408 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:29:19,408 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:29:19,408 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:29:19,444 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:29:19,444 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:29:19,445 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:19,446 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:19,446 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:29:19,446 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:19,447 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:29:19,447 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:29:19,447 Line:689 通过SQL读原始数据：41
 [DEBUG] 2017-12-24 21:29:19,448 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:29:23,126 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:29:23,127 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:29:23,127 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:29:23,128 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:29:23,436 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:29:23,436 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:29:23,437 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:29:23,449 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:29:23,450 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:29:23,450 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:29:23,450 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:29:23,450 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:29:23,450 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:29:23,450 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:29:23,451 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:29:23,452 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:29:23,452 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:29:23,452 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:29:23,452 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:29:23,452 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:29:23,455 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:29:23,456 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:29:23,456 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:23,456 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:23,456 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:29:23,456 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:23,456 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:29:23,457 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:29:23,457 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-24 21:29:23,457 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:29:23,467 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:29:24,902 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:29:24,905 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:29:24,906 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:29:24,940 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:29:24,941 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:29:24,942 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:29:24,942 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:29:24,943 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:29:24,943 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:29:24,944 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:29:24,945 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:29:24,945 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:29:24,946 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:29:24,946 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:29:24,947 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:29:24,947 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:29:24,947 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:29:24,948 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:29:24,948 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:29:24,948 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:29:24,949 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:29:24,949 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:29:24,953 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:29:24,954 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:29:24,954 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:24,954 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:24,955 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:29:24,955 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:24,955 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:29:24,956 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:29:24,956 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-24 21:29:24,957 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:29:24,970 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:29:51,988 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD2879D62CF642C3ECAC5038F594B7A91F37
 [DEBUG] 2017-12-24 21:29:57,220 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:29:57,221 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:29:57,247 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:29:57,248 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:29:57,248 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:29:57,248 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:29:57,248 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:29:57,249 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:29:57,249 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:29:57,249 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:29:57,249 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:29:57,249 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:29:57,249 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:29:57,249 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:29:57,250 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:29:57,250 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:29:57,250 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:29:57,250 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:29:57,250 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:29:57,250 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:29:57,251 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:29:57,291 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:29:57,291 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:29:57,291 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:57,292 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:57,292 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:29:57,292 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:29:57,292 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:29:57,292 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:29:57,293 Line:689 通过SQL读原始数据：45
 [DEBUG] 2017-12-24 21:29:57,293 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:30:10,124 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:30:10,125 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:30:10,125 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:30:10,127 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:30:10,450 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:30:10,450 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:30:10,450 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:30:10,461 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:30:10,462 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:30:10,462 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:30:10,463 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:30:10,464 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:30:10,465 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:30:10,465 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:30:10,465 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:30:10,466 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:30:10,466 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:30:10,467 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:30:10,468 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:30:10,468 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:30:10,468 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:30:10,468 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:30:10,469 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:30:10,469 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:30:10,469 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:30:10,469 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:30:10,473 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:30:10,473 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:30:10,473 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:30:10,474 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:30:10,474 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:30:10,475 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:30:10,475 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:30:10,476 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:30:10,476 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-24 21:30:10,476 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:30:10,484 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:30:11,913 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:30:11,915 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:30:11,916 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:30:11,946 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:30:11,947 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:30:11,948 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:30:11,948 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:30:11,950 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:30:11,950 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:30:11,950 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:30:11,951 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:30:11,952 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:30:11,952 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:30:11,952 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:30:11,954 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:30:11,956 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:30:11,958 Line:689 通过SQL读原始数据：11
 [DEBUG] 2017-12-24 21:30:11,958 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:30:11,963 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:31:11,501 Line:133 ReportServlet.service 请求地址：/ReportServlet?operation=saveSQLFile&fileName=tblVirtualStockSQL.xml&SESSION=6F223CC2949DEA747E842AF110F0998E3F6C63EE7230837C9629615E2C3C5AD2BDE3B2B2C0D0CD288717293174EB14B85038F594B7A91F37
 [DEBUG] 2017-12-24 21:31:14,341 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:31:14,341 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:31:14,342 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:31:14,342 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:31:14,635 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:31:14,635 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:31:14,636 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:31:14,663 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:31:14,664 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:31:14,664 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:31:14,664 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:31:14,664 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:31:14,665 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:31:14,665 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:31:14,665 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:31:14,665 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:31:14,666 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:31:14,667 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:31:14,668 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:31:14,669 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:31:14,682 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:31:14,682 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:31:14,683 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:31:14,684 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:31:14,685 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:31:14,685 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:31:14,743 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:31:14,744 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:31:14,744 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:14,744 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:14,744 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:31:14,744 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:14,745 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:31:14,745 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:31:14,745 Line:689 通过SQL读原始数据：81
 [DEBUG] 2017-12-24 21:31:14,746 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:31:14,756 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:31:16,090 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:31:16,092 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:31:16,092 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:31:16,113 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:31:16,114 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:31:16,114 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:31:16,114 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:31:16,115 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:31:16,115 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:31:16,116 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:31:16,117 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:31:16,117 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:31:16,118 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:31:16,119 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:31:16,119 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:31:16,120 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:31:16,120 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:31:16,120 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:31:16,121 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:31:16,121 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:31:16,121 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:31:16,121 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:31:16,123 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:31:16,124 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:31:16,125 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-24 21:31:16,125 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:31:16,131 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:31:25,514 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-24 21:31:25,515 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-24 21:31:25,529 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:31:25,529 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:31:25,530 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-24 21:31:25,530 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:31:25,531 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:31:25,531 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:31:25,532 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:31:25,532 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:31:25,532 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:31:25,532 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:31:25,533 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:31:25,533 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:31:25,533 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:31:25,533 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:31:25,534 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:31:25,534 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:31:25,534 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:31:25,534 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:31:25,534 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:31:25,537 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:31:25,537 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:31:25,537 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:25,538 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:25,538 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:31:25,538 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:31:25,538 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:31:25,538 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:31:25,539 Line:689 通过SQL读原始数据：10
 [DEBUG] 2017-12-24 21:31:25,539 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:43:24,505 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-24 21:47:01,138 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:47:01,139 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:47:01,139 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:47:01,178 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:47:01,178 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:47:01,178 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:47:01,179 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:47:01,179 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:47:01,179 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:47:01,179 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:47:01,179 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:47:01,179 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:47:01,179 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:47:01,179 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:47:01,180 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:47:01,181 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:47:01,273 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:47:01,273 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:47:01,273 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:47:01,274 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:47:01,274 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:47:01,274 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:47:01,274 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:47:01,274 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:47:01,274 Line:689 通过SQL读原始数据：96
 [DEBUG] 2017-12-24 21:47:01,275 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:47:01,280 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:47:02,644 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:47:02,646 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:47:02,647 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:47:02,681 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:47:02,682 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:47:02,683 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:47:02,683 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:47:02,683 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:47:02,684 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:47:02,685 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:47:02,686 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:47:02,686 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:47:02,686 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:47:02,687 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:47:02,687 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:47:02,688 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:47:02,689 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:47:02,689 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:47:02,689 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:47:02,690 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:47:02,690 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:47:02,691 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:47:02,694 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:47:02,695 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:47:02,695 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:47:02,696 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:47:02,696 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:47:02,696 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:47:02,697 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:47:02,697 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:47:02,698 Line:689 通过SQL读原始数据：16
 [DEBUG] 2017-12-24 21:47:02,699 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:47:02,713 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:50:13,473 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:50:13,474 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:50:13,475 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:50:13,475 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:50:13,782 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:50:13,785 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:50:13,786 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:50:13,841 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:50:13,842 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:50:13,843 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:50:13,843 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:50:13,843 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:50:13,843 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:50:13,844 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:50:13,844 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:50:13,844 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:50:13,845 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:50:13,845 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:50:13,845 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:50:13,846 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:50:13,846 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:50:13,846 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:50:13,846 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:50:13,847 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:50:13,847 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:50:13,847 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:50:13,960 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:50:13,961 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:50:13,961 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:50:13,961 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:50:13,961 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:50:13,962 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:50:13,962 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:50:13,962 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:50:13,963 Line:689 通过SQL读原始数据：121
 [DEBUG] 2017-12-24 21:50:13,963 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:50:13,972 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:50:15,246 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:50:15,248 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:50:15,248 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:50:15,282 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:50:15,283 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:50:15,283 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:50:15,284 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:50:15,284 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:50:15,285 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:50:15,285 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:50:15,285 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:50:15,285 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:50:15,285 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:50:15,286 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:50:15,286 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:50:15,286 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:50:15,287 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:50:15,287 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:50:15,287 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:50:15,288 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:50:15,289 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:50:15,289 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:50:15,292 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:50:15,292 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:50:15,293 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:50:15,293 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:50:15,293 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:50:15,293 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:50:15,294 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:50:15,294 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:50:15,294 Line:689 通过SQL读原始数据：11
 [DEBUG] 2017-12-24 21:50:15,295 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:50:15,301 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:52:53,549 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:52:53,550 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:52:53,550 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:52:53,588 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:52:53,589 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:52:53,589 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:52:53,589 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:52:53,589 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:52:53,589 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:52:53,590 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:52:53,591 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:52:53,591 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:52:53,591 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:52:53,591 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:52:53,591 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:52:53,591 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:52:53,663 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:52:53,663 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:52:53,663 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:52:53,663 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:52:53,663 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:52:53,664 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:52:53,664 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:52:53,664 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:52:53,664 Line:689 通过SQL读原始数据：75
 [DEBUG] 2017-12-24 21:52:53,665 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:52:53,673 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:52:54,741 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:52:54,743 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:52:54,744 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:52:54,771 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:52:54,771 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:52:54,772 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:52:54,772 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:52:54,772 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:52:54,773 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:52:54,773 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:52:54,774 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:52:54,774 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:52:54,774 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:52:54,775 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:52:54,775 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:52:54,775 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:52:54,776 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:52:54,776 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:52:54,777 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:52:54,777 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:52:54,777 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:52:54,778 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:52:54,782 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:52:54,782 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:52:54,783 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:52:54,784 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:52:54,784 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:52:54,785 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:52:54,785 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:52:54,785 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:52:54,786 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-24 21:52:54,787 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:52:54,806 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:53:24,413 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:53:24,414 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:53:24,415 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:53:24,415 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:53:24,698 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:53:24,700 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:53:24,700 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:53:24,732 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:53:24,733 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:53:24,733 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:53:24,733 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:53:24,733 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:53:24,733 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:53:24,733 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:53:24,734 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:53:24,735 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:53:24,735 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:53:24,735 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:53:24,735 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:53:24,788 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:53:24,788 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:53:24,789 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:24,789 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:24,789 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:53:24,789 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:24,789 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:53:24,789 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:53:24,790 Line:689 通过SQL读原始数据：57
 [DEBUG] 2017-12-24 21:53:24,791 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:53:24,798 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:53:26,156 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:53:26,158 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:53:26,159 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:53:26,186 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:53:26,187 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:53:26,187 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:53:26,188 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:53:26,188 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:53:26,189 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:53:26,189 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:53:26,189 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:53:26,190 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:53:26,190 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:53:26,190 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:53:26,191 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:53:26,191 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:53:26,192 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:53:26,193 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:53:26,193 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:53:26,194 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:53:26,194 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:53:26,195 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:53:26,199 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:53:26,199 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:53:26,200 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:26,200 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:26,200 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:53:26,201 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:26,201 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:53:26,201 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:53:26,202 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-24 21:53:26,202 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:53:26,210 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:53:37,567 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:53:37,568 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:53:37,569 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:53:37,572 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:53:37,887 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:53:37,890 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:53:37,890 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:53:37,901 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:53:37,901 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:53:37,901 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:53:37,901 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:53:37,902 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:53:37,902 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:53:37,902 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:53:37,902 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:53:37,902 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:53:37,902 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:53:37,903 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:53:37,903 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:53:37,903 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:53:37,903 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:53:37,904 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:53:37,904 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:53:37,904 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:53:37,905 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:53:37,906 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:53:37,908 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:53:37,909 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:53:37,909 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:37,909 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:37,909 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:53:37,909 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:37,910 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:53:37,910 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:53:37,910 Line:689 通过SQL读原始数据：9
 [DEBUG] 2017-12-24 21:53:37,911 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:53:37,920 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:53:39,346 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:53:39,348 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:53:39,349 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:53:39,385 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:53:39,386 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:53:39,387 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:53:39,387 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:53:39,388 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:53:39,389 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:53:39,390 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:53:39,391 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:53:39,392 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:53:39,393 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:53:39,394 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:53:39,394 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:53:39,395 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:53:39,395 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:53:39,396 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:53:39,397 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:53:39,397 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:53:39,398 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:53:39,399 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:53:39,403 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:53:39,403 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:53:39,404 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:39,405 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:39,405 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:53:39,406 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:53:39,406 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:53:39,407 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:53:39,408 Line:689 通过SQL读原始数据：22
 [DEBUG] 2017-12-24 21:53:39,409 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:53:39,421 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:58:21,418 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:58:21,419 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:58:21,419 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:21,446 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:58:21,446 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:58:21,447 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:58:21,447 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:58:21,447 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:58:21,447 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:58:21,447 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:58:21,447 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:58:21,447 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:58:21,448 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:58:21,448 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:58:21,448 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:58:21,448 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:58:21,448 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:58:21,448 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:58:21,449 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:58:21,449 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:58:21,449 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:58:21,449 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:58:21,499 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:58:21,500 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:58:21,500 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:21,500 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:21,501 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:58:21,501 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:21,501 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:58:21,501 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:58:21,501 Line:689 通过SQL读原始数据：55
 [DEBUG] 2017-12-24 21:58:21,502 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:58:21,509 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:58:22,921 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:58:22,923 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:58:22,924 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:22,998 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:58:22,999 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:58:22,999 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:58:23,000 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:58:23,000 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:58:23,000 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:58:23,001 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:58:23,001 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:58:23,001 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:58:23,002 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:58:23,003 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:58:23,003 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:58:23,004 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:58:23,004 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:58:23,004 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:58:23,005 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:58:23,005 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:58:23,005 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:58:23,006 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:58:23,071 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:58:23,071 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:58:23,071 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:23,071 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:23,071 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:58:23,071 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:23,072 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:58:23,072 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:58:23,072 Line:689 通过SQL读原始数据：73
 [DEBUG] 2017-12-24 21:58:23,073 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:58:23,078 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:58:27,295 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 21:58:27,296 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 21:58:27,296 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:27,297 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 21:58:27,586 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:58:27,586 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 21:58:27,586 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:27,614 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:58:27,615 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:58:27,615 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:58:27,615 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:58:27,615 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:58:27,616 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:58:27,616 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:58:27,616 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:58:27,616 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:58:27,617 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:58:27,617 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:58:27,618 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:58:27,618 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:58:27,619 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:58:27,619 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:58:27,619 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:58:27,620 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:58:27,620 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:58:27,621 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:58:27,681 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:58:27,682 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:58:27,682 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:27,682 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:27,682 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:58:27,682 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:27,682 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:58:27,683 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:58:27,683 Line:689 通过SQL读原始数据：68
 [DEBUG] 2017-12-24 21:58:27,685 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:58:27,693 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:58:29,041 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:58:29,041 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 21:58:29,041 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:29,051 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:58:29,052 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 21:58:29,052 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:58:29,053 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:58:29,053 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:58:29,054 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:58:29,054 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 21:58:29,054 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:58:29,054 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:58:29,054 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:58:29,054 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:58:29,055 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:58:29,055 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:58:29,055 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:58:29,055 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:58:29,055 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:58:29,055 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:58:29,056 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:58:29,056 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:58:29,058 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:58:29,058 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:58:29,058 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:29,058 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:29,058 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:58:29,059 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:29,059 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:58:29,059 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:58:29,059 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-24 21:58:29,060 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 21:58:29,066 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:58:34,784 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 21:58:34,785 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[00003,];StockCode=[,];
 [DEBUG] 2017-12-24 21:58:34,785 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:34,795 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 21:58:34,795 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 21:58:34,796 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 21:58:34,796 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 21:58:34,796 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 21:58:34,796 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 21:58:34,796 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-24 21:58:34,796 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 21:58:34,796 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 21:58:34,797 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 21:58:34,798 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 21:58:34,798 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 21:58:34,798 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 21:58:34,818 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 21:58:34,819 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 21:58:34,819 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:34,819 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:34,819 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 21:58:34,819 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 21:58:34,819 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 21:58:34,820 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 21:58:34,820 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-24 21:58:34,820 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 21:58:34,823 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 21:58:42,121 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-24 21:58:42,122 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-24 21:58:42,122 Line:243 AIOApi op=getEnum&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 21:58:42,125 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-24 22:00:34,109 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 22:00:34,110 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 22:00:34,110 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:00:34,111 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 22:00:34,267 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-24 22:00:34,267 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-24 22:00:34,268 Line:243 AIOApi op=getEnum&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:00:34,269 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-24 22:00:36,715 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 22:00:36,715 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 22:00:36,715 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:00:36,741 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 22:00:36,742 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 22:00:36,742 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 22:00:36,742 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 22:00:36,742 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 22:00:36,742 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 22:00:36,742 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 22:00:36,743 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 22:00:36,744 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 22:00:36,744 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 22:00:36,744 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 22:00:36,744 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 22:00:36,786 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 22:00:36,787 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 22:00:36,787 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:00:36,787 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:00:36,787 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 22:00:36,787 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:00:36,788 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 22:00:36,788 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 22:00:36,788 Line:689 通过SQL读原始数据：46
 [DEBUG] 2017-12-24 22:00:36,789 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 22:00:36,794 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 22:00:38,160 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 22:00:38,160 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 22:00:38,161 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:00:38,171 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 22:00:38,171 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 22:00:38,171 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 22:00:38,172 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 22:00:38,172 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 22:00:38,172 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 22:00:38,172 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 22:00:38,172 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 22:00:38,172 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 22:00:38,173 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 22:00:38,174 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 22:00:38,174 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 22:00:38,176 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 22:00:38,176 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 22:00:38,176 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:00:38,176 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:00:38,176 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 22:00:38,176 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:00:38,177 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 22:00:38,177 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 22:00:38,177 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-24 22:00:38,178 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 22:00:38,183 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 22:01:33,725 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-24 22:01:33,726 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-24 22:01:33,727 Line:243 AIOApi op=getSessEmp&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:01:33,727 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-24 22:01:33,885 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-24 22:01:33,886 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-24 22:01:33,886 Line:243 AIOApi op=getEnum&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:01:33,888 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-24 22:01:37,241 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 22:01:37,241 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 22:01:37,241 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:01:37,266 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 22:01:37,266 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 22:01:37,266 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 22:01:37,267 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 22:01:37,267 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 22:01:37,267 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 22:01:37,267 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 22:01:37,267 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 22:01:37,267 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 22:01:37,267 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 22:01:37,268 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 22:01:37,269 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 22:01:37,269 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 22:01:37,314 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 22:01:37,314 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 22:01:37,315 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:37,315 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:37,315 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 22:01:37,315 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:37,315 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 22:01:37,315 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 22:01:37,316 Line:689 通过SQL读原始数据：50
 [DEBUG] 2017-12-24 22:01:37,316 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 22:01:37,323 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 22:01:38,694 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 22:01:38,695 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-24 22:01:38,695 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:01:38,717 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 22:01:38,718 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-24 22:01:38,718 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 22:01:38,718 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 22:01:38,718 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 22:01:38,718 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 22:01:38,719 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 22:01:38,719 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 22:01:38,719 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 22:01:38,720 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 22:01:38,721 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 22:01:38,721 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 22:01:38,722 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 22:01:38,723 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 22:01:38,723 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 22:01:38,723 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 22:01:38,723 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 22:01:38,723 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 22:01:38,723 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 22:01:38,769 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 22:01:38,769 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 22:01:38,769 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:38,770 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:38,770 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 22:01:38,770 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:38,770 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 22:01:38,771 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 22:01:38,772 Line:689 通过SQL读原始数据：54
 [DEBUG] 2017-12-24 22:01:38,774 Line:1391 整理数据：1
 [DEBUG] 2017-12-24 22:01:38,780 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 22:01:42,404 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-24 22:01:42,406 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2017-12-24 22:01:42,406 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:01:42,444 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2017-12-24 22:01:42,445 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-24 22:01:42,445 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-24 22:01:42,445 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-24 22:01:42,445 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-24 22:01:42,445 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-24 22:01:42,445 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-24 22:01:42,445 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-24 22:01:42,446 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-24 22:01:42,447 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-24 22:01:42,447 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-24 22:01:42,447 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-24 22:01:42,447 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2017-12-24 22:01:42,489 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-24 22:01:42,490 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-24 22:01:42,490 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:42,490 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:42,490 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-24 22:01:42,490 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-24 22:01:42,490 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-24 22:01:42,491 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-24 22:01:42,491 Line:689 通过SQL读原始数据：46
 [DEBUG] 2017-12-24 22:01:42,491 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 22:01:42,496 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2017-12-24 22:02:59,508 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=CRMSaleFollowUp
 [DEBUG] 2017-12-24 22:02:59,508 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[CRMSaleFollowUp,];pageNo=[1,];pageSize=[10,];src=[menu,];EmpFullName=[,];ClientName=[,];parentTableName=[CRMClientInfo,];
 [DEBUG] 2017-12-24 22:02:59,509 Line:243 AIOApi op=report&sessionid=966E2D1308AE51E9D98060DE275CBF99
 [DEBUG] 2017-12-24 22:02:59,544 Line:549 ReportDataMgt.getReportData SQL=select distinct keyId,createBy,deptCodeR,employeeId,deptCodeRE,SContactTime,EContactTime,SNextCallTime,ENextCallTime,CreateDate,ClientName,ContactTime,EmpFullName,FollowPhase,VisitMethod,Content,NextCallTime,FollowIntent,DeptFullName,f_brother,id,createTime from ( select CRMSaleFollowUp.id as keyId,CRMSaleFollowUp.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=CRMSaleFollowUp.createBy) as deptCodeR,CRMSaleFollowUp.employeeId as employeeId,CRMSaleFollowUp.departmentCode as deptCodeRE,      CRMSaleFollowUp.VisitTime as SContactTime,     CRMSaleFollowUp.VisitTime as EContactTime,     CRMSaleFollowUp.NextVisitTime as SNextCallTime,     CRMSaleFollowUp.NextVisitTime as ENextCallTime,     CRMSaleFollowUp.VisitDate as CreateDate,     CRMClientInfo.ClientName as ClientName,     CRMSaleFollowUp.VisitTime as ContactTime,     tblEmployee.EmpFullName as EmpFullName,     CRMSaleFollowUp.FollowPhase as FollowPhase,     CRMSaleFollowUp.VisitMethod as VisitMethod,     CRMSaleFollowUp.Content as Content,     CRMSaleFollowUp.NextVisitTime as NextCallTime,     CRMSaleFollowUp.CustomerIntent as FollowIntent,     tblDepartment.DeptFullName as DeptFullName,     CRMSaleFollowUp.f_brother as f_brother,     CRMSaleFollowUp.id as id,     CRMSaleFollowUp.createTime as createTime   ,ROW_NUMBER() over(order by     CRMSaleFollowUp.createTime desc) as row_id  from CRMSaleFollowUp left join tblEmployee  on CRMSaleFollowUp.EmployeeID=tblEmployee.id left join tblDepartment on tblDepartment.classCode=tblEmployee.DepartmentCode left join CRMClientInfo on CRMSaleFollowUp.f_brother=CRMClientInfo.id left join CRMClientInfoEmp on CRMClientInfo.id=CRMClientInfoEmp.f_ref where 1=1                                                                       and (exists(select * from tblEmpDistrict a left join tblEmpDistrictDet b on b.f_ref=a.id where a.EmployeeID='1' and b.BusinessDistrict=CRMClientInfo.BusinessDistrict) or '1'='1' or 'false'='false') and CRMClientInfo.statusId=0 and CRMClientInfo.Status!=1 and (CRMClientInfoEmp.EmployeeID='1' or '1'='1')   )  a  where row_id between 1 and 11 order by createTime desc 
 [DEBUG] 2017-12-24 22:02:59,594 Line:689 通过SQL读原始数据：50
 [DEBUG] 2017-12-24 22:02:59,595 Line:1391 整理数据：0
 [DEBUG] 2017-12-24 22:02:59,596 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["SContactTime",""],["EContactTime",""],["SNextCallTime",""],["ENextCallTime",""],["ClientName",""],["EmpFullName",""],["FollowPhase",""],["VisitMethod",""],["DeptFullName",""]],"cols":[["客户名称","200","string","","ClientName"],["跟进时间","90","date","","ContactTime"],["跟单人","65","string","","EmpFullName"],["跟单阶段","75","other","","FollowPhase"],["跟进方式","90","other","","VisitMethod"],["跟单内容","400","string","","Content"],["下次跟进时间","90","date","","NextCallTime"等等！
 