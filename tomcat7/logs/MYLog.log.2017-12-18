[INFO ] 2017-12-18 09:46:40,698 Line:206 系统开始启动，最大内存：1792;目前总内存：256;目前空闲内存：176
 [INFO ] 2017-12-18 09:46:40,808 Line:284 ===========Tomcat Port=8888
 [INFO ] 2017-12-18 09:46:45,023 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2017-12-18 09:46:45,210 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2017-12-18 09:46:45,242 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2017-12-18 09:46:45,257 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2017-12-18 09:46:45,257 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2017-12-18 09:46:45,289 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2017-12-18 09:46:45,304 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2017-12-18 09:46:46,377 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-18 09:46:46,406 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2017-12-18 09:46:46,437 Line:1121 ------Init District record:3984
 [DEBUG] 2017-12-18 09:46:46,453 Line:1152 ------Init deptMap record:1
 [DEBUG] 2017-12-18 09:46:47,422 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-18 09:46:47,422 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2017-12-18 09:46:47,936 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-18 09:46:48,030 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-18 09:46:48,795 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-18 09:46:48,828 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2017-12-18 09:46:48,844 Line:682 ------Init TableInfo record:4
 [DEBUG] 2017-12-18 09:46:48,844 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-18 09:46:48,859 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-18 09:46:48,859 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-18 09:46:48,906 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-18 09:46:51,547 Line:2947 --------Init Config File ---------------
 [ERROR] 2017-12-18 09:46:51,700 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-18 09:46:51,716 Line:1873 ------Init RefreshTime 
 [DEBUG] 2017-12-18 09:46:51,731 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2017-12-18 09:46:51,935 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2017-12-18 09:46:51,935 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2017-12-18 09:46:53,185 Line:89 SAFE 数据库第一个备份任务启动，时间2017-12-18 00:00:00
 [INFO ] 2017-12-18 09:46:53,185 Line:144 SAFE 备份任务开始执行，时间2017-12-18 09:46:53
 [INFO ] 2017-12-18 09:46:53,196 Line:137 SAFE 碎片任务启动，时间2017-12-24 00:00:00
 [INFO ] 2017-12-18 09:46:58,245 Line:148 SAFE 备份任务执行成功，时间2017-12-18 09:46:58
 [DEBUG] 2017-12-18 09:47:24,649 Line:5227 GlobalsTool.js 生成js 时间174:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-18 09:47:24,780 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-18 09:47:24,782 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-18 09:47:25,321 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-18 09:47:25,322 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-18 09:47:25,465 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1513561645455
 [DEBUG] 2017-12-18 09:47:25,465 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1513561645455,];
 [DEBUG] 2017-12-18 09:47:27,466 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-18 09:47:27,467 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-18 09:47:27,777 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-18 09:47:27,778 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-18 09:47:28,765 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-18 09:47:28,766 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-18 09:47:28,782 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-18 09:47:28,783 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-18 09:47:28,809 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1513561648806
 [DEBUG] 2017-12-18 09:47:28,810 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1513561648806,];
 [DEBUG] 2017-12-18 09:47:29,719 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1513561649716
 [DEBUG] 2017-12-18 09:47:29,722 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1513561649716,];
 [DEBUG] 2017-12-18 09:47:29,814 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1513561649812
 [DEBUG] 2017-12-18 09:47:29,814 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1513561649812,];
 [DEBUG] 2017-12-18 09:47:29,890 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-18 09:47:29,890 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 09:47:29,979 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 09:47:30,009 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 09:47:30,510 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 09:47:30,512 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-18 09:47:30,692 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 09:47:31,496 Line:5227 GlobalsTool.js 生成js 时间87:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-18 09:47:32,108 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-18 09:47:32,108 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-18 09:47:32,108 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-18 09:47:32,109 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-18 09:47:32,110 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 09:47:32,123 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-18 09:47:32,124 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-18 09:47:32,124 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 09:47:32,133 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-18 09:47:32,134 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-18 09:47:32,134 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 09:47:32,188 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-18 09:47:32,188 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-18 09:47:32,189 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 09:47:49,819 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblSalesOrder&src=menu&winCurIndex=1
 [DEBUG] 2017-12-18 09:47:49,820 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblSalesOrder,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-18 09:47:49,820 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblSalesOrder
 [DEBUG] 2017-12-18 09:47:52,091 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 09:48:55,802 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 09:48:55,816 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 09:48:55,816 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 09:48:55,863 Line:689 通过SQL读原始数据：47
 [DEBUG] 2017-12-18 09:48:55,863 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 09:49:56,699 Line:5227 GlobalsTool.js 生成js 时间31:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-18 09:49:56,734 Line:5227 GlobalsTool.js 生成js 时间35:/js/gen/defineList.vjstblSalesOrder_zh_CN.js
 [DEBUG] 2017-12-18 10:18:12,124 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 10:29:29,470 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 10:29:29,474 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[all,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 10:29:37,352 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 10:29:37,354 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 10:29:37,354 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 10:29:37,463 Line:689 通过SQL读原始数据：109
 [DEBUG] 2017-12-18 10:29:37,464 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 10:42:39,624 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 10:42:39,626 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[all,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 10:42:45,974 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 10:42:45,974 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 10:42:45,981 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 10:42:46,095 Line:689 通过SQL读原始数据：121
 [DEBUG] 2017-12-18 10:42:46,096 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 10:44:22,386 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 10:44:22,389 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[123,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 10:44:22,443 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 10:44:22,445 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 10:44:22,446 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 10:44:22,448 Line:582 ReportDataMgt.getReportData 参数3:123
 [DEBUG] 2017-12-18 10:44:22,531 Line:689 通过SQL读原始数据：86
 [DEBUG] 2017-12-18 10:44:22,532 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 10:48:29,597 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 11:00:00,886 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:00:00,888 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:123@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:123@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[123,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:00:00,953 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:00:00,953 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:00:00,954 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:00:00,954 Line:582 ReportDataMgt.getReportData 参数3:123
 [DEBUG] 2017-12-18 11:00:01,104 Line:689 通过SQL读原始数据：151
 [DEBUG] 2017-12-18 11:00:01,104 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:09:21,262 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:09:21,263 Line:3003 MobileAjax 操作人:;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:09:21,263 Line:243 AIOApi op=getSessEmp&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:09:21,288 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 11:09:24,339 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 11:09:24,340 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 11:09:24,340 Line:243 AIOApi op=LOGIN&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:09:24,382 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:09:24,408 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 11:09:24,419 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 11:09:24,457 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 11:09:24,895 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:09:24,896 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:09:24,896 Line:243 AIOApi op=getSessEmp&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:09:24,898 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 11:09:24,916 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 11:09:24,917 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 11:09:24,917 Line:243 AIOApi op=getEnum&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:09:24,923 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 11:09:36,514 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:09:36,515 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:09:36,515 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:09:36,565 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:09:36,565 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:09:36,566 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:09:36,609 Line:689 通过SQL读原始数据：44
 [DEBUG] 2017-12-18 11:09:36,611 Line:1391 整理数据：2
 [DEBUG] 2017-12-18 11:09:36,621 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:09:38,152 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:09:38,154 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:09:38,155 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:09:38,190 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 11:09:38,191 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:09:38,191 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:09:38,217 Line:689 通过SQL读原始数据：26
 [DEBUG] 2017-12-18 11:09:38,233 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 11:09:38,236 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:18:58,429 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 11:26:56,741 Line:2992 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2017-12-18 11:26:56,742 Line:3003 MobileAjax 操作人:admin;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[cdf9629a_1712151436361690010,];
 [DEBUG] 2017-12-18 11:26:56,742 Line:243 AIOApi op=detail&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:26:56,898 Line:1525  select * from  tblSalesOrderDet where f_ref = 'cdf9629a_1712151436361690010' order by detOrderNo
 [DEBUG] 2017-12-18 11:26:56,911 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='cdf9629a_1712151436361690010' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 11:26:57,022 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":true,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"detail","updateRight":false,"deleteRight":false,"values":{"Account":"","PeriodYear":2017,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"Attachment":"","CurfreightAmount":0.0,"Remark":"测试1","CurNotAmortDeposit":0.0,"ReceiveDate":"","TotalTaxAmount":100.00000000,"Currency":"","NoInvoiceAmount":100.00000000,"CurNeedReturnAmt":0.0,"id":"cdf9629a_171215143等等！
 [DEBUG] 2017-12-18 11:26:57,058 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 11:26:57,058 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00001,];
 [DEBUG] 2017-12-18 11:26:57,059 Line:243 AIOApi op=popup&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:26:57,088 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00001') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 11:26:57,093 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","CompanyCode":"00001"}]}}
 [DEBUG] 2017-12-18 11:26:58,871 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:26:58,871 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:26:58,872 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:26:58,915 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:26:58,915 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:26:58,916 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:26:58,968 Line:689 通过SQL读原始数据：53
 [DEBUG] 2017-12-18 11:26:58,969 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 11:26:58,971 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:27:43,149 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:27:43,150 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:27:43,150 Line:243 AIOApi op=getSessEmp&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:27:43,152 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 11:27:43,169 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 11:27:43,171 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 11:27:43,172 Line:243 AIOApi op=getEnum&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:27:43,174 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 11:27:49,694 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:27:49,695 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:27:49,696 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:27:49,799 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:27:49,801 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:27:49,801 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:27:49,991 Line:689 通过SQL读原始数据：191
 [DEBUG] 2017-12-18 11:27:49,992 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 11:27:49,995 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:27:51,528 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:27:51,530 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:27:51,531 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:27:51,568 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 11:27:51,569 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:27:51,569 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:27:51,679 Line:689 通过SQL读原始数据：110
 [DEBUG] 2017-12-18 11:27:51,697 Line:1391 整理数据：17
 [DEBUG] 2017-12-18 11:27:51,699 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:28:08,502 Line:2992 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2017-12-18 11:28:08,503 Line:3003 MobileAjax 操作人:admin;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2017-12-18 11:28:08,503 Line:243 AIOApi op=addPrepare&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:28:08,958 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"admin","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"1","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_StockCode":"","tableName":"tblS等等！
 [DEBUG] 2017-12-18 11:28:12,769 Line:2992 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2017-12-18 11:28:12,770 Line:3003 MobileAjax 操作人:admin;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2017-12-18 11:28:12,770 Line:243 AIOApi op=addPrepare&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:28:12,891 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"admin","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"1","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_StockCode":"","tableName":"tblS等等！
 [DEBUG] 2017-12-18 11:28:15,912 Line:2992 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2017-12-18 11:28:15,913 Line:3003 MobileAjax 操作人:admin;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[cdf9629a_1712151436361690010,];
 [DEBUG] 2017-12-18 11:28:15,913 Line:243 AIOApi op=detail&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:28:15,979 Line:1525  select * from  tblSalesOrderDet where f_ref = 'cdf9629a_1712151436361690010' order by detOrderNo
 [DEBUG] 2017-12-18 11:28:15,987 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='cdf9629a_1712151436361690010' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 11:28:16,045 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":true,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"detail","updateRight":false,"deleteRight":false,"values":{"Account":"","PeriodYear":2017,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"Attachment":"","CurfreightAmount":0.0,"Remark":"测试1","CurNotAmortDeposit":0.0,"ReceiveDate":"","TotalTaxAmount":100.00000000,"Currency":"","NoInvoiceAmount":100.00000000,"CurNeedReturnAmt":0.0,"id":"cdf9629a_171215143等等！
 [DEBUG] 2017-12-18 11:28:16,075 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 11:28:16,077 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00001,];
 [DEBUG] 2017-12-18 11:28:16,077 Line:243 AIOApi op=popup&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:28:16,079 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00001') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 11:28:16,085 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","CompanyCode":"00001"}]}}
 [DEBUG] 2017-12-18 11:28:23,678 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:28:23,679 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:28:23,679 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:28:23,702 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:28:23,702 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:28:23,703 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:28:23,737 Line:689 通过SQL读原始数据：35
 [DEBUG] 2017-12-18 11:28:23,738 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:28:23,742 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:29:59,615 Line:2992 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2017-12-18 11:29:59,616 Line:3003 MobileAjax 操作人:admin;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[cdf9629a_1712151436361690010,];
 [DEBUG] 2017-12-18 11:29:59,616 Line:243 AIOApi op=detail&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:29:59,713 Line:1525  select * from  tblSalesOrderDet where f_ref = 'cdf9629a_1712151436361690010' order by detOrderNo
 [DEBUG] 2017-12-18 11:29:59,724 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='cdf9629a_1712151436361690010' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 11:29:59,771 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":true,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"detail","updateRight":false,"deleteRight":false,"values":{"Account":"","PeriodYear":2017,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"Attachment":"","CurfreightAmount":0.0,"Remark":"测试1","CurNotAmortDeposit":0.0,"ReceiveDate":"","TotalTaxAmount":100.00000000,"Currency":"","NoInvoiceAmount":100.00000000,"CurNeedReturnAmt":0.0,"id":"cdf9629a_171215143等等！
 [DEBUG] 2017-12-18 11:29:59,793 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 11:29:59,793 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00001,];
 [DEBUG] 2017-12-18 11:29:59,794 Line:243 AIOApi op=popup&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:29:59,795 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00001') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 11:29:59,805 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","CompanyCode":"00001"}]}}
 [DEBUG] 2017-12-18 11:30:01,924 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:30:01,925 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:30:01,925 Line:243 AIOApi op=report&sessionid=E0179100C6A6977D3F7D336805342D17
 [DEBUG] 2017-12-18 11:30:01,979 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:30:01,980 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:30:01,980 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:30:02,106 Line:689 通过SQL读原始数据：126
 [DEBUG] 2017-12-18 11:30:02,107 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:30:02,109 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:38:43,689 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:38:43,691 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:123@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:123@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[notApprove,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:38:43,756 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:38:43,757 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:38:43,757 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:38:43,757 Line:582 ReportDataMgt.getReportData 参数3:notApprove
 [DEBUG] 2017-12-18 11:38:43,857 Line:689 通过SQL读原始数据：100
 [DEBUG] 2017-12-18 11:38:43,858 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 11:40:06,309 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:40:06,311 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:notApprove@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:notApprove@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[1513322741341,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:40:06,371 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:40:06,372 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:40:06,372 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:40:06,372 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 11:40:06,470 Line:689 通过SQL读原始数据：98
 [DEBUG] 2017-12-18 11:40:06,471 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:40:29,979 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 11:40:29,979 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-18 11:40:29,980 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:40:30,391 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-18 11:40:30,391 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-18 11:40:30,411 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-18 11:40:30,414 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:40:30,414 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:40:30,425 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-18 11:40:30,426 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:40:30,428 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:40:30,449 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-18 11:40:30,450 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:40:30,451 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:40:30,468 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-18 11:40:30,469 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:40:30,470 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:40:33,623 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblSalesOrder&src=menu&winCurIndex=1
 [DEBUG] 2017-12-18 11:40:33,623 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblSalesOrder,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-18 11:40:33,623 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:40:33,639 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:40:33,640 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:40:33,640 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:40:33,690 Line:689 通过SQL读原始数据：50
 [DEBUG] 2017-12-18 11:40:33,691 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:40:42,186 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:40:42,188 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[1513322743692,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:40:42,205 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:40:42,205 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:40:42,205 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:40:42,205 Line:582 ReportDataMgt.getReportData 参数3:1513322743692
 [DEBUG] 2017-12-18 11:40:42,206 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 11:40:42,206 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:41:59,001 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:41:59,004 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:1513322743692@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:1513322743692@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[1513322741341,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:41:59,052 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:41:59,053 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:41:59,053 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:41:59,053 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 11:41:59,140 Line:689 通过SQL读原始数据：87
 [DEBUG] 2017-12-18 11:41:59,141 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 11:42:18,141 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:42:18,143 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:1513322741341@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:1513322741341@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[1513322741341,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:42:18,168 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:42:18,170 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:42:18,170 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:42:18,171 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 11:42:18,208 Line:689 通过SQL读原始数据：38
 [DEBUG] 2017-12-18 11:42:18,208 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:43:03,835 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 11:43:03,837 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:1513322741341@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@Param:1513322741341@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[0,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 11:43:03,852 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                 and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 11:43:03,852 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 11:43:03,852 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 11:43:03,852 Line:582 ReportDataMgt.getReportData 参数3:0
 [DEBUG] 2017-12-18 11:43:03,853 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 11:43:03,854 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 11:48:10,849 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 11:48:10,851 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-18 11:48:10,853 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:48:11,027 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-18 11:48:11,027 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-18 11:48:11,040 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-18 11:48:11,040 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:48:11,041 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:48:11,050 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-18 11:48:11,051 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:48:11,051 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:48:11,057 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-18 11:48:11,057 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:48:11,058 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:48:11,063 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-18 11:48:11,063 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-18 11:48:11,064 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:48:15,179 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=1
 [DEBUG] 2017-12-18 11:48:15,179 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-18 11:48:15,180 Line:215 ---------->SET Page 1 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-12-18 11:48:16,406 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-12-18 11:48:16,407 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-12-18 11:48:17,550 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=2
 [DEBUG] 2017-12-18 11:48:17,550 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-18 11:48:17,551 Line:215 ---------->SET Page 2 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2017-12-18 11:48:24,323 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupQuery&from=adv&src=menu&winCurIndex=3
 [DEBUG] 2017-12-18 11:48:24,323 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupQuery,];from=[adv,];src=[menu,];winCurIndex=[3,];
 [DEBUG] 2017-12-18 11:48:24,323 Line:215 ---------->SET Page 3 DEFAULT URL = /CustomAction.do?type=popupQuery&from=adv
 [DEBUG] 2017-12-18 11:48:27,961 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupQuery
 [DEBUG] 2017-12-18 11:48:27,962 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupQuery,];from=[adv,];keyword=[,];
 [DEBUG] 2017-12-18 11:48:31,549 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&copy=undefined&popupName=&popupWin=popupUpdateWin&popWinName=popupUpdateWin
 [DEBUG] 2017-12-18 11:48:31,550 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];copy=[undefined,];popupName=[,];popupWin=[popupUpdateWin,];popWinName=[popupUpdateWin,];
 [DEBUG] 2017-12-18 11:48:31,589 Line:5227 GlobalsTool.js 生成js 时间23:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-12-18 11:49:18,903 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 11:50:43,768 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 11:50:43,770 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[undefined,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0,];changeCond=[,];fType=[0,0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,,];asName=[keyId,display,,];sysType=[,,,];parentName=[,,,];display=[,,,];width=[0,,,];searchType=[,,,];defaultValue=[,,,];inputType=[,,,];inputValue=[,,,];popSelect=[,,,];
 [DEBUG] 2017-12-18 11:50:45,285 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 11:50:45,286 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 11:55:35,390 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 11:55:35,391 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0
		,];changeCond=[,];fType=[0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,];asName=[keyId,display,];sysType=[,,];parentName=[,,];display=[,,];width=[0,0,];searchType=[,,];defaultValue=[,,];inputType=[,,];inputValue=[,,];popSelect=[,,];
 [DEBUG] 2017-12-18 11:55:36,867 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 11:55:36,868 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 11:57:03,128 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:57:03,128 Line:3003 MobileAjax 操作人:;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:57:03,129 Line:243 AIOApi op=getSessEmp&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:03,129 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 11:57:05,212 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 11:57:05,213 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 11:57:05,213 Line:243 AIOApi op=LOGIN&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:05,246 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 11:57:05,272 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 11:57:05,283 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 11:57:05,320 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 11:57:05,765 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:57:05,766 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:57:05,767 Line:243 AIOApi op=getSessEmp&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:05,768 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 11:57:05,790 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 11:57:05,791 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 11:57:05,792 Line:243 AIOApi op=getEnum&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:05,793 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 11:57:09,545 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:57:09,546 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:57:09,547 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:09,592 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:57:09,592 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:09,592 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:09,645 Line:689 通过SQL读原始数据：53
 [DEBUG] 2017-12-18 11:57:09,646 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:57:09,648 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:57:11,172 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:57:11,174 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:57:11,175 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:11,210 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 11:57:11,212 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:11,213 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:11,261 Line:689 通过SQL读原始数据：49
 [DEBUG] 2017-12-18 11:57:11,276 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 11:57:11,278 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:57:35,609 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 11:57:35,609 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 11:57:35,611 Line:243 AIOApi op=popup&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:35,611 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [INFO ] 2017-12-18 11:57:35,622 Line:1181 --------------弹出窗调试信息：弹出窗model_getWorkNodeByTblName返回字段'OAWorkFlowNode.keyId'在表构中不存，且未指定parentName或display
 [DEBUG] 2017-12-18 11:57:37,110 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:57:37,111 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:57:37,111 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:37,132 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:57:37,133 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:37,133 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:37,166 Line:689 通过SQL读原始数据：33
 [DEBUG] 2017-12-18 11:57:37,167 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:57:37,169 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:57:38,688 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:57:38,689 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:57:38,690 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:38,739 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 11:57:38,739 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:38,739 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:38,775 Line:689 通过SQL读原始数据：36
 [DEBUG] 2017-12-18 11:57:38,812 Line:1391 整理数据：37
 [DEBUG] 2017-12-18 11:57:38,817 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:57:42,867 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 11:57:42,868 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 11:57:42,868 Line:243 AIOApi op=popup&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:42,869 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [INFO ] 2017-12-18 11:57:42,877 Line:1181 --------------弹出窗调试信息：弹出窗model_getWorkNodeByTblName返回字段'OAWorkFlowNode.keyId'在表构中不存，且未指定parentName或display
 [DEBUG] 2017-12-18 11:57:44,387 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:57:44,389 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:57:44,389 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:44,463 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:57:44,464 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:44,465 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:44,540 Line:689 通过SQL读原始数据：76
 [DEBUG] 2017-12-18 11:57:44,541 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:57:44,543 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:57:46,066 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:57:46,068 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:57:46,069 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:57:46,093 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 11:57:46,094 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:46,095 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:57:46,131 Line:689 通过SQL读原始数据：37
 [DEBUG] 2017-12-18 11:57:46,148 Line:1391 整理数据：17
 [DEBUG] 2017-12-18 11:57:46,149 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:58:30,362 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 11:58:30,363 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[OAWorkFlowNode ,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tblName' and statusId = 0
		,];changeCond=[,];fType=[0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,];asName=[keyId,display,];sysType=[,,];parentName=[,,];display=[,,];width=[0,0,];searchType=[,,];defaultValue=[,,];inputType=[,,];inputValue=[,,];popSelect=[,,];
 [DEBUG] 2017-12-18 11:58:31,841 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 11:58:31,843 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 11:58:43,465 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:58:43,466 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:58:43,467 Line:243 AIOApi op=getSessEmp&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:43,467 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 11:58:43,487 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 11:58:43,487 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 11:58:43,487 Line:243 AIOApi op=getEnum&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:43,488 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 11:58:45,897 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 11:58:45,898 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 11:58:45,899 Line:243 AIOApi op=getSessEmp&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:45,900 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 11:58:45,915 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 11:58:45,915 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 11:58:45,916 Line:243 AIOApi op=getEnum&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:45,916 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 11:58:49,347 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 11:58:49,347 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 11:58:49,348 Line:243 AIOApi op=popup&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:50,911 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:58:50,912 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:58:50,912 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:50,932 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 11:58:50,933 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:58:50,933 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:58:50,969 Line:689 通过SQL读原始数据：36
 [DEBUG] 2017-12-18 11:58:50,969 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 11:58:50,971 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 11:58:52,497 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 11:58:52,499 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 11:58:52,500 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 11:58:52,536 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 11:58:52,538 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 11:58:52,538 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 11:58:52,602 Line:689 通过SQL读原始数据：64
 [DEBUG] 2017-12-18 11:58:52,617 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 11:58:52,619 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 12:00:30,033 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 12:00:30,035 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[OAWorkFlowNode ,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tableName' and statusId = 0
		,];changeCond=[,];fType=[0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,];asName=[keyId,display,];sysType=[,,];parentName=[,,];display=[,,];width=[0,0,];searchType=[,,];defaultValue=[,,];inputType=[,,];inputValue=[,,];popSelect=[,,];
 [DEBUG] 2017-12-18 12:00:31,514 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 12:00:31,515 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 12:00:42,787 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 12:00:42,789 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[OAWorkFlowNode ,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tableName' and statusId = 0
		,];changeCond=[,];fType=[0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,];asName=[keyId,display,];sysType=[,,];parentName=[,,];display=[,,];width=[0,0,];searchType=[,,];defaultValue=[,,];inputType=[,,];inputValue=[,,];popSelect=[,,];
 [DEBUG] 2017-12-18 12:00:44,263 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 12:00:44,264 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 12:00:47,205 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=refresh
 [DEBUG] 2017-12-18 12:00:47,206 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[refresh,];
 [DEBUG] 2017-12-18 12:00:47,224 Line:1203 ------Init SystemSetting record:211
 [DEBUG] 2017-12-18 12:00:47,224 Line:127 --------AdvanceAction.restart 刷新系统配置initSystemSettingInformation 成功-----------
 [DEBUG] 2017-12-18 12:00:47,928 Line:1061 ------Init Enumeration record:390
 [DEBUG] 2017-12-18 12:00:47,928 Line:138 --------AdvanceAction.restart 刷新枚举initEnumerationInformation 成功-----------
 [DEBUG] 2017-12-18 12:00:48,380 Line:1832 ------Init ModuleList record:
 [DEBUG] 2017-12-18 12:00:48,380 Line:147 --------AdvanceAction.restart 刷新模块initModuleList 成功-----------
 [DEBUG] 2017-12-18 12:00:48,382 Line:157 --------AdvanceAction.restart 刷新自定义列名initModuleColLanuage 成功-----------
 [DEBUG] 2017-12-18 12:00:48,383 Line:168 --------AdvanceAction.restart 刷新自定义列宽initUserColWidth 成功-----------
 [DEBUG] 2017-12-18 12:00:48,386 Line:178 --------AdvanceAction.restart 刷新自定义列名initUserLanuageInfo 成功-----------
 [DEBUG] 2017-12-18 12:00:48,967 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2017-12-18 12:00:49,000 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2017-12-18 12:00:49,748 Line:538 ------Init TableInfo record:634
 [DEBUG] 2017-12-18 12:00:49,756 Line:188 --------AdvanceAction.restart 刷新表结构initDBInformation 成功-----------
 [DEBUG] 2017-12-18 12:00:49,758 Line:197 --------AdvanceAction.restart 刷新列配置initUserColConfig 成功-----------
 [DEBUG] 2017-12-18 12:00:49,764 Line:775 ------Init initModuleField record:0
 [DEBUG] 2017-12-18 12:00:49,765 Line:207 --------AdvanceAction.restart 刷新模块字段initModuleField 成功-----------
 [DEBUG] 2017-12-18 12:00:49,766 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2017-12-18 12:00:49,779 Line:721 ------Init TableInfo record:26
 [DEBUG] 2017-12-18 12:00:49,779 Line:216 --------AdvanceAction.restart 刷新弹出框显示语句initPopDisSen 成功-----------
 [DEBUG] 2017-12-18 12:00:49,795 Line:891 ------Init PropInfo record:7
 [DEBUG] 2017-12-18 12:00:49,796 Line:228 --------AdvanceAction.restart 刷新商品属性initPropInformation 成功-----------
 [DEBUG] 2017-12-18 12:00:49,802 Line:238 --------AdvanceAction.restart 刷新商品属性initAttInformation 成功-----------
 [DEBUG] 2017-12-18 12:00:50,464 Line:244 --------AdvanceAction.restart 刷新配置文件initConfigFile 成功-----------
 [ERROR] 2017-12-18 12:00:50,517 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2017-12-18 12:00:50,518 Line:254 --------AdvanceAction.restart 刷新已启用工作流initWorkFlowInfo 成功-----------
 [DEBUG] 2017-12-18 12:00:50,521 Line:266 --------AdvanceAction.restart 刷新报表显示配置initReportShowSet 成功-----------
 [DEBUG] 2017-12-18 12:00:50,540 Line:275 --------AdvanceAction.restart 刷新KK缓存  成功-----------
 [DEBUG] 2017-12-18 12:00:52,006 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index&winCurIndex=null
 [DEBUG] 2017-12-18 12:00:52,007 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 12:01:18,527 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 12:01:18,528 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 12:01:18,528 Line:243 AIOApi op=popup&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 12:01:18,529 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [INFO ] 2017-12-18 12:01:18,536 Line:1181 --------------弹出窗调试信息：弹出窗model_getWorkNodeByTblName返回字段'OAWorkFlowNode.keyId'在表构中不存，且未指定parentName或display
 [DEBUG] 2017-12-18 12:01:20,030 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 12:01:20,032 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 12:01:20,032 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 12:01:20,119 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 12:01:20,121 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 12:01:20,121 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 12:01:20,177 Line:689 通过SQL读原始数据：57
 [DEBUG] 2017-12-18 12:01:20,177 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 12:01:20,179 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 12:01:21,702 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 12:01:21,705 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 12:01:21,706 Line:243 AIOApi op=report&sessionid=7F20AB9DB189ACA8058BCCB3E100D1E2
 [DEBUG] 2017-12-18 12:01:21,744 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 12:01:21,745 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 12:01:21,746 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 12:01:21,776 Line:689 通过SQL读原始数据：31
 [DEBUG] 2017-12-18 12:01:21,792 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 12:01:21,793 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 12:19:20,199 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 13:44:07,485 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 13:50:57,060 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 13:50:57,060 Line:3003 MobileAjax 操作人:;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 13:50:57,061 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:50:57,061 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 13:50:58,583 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 13:50:58,584 Line:3003 MobileAjax 操作人:;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 13:50:58,585 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:50:58,587 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 13:51:03,968 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 13:51:03,969 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 13:51:03,970 Line:243 AIOApi op=LOGIN&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:51:03,988 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 13:51:04,013 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 13:51:04,019 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 13:51:04,061 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 13:51:04,553 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 13:51:04,553 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 13:51:04,554 Line:243 AIOApi op=getSessEmp&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:51:04,554 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 13:51:04,587 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 13:51:04,587 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 13:51:04,587 Line:243 AIOApi op=getEnum&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:51:04,588 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 13:51:07,494 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 13:51:07,494 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 13:51:07,495 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:51:07,496 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [INFO ] 2017-12-18 13:51:07,513 Line:1181 --------------弹出窗调试信息：弹出窗model_getWorkNodeByTblName返回字段'OAWorkFlowNode.keyId'在表构中不存，且未指定parentName或display
 [DEBUG] 2017-12-18 13:51:09,006 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 13:51:09,007 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 13:51:09,008 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:51:09,061 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 13:51:09,063 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 13:51:09,063 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 13:51:09,156 Line:689 通过SQL读原始数据：93
 [DEBUG] 2017-12-18 13:51:09,157 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 13:51:09,161 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 13:51:10,680 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 13:51:10,681 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 13:51:10,681 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:51:10,690 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 13:51:10,690 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 13:51:10,690 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 13:51:10,740 Line:689 通过SQL读原始数据：50
 [DEBUG] 2017-12-18 13:51:10,762 Line:1391 整理数据：22
 [DEBUG] 2017-12-18 13:51:10,764 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 13:53:44,391 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 13:53:44,392 Line:146 BaseAction.execute 操作人:;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[OAWorkFlowNode ,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tableName' and statusId = 0
		,];changeCond=[,];fType=[0,0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,,];asName=[keyId,display,,];sysType=[,,,];parentName=[,,,];display=[keyId,display,,];width=[100,100,,];searchType=[,,,];defaultValue=[,,,];inputType=[,,,];inputValue=[,,,];popSelect=[,,,];
 [DEBUG] 2017-12-18 13:53:50,402 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 13:53:50,402 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 13:53:50,402 Line:243 AIOApi op=LOGIN&sessionid=12BE325C8B25255DFBFD7B97D9659189
 [DEBUG] 2017-12-18 13:53:50,416 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 13:53:50,435 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 13:53:50,440 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 13:53:50,454 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 13:53:50,464 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 13:53:50,464 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,popupUpdate,];topPopup=[,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,,];defParentCode=[,];sysType=[,,,];fType=[0,0,0,];defaultValue=[,,,];forwardModel=[,];orderBy=[,];classSysType=[,];popupName=[model_getWorkNodeByTblName,];changeCond=[,];inputValue=[,,,];inputType=[,,,];copy=[,];popSelect=[,,,];classCode=[,];asName=[keyId,display,,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tableName' and statusId = 0
		,];searchType=[,,,];display=[keyId,display,,];version=[,];parentName=[,,,];hasChild=[,];width=[100,100,,];belongTableName=[OAWorkFlowNode ,];exec=[true,];desc=[根据表名获取单据流程节点,];
 [DEBUG] 2017-12-18 13:53:51,951 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 13:53:51,953 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 13:53:51,982 Line:5227 GlobalsTool.js 生成js 时间27:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2017-12-18 13:54:05,397 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 13:54:05,399 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 13:54:05,399 Line:243 AIOApi op=getSessEmp&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:54:05,399 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 13:54:05,415 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 13:54:05,415 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 13:54:05,416 Line:243 AIOApi op=getEnum&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:54:05,417 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 13:54:08,392 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 13:54:08,393 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 13:54:08,393 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:54:08,393 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 13:54:09,909 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 13:54:09,910 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 13:54:09,911 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:54:10,014 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 13:54:10,014 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 13:54:10,015 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 13:54:10,141 Line:689 通过SQL读原始数据：127
 [DEBUG] 2017-12-18 13:54:10,141 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 13:54:10,143 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 13:54:11,665 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 13:54:11,667 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 13:54:11,667 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 13:54:11,688 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 13:54:11,689 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 13:54:11,690 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 13:54:11,714 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-18 13:54:11,731 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 13:54:11,733 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 13:54:55,859 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"display":"开始","keyId":"0"},{"display":"结束","keyId":"-1"},{"display":"主管审核","keyId":"1513322741341"},{"display":"财务审核","keyId":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:00:07,792 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 14:00:07,793 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[OAWorkFlowNode ,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tableName' and statusId = 0
		,];changeCond=[,];fType=[0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,];asName=[value,lable,];sysType=[,,];parentName=[,,];display=[value,lable,];width=[100,100,];searchType=[,,];defaultValue=[,,];inputType=[,,];inputValue=[,,];popSelect=[,,];
 [DEBUG] 2017-12-18 14:00:09,267 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 14:00:09,269 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 14:00:17,171 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:00:17,172 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:00:17,172 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:00:17,173 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:00:18,685 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:00:18,685 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:00:18,686 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:00:18,748 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:00:18,749 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:00:18,750 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:00:18,882 Line:689 通过SQL读原始数据：133
 [DEBUG] 2017-12-18 14:00:18,882 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:00:18,884 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:00:20,413 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:00:20,416 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:00:20,416 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:00:20,450 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:00:20,451 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:00:20,452 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:00:20,493 Line:689 通过SQL读原始数据：42
 [DEBUG] 2017-12-18 14:00:20,508 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:00:20,510 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:00:28,727 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"lable":"开始","value":"0"},{"lable":"结束","value":"-1"},{"lable":"主管审核","value":"1513322741341"},{"lable":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:04:24,294 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:04:24,294 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:04:24,295 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:24,295 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:04:24,307 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"lable":"开始","value":"0"},{"lable":"结束","value":"-1"},{"lable":"主管审核","value":"1513322741341"},{"lable":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:04:25,571 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:04:25,572 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:04:25,572 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:25,612 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:04:25,612 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:25,613 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:25,693 Line:689 通过SQL读原始数据：81
 [DEBUG] 2017-12-18 14:04:25,694 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:04:25,695 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:04:27,208 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:04:27,209 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:04:27,209 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:27,219 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:04:27,219 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:27,219 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:27,244 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-18 14:04:27,259 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:04:27,261 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:04:39,386 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:04:39,387 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:04:39,387 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:39,388 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:04:39,395 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"lable":"开始","value":"0"},{"lable":"结束","value":"-1"},{"lable":"主管审核","value":"1513322741341"},{"lable":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:04:40,904 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:04:40,906 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:04:40,907 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:40,941 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:04:40,943 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:40,943 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:40,947 Line:689 通过SQL读原始数据：4
 [DEBUG] 2017-12-18 14:04:40,950 Line:1391 整理数据：2
 [DEBUG] 2017-12-18 14:04:40,956 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:04:42,510 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:04:42,512 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:04:42,512 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:42,539 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:04:42,539 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:42,540 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:42,541 Line:689 通过SQL读原始数据：2
 [DEBUG] 2017-12-18 14:04:42,543 Line:1391 整理数据：2
 [DEBUG] 2017-12-18 14:04:42,546 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:04:56,893 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:04:56,894 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:04:56,894 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:56,895 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:04:56,897 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"lable":"开始","value":"0"},{"lable":"结束","value":"-1"},{"lable":"主管审核","value":"1513322741341"},{"lable":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:04:58,402 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:04:58,404 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:04:58,404 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:04:58,433 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:04:58,434 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:58,435 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:04:58,437 Line:689 通过SQL读原始数据：3
 [DEBUG] 2017-12-18 14:04:58,438 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:04:58,442 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:04:59,983 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:04:59,986 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:04:59,987 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:05:00,017 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:05:00,018 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:05:00,019 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:05:00,021 Line:689 通过SQL读原始数据：3
 [DEBUG] 2017-12-18 14:05:00,023 Line:1391 整理数据：2
 [DEBUG] 2017-12-18 14:05:00,027 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:06:13,287 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:06:13,288 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:06:13,288 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:06:13,288 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:06:13,295 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"lable":"开始","value":"0"},{"lable":"结束","value":"-1"},{"lable":"主管审核","value":"1513322741341"},{"lable":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:06:14,447 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:06:14,448 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:06:14,449 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:06:14,520 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:06:14,521 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:06:14,521 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:06:14,594 Line:689 通过SQL读原始数据：73
 [DEBUG] 2017-12-18 14:06:14,595 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:06:14,597 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:06:16,121 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:06:16,123 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:06:16,124 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:06:16,159 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:06:16,160 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:06:16,161 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:06:16,241 Line:689 通过SQL读原始数据：81
 [DEBUG] 2017-12-18 14:06:16,283 Line:1391 整理数据：40
 [DEBUG] 2017-12-18 14:06:16,287 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:07:30,861 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:07:30,862 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:07:30,862 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:07:30,863 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:07:30,870 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"lable":"开始","value":"0"},{"lable":"结束","value":"-1"},{"lable":"主管审核","value":"1513322741341"},{"lable":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:07:32,376 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:07:32,378 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:07:32,379 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:07:32,465 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:07:32,466 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:07:32,467 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:07:32,536 Line:689 通过SQL读原始数据：70
 [DEBUG] 2017-12-18 14:07:32,537 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:07:32,539 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:07:34,057 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:07:34,058 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:07:34,059 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:07:34,078 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:07:34,079 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:07:34,079 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:07:34,121 Line:689 通过SQL读原始数据：42
 [DEBUG] 2017-12-18 14:07:34,136 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:07:34,138 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:09:11,540 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate
 [DEBUG] 2017-12-18 14:09:11,541 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];exec=[true,];copy=[,];version=[,];popupName=[model_getWorkNodeByTblName,];desc=[根据表名获取单据流程节点,];classCode=[,];classSysType=[,];defParentCode=[,];orderBy=[,];topPopup=[,];hasChild=[,];forwardModel=[,];belongTableName=[OAWorkFlowNode ,];defineSQL=[from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = '@ValueofDB:tableName' and statusId = 0
		,];changeCond=[,];fType=[0,0,0,];fieldName=[OAWorkFlowNode.keyId,OAWorkFlowNode.display,,];asName=[value,label,,];sysType=[,,,];parentName=[,,,];display=[value,label,,];width=[100,100,,];searchType=[,,,];defaultValue=[,,,];inputType=[,,,];inputValue=[,,,];popSelect=[,,,];
 [DEBUG] 2017-12-18 14:09:13,014 Line:135 BaseAction.execute 请求地址：/CustomAction.do?type=popupUpdate&popupName=model_getWorkNodeByTblName&popupWin=null&popWinName=null&winCurIndex=null
 [DEBUG] 2017-12-18 14:09:13,015 Line:146 BaseAction.execute 操作人:admin;请求数据：type=[popupUpdate,];popupName=[model_getWorkNodeByTblName,];popupWin=[null,];popWinName=[null,];winCurIndex=[null,];
 [DEBUG] 2017-12-18 14:09:26,319 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:09:26,320 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:09:26,320 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:09:26,321 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:09:26,327 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:09:27,837 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:09:27,838 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:09:27,840 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:09:27,932 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:09:27,933 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:09:27,933 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:09:28,021 Line:689 通过SQL读原始数据：88
 [DEBUG] 2017-12-18 14:09:28,021 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:09:28,023 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:09:29,549 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:09:29,551 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:09:29,552 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:09:29,575 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:09:29,576 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:09:29,576 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:09:29,601 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-18 14:09:29,616 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:09:29,618 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:10:05,164 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:10:05,164 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:10:05,165 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:10:05,165 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:10:05,172 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:10:06,677 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:10:06,679 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:10:06,680 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:10:06,739 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:10:06,739 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:10:06,739 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:10:06,781 Line:689 通过SQL读原始数据：42
 [DEBUG] 2017-12-18 14:10:06,781 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:10:06,783 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:10:08,307 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:10:08,309 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:10:08,310 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:10:08,345 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:10:08,346 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:10:08,347 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:10:08,412 Line:689 通过SQL读原始数据：66
 [DEBUG] 2017-12-18 14:10:08,429 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 14:10:08,431 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:14:07,043 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:14:07,044 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:14:07,045 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:14:07,046 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:14:07,051 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:14:08,555 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:14:08,557 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:14:08,558 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:14:08,644 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:14:08,645 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:08,645 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:08,713 Line:689 通过SQL读原始数据：68
 [DEBUG] 2017-12-18 14:14:08,713 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:14:08,715 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:14:10,232 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:14:10,233 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:14:10,233 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:14:10,254 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:14:10,255 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:10,255 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:10,297 Line:689 通过SQL读原始数据：42
 [DEBUG] 2017-12-18 14:14:10,312 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:14:10,314 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:14:26,286 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 14:14:52,843 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:14:52,844 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:14:52,844 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:14:52,845 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:14:52,851 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:14:54,357 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:14:54,358 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:14:54,359 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:14:54,410 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:14:54,411 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:54,412 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:54,480 Line:689 通过SQL读原始数据：69
 [DEBUG] 2017-12-18 14:14:54,481 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:14:54,482 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:14:56,003 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:14:56,005 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:14:56,006 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:14:56,038 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:14:56,039 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:56,039 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:14:56,078 Line:689 通过SQL读原始数据：39
 [DEBUG] 2017-12-18 14:14:56,095 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 14:14:56,097 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:15:23,641 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:23,642 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[draft,];
 [DEBUG] 2017-12-18 14:15:23,642 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:23,666 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:23,666 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:23,666 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:23,666 Line:582 ReportDataMgt.getReportData 参数3:draft
 [DEBUG] 2017-12-18 14:15:23,701 Line:689 通过SQL读原始数据：35
 [DEBUG] 2017-12-18 14:15:23,701 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:23,703 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","draft"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","5等等！
 [DEBUG] 2017-12-18 14:15:25,704 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:25,705 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[notApprove,];
 [DEBUG] 2017-12-18 14:15:25,706 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:25,736 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:25,736 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:25,737 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:25,737 Line:582 ReportDataMgt.getReportData 参数3:notApprove
 [DEBUG] 2017-12-18 14:15:25,779 Line:689 通过SQL读原始数据：43
 [DEBUG] 2017-12-18 14:15:25,779 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:25,781 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","notApprove"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手等等！
 [DEBUG] 2017-12-18 14:15:27,767 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:27,768 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[finish,];
 [DEBUG] 2017-12-18 14:15:27,768 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:27,796 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:27,796 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:27,797 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:27,797 Line:582 ReportDataMgt.getReportData 参数3:finish
 [DEBUG] 2017-12-18 14:15:27,841 Line:689 通过SQL读原始数据：45
 [DEBUG] 2017-12-18 14:15:27,842 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:15:27,843 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","finish"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","等等！
 [DEBUG] 2017-12-18 14:15:30,406 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:30,407 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName[label]=[全部,];workFlowNodeName[value]=[,];
 [DEBUG] 2017-12-18 14:15:30,407 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:30,415 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:30,416 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:30,416 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:30,445 Line:689 通过SQL读原始数据：29
 [DEBUG] 2017-12-18 14:15:30,446 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:30,447 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","all"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50"等等！
 [DEBUG] 2017-12-18 14:15:32,312 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:32,312 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[0,];
 [DEBUG] 2017-12-18 14:15:32,313 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:32,320 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:32,321 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:32,321 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:32,321 Line:582 ReportDataMgt.getReportData 参数3:0
 [DEBUG] 2017-12-18 14:15:32,349 Line:689 通过SQL读原始数据：27
 [DEBUG] 2017-12-18 14:15:32,349 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:32,350 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","0"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","等等！
 [DEBUG] 2017-12-18 14:15:34,059 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:34,060 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[-1,];
 [DEBUG] 2017-12-18 14:15:34,061 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:34,071 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:34,072 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:34,072 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:34,072 Line:582 ReportDataMgt.getReportData 参数3:finish
 [DEBUG] 2017-12-18 14:15:34,073 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:15:34,073 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:34,075 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","-1"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50",等等！
 [DEBUG] 2017-12-18 14:15:38,471 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:38,472 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[1513322741341,];
 [DEBUG] 2017-12-18 14:15:38,472 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:38,484 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:38,485 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:38,485 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:38,485 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 14:15:38,486 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:15:38,486 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:38,488 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","1513322741341"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],[等等！
 [DEBUG] 2017-12-18 14:15:39,975 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:15:39,976 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[1513322743692,];
 [DEBUG] 2017-12-18 14:15:39,976 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:15:39,987 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:15:39,987 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:39,988 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:15:39,988 Line:582 ReportDataMgt.getReportData 参数3:1513322743692
 [DEBUG] 2017-12-18 14:15:39,988 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:15:39,989 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:15:39,990 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","1513322743692"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],[等等！
 [DEBUG] 2017-12-18 14:16:09,387 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:16:09,387 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:16:09,388 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:09,388 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:16:09,412 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:16:10,900 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:16:10,903 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:16:10,903 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:10,940 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:16:10,941 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:10,942 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:10,943 Line:689 通过SQL读原始数据：2
 [DEBUG] 2017-12-18 14:16:10,943 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:16:10,945 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:16:12,467 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:16:12,469 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:16:12,469 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:12,504 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:16:12,505 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:12,506 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:12,574 Line:689 通过SQL读原始数据：69
 [DEBUG] 2017-12-18 14:16:12,590 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 14:16:12,592 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:16:22,917 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:16:22,918 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[1,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:16:22,918 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:22,927 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                 and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:16:22,928 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:22,928 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:22,929 Line:582 ReportDataMgt.getReportData 参数3:1
 [DEBUG] 2017-12-18 14:16:22,958 Line:689 通过SQL读原始数据：30
 [DEBUG] 2017-12-18 14:16:22,959 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:16:22,961 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId","1"],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","等等！
 [DEBUG] 2017-12-18 14:16:24,406 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:16:24,406 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[0,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:16:24,407 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:24,541 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                 and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:16:24,541 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:24,541 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:24,542 Line:582 ReportDataMgt.getReportData 参数3:0
 [DEBUG] 2017-12-18 14:16:24,543 Line:689 通过SQL读原始数据：2
 [DEBUG] 2017-12-18 14:16:24,543 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:16:24,545 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId","0"],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","等等！
 [DEBUG] 2017-12-18 14:16:26,293 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:16:26,294 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId[label]=[全部,];statusId[value]=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:16:26,294 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:26,307 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                 and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:16:26,308 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:26,308 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:16:26,308 Line:582 ReportDataMgt.getReportData 参数3:0
 [DEBUG] 2017-12-18 14:16:26,309 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:16:26,310 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:16:26,311 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId","0"],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","等等！
 [DEBUG] 2017-12-18 14:16:52,434 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 14:16:52,435 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 14:16:52,435 Line:243 AIOApi op=getSessEmp&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:52,436 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 14:16:52,450 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 14:16:52,450 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 14:16:52,451 Line:243 AIOApi op=getEnum&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:52,451 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 14:16:58,665 Line:2992 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2017-12-18 14:16:58,666 Line:3003 MobileAjax 操作人:admin;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2017-12-18 14:16:58,666 Line:243 AIOApi op=addPrepare&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:16:58,769 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"admin","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"1","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_StockCode":"","tableName":"tblS等等！
 [DEBUG] 2017-12-18 14:17:02,300 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:17:02,301 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_clientList,];pageNo=[1,];pageSize=[1000,];
 [DEBUG] 2017-12-18 14:17:02,301 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:17:02,302 Line:3434 DynDBManager.popSelect selectName=model_clientList; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComNumber f2 ,tblCompany.ComFullName f3 ,tblCompany.ComFullNamePYM f4 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from tblCompany
where isCatalog = 0 and ClientFlag = 2) a where  row_id between 1 and 1000 order by row_id 
 [DEBUG] 2017-12-18 14:17:02,309 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","ComFullNamePYM":"bs","ComNumber":"0001","CompanyCode":"00001"}]}}
 [DEBUG] 2017-12-18 14:17:13,490 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblCompany&moduleType=2&ClientFlag=2&src=menu&winCurIndex=4
 [DEBUG] 2017-12-18 14:17:13,491 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[2,];ClientFlag=[2,];src=[menu,];winCurIndex=[4,];
 [DEBUG] 2017-12-18 14:17:13,491 Line:215 ---------->SET Page 4 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblCompany&moduleType=2&ClientFlag=2
 [DEBUG] 2017-12-18 14:17:13,570 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblCompany&moduleType=2&ClientFlag=2&src=menu&winCurIndex=4&checkTab=Y
 [DEBUG] 2017-12-18 14:17:13,570 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=2&SysType=&MOID=6c9829c9_1003091558583590006&editable=true&subSql=
 [DEBUG] 2017-12-18 14:17:13,571 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[2,];ClientFlag=[2,];src=[menu,];winCurIndex=[4,];checkTab=[Y,];
 [DEBUG] 2017-12-18 14:17:13,571 Line:215 ---------->SET Page 4 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblCompany&moduleType=2&ClientFlag=2
 [DEBUG] 2017-12-18 14:17:13,571 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[2,];SysType=[,];MOID=[6c9829c9_1003091558583590006,];editable=[true,];subSql=[,];
 [DEBUG] 2017-12-18 14:17:13,573 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType='2' order by ComNumber
 [DEBUG] 2017-12-18 14:17:13,608 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,ComNumber,ComFullName,ComTel,ComFax,ComEmail,ComWebsite,ComAddress,statusId,id,moduleType,ComFullNamePYM,ComName,ComContactor,ComContactorTel,ComContactorMobile,Credit,EmpFullName,DeptFullName,SettleCys,ShippingAddress,Account1,Account2,Account3 from ( select tblCompany.classCode as classCode,tblCompany.isCatalog as childCount, tblCompany.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblCompany.ComNumber as ComNumber,     tblCompany.ComFullName as ComFullName,     tblCompany.ComTel as ComTel,     tblCompany.ComFax as ComFax,     tblCompany.ComEmail as ComEmail,     tblCompany.ComWebsite as ComWebsite,     tblCompany.ComAddress as ComAddress,     tblCompany.statusId as statusId,     tblCompany.id as id,     tblCompany.moduleType as moduleType,     tblCompany.ComFullNamePYM as ComFullNamePYM,     tblCompany.ComName as ComName,     tblCompany.ComContactor as ComContactor,     tblCompany.ComContactorTel as ComContactorTel,     tblCompany.ComContactorMobile as ComContactorMobile,     tblCompany.Credit as Credit,     tblEmployee.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblCompany.SettleCys as SettleCys,     tblCompany.ShippingAddress as ShippingAddress,     tblCompany.Account1 as Account1,     tblCompany.Account2 as Account2,     tblCompany.Account3 as Account3   ,ROW_NUMBER() over(order by     tblCompany.ComNumber) as row_id  from tblCompany left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode where 1=1 and tblCompany.classCode like '_____'                             and (tblCompany.moduleType =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:17:13,608 Line:582 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 14:17:13,622 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 14:17:13,623 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:17:13,832 Line:5227 GlobalsTool.js 生成js 时间18:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:17:13,864 Line:5227 GlobalsTool.js 生成js 时间32:/js/gen/defineList.vjstblCompany_zh_CN.js
 [DEBUG] 2017-12-18 14:17:16,056 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblCompany&parentCode=&operation=6&moduleType=2&f_brother=&parentTableName=&winCurIndex=4&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:17:16,057 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];parentCode=[,];operation=[6,];moduleType=[2,];f_brother=[,];parentTableName=[,];winCurIndex=[4,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:17:16,305 Line:5227 GlobalsTool.js 生成js 时间162:/js/gen/define.vjstblCompany_zh_CN.js
 [DEBUG] 2017-12-18 14:17:34,040 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E9%A1%BA%E8%AA%89&time=1513577854035
 [DEBUG] 2017-12-18 14:17:34,043 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[é??è??,];time=[1513577854035,];
 [DEBUG] 2017-12-18 14:17:34,361 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 14:17:34,362 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblCompany,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[2,];parentTableName=[,];winCurIndex=[4,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];ComFullName=[顺誉,];SCompanyID=[,];ComNumber=[0002,];ComFullNamePYM=[sy,];ClientFlag=[2,];ComName=[,];ComTel=[,];ComFax=[,];ComAccountNo=[,];ComAccountName=[,];ComContactor=[,];ComContactorTel=[,];ComContactorMobile=[,];CustomerFlag=[,];AreaID=[,];TradeID=[,];Credit=[0,];ComSalesType=[ProSalesPrice,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];SettleCys=[,];InVoiceType=[3,];isCatalog=[0,];lastUpdateBy=[,];lastUpdateTime=[2017-12-18 14:17:16,];level=[,];OldclassCode=[,];payCredit=[0,];payDebit=[0,];payYear=[0,];prePayCredit=[0,];prePayDebit=[0,];prePayYear=[0,];preReceiveCredit=[0,];preReceiveDebit=[0,];Discount=[100,];DefaultSettleType=[,];DefaultTradeType=[,];IniPay=[0,];IniPrePay=[0,];IniPreReceive=[0,];IniReceive=[0,];currency=[,];ComWebsite=[,];createBy=[,];createTime=[2017-12-18 14:17:16,];ShippingAddress=[,];SonComNum=[,];statusId=[0,];TopCredit=[,];TotalPay=[0,];TotalReceive=[0,];finishTime=[,];receiveYear=[0,];preReceiveYear=[0,];printCount=[0,];receiveCredit=[0,];receiveDebit=[0,];workFlowNode=[,];workFlowNodeName=[,];CheckPersont=[,];classCode=[,];ComAddress=[,];ComEmail=[,];PrePayTotalRemain=[,];PayRemain=[,];PayTotalRemain=[,];PreReceiveTotalRemain=[,];Account1=[,];Account2=[,];Account3=[,];ReceiveRemain=[,];ReceiveTotalRemain=[,];tblCompanyEmployeeDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblCompanyEmployeeDet_ContactMan=[,];tblCompanyEmployeeDet_Role=[,];tblCompanyEmployeeDet_Gender=[-100000,];tblCompanyEmployeeDet_BirthDay=[,];tblCompanyEmployeeDet_Mobile=[,];tblCompanyEmployeeDet_Telephone=[,];tblCompanyEmployeeDet_ClientEmail=[,];tblCompanyEmployeeDet_Remark=[,];tblCompanyEmployeeDet_contactCode=[,];tblCompanyEmployeeDet_MSN=[,];tblCompanyEmployeeDet_QQ=[,];tblCompanyEmployeeDet_Hobby=[,];tblCompanyEmployeeDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-18 14:17:34,363 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0510271549157810034
 [DEBUG] 2017-12-18 14:17:34,425 Line:5847  INSERT INTO  tblCompany(checkPersons,ComFullName,id,SCompanyID,ComNumber,ComFullNamePYM,ClientFlag,ComName,ComTel,ComFax,ComAccountNo,ComAccountName,ComContactor,ComContactorTel,ComContactorMobile,Remark,CustomerFlag,AreaID,TradeID,Credit,ComSalesType,DepartmentCode,EmployeeID,SettleCys,InVoiceType,isCatalog,lastUpdateBy,lastUpdateTime,level,moduleType,OldclassCode,payCredit,payDebit,payYear,prePayCredit,prePayDebit,prePayYear,preReceiveCredit,preReceiveDebit,Discount,DefaultSettleType,DefaultTradeType,IniPay,IniPrePay,IniPreReceive,IniReceive,currency,ComWebsite,createBy,createTime,ShippingAddress,SonComNum,statusId,TopCredit,TotalPay,TotalReceive,finishTime,receiveYear,preReceiveYear,printCount,receiveCredit,receiveDebit,workFlowNode,workFlowNodeName,CheckPersont,classCode,ComAddress,ComEmail,Attachment,PrePayTotalRemain,PayRemain,PayTotalRemain,PreReceiveTotalRemain,Account1,Account2,Account3,ReceiveRemain,ReceiveTotalRemain) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:17:34,426 Line:5853 1:
 [DEBUG] 2017-12-18 14:17:34,426 Line:5853 2:顺誉
 [DEBUG] 2017-12-18 14:17:34,427 Line:5853 3:dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,427 Line:5853 4:00001
 [DEBUG] 2017-12-18 14:17:34,428 Line:5853 5:0002
 [DEBUG] 2017-12-18 14:17:34,428 Line:5853 6:sy
 [DEBUG] 2017-12-18 14:17:34,428 Line:5853 7:2
 [DEBUG] 2017-12-18 14:17:34,429 Line:5853 8:
 [DEBUG] 2017-12-18 14:17:34,429 Line:5853 9:
 [DEBUG] 2017-12-18 14:17:34,430 Line:5853 10:
 [DEBUG] 2017-12-18 14:17:34,430 Line:5853 11:
 [DEBUG] 2017-12-18 14:17:34,430 Line:5853 12:
 [DEBUG] 2017-12-18 14:17:34,431 Line:5853 13:
 [DEBUG] 2017-12-18 14:17:34,431 Line:5853 14:
 [DEBUG] 2017-12-18 14:17:34,431 Line:5853 15:
 [DEBUG] 2017-12-18 14:17:34,431 Line:5853 16:
 [DEBUG] 2017-12-18 14:17:34,431 Line:5853 17:0
 [DEBUG] 2017-12-18 14:17:34,431 Line:5853 18:
 [DEBUG] 2017-12-18 14:17:34,432 Line:5853 19:
 [DEBUG] 2017-12-18 14:17:34,432 Line:5853 20:0.0
 [DEBUG] 2017-12-18 14:17:34,432 Line:5853 21:ProSalesPrice
 [DEBUG] 2017-12-18 14:17:34,432 Line:5853 22:00101
 [DEBUG] 2017-12-18 14:17:34,432 Line:5853 23:1
 [DEBUG] 2017-12-18 14:17:34,432 Line:5853 24:0
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 25:3
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 26:0
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 27:1
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 28:2017-12-18 14:17:16
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 29:0
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 30:2
 [DEBUG] 2017-12-18 14:17:34,433 Line:5853 31:
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 32:0.0
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 34:0.0
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 35:0.0
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:17:34,434 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 39:0.0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 40:100.0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 41:0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 42:0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 43:0.0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 44:0.0
 [DEBUG] 2017-12-18 14:17:34,435 Line:5853 45:0.0
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 46:0.0
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 47:0
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 48:
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 49:1
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 50:2017-12-18 14:17:16
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 51:
 [DEBUG] 2017-12-18 14:17:34,436 Line:5853 52:0
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 53:0
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 54:0
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 55:0.0
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 56:0.0
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 57:2017-12-18 14:17:34
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 58:0.0
 [DEBUG] 2017-12-18 14:17:34,437 Line:5853 59:0.0
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 60:0
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 61:0.0
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 62:0.0
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 63:-1
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 64:finish
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 65:
 [DEBUG] 2017-12-18 14:17:34,438 Line:5853 66:00002
 [DEBUG] 2017-12-18 14:17:34,439 Line:5853 67:
 [DEBUG] 2017-12-18 14:17:34,439 Line:5853 68:
 [DEBUG] 2017-12-18 14:17:34,439 Line:5853 69:
 [DEBUG] 2017-12-18 14:17:34,439 Line:5853 70:0.0
 [DEBUG] 2017-12-18 14:17:34,439 Line:5853 71:0.0
 [DEBUG] 2017-12-18 14:17:34,439 Line:5853 72:0.0
 [DEBUG] 2017-12-18 14:17:34,440 Line:5853 73:0.0
 [DEBUG] 2017-12-18 14:17:34,440 Line:5853 74:
 [DEBUG] 2017-12-18 14:17:34,440 Line:5853 75:
 [DEBUG] 2017-12-18 14:17:34,440 Line:5853 76:
 [DEBUG] 2017-12-18 14:17:34,440 Line:5853 77:0.0
 [DEBUG] 2017-12-18 14:17:34,440 Line:5853 78:0.0
 [DEBUG] 2017-12-18 14:17:34,681 Line:921 自定义执行的语句显示： Company_Add :select classCode oldclassCode,ComNumber as Number,ComFullName as FullName from tblCompany where ?='add' and classCode=subString(?,1,len(?)-5) and (select count(0) from tblCompany where classCode like subString(?,1,len(?)-5)+'_____')=1
 [DEBUG] 2017-12-18 14:17:34,682 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,682 Line:988 1值：add
 [DEBUG] 2017-12-18 14:17:34,682 Line:988 2值：00002
 [DEBUG] 2017-12-18 14:17:34,682 Line:988 3值：00002
 [DEBUG] 2017-12-18 14:17:34,682 Line:988 4值：00002
 [DEBUG] 2017-12-18 14:17:34,683 Line:988 5值：00002
 [DEBUG] 2017-12-18 14:17:34,686 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 14:17:34,687 Line:313 exeCondition:Company_Add :'null'!='null'&&'null'.length>0
 [DEBUG] 2017-12-18 14:17:34,941 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,941 Line:313 exeCondition:Company_Add :''=='-2222'
 [DEBUG] 2017-12-18 14:17:34,942 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,942 Line:921 自定义执行的语句显示： Company_Add :select ComNumber as SComNumber,isNull(ClientFlag,0) as SClientFlagA from tblCompany where ComNumber=? and ClientFlag=1 and id!=?
 [DEBUG] 2017-12-18 14:17:34,942 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,943 Line:988 1值：0002
 [DEBUG] 2017-12-18 14:17:34,943 Line:988 2值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,945 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:17:34,946 Line:921 自定义执行的语句显示： Company_Add :select ComFullName as SComFullName,isNull(ClientFlag,0) as SClientFlagB from tblCompany where ComFullName=? and ClientFlag=1 and id!=?
 [DEBUG] 2017-12-18 14:17:34,946 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,946 Line:988 1值：顺誉
 [DEBUG] 2017-12-18 14:17:34,946 Line:988 2值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,948 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:17:34,949 Line:921 自定义执行的语句显示： Company_Add :select ComNumber as CComNumber,isNull(ClientFlag,0) as CClientFlagA from tblCompany where ComNumber=? and ClientFlag=2 and id!=?
 [DEBUG] 2017-12-18 14:17:34,949 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,949 Line:988 1值：0002
 [DEBUG] 2017-12-18 14:17:34,949 Line:988 2值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,951 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:17:34,952 Line:921 自定义执行的语句显示： Company_Add :select ComFullName as CComFullName,isNull(ClientFlag,0) as CClientFlagB from tblCompany where ComFullName=? and ClientFlag=2 and id!=?
 [DEBUG] 2017-12-18 14:17:34,952 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,952 Line:988 1值：顺誉
 [DEBUG] 2017-12-18 14:17:34,952 Line:988 2值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,954 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:17:34,955 Line:921 自定义执行的语句显示： Company_Add :select ComNumber as SCComNumber,isNull(ClientFlag,0) as SCClientFlagA from tblCompany where ComNumber=? and ClientFlag=3 and id!=?
 [DEBUG] 2017-12-18 14:17:34,955 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,955 Line:988 1值：0002
 [DEBUG] 2017-12-18 14:17:34,955 Line:988 2值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,958 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:17:34,959 Line:921 自定义执行的语句显示： Company_Add :select ComFullName as SCComFullName,isNull(ClientFlag,0) as SCClientFlagB from tblCompany where ComFullName=? and ClientFlag=3 and id!=?
 [DEBUG] 2017-12-18 14:17:34,959 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,959 Line:988 1值：顺誉
 [DEBUG] 2017-12-18 14:17:34,960 Line:988 2值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,962 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:17:34,962 Line:313 exeCondition:Company_Add :'null'!='null'&&null==2 && ''=='true'
 [DEBUG] 2017-12-18 14:17:34,963 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,963 Line:313 exeCondition:Company_Add :'null'!='null'&&null==2 && ''=='true'
 [DEBUG] 2017-12-18 14:17:34,964 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,965 Line:313 exeCondition:Company_Add :'null'!='null'&&null==2 && ''=='true'
 [DEBUG] 2017-12-18 14:17:34,966 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,966 Line:313 exeCondition:Company_Add :'null'!='null'&&null==2 && ''=='true'
 [DEBUG] 2017-12-18 14:17:34,967 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,967 Line:313 exeCondition:Company_Add :'null'!='null'&&null==2 && ''=='true'
 [DEBUG] 2017-12-18 14:17:34,968 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,968 Line:313 exeCondition:Company_Add :'null'!='null'&&null==2 && ''=='true'
 [DEBUG] 2017-12-18 14:17:34,969 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,969 Line:313 exeCondition:Company_Add :0 <0
 [DEBUG] 2017-12-18 14:17:34,971 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,971 Line:921 自定义执行的语句显示： Company_Add :select SettleCys from tblCompany where id=? and len(SettleCys)>0
 [DEBUG] 2017-12-18 14:17:34,971 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:17:34,972 Line:988 1值：dc4b4f2e_1712181417344030006
 [DEBUG] 2017-12-18 14:17:34,975 Line:1025 query condition columnName:SettleCys----value:0
 [DEBUG] 2017-12-18 14:17:34,975 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:17:34,975 Line:313 exeCondition:Company_Add :'add'=='update'&&'0' !=null
 [DEBUG] 2017-12-18 14:17:34,976 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:34,977 Line:313 exeCondition:Company_Add : 'add'=='update'
 [DEBUG] 2017-12-18 14:17:34,977 Line:321 flag:false
 [DEBUG] 2017-12-18 14:17:36,456 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblCompany&operation=5&keyId=dc4b4f2e_1712181417344030006&parentCode=00002&f_brother=&checkTab=Y&parentTableName=&moduleType=2&winCurIndex=4&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:17:36,457 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];operation=[5,];keyId=[dc4b4f2e_1712181417344030006,];parentCode=[00002,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[2,];winCurIndex=[4,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:17:36,458 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181417344030006' and  a.tableName='tblCompany'
 [DEBUG] 2017-12-18 14:17:36,500 Line:2014 DynDBManager.getRefSql:弹出窗Department: select tblDepartment.DeptFullName from tblDepartment
      where 1=1 and tblDepartment.classCode = '00101'
 [DEBUG] 2017-12-18 14:17:36,500 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblCompany;字段=DepartmentCode;弹出窗=Department;sql= select tblDepartment.DeptFullName from tblDepartment
      where 1=1 and tblDepartment.classCode = '00101'
 [DEBUG] 2017-12-18 14:17:36,502 Line:2014 DynDBManager.getRefSql:弹出窗Employee: select tblEmployee.EmpFullName,tblDepartment.DeptFullName from tblEmployee left join tblDepartment on tblEmployee.DepartmentCode=tblDepartment.classCode
      where 1=1  and ((tblEmployee.SCompanyID='00001' and (tblEmployee.statusId!='-1' or tblEmployee.id='1') and tblEmployee.workFlowNodeName='finish') and tblEmployee.workFlowNodeName='finish' and tblDepartment.workFlowNodeName='finish')
		 and tblEmployee.id = '1' and tblEmployee.DepartmentCode = '00101'
 [DEBUG] 2017-12-18 14:17:36,502 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblCompany;字段=EmployeeID;弹出窗=Employee;sql= select tblEmployee.EmpFullName,tblDepartment.DeptFullName from tblEmployee left join tblDepartment on tblEmployee.DepartmentCode=tblDepartment.classCode
      where 1=1  and ((tblEmployee.SCompanyID='00001' and (tblEmployee.statusId!='-1' or tblEmployee.id='1') and tblEmployee.workFlowNodeName='finish') and tblEmployee.workFlowNodeName='finish' and tblDepartment.workFlowNodeName='finish')
		 and tblEmployee.id = '1' and tblEmployee.DepartmentCode = '00101'
 [DEBUG] 2017-12-18 14:17:36,507 Line:1525  select * from  tblCompanyEmployeeDet where f_ref = 'dc4b4f2e_1712181417344030006' order by detOrderNo
 [DEBUG] 2017-12-18 14:17:36,612 Line:5227 GlobalsTool.js 生成js 时间9:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:17:53,795 Line:2992 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2017-12-18 14:17:53,795 Line:3003 MobileAjax 操作人:admin;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2017-12-18 14:17:53,796 Line:243 AIOApi op=addPrepare&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:17:53,879 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"admin","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"1","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_StockCode":"","tableName":"tblS等等！
 [DEBUG] 2017-12-18 14:17:55,853 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:17:55,854 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_clientList,];pageNo=[1,];pageSize=[1000,];
 [DEBUG] 2017-12-18 14:17:55,854 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:17:55,855 Line:3434 DynDBManager.popSelect selectName=model_clientList; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComNumber f2 ,tblCompany.ComFullName f3 ,tblCompany.ComFullNamePYM f4 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from tblCompany
where isCatalog = 0 and ClientFlag = 2) a where  row_id between 1 and 1000 order by row_id 
 [DEBUG] 2017-12-18 14:17:55,867 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","ComFullNamePYM":"bs","ComNumber":"0001","CompanyCode":"00001"},{"ComFullName":"顺誉","ComFullNamePYM":"sy","ComNumber":"0002","CompanyCode":"00002"}]}}
 [DEBUG] 2017-12-18 14:18:04,872 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:04,874 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_saleGoodList,];pageNo=[1,];pageSize=[15,];GoodsFullName=[,];
 [DEBUG] 2017-12-18 14:18:04,875 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:04,876 Line:3434 DynDBManager.popSelect selectName=model_saleGoodList; sql=select *  from (select tblGoods.GoodsFullName f1 ,tblGoods.GoodsNumber f2 ,tblGoods.GoodsSpec f3 ,tblGoods.classCode f4 
,ROW_NUMBER() over( order by tblGoods.GoodsNumber) as row_id from tblGoods 
where tblGoods.isCatalog = 0 and tblGoods.statusId = 0) a where  row_id between 1 and 15 order by row_id 
 [DEBUG] 2017-12-18 14:18:04,908 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"GoodsSpec":"","GoodsFullName":"干蒸馅","GoodsCode":"00001","GoodsNumber":"bs0001"},{"GoodsSpec":"","GoodsFullName":"玉米馅","GoodsCode":"00002","GoodsNumber":"bs0002"}]}}
 [DEBUG] 2017-12-18 14:18:06,456 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:06,456 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_saleGoodList,];pageNo=[2,];pageSize=[15,];GoodsFullName=[,];
 [DEBUG] 2017-12-18 14:18:06,456 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:06,457 Line:3434 DynDBManager.popSelect selectName=model_saleGoodList; sql=select *  from (select tblGoods.GoodsFullName f1 ,tblGoods.GoodsNumber f2 ,tblGoods.GoodsSpec f3 ,tblGoods.classCode f4 
,ROW_NUMBER() over( order by tblGoods.GoodsNumber) as row_id from tblGoods 
where tblGoods.isCatalog = 0 and tblGoods.statusId = 0) a where  row_id between 16 and 30 order by row_id 
 [DEBUG] 2017-12-18 14:18:06,460 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[]}}
 [DEBUG] 2017-12-18 14:18:07,349 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:07,350 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_queryGoodByCode,];pageNo=[1,];pageSize=[10,];GoodCode=[00002,];
 [DEBUG] 2017-12-18 14:18:07,350 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:07,351 Line:3434 DynDBManager.popSelect selectName=model_queryGoodByCode; sql=select *  from (select tblGoods.GoodsNumber f1 ,tblGoods.GoodsFullName f2 ,tblGoods.GoodsSpec f3 
,ROW_NUMBER() over( order by tblGoods.GoodsNumber) as row_id from tblGoods as tblGoods
where tblGoods.isCatalog = 0 and tblGoods.statusId = 0 and tblGoods.classCode ='00002') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:18:07,355 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"GoodsSpec":"","GoodsFullName":"玉米馅","GoodsNumber":"bs0002"}]}}
 [DEBUG] 2017-12-18 14:18:07,980 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:07,982 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_saleGoodList,];pageNo=[2,];pageSize=[15,];GoodsFullName=[,];
 [DEBUG] 2017-12-18 14:18:07,983 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:07,984 Line:3434 DynDBManager.popSelect selectName=model_saleGoodList; sql=select *  from (select tblGoods.GoodsFullName f1 ,tblGoods.GoodsNumber f2 ,tblGoods.GoodsSpec f3 ,tblGoods.classCode f4 
,ROW_NUMBER() over( order by tblGoods.GoodsNumber) as row_id from tblGoods 
where tblGoods.isCatalog = 0 and tblGoods.statusId = 0) a where  row_id between 16 and 30 order by row_id 
 [DEBUG] 2017-12-18 14:18:07,988 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[]}}
 [DEBUG] 2017-12-18 14:18:22,852 Line:2992 MobileAjax 请求地址：/MobileAjax?op=add
 [DEBUG] 2017-12-18 14:18:22,852 Line:3003 MobileAjax 操作人:admin;请求数据：op=[add,];tableName=[tblSalesOrder,];saveType=[,];values=[{"selected":"2","username":"","email":"","DetGoodsCodeStr":"00002,","BillNo":"SO1712180020","BillDate":"2017-12-18","CompanyCode":"00002","ComFullName":"顺誉","EmployeeID":"signined","subAccount":"01234","DepartmentCode":"","createBy":"","TotalAmount":36,"TotalTaxAmount":36,"Remark":"","TABLENAME_tblSalesOrderDet":[{"GoodsNumber":"bs0002","GoodsFullName":"玉米馅","GoodsSpec":"","GoodsCode":"00002","Qty":3,"Price":"12","TaxPrice":0,"Amount":36,"TaxAmount":36}],"opType":"add"},];defineInfo=[,];
 [DEBUG] 2017-12-18 14:18:22,852 Line:243 AIOApi op=add&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:22,874 Line:5847  INSERT INTO  tblSalesOrder(checkPersons,id,SCompanyID,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,AccountAmount,CurAccountAmount,InVoiceType,InvoiceAmount,NoInvoiceAmount,Period,PeriodMonth,PeriodYear,NeedReturnAmt,Remark,AlrAccAmt,AutoBillMarker,BackAmount,CurAlrAccAmt,CurBackAmount,CurfreightAmount,CurNeedReturnAmt,Discount,DisAmount,Tax,DiscountAmount,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,PayAmt,CurPayAmt,NotAmortDeposit,CurNotAmortDeposit,CurTotalAmount,lastUpdateBy,lastUpdateTime,printCount,statusId,workFlowNode,workFlowNodeName,finishTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:18:22,874 Line:5853 1:;1;
 [DEBUG] 2017-12-18 14:18:22,874 Line:5853 2:dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 3:00001
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 4:SO1712180020
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 5:2017-12-18
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 6:00002
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 7:
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 8:signined
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 9:0.0
 [DEBUG] 2017-12-18 14:18:22,875 Line:5853 10:0.0
 [DEBUG] 2017-12-18 14:18:22,876 Line:5853 11:3
 [DEBUG] 2017-12-18 14:18:22,876 Line:5853 12:0.0
 [DEBUG] 2017-12-18 14:18:22,876 Line:5853 13:0.0
 [DEBUG] 2017-12-18 14:18:22,876 Line:5853 14:12
 [DEBUG] 2017-12-18 14:18:22,876 Line:5853 15:12
 [DEBUG] 2017-12-18 14:18:22,876 Line:5853 16:2017
 [DEBUG] 2017-12-18 14:18:22,877 Line:5853 17:0.0
 [DEBUG] 2017-12-18 14:18:22,877 Line:5853 18:
 [DEBUG] 2017-12-18 14:18:22,877 Line:5853 19:0.0
 [DEBUG] 2017-12-18 14:18:22,877 Line:5853 20:0
 [DEBUG] 2017-12-18 14:18:22,877 Line:5853 21:0.0
 [DEBUG] 2017-12-18 14:18:22,878 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:18:22,878 Line:5853 23:0.0
 [DEBUG] 2017-12-18 14:18:22,878 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:18:22,878 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:18:22,879 Line:5853 26:100.0
 [DEBUG] 2017-12-18 14:18:22,879 Line:5853 27:0.0
 [DEBUG] 2017-12-18 14:18:22,879 Line:5853 28:0.0
 [DEBUG] 2017-12-18 14:18:22,879 Line:5853 29:0.0
 [DEBUG] 2017-12-18 14:18:22,879 Line:5853 30:1.0
 [DEBUG] 2017-12-18 14:18:22,880 Line:5853 31:36.0
 [DEBUG] 2017-12-18 14:18:22,880 Line:5853 32:36.0
 [DEBUG] 2017-12-18 14:18:22,880 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:18:22,880 Line:5853 34:0.0
 [DEBUG] 2017-12-18 14:18:22,880 Line:5853 35:0.0
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 39:1
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 40:2017-12-18 14:18:22
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 41:0
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 42:0
 [DEBUG] 2017-12-18 14:18:22,881 Line:5853 43:0
 [DEBUG] 2017-12-18 14:18:22,882 Line:5853 44:notApprove
 [DEBUG] 2017-12-18 14:18:22,882 Line:5853 45:
 [DEBUG] 2017-12-18 14:18:22,882 Line:5853 46:1
 [DEBUG] 2017-12-18 14:18:22,882 Line:5853 47:2017-12-18 14:18:22
 [DEBUG] 2017-12-18 14:18:22,886 Line:5847  INSERT INTO  tblSalesOrderDet(f_ref,id,StockCode,GoodsCode,Qty,Price,Amount,InvoiceAmount,UnitIntQty,NoInvoiceAmount,InvoiceStatus,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,ViewTotalQty,NotPayQty,AccountingPrice,SecQty,BaseQty,OutPayQty,OutQty,InvoiceQty,NotOutQty,EmployeeID,FinishStatus,BackQty,CostAmount,CostPrice,DepartmentCode,UnitBackQty,UnitOutQty,BackAmount,TotalReceiveAmt,NeedReceiveAmt,CurNeedReceiveAmt,PlanQty) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:18:22,886 Line:5853 1:dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,887 Line:5853 2:dc4b4f2e_1712181418228860009
 [DEBUG] 2017-12-18 14:18:22,887 Line:5853 3:
 [DEBUG] 2017-12-18 14:18:22,887 Line:5853 4:00002
 [DEBUG] 2017-12-18 14:18:22,887 Line:5853 5:3.0
 [DEBUG] 2017-12-18 14:18:22,887 Line:5853 6:12.0
 [DEBUG] 2017-12-18 14:18:22,887 Line:5853 7:36.0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 8:0.0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 9:0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 10:0.0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 11:0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 12:0.0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 13:0.0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 14:0.0
 [DEBUG] 2017-12-18 14:18:22,888 Line:5853 15:100.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 16:0.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 17:0.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 18:0.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 19:0.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 20:36.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 21:0.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:18:22,889 Line:5853 23:0.0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 26:0.0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 27:0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 28:0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 29:0.0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 30:0.0
 [DEBUG] 2017-12-18 14:18:22,890 Line:5853 31:0.0
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 32:0.0
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 33:1
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 34:0
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 35:0.0
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:18:22,891 Line:5853 38:00101
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 39:0.0
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 40:0.0
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 41:0.0
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 42:0.0
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 43:0.0
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 44:0.0
 [DEBUG] 2017-12-18 14:18:22,892 Line:5853 45:0.0
 [DEBUG] 2017-12-18 14:18:22,899 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from tblSalseQuote where id=?
 [DEBUG] 2017-12-18 14:18:22,900 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,900 Line:988 1值：
 [DEBUG] 2017-12-18 14:18:22,901 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:18:22,902 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:18:22,903 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,903 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMsalesQuot where id=?
 [DEBUG] 2017-12-18 14:18:22,903 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,903 Line:988 1值：
 [DEBUG] 2017-12-18 14:18:22,909 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-18 14:18:22,909 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:18:22,911 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,912 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMSaleContract where id=?
 [DEBUG] 2017-12-18 14:18:22,912 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,913 Line:988 1值：
 [DEBUG] 2017-12-18 14:18:22,916 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 14:18:22,917 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:18:22,918 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,918 Line:313 exeCondition:tblSalesOrder_add :0!=0 && ''.length==0 
 [DEBUG] 2017-12-18 14:18:22,919 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,919 Line:313 exeCondition:tblSalesOrder_add :0<=0 && ''.length > 0 
 [DEBUG] 2017-12-18 14:18:22,921 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,921 Line:313 exeCondition:tblSalesOrder_add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-18 14:18:22,923 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,923 Line:921 自定义执行的语句显示： tblSalesOrder_add :select SendDate as SendDate from tblSalesOrderDet a where a.f_ref=? and len(a.SendDate)!=0 and a.SendDate < ? 
 [DEBUG] 2017-12-18 14:18:22,924 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,924 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,924 Line:988 2值：2017-12-18
 [DEBUG] 2017-12-18 14:18:22,926 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:18:22,926 Line:313 exeCondition:tblSalesOrder_add :'null'!='null'
 [DEBUG] 2017-12-18 14:18:22,927 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,927 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ from tblSalesOrderDet a,tblGoods b where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and b.classCode=a.GoodsCode and a.f_ref=?
 [DEBUG] 2017-12-18 14:18:22,928 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,928 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,932 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 14:18:22,932 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:18:22,933 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,933 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ,Qty from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and isnull(a.Qty,0)<=0
 [DEBUG] 2017-12-18 14:18:22,933 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,934 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,936 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:18:22,937 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:18:22,938 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,938 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsP,b.garniture from tblSalesOrderDet a,tblGoods b where a.f_ref=? and a.PresentSampleType not in ('1','2') and b.classCode=a.GoodsCode and (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0))
 [DEBUG] 2017-12-18 14:18:22,938 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,938 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,942 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:18:22,943 Line:313 exeCondition:tblSalesOrder_add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-18 14:18:22,943 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,944 Line:313 exeCondition:tblSalesOrder_add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-18 14:18:22,945 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,945 Line:921 自定义执行的语句显示： tblSalesOrder_add :select 'disCountError' as disCountError from tblSalesOrderDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-18 14:18:22,945 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,946 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,948 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:18:22,948 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:18:22,949 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,949 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2017-12-18 14:18:22,950 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,951 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsSample from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and a.PresentSampleType in ('1','2') and isnull(a.Price,0)!=0
 [DEBUG] 2017-12-18 14:18:22,951 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,951 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,954 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:18:22,955 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:18:22,956 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,956 Line:921 自定义执行的语句显示： tblSalesOrder_add :select dbo.getDigits('tblSalesOrderDet','TaxAmount',sum(tblSalesOrderDet.TaxAmount)) as SumDetAmt from tblSalesOrderDet where  f_ref=?
 [DEBUG] 2017-12-18 14:18:22,956 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,956 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:22,989 Line:1025 query condition columnName:SumDetAmt----value:36.0
 [DEBUG] 2017-12-18 14:18:22,989 Line:1043 ---上述语句时间---33
 [DEBUG] 2017-12-18 14:18:22,990 Line:313 exeCondition:tblSalesOrder_add : 36.0 != 36.0
 [DEBUG] 2017-12-18 14:18:22,991 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,991 Line:921 自定义执行的语句显示： tblSalesOrder_add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-18 14:18:22,991 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:18:22,991 Line:988 1值：
 [DEBUG] 2017-12-18 14:18:22,991 Line:988 2值：00001
 [DEBUG] 2017-12-18 14:18:22,994 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:18:22,995 Line:313 exeCondition:tblSalesOrder_add :''.length != 0 && ''.length != 0 && !( '' == 'null' || ('null' =='' && 'null'=='1'  )  ) 
 [DEBUG] 2017-12-18 14:18:22,996 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,996 Line:313 exeCondition:tblSalesOrder_add :''.length == 0 && ''.length != 0 && ( 'null'.length != 0 && 'null' !=' '  && 'null' != 'null' && 'null' != 'NULL')
 [DEBUG] 2017-12-18 14:18:22,998 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,998 Line:313 exeCondition:tblSalesOrder_add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-18 14:18:22,999 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:22,999 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2017-12-18 14:18:23,000 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:23,000 Line:313 exeCondition:tblSalesOrder_add :true
 [DEBUG] 2017-12-18 14:18:23,000 Line:321 flag:true
 [DEBUG] 2017-12-18 14:18:23,001 Line:313 exeCondition:tblSalesOrder_Add_One1 :'false'=='false'
 [DEBUG] 2017-12-18 14:18:23,002 Line:321 flag:true
 [DEBUG] 2017-12-18 14:18:23,002 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set StockCode=? where f_ref=?
 [DEBUG] 2017-12-18 14:18:23,003 Line:1157 1值：
 [DEBUG] 2017-12-18 14:18:23,003 Line:1157 2值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:23,005 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:18:23,005 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:18:23,005 Line:313 exeCondition:tblSalesOrder_Add_One1 :true
 [DEBUG] 2017-12-18 14:18:23,006 Line:321 flag:true
 [DEBUG] 2017-12-18 14:18:23,006 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set OutQty=0,NotOutQty=Qty,FinishStatus=0,NeedReceiveAmt=TaxAmount,CurNeedReceiveAmt=CurAmount,NotPayQty=Qty,NoInvoiceAmount=TaxAmount,InvoiceAmount=0,InvoiceStatus=0 where f_ref=?
 [DEBUG] 2017-12-18 14:18:23,006 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:23,009 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:18:23,009 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:18:23,009 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrder set statusId=0,NeedReturnAmt=TotalTaxAmount-AccountAmount,CurNeedReturnAmt=CurTotalAmount-CurAccountAmount,AlrAccAmt=AccountAmount,NotAmortDeposit=AccountAmount,CurAlrAccAmt=CurAccountAmount,CurNotAmortDeposit=CurAccountAmount,PayAmt=0,CurPayAmt=0,CertificateNo='',NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0 where id=?
 [DEBUG] 2017-12-18 14:18:23,009 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:23,012 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:18:23,012 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:18:23,013 Line:313 exeCondition:tblSalesOrder_Add_One1 :'true'=='true'
 [DEBUG] 2017-12-18 14:18:23,013 Line:321 flag:true
 [DEBUG] 2017-12-18 14:18:23,014 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblSalesOrder  a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			
 [DEBUG] 2017-12-18 14:18:23,014 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:23,024 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2017-12-18 14:18:23,025 Line:408 ************上述语句执行时间：11
 [DEBUG] 2017-12-18 14:18:23,025 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblSalesOrder a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			 
 [DEBUG] 2017-12-18 14:18:23,025 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:18:23,035 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2017-12-18 14:18:23,035 Line:408 ************上述语句执行时间：10
 [DEBUG] 2017-12-18 14:18:23,036 Line:313 exeCondition:tblSalesOrder_Add_One1 :'1' == '0'&& false==false
 [DEBUG] 2017-12-18 14:18:23,036 Line:321 flag:false
 [DEBUG] 2017-12-18 14:18:23,065 Line:1064  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:18:23,069 Line:108 插入OAMyWorkFlow表开始 designId=eae3edac_0906121936571710021;tableName=tblSalesOrder;id=dc4b4f2e_1712181418228710008;loginBean=1;locale=zh_CN
 [DEBUG] 2017-12-18 14:18:23,084 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"添加成功","obj":{"msg":"添加成功","keyId":"dc4b4f2e_1712181418228710008"}}
 [DEBUG] 2017-12-18 14:18:25,576 Line:2992 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2017-12-18 14:18:25,578 Line:3003 MobileAjax 操作人:admin;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[dc4b4f2e_1712181418228710008,];
 [DEBUG] 2017-12-18 14:18:25,578 Line:243 AIOApi op=detail&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:25,591 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:18:25,595 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:18:25,724 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":true,"hurryTrans":false,"hasCancel":false,"opType":"update","updateRight":true,"deleteRight":true,"values":{"PeriodYear":2017,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"CurfreightAmount":0.0,"Remark":"","CurNotAmortDeposit":0.0,"TotalTaxAmount":36.00000000,"NoInvoiceAmount":36.00000000,"CurNeedReturnAmt":0.0,"id":"dc4b4f2e_1712181418228710008","tblCompany.ComFullName":"顺誉","AlrAccAmt":0.0,"finishTi等等！
 [DEBUG] 2017-12-18 14:18:25,739 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 14:18:25,740 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 14:18:25,740 Line:243 AIOApi op=getSessEmp&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:25,740 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 14:18:25,751 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:25,752 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00002,];
 [DEBUG] 2017-12-18 14:18:25,752 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:25,753 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00002') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:18:25,756 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"顺誉","CompanyCode":"00002"}]}}
 [DEBUG] 2017-12-18 14:18:37,347 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:37,348 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:18:37,348 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:37,349 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:18:37,356 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:18:38,863 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:18:38,864 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:18:38,865 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:38,935 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:18:38,936 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:18:38,936 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:18:38,975 Line:689 通过SQL读原始数据：39
 [DEBUG] 2017-12-18 14:18:38,976 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:18:38,977 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:18:40,502 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:18:40,504 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:18:40,505 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:40,558 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:18:40,559 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:18:40,560 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:18:40,624 Line:689 通过SQL读原始数据：65
 [DEBUG] 2017-12-18 14:18:40,639 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:18:40,641 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:18:50,830 Line:2992 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2017-12-18 14:18:50,831 Line:3003 MobileAjax 操作人:admin;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[dc4b4f2e_1712181418228710008,];
 [DEBUG] 2017-12-18 14:18:50,831 Line:243 AIOApi op=detail&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:50,886 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:18:50,894 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:18:51,000 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":true,"hurryTrans":false,"hasCancel":false,"opType":"update","updateRight":true,"deleteRight":true,"values":{"PeriodYear":2017,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"CurfreightAmount":0.0,"Remark":"","CurNotAmortDeposit":0.0,"TotalTaxAmount":36.00000000,"NoInvoiceAmount":36.00000000,"CurNeedReturnAmt":0.0,"id":"dc4b4f2e_1712181418228710008","tblCompany.ComFullName":"顺誉","AlrAccAmt":0.0,"finishTi等等！
 [DEBUG] 2017-12-18 14:18:51,018 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:18:51,018 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00002,];
 [DEBUG] 2017-12-18 14:18:51,019 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:18:51,020 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00002') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:18:51,026 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"顺誉","CompanyCode":"00002"}]}}
 [DEBUG] 2017-12-18 14:19:00,783 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblSalesOrder&src=menu&winCurIndex=5
 [DEBUG] 2017-12-18 14:19:00,784 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblSalesOrder,];src=[menu,];winCurIndex=[5,];
 [DEBUG] 2017-12-18 14:19:00,785 Line:215 ---------->SET Page 5 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:00,814 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:19:00,814 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 14:19:00,815 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 14:19:00,850 Line:689 通过SQL读原始数据：36
 [DEBUG] 2017-12-18 14:19:00,852 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:19:00,918 Line:5227 GlobalsTool.js 生成js 时间29:/js/gen/defineList.vjstblSalesOrder_zh_CN.js
 [DEBUG] 2017-12-18 14:19:02,484 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:19:02,485 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[5,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[all,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:19:02,497 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:19:02,497 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 14:19:02,497 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 14:19:02,498 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:19:02,499 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:19:03,897 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblSalesOrder&keyId=dc4b4f2e_1712181418228710008&moduleType=&f_brother=&operation=5&winCurIndex=5&pageNo=&parentCode=&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:19:03,897 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblSalesOrder,];keyId=[dc4b4f2e_1712181418228710008,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[5,];pageNo=[,];parentCode=[,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:19:03,899 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:19:03,905 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:04,157 Line:5227 GlobalsTool.js 生成js 时间106:/js/gen/define.vjstblSalesOrder_zh_CN.js
 [DEBUG] 2017-12-18 14:19:09,639 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:09,640 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:19:09,640 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:09,654 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:19:09,656 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:09,656 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:09,686 Line:689 通过SQL读原始数据：30
 [DEBUG] 2017-12-18 14:19:09,686 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:19:09,688 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:19:14,004 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:14,005 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[0,];
 [DEBUG] 2017-12-18 14:19:14,005 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:14,019 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:19:14,020 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:14,020 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:14,020 Line:582 ReportDataMgt.getReportData 参数3:0
 [DEBUG] 2017-12-18 14:19:14,046 Line:689 通过SQL读原始数据：26
 [DEBUG] 2017-12-18 14:19:14,047 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:19:14,048 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","0"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","等等！
 [DEBUG] 2017-12-18 14:19:16,773 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:16,774 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[-1,];
 [DEBUG] 2017-12-18 14:19:16,774 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:16,782 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:19:16,783 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:16,783 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:16,784 Line:582 ReportDataMgt.getReportData 参数3:finish
 [DEBUG] 2017-12-18 14:19:16,814 Line:689 通过SQL读原始数据：31
 [DEBUG] 2017-12-18 14:19:16,814 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:19:16,816 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","-1"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50",等等！
 [DEBUG] 2017-12-18 14:19:19,787 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:19,787 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[1513322741341,];
 [DEBUG] 2017-12-18 14:19:19,788 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:19,801 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:19:19,802 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:19,802 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:19,802 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 14:19:19,803 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:19:19,803 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:19:19,805 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","1513322741341"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],[等等！
 [DEBUG] 2017-12-18 14:19:24,927 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 14:19:24,934 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];button=[,];frameName=[$fName,];winCurIndex=[5,];popWinName=[PopMainOpdiv,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[notApprove,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[,];varKeyIds=[dc4b4f2e_1712181418228710008,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[true,];OAWorkFlow=[true,];designId=[eae3edac_0906121936571710021,];approveStatus=[transing,];currNodeId=[0,];fromAdvice=[false,];id=[dc4b4f2e_1712181418228710008,];parentCode=[,];checkPersons=[;1;,];HasBuyOrder=[0,];SCompanyID=[00001,];BillNo=[SO1712180020,];BillDate=[2017-12-18,];CompanyCode=[00002,];tblCompany_ComFullName=[顺誉,];DepartmentCode=[,];EmployeeID=[signined,];tblEmployee_EmpFullName=[,];tblDepartment_DeptFullName=[,];StockCode=[,];tblStock_StockFullName=[,];ReceiveDate=[,];AccountAmount=[0,];Account=[,];tblAccTypeInfo_AccName=[,];Currency=[,];CurAccountAmount=[0,];InVoiceType=[3,];TradeType=[CreditSale,];InvoiceAmount=[0,];NoInvoiceAmount=[36,];InvoiceStatus=[0,];ProjectCode=[,];Period=[12,];PeriodMonth=[12,];PeriodYear=[2017,];NeedReturnAmt=[36,];RefSalseQuoteid=[,];TrackNo=[,];CheckPersont=[,];AlrAccAmt=[0,];AutoBillMarker=[0,];BackAmount=[0,];CRMIDS=[,];CertificateNo=[,];CRMpactID=[,];CurAlrAccAmt=[0,];CurBackAmount=[0,];CurfreightAmount=[0,];CurNeedReturnAmt=[0,];Discount=[100,];DisAmount=[0,];Tax=[0,];DiscountAmount=[0,];CurrencyRate=[1,];TotalAmount=[36,];TotalTaxAmount=[36,];TotalCoTaxAmt=[0,];PayAmt=[0,];CurPayAmt=[0,];NotAmortDeposit=[0,];CurNotAmortDeposit=[0,];CurTotalAmount=[0,];lastUpdateBy=[1,];lastUpdateTime=[2017-12-18 14:18:22,];printCount=[0,];statusId=[0,];workFlowNode=[0,];workFlowNodeName=[notApprove,];finishTime=[,];createBy=[1,];createTime=[2017-12-18 14:18:22,];tblSalesOrderDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblSalesOrderDet_tblGoods_GoodsNumber=[bs0002,];tblSalesOrderDet_tblGoods_GoodsFullName=[玉米馅,];tblSalesOrderDet_tblGoods_GoodsSpec=[,];tblSalesOrderDet_tblGoods_BaseUnit=[,];tblSalesOrderDet_tblStocks_lastQty=[0,];tblSalesOrderDet_ViewVirtualStock_UseQty=[0,];tblSalesOrderDet_Qty=[3,];tblSalesOrderDet_Price=[12,];tblSalesOrderDet_Amount=[36,];tblSalesOrderDet_Remark=[,];tblSalesOrderDet_StockCode=[,];tblSalesOrderDet_GoodsCode=[00002,];tblSalesOrderDet_BatchNo=[,];tblSalesOrderDet_Inch=[,];tblSalesOrderDet_Hue=[,];tblSalesOrderDet_yearNO=[,];tblSalesOrderDet_ProDate=[,];tblSalesOrderDet_Availably=[,];tblSalesOrderDet_InvoiceStatus=[0,];tblSalesOrderDet_Discount=[100,];tblSalesOrderDet_DisPrice=[0,];tblSalesOrderDet_DisBackAmt=[0,];tblSalesOrderDet_DisAmount=[0,];tblSalesOrderDet_TaxPrice=[0,];tblSalesOrderDet_TaxAmount=[36,];tblSalesOrderDet_CoTaxAmt=[0,];tblSalesOrderDet_CurPrice=[0,];tblSalesOrderDet_CurAmount=[0,];tblSalesOrderDet_ViewTotalQty=[0,];tblSalesOrderDet_SendDate=[,];tblSalesOrderDet_NotPayQty=[3,];tblSalesOrderDet_SecQty=[0,];tblSalesOrderDet_BaseQty=[0,];tblSalesOrderDet_OutPayQty=[0,];tblSalesOrderDet_EmployeeID=[1,];tblSalesOrderDet_CostAmount=[0,];tblSalesOrderDet_CostPrice=[0,];tblSalesOrderDet_DepartmentCode=[00101,];tblSalesOrderDet_PresentSampleType=[,];tblSalesOrderDet_PlanQty=[0,];tblSalesOrderDet_detsId=[dc4b4f2e_1712181418228860009,];Remark=[,];attachFiles=[,];delFiles=[,];
 [DEBUG] 2017-12-18 14:19:24,959 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:24,991 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblSalesOrder where id= ? id= dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,000 Line:313 exeCondition:tblSalesOrder_Del :1==0 && false==false
 [DEBUG] 2017-12-18 14:19:25,001 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,002 Line:313 exeCondition:tblSalesOrder_Del :true
 [DEBUG] 2017-12-18 14:19:25,002 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:25,002 Line:1081 自定义执行的语句显示： tblSalesOrder_Del:update tblEBOrder set InSign='1' where id=?
 [DEBUG] 2017-12-18 14:19:25,003 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,005 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Del,  影响行数=0
 [DEBUG] 2017-12-18 14:19:25,005 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:19:25,007 Line:5984  UPDATE tblSalesOrder SET BillNo=?,BillDate=?,CompanyCode=?,DepartmentCode=?,EmployeeID=?,StockCode=?,ReceiveDate=?,AccountAmount=?,Account=?,Currency=?,CurAccountAmount=?,InVoiceType=?,TradeType=?,InvoiceStatus=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,CertificateNo=?,CurAlrAccAmt=?,CurBackAmount=?,CurfreightAmount=?,CurNeedReturnAmt=?,Discount=?,DisAmount=?,Tax=?,DiscountAmount=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,CurTotalAmount=?,Attachment=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-12-18 14:19:25,008 Line:5993 1:SO1712180020
 [DEBUG] 2017-12-18 14:19:25,008 Line:5993 2:2017-12-18
 [DEBUG] 2017-12-18 14:19:25,008 Line:5993 3:00002
 [DEBUG] 2017-12-18 14:19:25,008 Line:5993 4:
 [DEBUG] 2017-12-18 14:19:25,008 Line:5993 5:signined
 [DEBUG] 2017-12-18 14:19:25,009 Line:5993 6:
 [DEBUG] 2017-12-18 14:19:25,009 Line:5993 7:
 [DEBUG] 2017-12-18 14:19:25,009 Line:5993 8:0.0
 [DEBUG] 2017-12-18 14:19:25,009 Line:5993 9:
 [DEBUG] 2017-12-18 14:19:25,009 Line:5993 10:
 [DEBUG] 2017-12-18 14:19:25,009 Line:5993 11:0.0
 [DEBUG] 2017-12-18 14:19:25,010 Line:5993 12:3
 [DEBUG] 2017-12-18 14:19:25,010 Line:5993 13:CreditSale
 [DEBUG] 2017-12-18 14:19:25,010 Line:5993 14:0
 [DEBUG] 2017-12-18 14:19:25,010 Line:5993 15:12
 [DEBUG] 2017-12-18 14:19:25,010 Line:5993 16:12
 [DEBUG] 2017-12-18 14:19:25,010 Line:5993 17:2017
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 18:
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 19:
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 20:0.0
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 21:0.0
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 22:0.0
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 23:0.0
 [DEBUG] 2017-12-18 14:19:25,011 Line:5993 24:100.0
 [DEBUG] 2017-12-18 14:19:25,012 Line:5993 25:0.0
 [DEBUG] 2017-12-18 14:19:25,012 Line:5993 26:0.0
 [DEBUG] 2017-12-18 14:19:25,012 Line:5993 27:0.0
 [DEBUG] 2017-12-18 14:19:25,012 Line:5993 28:1.0
 [DEBUG] 2017-12-18 14:19:25,012 Line:5993 29:36.0
 [DEBUG] 2017-12-18 14:19:25,013 Line:5993 30:36.0
 [DEBUG] 2017-12-18 14:19:25,013 Line:5993 31:0.0
 [DEBUG] 2017-12-18 14:19:25,013 Line:5993 32:0.0
 [DEBUG] 2017-12-18 14:19:25,013 Line:5993 33:
 [DEBUG] 2017-12-18 14:19:25,013 Line:5993 34:1
 [DEBUG] 2017-12-18 14:19:25,013 Line:5993 35:2017-12-18 14:19:24
 [DEBUG] 2017-12-18 14:19:25,020 Line:5894  DELETE FROM  tblSalesOrderDet  WHERE f_ref = ? 
 [DEBUG] 2017-12-18 14:19:25,023 Line:5847  INSERT INTO  tblSalesOrderDet(f_ref,id,StockCode,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Qty,Price,Amount,InvoiceAmount,UnitIntQty,NoInvoiceAmount,InvoiceStatus,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,ViewTotalQty,SendDate,NotPayQty,AccountingPrice,SecQty,BaseQty,OutPayQty,OutQty,InvoiceQty,NotOutQty,EmployeeID,FinishStatus,BackQty,CostAmount,CostPrice,DepartmentCode,UnitBackQty,UnitOutQty,PresentSampleType,BackAmount,TotalReceiveAmt,NeedReceiveAmt,CurNeedReceiveAmt,Remark,PlanQty,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:19:25,023 Line:5853 1:dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,023 Line:5853 2:dc4b4f2e_1712181419250230012
 [DEBUG] 2017-12-18 14:19:25,023 Line:5853 3:
 [DEBUG] 2017-12-18 14:19:25,023 Line:5853 4:00002
 [DEBUG] 2017-12-18 14:19:25,024 Line:5853 5:
 [DEBUG] 2017-12-18 14:19:25,024 Line:5853 6:
 [DEBUG] 2017-12-18 14:19:25,024 Line:5853 7:
 [DEBUG] 2017-12-18 14:19:25,024 Line:5853 8:
 [DEBUG] 2017-12-18 14:19:25,024 Line:5853 9:
 [DEBUG] 2017-12-18 14:19:25,024 Line:5853 10:
 [DEBUG] 2017-12-18 14:19:25,025 Line:5853 11:3.0
 [DEBUG] 2017-12-18 14:19:25,025 Line:5853 12:12.0
 [DEBUG] 2017-12-18 14:19:25,025 Line:5853 13:36.0
 [DEBUG] 2017-12-18 14:19:25,025 Line:5853 14:0.0
 [DEBUG] 2017-12-18 14:19:25,025 Line:5853 15:0
 [DEBUG] 2017-12-18 14:19:25,025 Line:5853 16:0.0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 17:0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 18:0.0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 19:0.0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 20:0.0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 21:100.0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:19:25,026 Line:5853 23:0.0
 [DEBUG] 2017-12-18 14:19:25,027 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:19:25,027 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:19:25,027 Line:5853 26:36.0
 [DEBUG] 2017-12-18 14:19:25,027 Line:5853 27:0.0
 [DEBUG] 2017-12-18 14:19:25,027 Line:5853 28:0.0
 [DEBUG] 2017-12-18 14:19:25,027 Line:5853 29:0.0
 [DEBUG] 2017-12-18 14:19:25,028 Line:5853 30:0.0
 [DEBUG] 2017-12-18 14:19:25,028 Line:5853 31:
 [DEBUG] 2017-12-18 14:19:25,028 Line:5853 32:3.0
 [DEBUG] 2017-12-18 14:19:25,028 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:19:25,028 Line:5853 34:0
 [DEBUG] 2017-12-18 14:19:25,028 Line:5853 35:0
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 39:0.0
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 40:1
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 41:0
 [DEBUG] 2017-12-18 14:19:25,029 Line:5853 42:0.0
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 43:0.0
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 44:0.0
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 45:00101
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 46:0.0
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 47:0.0
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 48:
 [DEBUG] 2017-12-18 14:19:25,030 Line:5853 49:0.0
 [DEBUG] 2017-12-18 14:19:25,031 Line:5853 50:0.0
 [DEBUG] 2017-12-18 14:19:25,031 Line:5853 51:0.0
 [DEBUG] 2017-12-18 14:19:25,031 Line:5853 52:0.0
 [DEBUG] 2017-12-18 14:19:25,031 Line:5853 53:
 [DEBUG] 2017-12-18 14:19:25,031 Line:5853 54:0.0
 [DEBUG] 2017-12-18 14:19:25,031 Line:5853 55:00001
 [DEBUG] 2017-12-18 14:19:25,035 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from tblSalseQuote where id=?
 [DEBUG] 2017-12-18 14:19:25,036 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,036 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:25,037 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:19:25,038 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:19:25,039 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,039 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMsalesQuot where id=?
 [DEBUG] 2017-12-18 14:19:25,040 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,040 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:25,043 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:25,044 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:19:25,044 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,045 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMSaleContract where id=?
 [DEBUG] 2017-12-18 14:19:25,045 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,045 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:25,048 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:25,049 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:19:25,050 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,050 Line:313 exeCondition:tblSalesOrder_add :0!=0 && ''.length==0 
 [DEBUG] 2017-12-18 14:19:25,051 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,051 Line:313 exeCondition:tblSalesOrder_add :0<=0 && ''.length > 0 
 [DEBUG] 2017-12-18 14:19:25,052 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,052 Line:313 exeCondition:tblSalesOrder_add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-18 14:19:25,053 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,053 Line:921 自定义执行的语句显示： tblSalesOrder_add :select SendDate as SendDate from tblSalesOrderDet a where a.f_ref=? and len(a.SendDate)!=0 and a.SendDate < ? 
 [DEBUG] 2017-12-18 14:19:25,054 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,054 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,054 Line:988 2值：2017-12-18
 [DEBUG] 2017-12-18 14:19:25,056 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:25,056 Line:313 exeCondition:tblSalesOrder_add :'null'!='null'
 [DEBUG] 2017-12-18 14:19:25,057 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,057 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ from tblSalesOrderDet a,tblGoods b where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and b.classCode=a.GoodsCode and a.f_ref=?
 [DEBUG] 2017-12-18 14:19:25,057 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,057 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,060 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:25,060 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:25,061 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,061 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ,Qty from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and isnull(a.Qty,0)<=0
 [DEBUG] 2017-12-18 14:19:25,062 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,062 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,065 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:25,065 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:25,066 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,067 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsP,b.garniture from tblSalesOrderDet a,tblGoods b where a.f_ref=? and a.PresentSampleType not in ('1','2') and b.classCode=a.GoodsCode and (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0))
 [DEBUG] 2017-12-18 14:19:25,067 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,067 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,071 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:25,071 Line:313 exeCondition:tblSalesOrder_add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-18 14:19:25,072 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,072 Line:313 exeCondition:tblSalesOrder_add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-18 14:19:25,073 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,073 Line:921 自定义执行的语句显示： tblSalesOrder_add :select 'disCountError' as disCountError from tblSalesOrderDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-18 14:19:25,073 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,074 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,076 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:25,076 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:25,077 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,077 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2017-12-18 14:19:25,078 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,078 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsSample from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and a.PresentSampleType in ('1','2') and isnull(a.Price,0)!=0
 [DEBUG] 2017-12-18 14:19:25,078 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,079 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,082 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:25,082 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:25,083 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,083 Line:921 自定义执行的语句显示： tblSalesOrder_add :select dbo.getDigits('tblSalesOrderDet','TaxAmount',sum(tblSalesOrderDet.TaxAmount)) as SumDetAmt from tblSalesOrderDet where  f_ref=?
 [DEBUG] 2017-12-18 14:19:25,083 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,084 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,114 Line:1025 query condition columnName:SumDetAmt----value:36.0
 [DEBUG] 2017-12-18 14:19:25,114 Line:1043 ---上述语句时间---31
 [DEBUG] 2017-12-18 14:19:25,114 Line:313 exeCondition:tblSalesOrder_add : 36.0 != 36
 [DEBUG] 2017-12-18 14:19:25,115 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,115 Line:921 自定义执行的语句显示： tblSalesOrder_add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-18 14:19:25,116 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:25,116 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:25,116 Line:988 2值：00001
 [DEBUG] 2017-12-18 14:19:25,118 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:25,119 Line:313 exeCondition:tblSalesOrder_add :''.length != 0 && ''.length != 0 && !( '' == 'null' || ('null' =='' && 'null'=='1'  )  ) 
 [DEBUG] 2017-12-18 14:19:25,120 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,120 Line:313 exeCondition:tblSalesOrder_add :''.length == 0 && ''.length != 0 && ( 'null'.length != 0 && 'null' !=' '  && 'null' != 'null' && 'null' != 'NULL')
 [DEBUG] 2017-12-18 14:19:25,121 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,121 Line:313 exeCondition:tblSalesOrder_add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-18 14:19:25,123 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,123 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2017-12-18 14:19:25,124 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,124 Line:313 exeCondition:tblSalesOrder_add :true
 [DEBUG] 2017-12-18 14:19:25,125 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:25,126 Line:313 exeCondition:tblSalesOrder_Add_One1 :'false'=='false'
 [DEBUG] 2017-12-18 14:19:25,127 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:25,127 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set StockCode=? where f_ref=?
 [DEBUG] 2017-12-18 14:19:25,128 Line:1157 1值：
 [DEBUG] 2017-12-18 14:19:25,128 Line:1157 2值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,130 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:19:25,130 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:19:25,130 Line:313 exeCondition:tblSalesOrder_Add_One1 :true
 [DEBUG] 2017-12-18 14:19:25,131 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:25,131 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set OutQty=0,NotOutQty=Qty,FinishStatus=0,NeedReceiveAmt=TaxAmount,CurNeedReceiveAmt=CurAmount,NotPayQty=Qty,NoInvoiceAmount=TaxAmount,InvoiceAmount=0,InvoiceStatus=0 where f_ref=?
 [DEBUG] 2017-12-18 14:19:25,132 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,134 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:19:25,134 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:19:25,135 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrder set statusId=0,NeedReturnAmt=TotalTaxAmount-AccountAmount,CurNeedReturnAmt=CurTotalAmount-CurAccountAmount,AlrAccAmt=AccountAmount,NotAmortDeposit=AccountAmount,CurAlrAccAmt=CurAccountAmount,CurNotAmortDeposit=CurAccountAmount,PayAmt=0,CurPayAmt=0,CertificateNo='',NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0 where id=?
 [DEBUG] 2017-12-18 14:19:25,135 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,137 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:19:25,138 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:19:25,138 Line:313 exeCondition:tblSalesOrder_Add_One1 :'true'=='true'
 [DEBUG] 2017-12-18 14:19:25,139 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:25,139 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblSalesOrder  a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			
 [DEBUG] 2017-12-18 14:19:25,139 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,149 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2017-12-18 14:19:25,149 Line:408 ************上述语句执行时间：10
 [DEBUG] 2017-12-18 14:19:25,150 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblSalesOrder a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			 
 [DEBUG] 2017-12-18 14:19:25,150 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:25,160 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2017-12-18 14:19:25,160 Line:408 ************上述语句执行时间：10
 [DEBUG] 2017-12-18 14:19:25,160 Line:313 exeCondition:tblSalesOrder_Add_One1 :'1' == '0'&& false==false
 [DEBUG] 2017-12-18 14:19:25,161 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:25,167 Line:1064  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:25,211 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do?tableName=tblSalesOrder&keyId=dc4b4f2e_1712181418228710008&fromAdvice=false&currNodeId=0&approveStatus=transing&nextNodeIds=null&department=00101&designId=eae3edac_0906121936571710021&fromPage=erp&operation=82&winCurIndex=5
 [DEBUG] 2017-12-18 14:19:25,211 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblSalesOrder,];keyId=[dc4b4f2e_1712181418228710008,];fromAdvice=[false,];currNodeId=[0,];approveStatus=[transing,];nextNodeIds=[null,];department=[00101,];designId=[eae3edac_0906121936571710021,];fromPage=[erp,];operation=[82,];winCurIndex=[5,];
 [DEBUG] 2017-12-18 14:19:25,214 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:19:25,220 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:25,274 Line:5227 GlobalsTool.js 生成js 时间8:/js/gen/fileUpload.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:19:27,228 Line:135 BaseAction.execute 请求地址：/OAMyWorkFlow.do
 [DEBUG] 2017-12-18 14:19:27,230 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[79,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[5,5,];keyId=[dc4b4f2e_1712181418228710008,];attachFiles=[,];delFiles=[,];designId=[eae3edac_0906121936571710021,];currNode=[0,];department=[00101,];fromAdvice=[false,];approveStatus=[transing,];noback=[false,];toPage=[,];fromPage=[erp,];tableName=[tblSalesOrder,];checkFlag=[,];moduleType=[,];f_brother=[,];pageNo=[,];parentCode=[,];parentTableName=[,];popedomUserIds=[,];popedomDeptIds=[,];saveDraft=[,];type=[,];deliverance=[,];nextStep=[1513322741341,];checkPerson=[1,];
 [DEBUG] 2017-12-18 14:19:27,231 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:19:27,236 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:19:27,241 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:28,247 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblSalesOrder&operation=5&keyId=dc4b4f2e_1712181418228710008&parentCode=&f_brother=&draftQuery=&approveStatus=transing&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=5
 [DEBUG] 2017-12-18 14:19:28,247 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblSalesOrder,];operation=[5,];keyId=[dc4b4f2e_1712181418228710008,];parentCode=[,];f_brother=[,];draftQuery=[,];approveStatus=[transing,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[5,];
 [DEBUG] 2017-12-18 14:19:28,248 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:19:28,255 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:31,312 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 14:19:31,313 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 14:19:31,314 Line:243 AIOApi op=getEnum&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:31,315 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 14:19:35,377 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:19:35,377 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 14:19:35,377 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:35,378 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:19:35,383 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 14:19:36,883 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:36,884 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:19:36,884 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:36,893 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:19:36,894 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:36,894 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:36,895 Line:689 通过SQL读原始数据：1
 [DEBUG] 2017-12-18 14:19:36,896 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:19:36,898 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:19:38,425 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:38,427 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 14:19:38,428 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:38,458 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 14:19:38,459 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:38,460 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:38,518 Line:689 通过SQL读原始数据：59
 [DEBUG] 2017-12-18 14:19:38,534 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 14:19:38,536 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 14:19:40,628 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:19:40,629 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[1513322741341,];
 [DEBUG] 2017-12-18 14:19:40,629 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:40,641 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:19:40,643 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:40,643 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:19:40,644 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 14:19:40,645 Line:689 通过SQL读原始数据：3
 [DEBUG] 2017-12-18 14:19:40,646 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:19:40,648 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","1513322741341"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],[等等！
 [DEBUG] 2017-12-18 14:19:48,941 Line:2992 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2017-12-18 14:19:48,942 Line:3003 MobileAjax 操作人:admin;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[dc4b4f2e_1712181418228710008,];
 [DEBUG] 2017-12-18 14:19:48,942 Line:243 AIOApi op=detail&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:49,002 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:49,011 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181418228710008' and  a.tableName='tblSalesOrder'
 [DEBUG] 2017-12-18 14:19:49,129 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":true,"hurryTrans":false,"hasCancel":false,"opType":"update","updateRight":true,"deleteRight":false,"values":{"Account":"","PeriodYear":2017,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"Attachment":"","CurfreightAmount":0.0,"Remark":"","CurNotAmortDeposit":0.0,"ReceiveDate":"","TotalTaxAmount":36.00000000,"Currency":"","NoInvoiceAmount":36.00000000,"CurNeedReturnAmt":0.0,"id":"dc4b4f2e_171218141822871等等！
 [DEBUG] 2017-12-18 14:19:49,146 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 14:19:49,146 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 14:19:49,147 Line:243 AIOApi op=getSessEmp&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:49,147 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 14:19:49,161 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 14:19:49,162 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00002,];
 [DEBUG] 2017-12-18 14:19:49,162 Line:243 AIOApi op=popup&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:49,163 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00002') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 14:19:49,167 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"顺誉","CompanyCode":"00002"}]}}
 [DEBUG] 2017-12-18 14:19:56,330 Line:2992 MobileAjax 请求地址：/MobileAjax?op=update
 [DEBUG] 2017-12-18 14:19:56,330 Line:3003 MobileAjax 操作人:admin;请求数据：op=[update,];tableName=[tblSalesOrder,];saveType=[,];values=[{"selected":"2","username":"","email":"","DetGoodsCodeStr":"00002,","NewDetGoodsCodeStr":"","clientLevel":"level","updateOrderFlag":false,"tableName":"tblSalesOrder","keyId":"dc4b4f2e_1712181418228710008","BillNo":"SO1712180020","BillDate":"2017-12-18","ComFullName":"顺誉","EmployeeID":"signined","TotalAmount":24,"TotalTaxAmount":24,"createByName":"admin","District":"","CompanyCode":"00002","Remark":"","TABLENAME_tblSalesOrderDet":[{"BatchNo":"","yearNO":"","CurNeedReceiveAmt":0,"Availably":"","Remark":"","TaxAmount":24,"tblGoods.BaseUnit":"","UnitBackQty":0,"Qty":2,"NoInvoiceAmount":36,"SecQty":0,"id":"dc4b4f2e_1712181419250230012","UnitBaseQty":0,"UnitOutQty":0,"BackQty":0,"InvoiceQty":0,"TotalReceiveAmt":0,"Price":12,"EmployeeID":"1","tblGoods.GoodsSpec":"","NeedReceiveAmt":36,"PresentSampleType":"","ViewTotalQty":0,"Discount":100,"CurPrice":0,"tblGoods.GoodsFullName":"玉米馅","UnitIntQty":0,"Inch":"","GoodsCode":"00002","InvoiceAmount":0,"SCompanyID":"00001","OutPayQty":0,"DisBackAmt":0,"UnitQty":0,"CostAmount":0,"Hue":"","SendDate":"","CostPrice":0,"OutQty":0,"NotOutQty":3,"ViewVirtualStock.UseQty":"","CurAmount":0,"NotPayQty":3,"BaseQty":0,"DepartmentCode":"00101","detOrderNo":10,"DisPrice":0,"PlanQty":0,"Amount":24,"FinishStatus":0,"ProDate":"","CoTaxAmt":0,"f_ref":"dc4b4f2e_1712181418228710008","UnitPrice":0,"DisAmount":0,"BackAmount":0,"AccountingPrice":0,"tblStocks.lastQty":"","StockCode":"","InvoiceStatus":"0","tblGoods.GoodsNumber":"bs0002","TaxPrice":0,"GoodsNumber":"bs0002","GoodsFullName":"玉米馅","GoodsSpec":"","SalesGoodsType":1}],"opType":"update","id":"dc4b4f2e_1712181418228710008"},];defineInfo=[,];
 [DEBUG] 2017-12-18 14:19:56,331 Line:243 AIOApi op=update&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:19:56,378 Line:1525  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:56,399 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblSalesOrder where id= ? id= dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,413 Line:313 exeCondition:tblSalesOrder_Del :1==0 && false==false
 [DEBUG] 2017-12-18 14:19:56,417 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,417 Line:313 exeCondition:tblSalesOrder_Del :true
 [DEBUG] 2017-12-18 14:19:56,418 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:56,418 Line:1081 自定义执行的语句显示： tblSalesOrder_Del:update tblEBOrder set InSign='1' where id=?
 [DEBUG] 2017-12-18 14:19:56,418 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,420 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Del,  影响行数=0
 [DEBUG] 2017-12-18 14:19:56,420 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-18 14:19:56,422 Line:5984  UPDATE tblSalesOrder SET BillNo=?,BillDate=?,CompanyCode=?,EmployeeID=?,AccountAmount=?,CurAccountAmount=?,InVoiceType=?,Period=?,PeriodMonth=?,PeriodYear=?,Remark=?,CurAlrAccAmt=?,CurBackAmount=?,CurfreightAmount=?,CurNeedReturnAmt=?,Discount=?,DisAmount=?,Tax=?,DiscountAmount=?,CurrencyRate=?,TotalAmount=?,TotalTaxAmount=?,TotalCoTaxAmt=?,CurTotalAmount=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2017-12-18 14:19:56,422 Line:5993 1:SO1712180020
 [DEBUG] 2017-12-18 14:19:56,423 Line:5993 2:2017-12-18
 [DEBUG] 2017-12-18 14:19:56,423 Line:5993 3:00002
 [DEBUG] 2017-12-18 14:19:56,423 Line:5993 4:signined
 [DEBUG] 2017-12-18 14:19:56,423 Line:5993 5:0.0
 [DEBUG] 2017-12-18 14:19:56,423 Line:5993 6:0.0
 [DEBUG] 2017-12-18 14:19:56,423 Line:5993 7:3
 [DEBUG] 2017-12-18 14:19:56,424 Line:5993 8:12
 [DEBUG] 2017-12-18 14:19:56,424 Line:5993 9:12
 [DEBUG] 2017-12-18 14:19:56,424 Line:5993 10:2017
 [DEBUG] 2017-12-18 14:19:56,424 Line:5993 11:
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 12:0.0
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 13:0.0
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 14:0.0
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 15:0.0
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 16:100.0
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 17:0.0
 [DEBUG] 2017-12-18 14:19:56,425 Line:5993 18:0.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 19:0.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 20:1.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 21:24.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 22:24.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 23:0.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 24:0.0
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 25:1
 [DEBUG] 2017-12-18 14:19:56,426 Line:5993 26:2017-12-18 14:19:56
 [DEBUG] 2017-12-18 14:19:56,432 Line:5894  DELETE FROM  tblSalesOrderDet  WHERE f_ref = ? 
 [DEBUG] 2017-12-18 14:19:56,435 Line:5847  INSERT INTO  tblSalesOrderDet(f_ref,id,StockCode,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Qty,Price,Amount,InvoiceAmount,UnitIntQty,NoInvoiceAmount,InvoiceStatus,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,ViewTotalQty,SendDate,NotPayQty,AccountingPrice,SecQty,BaseQty,OutPayQty,OutQty,InvoiceQty,NotOutQty,EmployeeID,FinishStatus,BackQty,CostAmount,CostPrice,DepartmentCode,UnitBackQty,UnitOutQty,PresentSampleType,BackAmount,TotalReceiveAmt,NeedReceiveAmt,CurNeedReceiveAmt,Remark,PlanQty,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:19:56,435 Line:5853 1:dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 2:dc4b4f2e_1712181419564350015
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 3:
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 4:00002
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 5:
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 6:
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 7:
 [DEBUG] 2017-12-18 14:19:56,436 Line:5853 8:
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 9:
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 10:
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 11:2.0
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 12:12.0
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 13:24.0
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 14:0.0
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 15:0
 [DEBUG] 2017-12-18 14:19:56,437 Line:5853 16:36.0
 [DEBUG] 2017-12-18 14:19:56,438 Line:5853 17:0
 [DEBUG] 2017-12-18 14:19:56,438 Line:5853 18:0.0
 [DEBUG] 2017-12-18 14:19:56,438 Line:5853 19:0.0
 [DEBUG] 2017-12-18 14:19:56,438 Line:5853 20:0.0
 [DEBUG] 2017-12-18 14:19:56,438 Line:5853 21:100.0
 [DEBUG] 2017-12-18 14:19:56,438 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:19:56,442 Line:5853 23:0.0
 [DEBUG] 2017-12-18 14:19:56,442 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:19:56,442 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:19:56,442 Line:5853 26:24.0
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 27:0.0
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 28:0.0
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 29:0.0
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 30:0.0
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 31:
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 32:3.0
 [DEBUG] 2017-12-18 14:19:56,443 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 34:0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 35:0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 39:3.0
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 40:1
 [DEBUG] 2017-12-18 14:19:56,444 Line:5853 41:0
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 42:0.0
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 43:0.0
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 44:0.0
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 45:00101
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 46:0.0
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 47:0.0
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 48:
 [DEBUG] 2017-12-18 14:19:56,445 Line:5853 49:0.0
 [DEBUG] 2017-12-18 14:19:56,446 Line:5853 50:0.0
 [DEBUG] 2017-12-18 14:19:56,446 Line:5853 51:36.0
 [DEBUG] 2017-12-18 14:19:56,446 Line:5853 52:0.0
 [DEBUG] 2017-12-18 14:19:56,446 Line:5853 53:
 [DEBUG] 2017-12-18 14:19:56,446 Line:5853 54:0.0
 [DEBUG] 2017-12-18 14:19:56,446 Line:5853 55:00001
 [DEBUG] 2017-12-18 14:19:56,451 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from tblSalseQuote where id=?
 [DEBUG] 2017-12-18 14:19:56,451 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,451 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:56,453 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:56,454 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:19:56,459 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,459 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMsalesQuot where id=?
 [DEBUG] 2017-12-18 14:19:56,460 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,460 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:56,465 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-18 14:19:56,465 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:19:56,466 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,466 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMSaleContract where id=?
 [DEBUG] 2017-12-18 14:19:56,466 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,467 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:56,470 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:56,470 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2017-12-18' < 'null'
 [DEBUG] 2017-12-18 14:19:56,472 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,472 Line:313 exeCondition:tblSalesOrder_add :0!=0 && ''.length==0 
 [DEBUG] 2017-12-18 14:19:56,473 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,474 Line:313 exeCondition:tblSalesOrder_add :0<=0 && ''.length > 0 
 [DEBUG] 2017-12-18 14:19:56,475 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,475 Line:313 exeCondition:tblSalesOrder_add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-18 14:19:56,476 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,476 Line:921 自定义执行的语句显示： tblSalesOrder_add :select SendDate as SendDate from tblSalesOrderDet a where a.f_ref=? and len(a.SendDate)!=0 and a.SendDate < ? 
 [DEBUG] 2017-12-18 14:19:56,477 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,477 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,477 Line:988 2值：2017-12-18
 [DEBUG] 2017-12-18 14:19:56,481 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 14:19:56,481 Line:313 exeCondition:tblSalesOrder_add :'null'!='null'
 [DEBUG] 2017-12-18 14:19:56,481 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,481 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ from tblSalesOrderDet a,tblGoods b where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and b.classCode=a.GoodsCode and a.f_ref=?
 [DEBUG] 2017-12-18 14:19:56,481 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,483 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,485 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:56,486 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:56,487 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,487 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ,Qty from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and isnull(a.Qty,0)<=0
 [DEBUG] 2017-12-18 14:19:56,487 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,487 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,490 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:56,491 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:56,492 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,492 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsP,b.garniture from tblSalesOrderDet a,tblGoods b where a.f_ref=? and a.PresentSampleType not in ('1','2') and b.classCode=a.GoodsCode and (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0))
 [DEBUG] 2017-12-18 14:19:56,492 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,492 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,496 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:19:56,496 Line:313 exeCondition:tblSalesOrder_add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-18 14:19:56,498 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,498 Line:313 exeCondition:tblSalesOrder_add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-18 14:19:56,499 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,499 Line:921 自定义执行的语句显示： tblSalesOrder_add :select 'disCountError' as disCountError from tblSalesOrderDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-18 14:19:56,499 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,499 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,501 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:19:56,502 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:56,503 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,503 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2017-12-18 14:19:56,504 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,504 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsSample from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and a.PresentSampleType in ('1','2') and isnull(a.Price,0)!=0
 [DEBUG] 2017-12-18 14:19:56,505 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,505 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,509 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 14:19:56,510 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2017-12-18 14:19:56,510 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,511 Line:921 自定义执行的语句显示： tblSalesOrder_add :select dbo.getDigits('tblSalesOrderDet','TaxAmount',sum(tblSalesOrderDet.TaxAmount)) as SumDetAmt from tblSalesOrderDet where  f_ref=?
 [DEBUG] 2017-12-18 14:19:56,511 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,511 Line:988 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,544 Line:1025 query condition columnName:SumDetAmt----value:24.0
 [DEBUG] 2017-12-18 14:19:56,545 Line:1043 ---上述语句时间---34
 [DEBUG] 2017-12-18 14:19:56,545 Line:313 exeCondition:tblSalesOrder_add : 24.0 != 24.0
 [DEBUG] 2017-12-18 14:19:56,546 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,546 Line:921 自定义执行的语句显示： tblSalesOrder_add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-18 14:19:56,546 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:19:56,546 Line:988 1值：
 [DEBUG] 2017-12-18 14:19:56,547 Line:988 2值：
 [DEBUG] 2017-12-18 14:19:56,549 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:19:56,549 Line:313 exeCondition:tblSalesOrder_add :''.length != 0 && ''.length != 0 && !( '' == 'null' || ('null' =='' && 'null'=='1'  )  ) 
 [DEBUG] 2017-12-18 14:19:56,550 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,551 Line:313 exeCondition:tblSalesOrder_add :''.length == 0 && ''.length != 0 && ( 'null'.length != 0 && 'null' !=' '  && 'null' != 'null' && 'null' != 'NULL')
 [DEBUG] 2017-12-18 14:19:56,551 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,552 Line:313 exeCondition:tblSalesOrder_add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-18 14:19:56,553 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,553 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2017-12-18 14:19:56,554 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,554 Line:313 exeCondition:tblSalesOrder_add :true
 [DEBUG] 2017-12-18 14:19:56,555 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:56,556 Line:313 exeCondition:tblSalesOrder_Add_One1 :'false'=='false'
 [DEBUG] 2017-12-18 14:19:56,557 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:56,558 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set StockCode=? where f_ref=?
 [DEBUG] 2017-12-18 14:19:56,558 Line:1157 1值：
 [DEBUG] 2017-12-18 14:19:56,558 Line:1157 2值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,560 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:19:56,561 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:19:56,561 Line:313 exeCondition:tblSalesOrder_Add_One1 :true
 [DEBUG] 2017-12-18 14:19:56,561 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:56,562 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set OutQty=0,NotOutQty=Qty,FinishStatus=0,NeedReceiveAmt=TaxAmount,CurNeedReceiveAmt=CurAmount,NotPayQty=Qty,NoInvoiceAmount=TaxAmount,InvoiceAmount=0,InvoiceStatus=0 where f_ref=?
 [DEBUG] 2017-12-18 14:19:56,562 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,564 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:19:56,564 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-18 14:19:56,565 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrder set statusId=0,NeedReturnAmt=TotalTaxAmount-AccountAmount,CurNeedReturnAmt=CurTotalAmount-CurAccountAmount,AlrAccAmt=AccountAmount,NotAmortDeposit=AccountAmount,CurAlrAccAmt=CurAccountAmount,CurNotAmortDeposit=CurAccountAmount,PayAmt=0,CurPayAmt=0,CertificateNo='',NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0 where id=?
 [DEBUG] 2017-12-18 14:19:56,565 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,567 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2017-12-18 14:19:56,568 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-12-18 14:19:56,568 Line:313 exeCondition:tblSalesOrder_Add_One1 :'true'=='true'
 [DEBUG] 2017-12-18 14:19:56,569 Line:321 flag:true
 [DEBUG] 2017-12-18 14:19:56,569 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblSalesOrder  a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			
 [DEBUG] 2017-12-18 14:19:56,569 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,579 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2017-12-18 14:19:56,580 Line:408 ************上述语句执行时间：11
 [DEBUG] 2017-12-18 14:19:56,580 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblSalesOrder a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			 
 [DEBUG] 2017-12-18 14:19:56,580 Line:1157 1值：dc4b4f2e_1712181418228710008
 [DEBUG] 2017-12-18 14:19:56,590 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2017-12-18 14:19:56,590 Line:408 ************上述语句执行时间：10
 [DEBUG] 2017-12-18 14:19:56,590 Line:313 exeCondition:tblSalesOrder_Add_One1 :'1' == '0'&& false==false
 [DEBUG] 2017-12-18 14:19:56,591 Line:321 flag:false
 [DEBUG] 2017-12-18 14:19:56,596 Line:1064  select * from  tblSalesOrderDet where f_ref = 'dc4b4f2e_1712181418228710008' order by detOrderNo
 [DEBUG] 2017-12-18 14:19:56,612 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"修改成功"}
 [DEBUG] 2017-12-18 14:20:00,595 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 14:20:00,596 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[1513322741341,];
 [DEBUG] 2017-12-18 14:20:00,596 Line:243 AIOApi op=report&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:20:00,641 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                  and (tblSalesOrder.workFlowNodeName = 'notApprove' and tblSalesOrder.workFlowNode = ?)  )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 14:20:00,641 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 14:20:00,642 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 14:20:00,642 Line:582 ReportDataMgt.getReportData 参数3:1513322741341
 [DEBUG] 2017-12-18 14:20:00,697 Line:689 通过SQL读原始数据：56
 [DEBUG] 2017-12-18 14:20:00,698 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:20:00,700 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName","1513322741341"]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],[等等！
 [DEBUG] 2017-12-18 14:20:07,979 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:20:07,981 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblSalesOrder,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[5,];parentTableName=[,];reportName=[销售订单,];moduleName=[销售订单,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id@ParamList:2017-12-01@Param:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];BillDate1=[2017-12-01,];BillDate2=[,];workFlowNodeName=[all,];statusId=[0,];BillNo=[,];ComFullNamen=[,];ComName=[,];DeptFullName=[,];EmpFullName=[,];sysName=[,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:20:07,994 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)                                                        and (tblSalesOrder.statusId = ?)                   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:20:07,994 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 14:20:07,995 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 14:20:08,027 Line:689 通过SQL读原始数据：33
 [DEBUG] 2017-12-18 14:20:08,027 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:20:18,730 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 14:20:18,731 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 14:20:18,731 Line:243 AIOApi op=getEnum&sessionid=53500A33E65A4A715C34B250D24FDF6D
 [DEBUG] 2017-12-18 14:20:18,732 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 14:30:02,273 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 14:30:02,274 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-18 14:30:02,275 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:30:02,331 Line:5227 GlobalsTool.js 生成js 时间12:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:30:02,349 Line:5227 GlobalsTool.js 生成js 时间18:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:30:02,502 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-18 14:30:02,502 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-18 14:30:02,518 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-18 14:30:02,518 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:30:02,519 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:30:02,530 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-18 14:30:02,530 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:30:02,530 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:30:02,536 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-18 14:30:02,536 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:30:02,537 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:30:02,541 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-18 14:30:02,542 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:30:02,542 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:30:06,750 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ViewStoreDetail&src=menu&winCurIndex=1
 [DEBUG] 2017-12-18 14:30:06,750 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ViewStoreDetail,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-18 14:30:06,750 Line:215 ---------->SET Page 1 DEFAULT URL = /ReportDataAction.do?reportNumber=ViewStoreDetail
 [DEBUG] 2017-12-18 14:30:06,837 Line:5227 GlobalsTool.js 生成js 时间16:/js/gen/report.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:30:21,354 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query&popupWin=Popdiv
 [DEBUG] 2017-12-18 14:30:21,355 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[ViewStoreDetail,ViewStoreDetail,];reportName=[?????????è??,?????????è??,];displayName=[??????????§°,??????????§°,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectGoods_v2,ReportSelectGoods_v2,];MOID=[29964431_1404241451132920009,29964431_1404241451132920009,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];
 [DEBUG] 2017-12-18 14:30:21,380 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=29964431_1404241451132920009&editable=&subSql=
 [DEBUG] 2017-12-18 14:30:21,380 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query&popupWin=Popdiv&checkTab=Y
 [DEBUG] 2017-12-18 14:30:21,380 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[29964431_1404241451132920009,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 14:30:21,381 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[ViewStoreDetail,ViewStoreDetail,];reportName=[?????????è??,?????????è??,];displayName=[??????????§°,??????????§°,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectGoods_v2,ReportSelectGoods_v2,];MOID=[29964431_1404241451132920009,29964431_1404241451132920009,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];checkTab=[Y,];
 [DEBUG] 2017-12-18 14:30:21,382 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 14:30:21,388 Line:3434 DynDBManager.popSelect selectName=ReportSelectGoods_v2; sql=select * from (select tblGoods.classCode f1 ,tblGoods.isCatalog f2 ,tblGoods.GoodsNumber f3 ,tblGoods.GoodsFullName f4 ,tblGoods.GoodsSpec f5 ,tblGoods.BaseUnit f6 ,tblGoods.GoodsFullNamePYM f7 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods
      where 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 14:30:21,457 Line:5227 GlobalsTool.js 生成js 时间20:/js/gen/popupPage.vjs_zh_CN.js
 [DEBUG] 2017-12-18 14:30:34,298 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query&popupWin=Popdiv
 [DEBUG] 2017-12-18 14:30:34,299 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[ViewStoreDetail,ViewStoreDetail,];reportName=[?????????è??,?????????è??,];displayName=[??????????§°,??????????§°,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectGoods_v2,ReportSelectGoods_v2,];MOID=[29964431_1404241451132920009,29964431_1404241451132920009,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];
 [DEBUG] 2017-12-18 14:30:34,326 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=29964431_1404241451132920009&editable=&subSql=
 [DEBUG] 2017-12-18 14:30:34,326 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[29964431_1404241451132920009,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 14:30:34,327 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 14:30:34,327 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=ViewStoreDetail&reportName=%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0&LinkType=@URL:&selectName=ReportSelectGoods_v2&MOID=29964431_1404241451132920009&MOOP=query&popupWin=Popdiv&checkTab=Y
 [DEBUG] 2017-12-18 14:30:34,330 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[ViewStoreDetail,ViewStoreDetail,];reportName=[?????????è??,?????????è??,];displayName=[??????????§°,??????????§°,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectGoods_v2,ReportSelectGoods_v2,];MOID=[29964431_1404241451132920009,29964431_1404241451132920009,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];checkTab=[Y,];
 [DEBUG] 2017-12-18 14:30:34,335 Line:3434 DynDBManager.popSelect selectName=ReportSelectGoods_v2; sql=select * from (select tblGoods.classCode f1 ,tblGoods.isCatalog f2 ,tblGoods.GoodsNumber f3 ,tblGoods.GoodsFullName f4 ,tblGoods.GoodsSpec f5 ,tblGoods.BaseUnit f6 ,tblGoods.GoodsFullNamePYM f7 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods
      where 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 14:30:36,821 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 14:30:36,822 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[1,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:0@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[00001,];hide_GoodsCode=[00001#;#0#;#bs0001#;#干蒸馅#;##;##;#,];tblGoods.GoodsNumber=[bs0001,];tblGoods.GoodsFullName=[干蒸馅,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];lastQty=[0,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 14:30:36,834 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockFullName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BatchNo,Inch,Hue,yearNO,ProDate,Availably,TotalQty,lastPrice,TotalAmt,lastQty,SecName,UnitIntQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblStocks.BatchNo as BatchNo,     tblStocks.Inch as Inch,     tblStocks.Hue as Hue,     tblStocks.yearNO as yearNO,     tblStocks.ProDate as ProDate,     tblStocks.Availably as Availably,     tblStocks.lastQty as TotalQty,     tblStocks.lastPrice as lastPrice,     tblStocks.lastAmount as TotalAmt,     tblStocks.lastQty as lastQty,     tblGoodsUnit.SecUnit as SecName,     (case when cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int)>0 then cast(cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int) AS  varchar(100))+tblGoodsUnit.SecUnit else '' end)+case when tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD=0 then '' else (case when tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD)>0 then dbo.throwZero(cast(tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD) AS varchar(100)))+tblGoods.BaseUnit else '' end) end as UnitIntQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-12-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                and (tblGoods.classCode in ('00001'))                                                  and (tblStocks.lastQty <>?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:30:36,835 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:30:36,866 Line:689 通过SQL读原始数据：31
 [DEBUG] 2017-12-18 14:30:36,866 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:32:12,863 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&src=menu&winCurIndex=2
 [DEBUG] 2017-12-18 14:32:12,864 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-18 14:32:12,864 Line:215 ---------->SET Page 2 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblGoods
 [DEBUG] 2017-12-18 14:32:12,885 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=22249636_0811041000090620009&editable=true&subSql=
 [DEBUG] 2017-12-18 14:32:12,886 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[22249636_0811041000090620009,];editable=[true,];subSql=[,];
 [DEBUG] 2017-12-18 14:32:12,886 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 14:32:12,887 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&src=menu&winCurIndex=2&checkTab=Y
 [DEBUG] 2017-12-18 14:32:12,887 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];src=[menu,];winCurIndex=[2,];checkTab=[Y,];
 [DEBUG] 2017-12-18 14:32:12,887 Line:215 ---------->SET Page 2 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblGoods
 [DEBUG] 2017-12-18 14:32:12,932 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:32:12,933 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:32:12,972 Line:689 通过SQL读原始数据：39
 [DEBUG] 2017-12-18 14:32:12,973 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:32:13,048 Line:5227 GlobalsTool.js 生成js 时间20:/js/gen/defineList.vjstblGoods_zh_CN.js
 [DEBUG] 2017-12-18 14:56:41,400 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 14:57:03,760 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 14:57:03,761 Line:146 BaseAction.execute 操作人:;请求数据：
 [DEBUG] 2017-12-18 14:57:03,761 Line:59 MenuManager.doAuth() ---------- loginBean is null
 [DEBUG] 2017-12-18 14:57:03,892 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2017-12-18 14:57:03,893 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2017-12-18 14:57:03,947 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2017-12-18 14:57:03,947 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2017-12-18 14:57:04,103 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1513580224102
 [DEBUG] 2017-12-18 14:57:04,103 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1513580224102,];
 [DEBUG] 2017-12-18 14:57:23,251 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1513580243250
 [DEBUG] 2017-12-18 14:57:23,252 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1513580243250,];
 [DEBUG] 2017-12-18 14:57:23,261 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1513580243259
 [DEBUG] 2017-12-18 14:57:23,261 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1513580243259,];
 [DEBUG] 2017-12-18 14:57:23,268 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2017-12-18 14:57:23,268 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 14:57:23,309 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 14:57:23,317 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 14:57:23,376 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 14:57:23,376 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-18 14:57:23,377 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:57:23,589 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-18 14:57:23,590 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-18 14:57:23,610 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-18 14:57:23,611 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:57:23,613 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:57:23,624 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-18 14:57:23,625 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:57:23,626 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:57:23,633 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-18 14:57:23,634 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:57:23,634 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:57:23,641 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-18 14:57:23,641 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-18 14:57:23,642 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 14:57:34,504 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&src=menu&winCurIndex=1
 [DEBUG] 2017-12-18 14:57:34,504 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-18 14:57:34,505 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblGoods
 [DEBUG] 2017-12-18 14:57:34,527 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=22249636_0811041000090620009&editable=true&subSql=
 [DEBUG] 2017-12-18 14:57:34,528 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[22249636_0811041000090620009,];editable=[true,];subSql=[,];
 [DEBUG] 2017-12-18 14:57:34,528 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&src=menu&winCurIndex=1&checkTab=Y
 [DEBUG] 2017-12-18 14:57:34,528 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 14:57:34,528 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];src=[menu,];winCurIndex=[1,];checkTab=[Y,];
 [DEBUG] 2017-12-18 14:57:34,529 Line:215 ---------->SET Page 1 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblGoods
 [DEBUG] 2017-12-18 14:57:34,567 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:57:34,567 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:57:34,584 Line:689 通过SQL读原始数据：17
 [DEBUG] 2017-12-18 14:57:34,585 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:57:35,940 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:57:35,941 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:57:36,040 Line:5227 GlobalsTool.js 生成js 时间79:/js/gen/define.vjstblGoods_zh_CN.js
 [DEBUG] 2017-12-18 14:58:09,463 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E5%8C%85%E7%B1%BB&time=1513580289459
 [DEBUG] 2017-12-18 14:58:09,464 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[????±?,];time=[1513580289459,];
 [DEBUG] 2017-12-18 14:58:09,548 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 14:58:09,549 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];classCode=[,];isCatalog=[0,];workFlowNode=[,];workFlowNodeName=[,];GoodsNumber=[bs0003,];GoodsFullName=[包类,];GoodsSpec=[,];BaseUnit=[,];BarCode=[,];GoodsFullNamePYM=[bl,];CostMethod=[b1ee7ce9_0904291155294532523,];tblGoodsAccProp_GoodsAccName=[库存商品,];CompanyCode=[,];StockCode=[,];StorehouseGrid=[,];Spec1=[,];Spec2=[,];Spec3=[,];Brand=[,];ComeFrom=[,];FacePrice=[0,];AccCode=[1405,];upperQty=[0,];lowerQty=[0,];StockTerm=[,];Validity=[,];AvailablyType=[,];HueGroup=[,];YearNoGroup=[,];PreBuyPrice=[0,];Pricefixing=[0,];ProSalesPrice=[0,];ProSalesPrice2=[0,];ProSalesPrice3=[0,];ProSalesPrice4=[0,];ProjectPrice=[0,];ProSalesPrice5=[0,];ProSalesPrice6=[0,];ProSalesPrice7=[0,];ProSalesPrice8=[0,];ProSalesPrice9=[0,];SCompanyID=[,];SecUnit=[,];printCount=[0,];OldclassCode=[,];statusId=[0,];GoodsName=[,];lastUpdateBy=[,];lastUpdateTime=[,];finishTime=[,];createBy=[,];createTime=[,];CheckPersont=[,];AccountingPrice=[0,];seqIsUsed=[1,];seqDigit=[,];garniture=[2,];tblGoodsStockLimitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblGoodsUnitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];remark=[,];
 [DEBUG] 2017-12-18 14:58:09,550 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0210271549157810034
 [DEBUG] 2017-12-18 14:58:09,572 Line:5847  INSERT INTO  tblGoods(checkPersons,classCode,id,isCatalog,workFlowNode,workFlowNodeName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,GoodsFullNamePYM,CostMethod,CompanyCode,StockCode,StorehouseGrid,Spec1,Spec2,Spec3,Brand,ComeFrom,FacePrice,AccCode,upperQty,lowerQty,StockTerm,Validity,AvailablyType,HueGroup,YearNoGroup,PreBuyPrice,Pricefixing,ProSalesPrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9,remark,SCompanyID,SecUnit,printCount,OldclassCode,statusId,GoodsName,lastUpdateBy,lastUpdateTime,finishTime,createBy,createTime,CheckPersont,AccountingPrice,seqIsUsed,Attachment,Picture,seqDigit,garniture) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:58:09,572 Line:5853 1:
 [DEBUG] 2017-12-18 14:58:09,572 Line:5853 2:00003
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 3:dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 4:0
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 5:-1
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 6:finish
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 7:bs0003
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 8:包类
 [DEBUG] 2017-12-18 14:58:09,573 Line:5853 9:
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 10:
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 11:
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 12:bl
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 13:b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 14:
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 15:
 [DEBUG] 2017-12-18 14:58:09,574 Line:5853 16:
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 17:
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 18:
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 19:
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 20:
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 21:
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:58:09,575 Line:5853 23:1405
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 26:0
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 27:0
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 28:
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 29:
 [DEBUG] 2017-12-18 14:58:09,576 Line:5853 30:
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 31:0.0
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 32:0.0
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 34:0.0
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 35:0.0
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:58:09,577 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 39:0.0
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 40:0.0
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 41:0.0
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 42:0.0
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 43:
 [DEBUG] 2017-12-18 14:58:09,578 Line:5853 44:00001
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 45:
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 46:0
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 47:
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 48:0
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 49:
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 50:1
 [DEBUG] 2017-12-18 14:58:09,579 Line:5853 51:2017-12-18 14:58:09
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 52:2017-12-18 14:58:09
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 53:1
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 54:2017-12-18 14:58:09
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 55:
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 56:0.0
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 57:1
 [DEBUG] 2017-12-18 14:58:09,580 Line:5853 58:
 [DEBUG] 2017-12-18 14:58:09,581 Line:5853 59:
 [DEBUG] 2017-12-18 14:58:09,581 Line:5853 60:0
 [DEBUG] 2017-12-18 14:58:09,581 Line:5853 61:2
 [DEBUG] 2017-12-18 14:58:09,590 Line:921 自定义执行的语句显示： tblGoods_Add :select substring(?,1,len(?)-5) as PaterCode
 [DEBUG] 2017-12-18 14:58:09,590 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,590 Line:988 1值：00003
 [DEBUG] 2017-12-18 14:58:09,590 Line:988 2值：00003
 [DEBUG] 2017-12-18 14:58:09,591 Line:1025 query condition columnName:PaterCode----value:
 [DEBUG] 2017-12-18 14:58:09,592 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,592 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) PaterC from tblGoods where ?='add' and classCode =? and (select count(0) from tblGoods where classCode like ?+'_____')=1
 [DEBUG] 2017-12-18 14:58:09,592 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,592 Line:988 1值：add
 [DEBUG] 2017-12-18 14:58:09,592 Line:988 2值：
 [DEBUG] 2017-12-18 14:58:09,592 Line:988 3值：
 [DEBUG] 2017-12-18 14:58:09,595 Line:1025 query condition columnName:PaterC----value:0
 [DEBUG] 2017-12-18 14:58:09,595 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:09,596 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 14:58:09,600 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,600 Line:313 exeCondition:tblGoods_Add :0>0 && ''=='-2222'
 [DEBUG] 2017-12-18 14:58:09,601 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,601 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 14:58:09,602 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,602 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 14:58:09,602 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,603 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as CostMethodC from tblGoods where classCode=substring(?,1,len(?)-5) and CostMethod!=?
 [DEBUG] 2017-12-18 14:58:09,603 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,603 Line:988 1值：00003
 [DEBUG] 2017-12-18 14:58:09,603 Line:988 2值：00003
 [DEBUG] 2017-12-18 14:58:09,603 Line:988 3值：b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 14:58:09,606 Line:1025 query condition columnName:CostMethodC----value:0
 [DEBUG] 2017-12-18 14:58:09,606 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:09,607 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 14:58:09,608 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,609 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT SecUnit FROM tblGoodsUnit WHERE f_ref = ? AND (UnitD<=0 OR SecUnitD<=0)
 [DEBUG] 2017-12-18 14:58:09,609 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,609 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,611 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,611 Line:313 exeCondition:tblGoods_Add :'null'!='null'&&'null'.length!=0
 [DEBUG] 2017-12-18 14:58:09,612 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,612 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitC from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 14:58:09,613 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,613 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,614 Line:1025 query condition columnName:SecUnitC----value:0
 [DEBUG] 2017-12-18 14:58:09,615 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:09,615 Line:313 exeCondition:tblGoods_Add :0>0&&''.length == 0
 [DEBUG] 2017-12-18 14:58:09,617 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,617 Line:921 自定义执行的语句显示： tblGoods_Add :select tblGoods.BaseUnit AS BaseUnit,tblGoodsUnit.SecUnit AS SecUnit from  tblGoods left join  tblGoodsUnit ON tblGoods.id=tblGoodsUnit.f_ref where f_ref=?
 [DEBUG] 2017-12-18 14:58:09,617 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,617 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,620 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,620 Line:313 exeCondition:tblGoods_Add :'null'=='null'&&'null'!='null'
 [DEBUG] 2017-12-18 14:58:09,621 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,621 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 14:58:09,621 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,621 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,622 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 14:58:09,623 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,623 Line:313 exeCondition:tblGoods_Add :0>1
 [DEBUG] 2017-12-18 14:58:09,624 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,624 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.Hue,'颜色' AS typeHue FROM (SELECT a.HueGroup,b.Hue,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.HueGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.Hue = d.languageId WHERE a.id =?) a WHERE (a.HueGroup ='' AND ISNULL(a.Hue,'')!='') OR (a.HueGroup !='' AND a.Hue !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 14:58:09,624 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,624 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,632 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-18 14:58:09,632 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.yearNO,'尺码' AS typeYearNo FROM (SELECT a.YearNoGroup,b.yearNO,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.YearNoGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.yearNO = d.languageId WHERE a.id =?) a WHERE (a.YearNoGroup ='' AND ISNULL(a.yearNO,'')!='') OR (a.YearNoGroup !='' AND a.yearNO !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 14:58:09,632 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,632 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,636 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:58:09,637 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 14:58:09,637 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,637 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 14:58:09,638 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,638 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitNum from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 14:58:09,638 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,639 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,640 Line:1025 query condition columnName:SecUnitNum----value:0
 [DEBUG] 2017-12-18 14:58:09,640 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,640 Line:921 自定义执行的语句显示： tblGoods_Add :select count(DefaultAssit) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 14:58:09,640 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,640 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,642 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 14:58:09,642 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,642 Line:313 exeCondition:tblGoods_Add :'false'=='true'
 [DEBUG] 2017-12-18 14:58:09,643 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,643 Line:313 exeCondition:tblGoods_Add :0 != 0 && 0 == 0
 [DEBUG] 2017-12-18 14:58:09,644 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,644 Line:313 exeCondition:tblGoods_Add :'add'=='add'
 [DEBUG] 2017-12-18 14:58:09,645 Line:321 flag:true
 [DEBUG] 2017-12-18 14:58:09,645 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoods set OldclassCode=classCode where id=?
 [DEBUG] 2017-12-18 14:58:09,646 Line:1157 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,648 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=1
 [DEBUG] 2017-12-18 14:58:09,648 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:58:09,648 Line:313 exeCondition:tblGoods_Add :'add'=='update'
 [DEBUG] 2017-12-18 14:58:09,649 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,649 Line:313 exeCondition:tblGoods_Add :true
 [DEBUG] 2017-12-18 14:58:09,650 Line:321 flag:true
 [DEBUG] 2017-12-18 14:58:09,650 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoodsUnit set GoodsCode=? where f_ref=?
 [DEBUG] 2017-12-18 14:58:09,650 Line:1157 1值：00003
 [DEBUG] 2017-12-18 14:58:09,650 Line:1157 2值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,652 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=0
 [DEBUG] 2017-12-18 14:58:09,653 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:58:09,653 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS RepeatStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? GROUP BY StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably  having count(0) > 1
 [DEBUG] 2017-12-18 14:58:09,653 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,653 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,655 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,656 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS InvalidStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? AND tgsl.LowerLimit > tgsl.UpperLimit AND tgsl.UpperLimit <> 0 AND tgsl.LowerLimit <> 0
 [DEBUG] 2017-12-18 14:58:09,656 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:09,656 Line:988 1值：dc4b4f2e_1712181458095700018
 [DEBUG] 2017-12-18 14:58:09,658 Line:1025 query condition columnName:InvalidStockCount----value:0
 [DEBUG] 2017-12-18 14:58:09,658 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:09,658 Line:313 exeCondition:tblGoods_Add :'null'!='0' && 'null'!='null'
 [DEBUG] 2017-12-18 14:58:09,659 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:09,659 Line:313 exeCondition:tblGoods_Add :'0'!='0' && '0'!='null'
 [DEBUG] 2017-12-18 14:58:09,660 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:11,140 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&operation=5&keyId=dc4b4f2e_1712181458095700018&parentCode=00003&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:58:11,141 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];operation=[5,];keyId=[dc4b4f2e_1712181458095700018,];parentCode=[00003,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:58:11,142 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181458095700018' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 14:58:11,177 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:11,179 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:11,183 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181458095700018' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:11,188 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181458095700018' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:13,907 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:58:13,910 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[endClass,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:58:13,925 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:58:13,926 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:58:13,937 Line:689 通过SQL读原始数据：11
 [DEBUG] 2017-12-18 14:58:13,938 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:58:14,926 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&keyId=dc4b4f2e_1712181458095700018&moduleType=&f_brother=&operation=5&winCurIndex=1&pageNo=&parentCode=00003&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:58:14,928 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];keyId=[dc4b4f2e_1712181458095700018,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];pageNo=[,];parentCode=[00003,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:58:14,929 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181458095700018' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 14:58:14,934 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:14,935 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:14,938 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181458095700018' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:14,941 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181458095700018' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:19,097 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=00003&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:58:19,097 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[00003,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:58:19,120 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:19,121 Line:6381  select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:43,993 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E5%8F%89%E7%83%A7%E5%8C%85&time=1513580323988
 [DEBUG] 2017-12-18 14:58:43,994 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[?????§???,];time=[1513580323988,];
 [DEBUG] 2017-12-18 14:58:44,120 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 14:58:44,121 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];parentCode=[00003,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];classCode=[,];isCatalog=[0,];workFlowNode=[,];workFlowNodeName=[,];GoodsNumber=[bl0001,];GoodsFullName=[叉烧包,];GoodsSpec=[,];BaseUnit=[,];BarCode=[,];GoodsFullNamePYM=[csb,];CostMethod=[b1ee7ce9_0904291155294532523,];tblGoodsAccProp_GoodsAccName=[库存商品,];CompanyCode=[,];StockCode=[,];StorehouseGrid=[,];Spec1=[,];Spec2=[,];Spec3=[,];Brand=[,];ComeFrom=[,];FacePrice=[0,];AccCode=[1405,];upperQty=[0,];lowerQty=[0,];StockTerm=[,];Validity=[,];AvailablyType=[,];HueGroup=[,];YearNoGroup=[,];PreBuyPrice=[0,];Pricefixing=[0,];ProSalesPrice=[0,];ProSalesPrice2=[0,];ProSalesPrice3=[0,];ProSalesPrice4=[0,];ProjectPrice=[0,];ProSalesPrice5=[0,];ProSalesPrice6=[0,];ProSalesPrice7=[0,];ProSalesPrice8=[0,];ProSalesPrice9=[0,];SCompanyID=[,];SecUnit=[,];printCount=[0,];OldclassCode=[,];statusId=[0,];GoodsName=[,];lastUpdateBy=[,];lastUpdateTime=[,];finishTime=[,];createBy=[,];createTime=[,];CheckPersont=[,];AccountingPrice=[0,];seqIsUsed=[1,];seqDigit=[,];garniture=[2,];tblGoodsStockLimitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblGoodsUnitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];remark=[,];
 [DEBUG] 2017-12-18 14:58:44,121 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0210271549157810034
 [DEBUG] 2017-12-18 14:58:44,145 Line:5847  INSERT INTO  tblGoods(checkPersons,classCode,id,isCatalog,workFlowNode,workFlowNodeName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,GoodsFullNamePYM,CostMethod,CompanyCode,StockCode,StorehouseGrid,Spec1,Spec2,Spec3,Brand,ComeFrom,FacePrice,AccCode,upperQty,lowerQty,StockTerm,Validity,AvailablyType,HueGroup,YearNoGroup,PreBuyPrice,Pricefixing,ProSalesPrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9,remark,SCompanyID,SecUnit,printCount,OldclassCode,statusId,GoodsName,lastUpdateBy,lastUpdateTime,finishTime,createBy,createTime,CheckPersont,AccountingPrice,seqIsUsed,Attachment,Picture,seqDigit,garniture) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:58:44,145 Line:5853 1:
 [DEBUG] 2017-12-18 14:58:44,145 Line:5853 2:0000300001
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 3:dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 4:0
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 5:-1
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 6:finish
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 7:bl0001
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 8:叉烧包
 [DEBUG] 2017-12-18 14:58:44,146 Line:5853 9:
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 10:
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 11:
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 12:csb
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 13:b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 14:
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 15:
 [DEBUG] 2017-12-18 14:58:44,147 Line:5853 16:
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 17:
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 18:
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 19:
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 20:
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 21:
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 23:1405
 [DEBUG] 2017-12-18 14:58:44,148 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 26:0
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 27:0
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 28:
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 29:
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 30:
 [DEBUG] 2017-12-18 14:58:44,149 Line:5853 31:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 32:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 34:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 35:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:58:44,150 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 39:0.0
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 40:0.0
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 41:0.0
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 42:0.0
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 43:
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 44:00001
 [DEBUG] 2017-12-18 14:58:44,151 Line:5853 45:
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 46:0
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 47:
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 48:0
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 49:
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 50:1
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 51:2017-12-18 14:58:44
 [DEBUG] 2017-12-18 14:58:44,152 Line:5853 52:2017-12-18 14:58:44
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 53:1
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 54:2017-12-18 14:58:44
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 55:
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 56:0.0
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 57:1
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 58:
 [DEBUG] 2017-12-18 14:58:44,153 Line:5853 59:
 [DEBUG] 2017-12-18 14:58:44,154 Line:5853 60:0
 [DEBUG] 2017-12-18 14:58:44,154 Line:5853 61:2
 [DEBUG] 2017-12-18 14:58:44,162 Line:921 自定义执行的语句显示： tblGoods_Add :select substring(?,1,len(?)-5) as PaterCode
 [DEBUG] 2017-12-18 14:58:44,163 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,163 Line:988 1值：0000300001
 [DEBUG] 2017-12-18 14:58:44,163 Line:988 2值：0000300001
 [DEBUG] 2017-12-18 14:58:44,164 Line:1025 query condition columnName:PaterCode----value:00003
 [DEBUG] 2017-12-18 14:58:44,164 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:44,164 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) PaterC from tblGoods where ?='add' and classCode =? and (select count(0) from tblGoods where classCode like ?+'_____')=1
 [DEBUG] 2017-12-18 14:58:44,164 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,164 Line:988 1值：add
 [DEBUG] 2017-12-18 14:58:44,165 Line:988 2值：00003
 [DEBUG] 2017-12-18 14:58:44,165 Line:988 3值：00003
 [DEBUG] 2017-12-18 14:58:44,167 Line:1025 query condition columnName:PaterC----value:1
 [DEBUG] 2017-12-18 14:58:44,168 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 14:58:44,168 Line:313 exeCondition:tblGoods_Add :1>0
 [DEBUG] 2017-12-18 14:58:44,171 Line:321 flag:true
 [DEBUG] 2017-12-18 14:58:44,172 Line:1264 自定义执行的语句显示： tblGoods_Add:{call proc_GoodsUseInfo(?,?,?,?)}
 [DEBUG] 2017-12-18 14:58:44,172 Line:1270 00003
 [DEBUG] 2017-12-18 14:58:44,172 Line:1270 zh_CN
 [DEBUG] 2017-12-18 14:58:44,516 Line:425 ************上述语句执行时间：344
 [DEBUG] 2017-12-18 14:58:44,516 Line:313 exeCondition:tblGoods_Add :1>0 && '0'=='-2222'
 [DEBUG] 2017-12-18 14:58:44,517 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,517 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 14:58:44,518 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,518 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 14:58:44,519 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,519 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as CostMethodC from tblGoods where classCode=substring(?,1,len(?)-5) and CostMethod!=?
 [DEBUG] 2017-12-18 14:58:44,519 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,519 Line:988 1值：0000300001
 [DEBUG] 2017-12-18 14:58:44,520 Line:988 2值：0000300001
 [DEBUG] 2017-12-18 14:58:44,520 Line:988 3值：b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 14:58:44,522 Line:1025 query condition columnName:CostMethodC----value:0
 [DEBUG] 2017-12-18 14:58:44,522 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:44,522 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 14:58:44,523 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,523 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT SecUnit FROM tblGoodsUnit WHERE f_ref = ? AND (UnitD<=0 OR SecUnitD<=0)
 [DEBUG] 2017-12-18 14:58:44,523 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,523 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,526 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:44,526 Line:313 exeCondition:tblGoods_Add :'null'!='null'&&'null'.length!=0
 [DEBUG] 2017-12-18 14:58:44,527 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,527 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitC from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 14:58:44,528 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,528 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,529 Line:1025 query condition columnName:SecUnitC----value:0
 [DEBUG] 2017-12-18 14:58:44,529 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:58:44,529 Line:313 exeCondition:tblGoods_Add :0>0&&''.length == 0
 [DEBUG] 2017-12-18 14:58:44,530 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,530 Line:921 自定义执行的语句显示： tblGoods_Add :select tblGoods.BaseUnit AS BaseUnit,tblGoodsUnit.SecUnit AS SecUnit from  tblGoods left join  tblGoodsUnit ON tblGoods.id=tblGoodsUnit.f_ref where f_ref=?
 [DEBUG] 2017-12-18 14:58:44,530 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,531 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,533 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:44,533 Line:313 exeCondition:tblGoods_Add :'null'=='null'&&'null'!='null'
 [DEBUG] 2017-12-18 14:58:44,542 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,542 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 14:58:44,542 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,543 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,545 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 14:58:44,545 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:44,545 Line:313 exeCondition:tblGoods_Add :0>1
 [DEBUG] 2017-12-18 14:58:44,546 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,546 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.Hue,'颜色' AS typeHue FROM (SELECT a.HueGroup,b.Hue,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.HueGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.Hue = d.languageId WHERE a.id =?) a WHERE (a.HueGroup ='' AND ISNULL(a.Hue,'')!='') OR (a.HueGroup !='' AND a.Hue !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 14:58:44,546 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,546 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,552 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-18 14:58:44,553 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.yearNO,'尺码' AS typeYearNo FROM (SELECT a.YearNoGroup,b.yearNO,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.YearNoGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.yearNO = d.languageId WHERE a.id =?) a WHERE (a.YearNoGroup ='' AND ISNULL(a.yearNO,'')!='') OR (a.YearNoGroup !='' AND a.yearNO !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 14:58:44,553 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,553 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,559 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-18 14:58:44,559 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 14:58:44,560 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,560 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 14:58:44,560 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,561 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitNum from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 14:58:44,561 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,561 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,562 Line:1025 query condition columnName:SecUnitNum----value:0
 [DEBUG] 2017-12-18 14:58:44,562 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:58:44,563 Line:921 自定义执行的语句显示： tblGoods_Add :select count(DefaultAssit) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 14:58:44,563 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,563 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,564 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 14:58:44,564 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:58:44,564 Line:313 exeCondition:tblGoods_Add :'false'=='true'
 [DEBUG] 2017-12-18 14:58:44,565 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,565 Line:313 exeCondition:tblGoods_Add :0 != 0 && 0 == 0
 [DEBUG] 2017-12-18 14:58:44,566 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,566 Line:313 exeCondition:tblGoods_Add :'add'=='add'
 [DEBUG] 2017-12-18 14:58:44,567 Line:321 flag:true
 [DEBUG] 2017-12-18 14:58:44,567 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoods set OldclassCode=classCode where id=?
 [DEBUG] 2017-12-18 14:58:44,567 Line:1157 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,569 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=1
 [DEBUG] 2017-12-18 14:58:44,569 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-18 14:58:44,570 Line:313 exeCondition:tblGoods_Add :'add'=='update'
 [DEBUG] 2017-12-18 14:58:44,570 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,570 Line:313 exeCondition:tblGoods_Add :true
 [DEBUG] 2017-12-18 14:58:44,571 Line:321 flag:true
 [DEBUG] 2017-12-18 14:58:44,571 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoodsUnit set GoodsCode=? where f_ref=?
 [DEBUG] 2017-12-18 14:58:44,571 Line:1157 1值：0000300001
 [DEBUG] 2017-12-18 14:58:44,572 Line:1157 2值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,574 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=0
 [DEBUG] 2017-12-18 14:58:44,574 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 14:58:44,574 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS RepeatStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? GROUP BY StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably  having count(0) > 1
 [DEBUG] 2017-12-18 14:58:44,574 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,574 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,577 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:44,577 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS InvalidStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? AND tgsl.LowerLimit > tgsl.UpperLimit AND tgsl.UpperLimit <> 0 AND tgsl.LowerLimit <> 0
 [DEBUG] 2017-12-18 14:58:44,577 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:58:44,577 Line:988 1值：dc4b4f2e_1712181458441440020
 [DEBUG] 2017-12-18 14:58:44,580 Line:1025 query condition columnName:InvalidStockCount----value:0
 [DEBUG] 2017-12-18 14:58:44,580 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:58:44,580 Line:313 exeCondition:tblGoods_Add :'null'!='0' && 'null'!='null'
 [DEBUG] 2017-12-18 14:58:44,581 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:44,581 Line:313 exeCondition:tblGoods_Add :'0'!='0' && '0'!='null'
 [DEBUG] 2017-12-18 14:58:44,582 Line:321 flag:false
 [DEBUG] 2017-12-18 14:58:46,058 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&operation=5&keyId=dc4b4f2e_1712181458441440020&parentCode=0000300001&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:58:46,059 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];operation=[5,];keyId=[dc4b4f2e_1712181458441440020,];parentCode=[0000300001,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:58:46,061 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181458441440020' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 14:58:46,094 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:46,096 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:46,101 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181458441440020' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:46,104 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181458441440020' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:49,561 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:58:49,563 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[endClass,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:58:49,585 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:58:49,586 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:58:49,598 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 14:58:49,599 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:58:55,577 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:58:55,578 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[endClass,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:58:55,589 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:58:55,589 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:58:55,591 Line:689 通过SQL读原始数据：2
 [DEBUG] 2017-12-18 14:58:55,592 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:58:56,566 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&keyId=dc4b4f2e_1712181458441440020&moduleType=&f_brother=&operation=5&winCurIndex=1&pageNo=&parentCode=0000300001&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:58:56,567 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];keyId=[dc4b4f2e_1712181458441440020,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];pageNo=[,];parentCode=[0000300001,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:58:56,568 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181458441440020' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 14:58:56,573 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:56,573 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:58:56,575 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181458441440020' order by detOrderNo
 [DEBUG] 2017-12-18 14:58:56,577 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181458441440020' order by detOrderNo
 [DEBUG] 2017-12-18 14:59:04,841 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:59:04,842 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.isCatalog=0                              and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[normal,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:59:04,855 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:59:04,856 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:59:04,872 Line:689 通过SQL读原始数据：16
 [DEBUG] 2017-12-18 14:59:04,872 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 14:59:12,407 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=00003&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:59:12,408 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[00003,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:59:12,412 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:59:12,413 Line:6381  select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:59:20,161 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E6%B5%81%E6%B2%99%E5%8C%85&time=1513580360156
 [DEBUG] 2017-12-18 14:59:20,161 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[?????????,];time=[1513580360156,];
 [DEBUG] 2017-12-18 14:59:20,234 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 14:59:20,234 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];parentCode=[00003,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];classCode=[,];isCatalog=[0,];workFlowNode=[,];workFlowNodeName=[,];GoodsNumber=[bl0002,];GoodsFullName=[流沙包,];GoodsSpec=[,];BaseUnit=[,];BarCode=[,];GoodsFullNamePYM=[lsb,];CostMethod=[b1ee7ce9_0904291155294532523,];tblGoodsAccProp_GoodsAccName=[库存商品,];CompanyCode=[,];StockCode=[,];StorehouseGrid=[,];Spec1=[,];Spec2=[,];Spec3=[,];Brand=[,];ComeFrom=[,];FacePrice=[0,];AccCode=[1405,];upperQty=[0,];lowerQty=[0,];StockTerm=[,];Validity=[,];AvailablyType=[,];HueGroup=[,];YearNoGroup=[,];PreBuyPrice=[0,];Pricefixing=[0,];ProSalesPrice=[0,];ProSalesPrice2=[0,];ProSalesPrice3=[0,];ProSalesPrice4=[0,];ProjectPrice=[0,];ProSalesPrice5=[0,];ProSalesPrice6=[0,];ProSalesPrice7=[0,];ProSalesPrice8=[0,];ProSalesPrice9=[0,];SCompanyID=[,];SecUnit=[,];printCount=[0,];OldclassCode=[,];statusId=[0,];GoodsName=[,];lastUpdateBy=[,];lastUpdateTime=[,];finishTime=[,];createBy=[,];createTime=[,];CheckPersont=[,];AccountingPrice=[0,];seqIsUsed=[1,];seqDigit=[,];garniture=[2,];tblGoodsStockLimitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblGoodsUnitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];remark=[,];
 [DEBUG] 2017-12-18 14:59:20,235 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0210271549157810034
 [DEBUG] 2017-12-18 14:59:20,238 Line:5847  INSERT INTO  tblGoods(checkPersons,classCode,id,isCatalog,workFlowNode,workFlowNodeName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,GoodsFullNamePYM,CostMethod,CompanyCode,StockCode,StorehouseGrid,Spec1,Spec2,Spec3,Brand,ComeFrom,FacePrice,AccCode,upperQty,lowerQty,StockTerm,Validity,AvailablyType,HueGroup,YearNoGroup,PreBuyPrice,Pricefixing,ProSalesPrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9,remark,SCompanyID,SecUnit,printCount,OldclassCode,statusId,GoodsName,lastUpdateBy,lastUpdateTime,finishTime,createBy,createTime,CheckPersont,AccountingPrice,seqIsUsed,Attachment,Picture,seqDigit,garniture) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 14:59:20,238 Line:5853 1:
 [DEBUG] 2017-12-18 14:59:20,239 Line:5853 2:0000300002
 [DEBUG] 2017-12-18 14:59:20,240 Line:5853 3:dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,240 Line:5853 4:0
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 5:-1
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 6:finish
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 7:bl0002
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 8:流沙包
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 9:
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 10:
 [DEBUG] 2017-12-18 14:59:20,241 Line:5853 11:
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 12:lsb
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 13:b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 14:
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 15:
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 16:
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 17:
 [DEBUG] 2017-12-18 14:59:20,242 Line:5853 18:
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 19:
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 20:
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 21:
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 22:0.0
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 23:1405
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 24:0.0
 [DEBUG] 2017-12-18 14:59:20,243 Line:5853 25:0.0
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 26:0
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 27:0
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 28:
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 29:
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 30:
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 31:0.0
 [DEBUG] 2017-12-18 14:59:20,244 Line:5853 32:0.0
 [DEBUG] 2017-12-18 14:59:20,245 Line:5853 33:0.0
 [DEBUG] 2017-12-18 14:59:20,245 Line:5853 34:0.0
 [DEBUG] 2017-12-18 14:59:20,245 Line:5853 35:0.0
 [DEBUG] 2017-12-18 14:59:20,245 Line:5853 36:0.0
 [DEBUG] 2017-12-18 14:59:20,245 Line:5853 37:0.0
 [DEBUG] 2017-12-18 14:59:20,245 Line:5853 38:0.0
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 39:0.0
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 40:0.0
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 41:0.0
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 42:0.0
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 43:
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 44:00001
 [DEBUG] 2017-12-18 14:59:20,246 Line:5853 45:
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 46:0
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 47:
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 48:0
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 49:
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 50:1
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 51:2017-12-18 14:59:20
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 52:2017-12-18 14:59:20
 [DEBUG] 2017-12-18 14:59:20,247 Line:5853 53:1
 [DEBUG] 2017-12-18 14:59:20,248 Line:5853 54:2017-12-18 14:59:20
 [DEBUG] 2017-12-18 14:59:20,248 Line:5853 55:
 [DEBUG] 2017-12-18 14:59:20,248 Line:5853 56:0.0
 [DEBUG] 2017-12-18 14:59:20,248 Line:5853 57:1
 [DEBUG] 2017-12-18 14:59:20,248 Line:5853 58:
 [DEBUG] 2017-12-18 14:59:20,249 Line:5853 59:
 [DEBUG] 2017-12-18 14:59:20,250 Line:5853 60:0
 [DEBUG] 2017-12-18 14:59:20,250 Line:5853 61:2
 [DEBUG] 2017-12-18 14:59:20,252 Line:921 自定义执行的语句显示： tblGoods_Add :select substring(?,1,len(?)-5) as PaterCode
 [DEBUG] 2017-12-18 14:59:20,252 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,253 Line:988 1值：0000300002
 [DEBUG] 2017-12-18 14:59:20,253 Line:988 2值：0000300002
 [DEBUG] 2017-12-18 14:59:20,254 Line:1025 query condition columnName:PaterCode----value:00003
 [DEBUG] 2017-12-18 14:59:20,254 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:59:20,255 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) PaterC from tblGoods where ?='add' and classCode =? and (select count(0) from tblGoods where classCode like ?+'_____')=1
 [DEBUG] 2017-12-18 14:59:20,256 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,256 Line:988 1值：add
 [DEBUG] 2017-12-18 14:59:20,256 Line:988 2值：00003
 [DEBUG] 2017-12-18 14:59:20,257 Line:988 3值：00003
 [DEBUG] 2017-12-18 14:59:20,257 Line:1025 query condition columnName:PaterC----value:0
 [DEBUG] 2017-12-18 14:59:20,257 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 14:59:20,258 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 14:59:20,258 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,259 Line:313 exeCondition:tblGoods_Add :0>0 && ''=='-2222'
 [DEBUG] 2017-12-18 14:59:20,260 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,260 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 14:59:20,261 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,261 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 14:59:20,262 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,262 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as CostMethodC from tblGoods where classCode=substring(?,1,len(?)-5) and CostMethod!=?
 [DEBUG] 2017-12-18 14:59:20,263 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,263 Line:988 1值：0000300002
 [DEBUG] 2017-12-18 14:59:20,263 Line:988 2值：0000300002
 [DEBUG] 2017-12-18 14:59:20,263 Line:988 3值：b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 14:59:20,264 Line:1025 query condition columnName:CostMethodC----value:0
 [DEBUG] 2017-12-18 14:59:20,265 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 14:59:20,265 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 14:59:20,267 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,268 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT SecUnit FROM tblGoodsUnit WHERE f_ref = ? AND (UnitD<=0 OR SecUnitD<=0)
 [DEBUG] 2017-12-18 14:59:20,268 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,269 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,269 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,270 Line:313 exeCondition:tblGoods_Add :'null'!='null'&&'null'.length!=0
 [DEBUG] 2017-12-18 14:59:20,271 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,272 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitC from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 14:59:20,272 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,272 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,273 Line:1025 query condition columnName:SecUnitC----value:0
 [DEBUG] 2017-12-18 14:59:20,273 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,273 Line:313 exeCondition:tblGoods_Add :0>0&&''.length == 0
 [DEBUG] 2017-12-18 14:59:20,274 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,275 Line:921 自定义执行的语句显示： tblGoods_Add :select tblGoods.BaseUnit AS BaseUnit,tblGoodsUnit.SecUnit AS SecUnit from  tblGoods left join  tblGoodsUnit ON tblGoods.id=tblGoodsUnit.f_ref where f_ref=?
 [DEBUG] 2017-12-18 14:59:20,275 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,275 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,275 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,276 Line:313 exeCondition:tblGoods_Add :'null'=='null'&&'null'!='null'
 [DEBUG] 2017-12-18 14:59:20,277 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,277 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 14:59:20,277 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,277 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,278 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 14:59:20,278 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,278 Line:313 exeCondition:tblGoods_Add :0>1
 [DEBUG] 2017-12-18 14:59:20,279 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,279 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.Hue,'颜色' AS typeHue FROM (SELECT a.HueGroup,b.Hue,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.HueGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.Hue = d.languageId WHERE a.id =?) a WHERE (a.HueGroup ='' AND ISNULL(a.Hue,'')!='') OR (a.HueGroup !='' AND a.Hue !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 14:59:20,279 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,279 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,280 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,280 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.yearNO,'尺码' AS typeYearNo FROM (SELECT a.YearNoGroup,b.yearNO,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.YearNoGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.yearNO = d.languageId WHERE a.id =?) a WHERE (a.YearNoGroup ='' AND ISNULL(a.yearNO,'')!='') OR (a.YearNoGroup !='' AND a.yearNO !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 14:59:20,280 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,281 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,281 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,281 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 14:59:20,282 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,282 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 14:59:20,283 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,283 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitNum from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 14:59:20,283 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,284 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,284 Line:1025 query condition columnName:SecUnitNum----value:0
 [DEBUG] 2017-12-18 14:59:20,284 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,285 Line:921 自定义执行的语句显示： tblGoods_Add :select count(DefaultAssit) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 14:59:20,285 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,285 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,285 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 14:59:20,286 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,286 Line:313 exeCondition:tblGoods_Add :'false'=='true'
 [DEBUG] 2017-12-18 14:59:20,287 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,287 Line:313 exeCondition:tblGoods_Add :0 != 0 && 0 == 0
 [DEBUG] 2017-12-18 14:59:20,287 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,288 Line:313 exeCondition:tblGoods_Add :'add'=='add'
 [DEBUG] 2017-12-18 14:59:20,288 Line:321 flag:true
 [DEBUG] 2017-12-18 14:59:20,288 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoods set OldclassCode=classCode where id=?
 [DEBUG] 2017-12-18 14:59:20,289 Line:1157 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,289 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=1
 [DEBUG] 2017-12-18 14:59:20,289 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-18 14:59:20,290 Line:313 exeCondition:tblGoods_Add :'add'=='update'
 [DEBUG] 2017-12-18 14:59:20,290 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,291 Line:313 exeCondition:tblGoods_Add :true
 [DEBUG] 2017-12-18 14:59:20,292 Line:321 flag:true
 [DEBUG] 2017-12-18 14:59:20,293 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoodsUnit set GoodsCode=? where f_ref=?
 [DEBUG] 2017-12-18 14:59:20,293 Line:1157 1值：0000300002
 [DEBUG] 2017-12-18 14:59:20,294 Line:1157 2值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,294 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=0
 [DEBUG] 2017-12-18 14:59:20,294 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-18 14:59:20,295 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS RepeatStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? GROUP BY StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably  having count(0) > 1
 [DEBUG] 2017-12-18 14:59:20,295 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,295 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,295 Line:1043 ---上述语句时间---0
 [DEBUG] 2017-12-18 14:59:20,296 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS InvalidStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? AND tgsl.LowerLimit > tgsl.UpperLimit AND tgsl.UpperLimit <> 0 AND tgsl.LowerLimit <> 0
 [DEBUG] 2017-12-18 14:59:20,296 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 14:59:20,296 Line:988 1值：dc4b4f2e_1712181459202370022
 [DEBUG] 2017-12-18 14:59:20,297 Line:1025 query condition columnName:InvalidStockCount----value:0
 [DEBUG] 2017-12-18 14:59:20,297 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 14:59:20,297 Line:313 exeCondition:tblGoods_Add :'null'!='0' && 'null'!='null'
 [DEBUG] 2017-12-18 14:59:20,298 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:20,298 Line:313 exeCondition:tblGoods_Add :'0'!='0' && '0'!='null'
 [DEBUG] 2017-12-18 14:59:20,300 Line:321 flag:false
 [DEBUG] 2017-12-18 14:59:21,760 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&operation=5&keyId=dc4b4f2e_1712181459202370022&parentCode=0000300002&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:59:21,761 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];operation=[5,];keyId=[dc4b4f2e_1712181459202370022,];parentCode=[0000300002,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 14:59:21,761 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181459202370022' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 14:59:21,770 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:59:21,770 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 14:59:21,772 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181459202370022' order by detOrderNo
 [DEBUG] 2017-12-18 14:59:21,773 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181459202370022' order by detOrderNo
 [DEBUG] 2017-12-18 14:59:26,156 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 14:59:26,158 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[dc4b4f2e_1712181458095700018;hasChild;00003|,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[normal,];keyId=[dc4b4f2e_1712181458095700018;hasChild;00003,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 14:59:26,174 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 14:59:26,175 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 14:59:26,177 Line:689 通过SQL读原始数据：2
 [DEBUG] 2017-12-18 14:59:26,178 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 14:59:38,216 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?&selectName=SelectGoodsClassCode&moduleType=&operation=22&popDataType=dataMove&MOID=22249636_0811041000090620009&MOOP=query&popupWin=DataMoveDiv&LinkType=@URL:&displayName=%E5%88%86%E7%BA%A7%E7%9B%AE%E5%BD%95
 [DEBUG] 2017-12-18 14:59:38,216 Line:146 BaseAction.execute 操作人:admin;请求数据：selectName=[SelectGoodsClassCode,];moduleType=[,];operation=[22,];popDataType=[dataMove,];MOID=[22249636_0811041000090620009,];MOOP=[query,];popupWin=[DataMoveDiv,];LinkType=[@URL:,];displayName=[?????§??????,];
 [DEBUG] 2017-12-18 14:59:38,243 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=22249636_0811041000090620009&editable=&subSql=
 [DEBUG] 2017-12-18 14:59:38,243 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[22249636_0811041000090620009,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 14:59:38,243 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 14:59:38,246 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?&selectName=SelectGoodsClassCode&moduleType=&operation=22&popDataType=dataMove&MOID=22249636_0811041000090620009&MOOP=query&popupWin=DataMoveDiv&LinkType=@URL:&displayName=%E5%88%86%E7%BA%A7%E7%9B%AE%E5%BD%95&checkTab=Y
 [DEBUG] 2017-12-18 14:59:38,247 Line:146 BaseAction.execute 操作人:admin;请求数据：selectName=[SelectGoodsClassCode,];moduleType=[,];operation=[22,];popDataType=[dataMove,];MOID=[22249636_0811041000090620009,];MOOP=[query,];popupWin=[DataMoveDiv,];LinkType=[@URL:,];displayName=[?????§??????,];checkTab=[Y,];
 [DEBUG] 2017-12-18 14:59:38,249 Line:3434 DynDBManager.popSelect selectName=SelectGoodsClassCode; sql=select * from (select tblGoods.classCode f1 ,tblGoods.GoodsNumber f2 ,tblGoods.GoodsFullName f3 ,tblGoods.GoodsSpec f4 ,tblGoods.GoodsFullNamePYM f5 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber desc) as row_id from tblGoods

      where 1=1 and tblGoods.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 14:59:54,783 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 14:59:54,784 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:00:00,995 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:00:00,996 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:00:39,931 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E7%B3%95%E7%B1%BB&time=1513580439926
 [DEBUG] 2017-12-18 15:00:39,932 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[????±?,];time=[1513580439926,];
 [DEBUG] 2017-12-18 15:00:40,358 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:00:40,359 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];classCode=[,];isCatalog=[0,];workFlowNode=[,];workFlowNodeName=[,];GoodsNumber=[bs0004,];GoodsFullName=[糕类,];GoodsSpec=[,];BaseUnit=[,];BarCode=[,];GoodsFullNamePYM=[gl,];CostMethod=[b1ee7ce9_0904291155294532523,];tblGoodsAccProp_GoodsAccName=[库存商品,];CompanyCode=[,];StockCode=[,];StorehouseGrid=[,];Spec1=[,];Spec2=[,];Spec3=[,];Brand=[,];ComeFrom=[,];FacePrice=[0,];AccCode=[1405,];upperQty=[0,];lowerQty=[0,];StockTerm=[,];Validity=[,];AvailablyType=[,];HueGroup=[,];YearNoGroup=[,];PreBuyPrice=[0,];Pricefixing=[0,];ProSalesPrice=[0,];ProSalesPrice2=[0,];ProSalesPrice3=[0,];ProSalesPrice4=[0,];ProjectPrice=[0,];ProSalesPrice5=[0,];ProSalesPrice6=[0,];ProSalesPrice7=[0,];ProSalesPrice8=[0,];ProSalesPrice9=[0,];SCompanyID=[,];SecUnit=[,];printCount=[0,];OldclassCode=[,];statusId=[0,];GoodsName=[,];lastUpdateBy=[,];lastUpdateTime=[,];finishTime=[,];createBy=[,];createTime=[,];CheckPersont=[,];AccountingPrice=[0,];seqIsUsed=[1,];seqDigit=[,];garniture=[2,];tblGoodsStockLimitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblGoodsUnitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];remark=[,];
 [DEBUG] 2017-12-18 15:00:40,360 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0210271549157810034
 [DEBUG] 2017-12-18 15:00:40,377 Line:5847  INSERT INTO  tblGoods(checkPersons,classCode,id,isCatalog,workFlowNode,workFlowNodeName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,GoodsFullNamePYM,CostMethod,CompanyCode,StockCode,StorehouseGrid,Spec1,Spec2,Spec3,Brand,ComeFrom,FacePrice,AccCode,upperQty,lowerQty,StockTerm,Validity,AvailablyType,HueGroup,YearNoGroup,PreBuyPrice,Pricefixing,ProSalesPrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9,remark,SCompanyID,SecUnit,printCount,OldclassCode,statusId,GoodsName,lastUpdateBy,lastUpdateTime,finishTime,createBy,createTime,CheckPersont,AccountingPrice,seqIsUsed,Attachment,Picture,seqDigit,garniture) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:00:40,378 Line:5853 1:
 [DEBUG] 2017-12-18 15:00:40,378 Line:5853 2:00004
 [DEBUG] 2017-12-18 15:00:40,378 Line:5853 3:dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,378 Line:5853 4:0
 [DEBUG] 2017-12-18 15:00:40,379 Line:5853 5:-1
 [DEBUG] 2017-12-18 15:00:40,379 Line:5853 6:finish
 [DEBUG] 2017-12-18 15:00:40,379 Line:5853 7:bs0004
 [DEBUG] 2017-12-18 15:00:40,379 Line:5853 8:糕类
 [DEBUG] 2017-12-18 15:00:40,380 Line:5853 9:
 [DEBUG] 2017-12-18 15:00:40,380 Line:5853 10:
 [DEBUG] 2017-12-18 15:00:40,380 Line:5853 11:
 [DEBUG] 2017-12-18 15:00:40,380 Line:5853 12:gl
 [DEBUG] 2017-12-18 15:00:40,380 Line:5853 13:b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 15:00:40,380 Line:5853 14:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 15:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 16:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 17:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 18:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 19:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 20:
 [DEBUG] 2017-12-18 15:00:40,381 Line:5853 21:
 [DEBUG] 2017-12-18 15:00:40,382 Line:5853 22:0.0
 [DEBUG] 2017-12-18 15:00:40,382 Line:5853 23:1405
 [DEBUG] 2017-12-18 15:00:40,382 Line:5853 24:0.0
 [DEBUG] 2017-12-18 15:00:40,382 Line:5853 25:0.0
 [DEBUG] 2017-12-18 15:00:40,382 Line:5853 26:0
 [DEBUG] 2017-12-18 15:00:40,382 Line:5853 27:0
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 28:
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 29:
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 30:
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 31:0.0
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 32:0.0
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:00:40,383 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 36:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 37:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 38:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 40:0.0
 [DEBUG] 2017-12-18 15:00:40,384 Line:5853 41:0.0
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 42:0.0
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 43:
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 44:00001
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 45:
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 46:0
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 47:
 [DEBUG] 2017-12-18 15:00:40,385 Line:5853 48:0
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 49:
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 50:1
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 51:2017-12-18 15:00:40
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 52:2017-12-18 15:00:40
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 53:1
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 54:2017-12-18 15:00:40
 [DEBUG] 2017-12-18 15:00:40,386 Line:5853 55:
 [DEBUG] 2017-12-18 15:00:40,391 Line:5853 56:0.0
 [DEBUG] 2017-12-18 15:00:40,391 Line:5853 57:1
 [DEBUG] 2017-12-18 15:00:40,391 Line:5853 58:
 [DEBUG] 2017-12-18 15:00:40,391 Line:5853 59:
 [DEBUG] 2017-12-18 15:00:40,392 Line:5853 60:0
 [DEBUG] 2017-12-18 15:00:40,392 Line:5853 61:2
 [DEBUG] 2017-12-18 15:00:40,397 Line:921 自定义执行的语句显示： tblGoods_Add :select substring(?,1,len(?)-5) as PaterCode
 [DEBUG] 2017-12-18 15:00:40,397 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,398 Line:988 1值：00004
 [DEBUG] 2017-12-18 15:00:40,398 Line:988 2值：00004
 [DEBUG] 2017-12-18 15:00:40,398 Line:1025 query condition columnName:PaterCode----value:
 [DEBUG] 2017-12-18 15:00:40,399 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,399 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) PaterC from tblGoods where ?='add' and classCode =? and (select count(0) from tblGoods where classCode like ?+'_____')=1
 [DEBUG] 2017-12-18 15:00:40,399 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,399 Line:988 1值：add
 [DEBUG] 2017-12-18 15:00:40,399 Line:988 2值：
 [DEBUG] 2017-12-18 15:00:40,399 Line:988 3值：
 [DEBUG] 2017-12-18 15:00:40,402 Line:1025 query condition columnName:PaterC----value:0
 [DEBUG] 2017-12-18 15:00:40,403 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:00:40,403 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 15:00:40,406 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,407 Line:313 exeCondition:tblGoods_Add :0>0 && ''=='-2222'
 [DEBUG] 2017-12-18 15:00:40,408 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,408 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 15:00:40,408 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,409 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 15:00:40,409 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,409 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as CostMethodC from tblGoods where classCode=substring(?,1,len(?)-5) and CostMethod!=?
 [DEBUG] 2017-12-18 15:00:40,410 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,410 Line:988 1值：00004
 [DEBUG] 2017-12-18 15:00:40,410 Line:988 2值：00004
 [DEBUG] 2017-12-18 15:00:40,410 Line:988 3值：b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 15:00:40,412 Line:1025 query condition columnName:CostMethodC----value:0
 [DEBUG] 2017-12-18 15:00:40,412 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:00:40,413 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 15:00:40,413 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,414 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT SecUnit FROM tblGoodsUnit WHERE f_ref = ? AND (UnitD<=0 OR SecUnitD<=0)
 [DEBUG] 2017-12-18 15:00:40,414 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,414 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,416 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,416 Line:313 exeCondition:tblGoods_Add :'null'!='null'&&'null'.length!=0
 [DEBUG] 2017-12-18 15:00:40,418 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,418 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitC from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 15:00:40,418 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,418 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,420 Line:1025 query condition columnName:SecUnitC----value:0
 [DEBUG] 2017-12-18 15:00:40,420 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,420 Line:313 exeCondition:tblGoods_Add :0>0&&''.length == 0
 [DEBUG] 2017-12-18 15:00:40,421 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,421 Line:921 自定义执行的语句显示： tblGoods_Add :select tblGoods.BaseUnit AS BaseUnit,tblGoodsUnit.SecUnit AS SecUnit from  tblGoods left join  tblGoodsUnit ON tblGoods.id=tblGoodsUnit.f_ref where f_ref=?
 [DEBUG] 2017-12-18 15:00:40,421 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,421 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,424 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:00:40,424 Line:313 exeCondition:tblGoods_Add :'null'=='null'&&'null'!='null'
 [DEBUG] 2017-12-18 15:00:40,425 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,425 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 15:00:40,425 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,425 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,426 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 15:00:40,427 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,427 Line:313 exeCondition:tblGoods_Add :0>1
 [DEBUG] 2017-12-18 15:00:40,428 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,428 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.Hue,'颜色' AS typeHue FROM (SELECT a.HueGroup,b.Hue,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.HueGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.Hue = d.languageId WHERE a.id =?) a WHERE (a.HueGroup ='' AND ISNULL(a.Hue,'')!='') OR (a.HueGroup !='' AND a.Hue !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 15:00:40,428 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,429 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,436 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-18 15:00:40,437 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.yearNO,'尺码' AS typeYearNo FROM (SELECT a.YearNoGroup,b.yearNO,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.YearNoGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.yearNO = d.languageId WHERE a.id =?) a WHERE (a.YearNoGroup ='' AND ISNULL(a.yearNO,'')!='') OR (a.YearNoGroup !='' AND a.yearNO !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 15:00:40,437 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,437 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,441 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:00:40,441 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 15:00:40,442 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,442 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 15:00:40,443 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,443 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitNum from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 15:00:40,443 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,444 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,445 Line:1025 query condition columnName:SecUnitNum----value:0
 [DEBUG] 2017-12-18 15:00:40,445 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,445 Line:921 自定义执行的语句显示： tblGoods_Add :select count(DefaultAssit) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 15:00:40,446 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,446 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,447 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 15:00:40,447 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,448 Line:313 exeCondition:tblGoods_Add :'false'=='true'
 [DEBUG] 2017-12-18 15:00:40,448 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,449 Line:313 exeCondition:tblGoods_Add :0 != 0 && 0 == 0
 [DEBUG] 2017-12-18 15:00:40,449 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,450 Line:313 exeCondition:tblGoods_Add :'add'=='add'
 [DEBUG] 2017-12-18 15:00:40,450 Line:321 flag:true
 [DEBUG] 2017-12-18 15:00:40,450 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoods set OldclassCode=classCode where id=?
 [DEBUG] 2017-12-18 15:00:40,450 Line:1157 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,453 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=1
 [DEBUG] 2017-12-18 15:00:40,453 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 15:00:40,453 Line:313 exeCondition:tblGoods_Add :'add'=='update'
 [DEBUG] 2017-12-18 15:00:40,454 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,454 Line:313 exeCondition:tblGoods_Add :true
 [DEBUG] 2017-12-18 15:00:40,455 Line:321 flag:true
 [DEBUG] 2017-12-18 15:00:40,455 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoodsUnit set GoodsCode=? where f_ref=?
 [DEBUG] 2017-12-18 15:00:40,455 Line:1157 1值：00004
 [DEBUG] 2017-12-18 15:00:40,455 Line:1157 2值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,458 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=0
 [DEBUG] 2017-12-18 15:00:40,458 Line:408 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 15:00:40,458 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS RepeatStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? GROUP BY StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably  having count(0) > 1
 [DEBUG] 2017-12-18 15:00:40,458 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,458 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,461 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:00:40,461 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS InvalidStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? AND tgsl.LowerLimit > tgsl.UpperLimit AND tgsl.UpperLimit <> 0 AND tgsl.LowerLimit <> 0
 [DEBUG] 2017-12-18 15:00:40,461 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:40,462 Line:988 1值：dc4b4f2e_1712181500403760024
 [DEBUG] 2017-12-18 15:00:40,463 Line:1025 query condition columnName:InvalidStockCount----value:0
 [DEBUG] 2017-12-18 15:00:40,463 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:40,463 Line:313 exeCondition:tblGoods_Add :'null'!='0' && 'null'!='null'
 [DEBUG] 2017-12-18 15:00:40,464 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:40,464 Line:313 exeCondition:tblGoods_Add :'0'!='0' && '0'!='null'
 [DEBUG] 2017-12-18 15:00:40,465 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:41,943 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&operation=5&keyId=dc4b4f2e_1712181500403760024&parentCode=00004&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:00:41,944 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];operation=[5,];keyId=[dc4b4f2e_1712181500403760024,];parentCode=[00004,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:00:41,945 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181500403760024' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 15:00:41,984 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:00:41,986 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:00:41,994 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181500403760024' order by detOrderNo
 [DEBUG] 2017-12-18 15:00:42,001 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181500403760024' order by detOrderNo
 [DEBUG] 2017-12-18 15:00:45,553 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 15:00:45,555 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[数据搬移,];varKeyIds=[cdf9629a_1712151342258280005|,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[normal,];keyId=[cdf9629a_1712151342258280005,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 15:00:45,584 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:00:45,585 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 15:00:45,598 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 15:00:45,598 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:00:47,943 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=00004&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:00:47,943 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[00004,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:00:47,952 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:00:47,952 Line:6381  select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:00:59,461 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E8%8A%9D%E9%BA%BB%E7%B3%95&time=1513580459460
 [DEBUG] 2017-12-18 15:00:59,461 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[è??é?????,];time=[1513580459460,];
 [DEBUG] 2017-12-18 15:00:59,557 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:00:59,559 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];parentCode=[00004,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];classCode=[,];isCatalog=[0,];workFlowNode=[,];workFlowNodeName=[,];GoodsNumber=[gl0001,];GoodsFullName=[芝麻糕,];GoodsSpec=[,];BaseUnit=[,];BarCode=[,];GoodsFullNamePYM=[zmg,];CostMethod=[b1ee7ce9_0904291155294532523,];tblGoodsAccProp_GoodsAccName=[库存商品,];CompanyCode=[,];StockCode=[,];StorehouseGrid=[,];Spec1=[,];Spec2=[,];Spec3=[,];Brand=[,];ComeFrom=[,];FacePrice=[0,];AccCode=[1405,];upperQty=[0,];lowerQty=[0,];StockTerm=[,];Validity=[,];AvailablyType=[,];HueGroup=[,];YearNoGroup=[,];PreBuyPrice=[0,];Pricefixing=[0,];ProSalesPrice=[0,];ProSalesPrice2=[0,];ProSalesPrice3=[0,];ProSalesPrice4=[0,];ProjectPrice=[0,];ProSalesPrice5=[0,];ProSalesPrice6=[0,];ProSalesPrice7=[0,];ProSalesPrice8=[0,];ProSalesPrice9=[0,];SCompanyID=[,];SecUnit=[,];printCount=[0,];OldclassCode=[,];statusId=[0,];GoodsName=[,];lastUpdateBy=[,];lastUpdateTime=[,];finishTime=[,];createBy=[,];createTime=[,];CheckPersont=[,];AccountingPrice=[0,];seqIsUsed=[1,];seqDigit=[,];garniture=[2,];tblGoodsStockLimitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblGoodsUnitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];remark=[,];
 [DEBUG] 2017-12-18 15:00:59,561 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0210271549157810034
 [DEBUG] 2017-12-18 15:00:59,568 Line:5847  INSERT INTO  tblGoods(checkPersons,classCode,id,isCatalog,workFlowNode,workFlowNodeName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,GoodsFullNamePYM,CostMethod,CompanyCode,StockCode,StorehouseGrid,Spec1,Spec2,Spec3,Brand,ComeFrom,FacePrice,AccCode,upperQty,lowerQty,StockTerm,Validity,AvailablyType,HueGroup,YearNoGroup,PreBuyPrice,Pricefixing,ProSalesPrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9,remark,SCompanyID,SecUnit,printCount,OldclassCode,statusId,GoodsName,lastUpdateBy,lastUpdateTime,finishTime,createBy,createTime,CheckPersont,AccountingPrice,seqIsUsed,Attachment,Picture,seqDigit,garniture) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:00:59,569 Line:5853 1:
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 2:0000400001
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 3:dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 4:0
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 5:-1
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 6:finish
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 7:gl0001
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 8:芝麻糕
 [DEBUG] 2017-12-18 15:00:59,570 Line:5853 9:
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 10:
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 11:
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 12:zmg
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 13:b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 14:
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 15:
 [DEBUG] 2017-12-18 15:00:59,571 Line:5853 16:
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 17:
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 18:
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 19:
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 20:
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 21:
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 22:0.0
 [DEBUG] 2017-12-18 15:00:59,572 Line:5853 23:1405
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 24:0.0
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 25:0.0
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 26:0
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 27:0
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 28:
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 29:
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 30:
 [DEBUG] 2017-12-18 15:00:59,573 Line:5853 31:0.0
 [DEBUG] 2017-12-18 15:00:59,574 Line:5853 32:0.0
 [DEBUG] 2017-12-18 15:00:59,574 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:00:59,574 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:00:59,574 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:00:59,575 Line:5853 36:0.0
 [DEBUG] 2017-12-18 15:00:59,575 Line:5853 37:0.0
 [DEBUG] 2017-12-18 15:00:59,575 Line:5853 38:0.0
 [DEBUG] 2017-12-18 15:00:59,575 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 40:0.0
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 41:0.0
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 42:0.0
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 43:
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 44:00001
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 45:
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 46:0
 [DEBUG] 2017-12-18 15:00:59,576 Line:5853 47:
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 48:0
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 49:
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 50:1
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 51:2017-12-18 15:00:59
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 52:2017-12-18 15:00:59
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 53:1
 [DEBUG] 2017-12-18 15:00:59,577 Line:5853 54:2017-12-18 15:00:59
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 55:
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 56:0.0
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 57:1
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 58:
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 59:
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 60:0
 [DEBUG] 2017-12-18 15:00:59,578 Line:5853 61:2
 [DEBUG] 2017-12-18 15:00:59,584 Line:921 自定义执行的语句显示： tblGoods_Add :select substring(?,1,len(?)-5) as PaterCode
 [DEBUG] 2017-12-18 15:00:59,584 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,585 Line:988 1值：0000400001
 [DEBUG] 2017-12-18 15:00:59,585 Line:988 2值：0000400001
 [DEBUG] 2017-12-18 15:00:59,585 Line:1025 query condition columnName:PaterCode----value:00004
 [DEBUG] 2017-12-18 15:00:59,586 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:59,586 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) PaterC from tblGoods where ?='add' and classCode =? and (select count(0) from tblGoods where classCode like ?+'_____')=1
 [DEBUG] 2017-12-18 15:00:59,586 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,586 Line:988 1值：add
 [DEBUG] 2017-12-18 15:00:59,586 Line:988 2值：00004
 [DEBUG] 2017-12-18 15:00:59,586 Line:988 3值：00004
 [DEBUG] 2017-12-18 15:00:59,589 Line:1025 query condition columnName:PaterC----value:1
 [DEBUG] 2017-12-18 15:00:59,590 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:00:59,590 Line:313 exeCondition:tblGoods_Add :1>0
 [DEBUG] 2017-12-18 15:00:59,591 Line:321 flag:true
 [DEBUG] 2017-12-18 15:00:59,591 Line:1264 自定义执行的语句显示： tblGoods_Add:{call proc_GoodsUseInfo(?,?,?,?)}
 [DEBUG] 2017-12-18 15:00:59,591 Line:1270 00004
 [DEBUG] 2017-12-18 15:00:59,591 Line:1270 zh_CN
 [DEBUG] 2017-12-18 15:00:59,897 Line:425 ************上述语句执行时间：306
 [DEBUG] 2017-12-18 15:00:59,897 Line:313 exeCondition:tblGoods_Add :1>0 && '0'=='-2222'
 [DEBUG] 2017-12-18 15:00:59,898 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,898 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 15:00:59,898 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,899 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 15:00:59,899 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,900 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as CostMethodC from tblGoods where classCode=substring(?,1,len(?)-5) and CostMethod!=?
 [DEBUG] 2017-12-18 15:00:59,900 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,900 Line:988 1值：0000400001
 [DEBUG] 2017-12-18 15:00:59,900 Line:988 2值：0000400001
 [DEBUG] 2017-12-18 15:00:59,900 Line:988 3值：b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 15:00:59,902 Line:1025 query condition columnName:CostMethodC----value:0
 [DEBUG] 2017-12-18 15:00:59,903 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:00:59,903 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 15:00:59,904 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,904 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT SecUnit FROM tblGoodsUnit WHERE f_ref = ? AND (UnitD<=0 OR SecUnitD<=0)
 [DEBUG] 2017-12-18 15:00:59,904 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,904 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,906 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:59,906 Line:313 exeCondition:tblGoods_Add :'null'!='null'&&'null'.length!=0
 [DEBUG] 2017-12-18 15:00:59,907 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,907 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitC from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 15:00:59,907 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,907 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,908 Line:1025 query condition columnName:SecUnitC----value:0
 [DEBUG] 2017-12-18 15:00:59,909 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:59,909 Line:313 exeCondition:tblGoods_Add :0>0&&''.length == 0
 [DEBUG] 2017-12-18 15:00:59,910 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,910 Line:921 自定义执行的语句显示： tblGoods_Add :select tblGoods.BaseUnit AS BaseUnit,tblGoodsUnit.SecUnit AS SecUnit from  tblGoods left join  tblGoodsUnit ON tblGoods.id=tblGoodsUnit.f_ref where f_ref=?
 [DEBUG] 2017-12-18 15:00:59,910 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,910 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,913 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:00:59,914 Line:313 exeCondition:tblGoods_Add :'null'=='null'&&'null'!='null'
 [DEBUG] 2017-12-18 15:00:59,914 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,915 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 15:00:59,915 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,915 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,916 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 15:00:59,916 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:00:59,917 Line:313 exeCondition:tblGoods_Add :0>1
 [DEBUG] 2017-12-18 15:00:59,917 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,917 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.Hue,'颜色' AS typeHue FROM (SELECT a.HueGroup,b.Hue,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.HueGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.Hue = d.languageId WHERE a.id =?) a WHERE (a.HueGroup ='' AND ISNULL(a.Hue,'')!='') OR (a.HueGroup !='' AND a.Hue !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 15:00:59,918 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,918 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,922 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 15:00:59,923 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.yearNO,'尺码' AS typeYearNo FROM (SELECT a.YearNoGroup,b.yearNO,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.YearNoGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.yearNO = d.languageId WHERE a.id =?) a WHERE (a.YearNoGroup ='' AND ISNULL(a.yearNO,'')!='') OR (a.YearNoGroup !='' AND a.yearNO !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 15:00:59,923 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,923 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,928 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 15:00:59,928 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 15:00:59,929 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,929 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 15:00:59,930 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,930 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitNum from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 15:00:59,930 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,930 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,932 Line:1025 query condition columnName:SecUnitNum----value:0
 [DEBUG] 2017-12-18 15:00:59,932 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:59,932 Line:921 自定义执行的语句显示： tblGoods_Add :select count(DefaultAssit) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 15:00:59,932 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,932 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,934 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 15:00:59,934 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:59,934 Line:313 exeCondition:tblGoods_Add :'false'=='true'
 [DEBUG] 2017-12-18 15:00:59,935 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,935 Line:313 exeCondition:tblGoods_Add :0 != 0 && 0 == 0
 [DEBUG] 2017-12-18 15:00:59,935 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,935 Line:313 exeCondition:tblGoods_Add :'add'=='add'
 [DEBUG] 2017-12-18 15:00:59,936 Line:321 flag:true
 [DEBUG] 2017-12-18 15:00:59,936 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoods set OldclassCode=classCode where id=?
 [DEBUG] 2017-12-18 15:00:59,936 Line:1157 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,938 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=1
 [DEBUG] 2017-12-18 15:00:59,938 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-18 15:00:59,939 Line:313 exeCondition:tblGoods_Add :'add'=='update'
 [DEBUG] 2017-12-18 15:00:59,939 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,939 Line:313 exeCondition:tblGoods_Add :true
 [DEBUG] 2017-12-18 15:00:59,940 Line:321 flag:true
 [DEBUG] 2017-12-18 15:00:59,940 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoodsUnit set GoodsCode=? where f_ref=?
 [DEBUG] 2017-12-18 15:00:59,940 Line:1157 1值：0000400001
 [DEBUG] 2017-12-18 15:00:59,941 Line:1157 2值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,942 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=0
 [DEBUG] 2017-12-18 15:00:59,942 Line:408 ************上述语句执行时间：2
 [DEBUG] 2017-12-18 15:00:59,942 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS RepeatStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? GROUP BY StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably  having count(0) > 1
 [DEBUG] 2017-12-18 15:00:59,943 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,943 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,945 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:00:59,945 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS InvalidStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? AND tgsl.LowerLimit > tgsl.UpperLimit AND tgsl.UpperLimit <> 0 AND tgsl.LowerLimit <> 0
 [DEBUG] 2017-12-18 15:00:59,946 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:00:59,946 Line:988 1值：dc4b4f2e_1712181500595660026
 [DEBUG] 2017-12-18 15:00:59,947 Line:1025 query condition columnName:InvalidStockCount----value:0
 [DEBUG] 2017-12-18 15:00:59,947 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:00:59,948 Line:313 exeCondition:tblGoods_Add :'null'!='0' && 'null'!='null'
 [DEBUG] 2017-12-18 15:00:59,948 Line:321 flag:false
 [DEBUG] 2017-12-18 15:00:59,948 Line:313 exeCondition:tblGoods_Add :'0'!='0' && '0'!='null'
 [DEBUG] 2017-12-18 15:00:59,949 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:01,401 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&operation=5&keyId=dc4b4f2e_1712181500595660026&parentCode=0000400001&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:01:01,402 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];operation=[5,];keyId=[dc4b4f2e_1712181500595660026,];parentCode=[0000400001,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:01:01,403 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181500595660026' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 15:01:01,434 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:01,435 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:01,438 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181500595660026' order by detOrderNo
 [DEBUG] 2017-12-18 15:01:01,443 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181500595660026' order by detOrderNo
 [DEBUG] 2017-12-18 15:01:06,537 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&parentCode=00004&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=1&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:01:06,538 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];parentCode=[00004,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:01:06,543 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:06,544 Line:6381  select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:15,175 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E4%BA%94%E8%B1%86%E7%B3%95&time=1513580475172
 [DEBUG] 2017-12-18 15:01:15,176 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[???è±????,];time=[1513580475172,];
 [DEBUG] 2017-12-18 15:01:15,255 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:01:15,256 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];parentCode=[00004,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[1,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];classCode=[,];isCatalog=[0,];workFlowNode=[,];workFlowNodeName=[,];GoodsNumber=[gl0002,];GoodsFullName=[五豆糕,];GoodsSpec=[,];BaseUnit=[,];BarCode=[,];GoodsFullNamePYM=[wdg,];CostMethod=[b1ee7ce9_0904291155294532523,];tblGoodsAccProp_GoodsAccName=[库存商品,];CompanyCode=[,];StockCode=[,];StorehouseGrid=[,];Spec1=[,];Spec2=[,];Spec3=[,];Brand=[,];ComeFrom=[,];FacePrice=[0,];AccCode=[1405,];upperQty=[0,];lowerQty=[0,];StockTerm=[,];Validity=[,];AvailablyType=[,];HueGroup=[,];YearNoGroup=[,];PreBuyPrice=[0,];Pricefixing=[0,];ProSalesPrice=[0,];ProSalesPrice2=[0,];ProSalesPrice3=[0,];ProSalesPrice4=[0,];ProjectPrice=[0,];ProSalesPrice5=[0,];ProSalesPrice6=[0,];ProSalesPrice7=[0,];ProSalesPrice8=[0,];ProSalesPrice9=[0,];SCompanyID=[,];SecUnit=[,];printCount=[0,];OldclassCode=[,];statusId=[0,];GoodsName=[,];lastUpdateBy=[,];lastUpdateTime=[,];finishTime=[,];createBy=[,];createTime=[,];CheckPersont=[,];AccountingPrice=[0,];seqIsUsed=[1,];seqDigit=[,];garniture=[2,];tblGoodsStockLimitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblGoodsUnitPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];remark=[,];
 [DEBUG] 2017-12-18 15:01:15,257 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0210271549157810034
 [DEBUG] 2017-12-18 15:01:15,259 Line:5847  INSERT INTO  tblGoods(checkPersons,classCode,id,isCatalog,workFlowNode,workFlowNodeName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BarCode,GoodsFullNamePYM,CostMethod,CompanyCode,StockCode,StorehouseGrid,Spec1,Spec2,Spec3,Brand,ComeFrom,FacePrice,AccCode,upperQty,lowerQty,StockTerm,Validity,AvailablyType,HueGroup,YearNoGroup,PreBuyPrice,Pricefixing,ProSalesPrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9,remark,SCompanyID,SecUnit,printCount,OldclassCode,statusId,GoodsName,lastUpdateBy,lastUpdateTime,finishTime,createBy,createTime,CheckPersont,AccountingPrice,seqIsUsed,Attachment,Picture,seqDigit,garniture) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:01:15,260 Line:5853 1:
 [DEBUG] 2017-12-18 15:01:15,260 Line:5853 2:0000400002
 [DEBUG] 2017-12-18 15:01:15,260 Line:5853 3:dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,260 Line:5853 4:0
 [DEBUG] 2017-12-18 15:01:15,261 Line:5853 5:-1
 [DEBUG] 2017-12-18 15:01:15,261 Line:5853 6:finish
 [DEBUG] 2017-12-18 15:01:15,261 Line:5853 7:gl0002
 [DEBUG] 2017-12-18 15:01:15,261 Line:5853 8:五豆糕
 [DEBUG] 2017-12-18 15:01:15,261 Line:5853 9:
 [DEBUG] 2017-12-18 15:01:15,261 Line:5853 10:
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 11:
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 12:wdg
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 13:b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 14:
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 15:
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 16:
 [DEBUG] 2017-12-18 15:01:15,262 Line:5853 17:
 [DEBUG] 2017-12-18 15:01:15,263 Line:5853 18:
 [DEBUG] 2017-12-18 15:01:15,263 Line:5853 19:
 [DEBUG] 2017-12-18 15:01:15,263 Line:5853 20:
 [DEBUG] 2017-12-18 15:01:15,264 Line:5853 21:
 [DEBUG] 2017-12-18 15:01:15,264 Line:5853 22:0.0
 [DEBUG] 2017-12-18 15:01:15,264 Line:5853 23:1405
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 24:0.0
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 25:0.0
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 26:0
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 27:0
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 28:
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 29:
 [DEBUG] 2017-12-18 15:01:15,265 Line:5853 30:
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 31:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 32:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 36:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 37:0.0
 [DEBUG] 2017-12-18 15:01:15,266 Line:5853 38:0.0
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 40:0.0
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 41:0.0
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 42:0.0
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 43:
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 44:00001
 [DEBUG] 2017-12-18 15:01:15,267 Line:5853 45:
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 46:0
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 47:
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 48:0
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 49:
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 50:1
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 51:2017-12-18 15:01:15
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 52:2017-12-18 15:01:15
 [DEBUG] 2017-12-18 15:01:15,268 Line:5853 53:1
 [DEBUG] 2017-12-18 15:01:15,269 Line:5853 54:2017-12-18 15:01:15
 [DEBUG] 2017-12-18 15:01:15,269 Line:5853 55:
 [DEBUG] 2017-12-18 15:01:15,269 Line:5853 56:0.0
 [DEBUG] 2017-12-18 15:01:15,269 Line:5853 57:1
 [DEBUG] 2017-12-18 15:01:15,269 Line:5853 58:
 [DEBUG] 2017-12-18 15:01:15,269 Line:5853 59:
 [DEBUG] 2017-12-18 15:01:15,270 Line:5853 60:0
 [DEBUG] 2017-12-18 15:01:15,270 Line:5853 61:2
 [DEBUG] 2017-12-18 15:01:15,272 Line:921 自定义执行的语句显示： tblGoods_Add :select substring(?,1,len(?)-5) as PaterCode
 [DEBUG] 2017-12-18 15:01:15,273 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,273 Line:988 1值：0000400002
 [DEBUG] 2017-12-18 15:01:15,273 Line:988 2值：0000400002
 [DEBUG] 2017-12-18 15:01:15,273 Line:1025 query condition columnName:PaterCode----value:00004
 [DEBUG] 2017-12-18 15:01:15,274 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:01:15,274 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) PaterC from tblGoods where ?='add' and classCode =? and (select count(0) from tblGoods where classCode like ?+'_____')=1
 [DEBUG] 2017-12-18 15:01:15,274 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,274 Line:988 1值：add
 [DEBUG] 2017-12-18 15:01:15,275 Line:988 2值：00004
 [DEBUG] 2017-12-18 15:01:15,275 Line:988 3值：00004
 [DEBUG] 2017-12-18 15:01:15,275 Line:1025 query condition columnName:PaterC----value:0
 [DEBUG] 2017-12-18 15:01:15,276 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:01:15,277 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 15:01:15,277 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,281 Line:313 exeCondition:tblGoods_Add :0>0 && ''=='-2222'
 [DEBUG] 2017-12-18 15:01:15,284 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,284 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 15:01:15,285 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,285 Line:313 exeCondition:tblGoods_Add :0<0
 [DEBUG] 2017-12-18 15:01:15,286 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,286 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as CostMethodC from tblGoods where classCode=substring(?,1,len(?)-5) and CostMethod!=?
 [DEBUG] 2017-12-18 15:01:15,286 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,286 Line:988 1值：0000400002
 [DEBUG] 2017-12-18 15:01:15,286 Line:988 2值：0000400002
 [DEBUG] 2017-12-18 15:01:15,287 Line:988 3值：b1ee7ce9_0904291155294532523
 [DEBUG] 2017-12-18 15:01:15,288 Line:1025 query condition columnName:CostMethodC----value:0
 [DEBUG] 2017-12-18 15:01:15,289 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:01:15,289 Line:313 exeCondition:tblGoods_Add :0>0
 [DEBUG] 2017-12-18 15:01:15,290 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,290 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT SecUnit FROM tblGoodsUnit WHERE f_ref = ? AND (UnitD<=0 OR SecUnitD<=0)
 [DEBUG] 2017-12-18 15:01:15,290 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,290 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,291 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,291 Line:313 exeCondition:tblGoods_Add :'null'!='null'&&'null'.length!=0
 [DEBUG] 2017-12-18 15:01:15,292 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,292 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitC from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 15:01:15,292 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,292 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,293 Line:1025 query condition columnName:SecUnitC----value:0
 [DEBUG] 2017-12-18 15:01:15,293 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,293 Line:313 exeCondition:tblGoods_Add :0>0&&''.length == 0
 [DEBUG] 2017-12-18 15:01:15,294 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,294 Line:921 自定义执行的语句显示： tblGoods_Add :select tblGoods.BaseUnit AS BaseUnit,tblGoodsUnit.SecUnit AS SecUnit from  tblGoods left join  tblGoodsUnit ON tblGoods.id=tblGoodsUnit.f_ref where f_ref=?
 [DEBUG] 2017-12-18 15:01:15,294 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,294 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,295 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,295 Line:313 exeCondition:tblGoods_Add :'null'=='null'&&'null'!='null'
 [DEBUG] 2017-12-18 15:01:15,296 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,296 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 15:01:15,296 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,296 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,297 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 15:01:15,297 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,297 Line:313 exeCondition:tblGoods_Add :0>1
 [DEBUG] 2017-12-18 15:01:15,297 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,298 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.Hue,'颜色' AS typeHue FROM (SELECT a.HueGroup,b.Hue,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.HueGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.Hue = d.languageId WHERE a.id =?) a WHERE (a.HueGroup ='' AND ISNULL(a.Hue,'')!='') OR (a.HueGroup !='' AND a.Hue !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 15:01:15,298 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,298 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,299 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,299 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT a.yearNO,'尺码' AS typeYearNo FROM (SELECT a.YearNoGroup,b.yearNO,c.groupName,d.languageId FROM tblGoods a LEFT JOIN tblGoodsStockLimit b ON a.id =b.f_ref LEFT JOIN tblGoodsOfProp c ON a.YearNoGroup =c.groupName LEFT JOIN tblGoodsOfPropDet d ON c.id = d.f_ref AND b.yearNO = d.languageId WHERE a.id =?) a WHERE (a.YearNoGroup ='' AND ISNULL(a.yearNO,'')!='') OR (a.YearNoGroup !='' AND a.yearNO !='' AND a.groupName !='' AND a.languageId IS NULL)
 [DEBUG] 2017-12-18 15:01:15,299 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,299 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,300 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,300 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 15:01:15,301 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,301 Line:313 exeCondition:tblGoods_Add :'null'!='null'
 [DEBUG] 2017-12-18 15:01:15,302 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,302 Line:921 自定义执行的语句显示： tblGoods_Add :select count(0) as SecUnitNum from tblGoodsUnit where f_ref=?
 [DEBUG] 2017-12-18 15:01:15,302 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,302 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,303 Line:1025 query condition columnName:SecUnitNum----value:0
 [DEBUG] 2017-12-18 15:01:15,303 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,303 Line:921 自定义执行的语句显示： tblGoods_Add :select count(DefaultAssit) as DefAssitC from tblGoodsUnit where f_ref=? and DefaultAssit='1'
 [DEBUG] 2017-12-18 15:01:15,303 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,304 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,304 Line:1025 query condition columnName:DefAssitC----value:0
 [DEBUG] 2017-12-18 15:01:15,304 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,305 Line:313 exeCondition:tblGoods_Add :'false'=='true'
 [DEBUG] 2017-12-18 15:01:15,305 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,305 Line:313 exeCondition:tblGoods_Add :0 != 0 && 0 == 0
 [DEBUG] 2017-12-18 15:01:15,306 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,306 Line:313 exeCondition:tblGoods_Add :'add'=='add'
 [DEBUG] 2017-12-18 15:01:15,307 Line:321 flag:true
 [DEBUG] 2017-12-18 15:01:15,307 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoods set OldclassCode=classCode where id=?
 [DEBUG] 2017-12-18 15:01:15,307 Line:1157 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,308 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=1
 [DEBUG] 2017-12-18 15:01:15,308 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-18 15:01:15,308 Line:313 exeCondition:tblGoods_Add :'add'=='update'
 [DEBUG] 2017-12-18 15:01:15,309 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,309 Line:313 exeCondition:tblGoods_Add :true
 [DEBUG] 2017-12-18 15:01:15,310 Line:321 flag:true
 [DEBUG] 2017-12-18 15:01:15,310 Line:1081 自定义执行的语句显示： tblGoods_Add:update tblGoodsUnit set GoodsCode=? where f_ref=?
 [DEBUG] 2017-12-18 15:01:15,310 Line:1157 1值：0000400002
 [DEBUG] 2017-12-18 15:01:15,310 Line:1157 2值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,311 Line:1163 DefineSQLBean.execSql  define=tblGoods_Add,  影响行数=0
 [DEBUG] 2017-12-18 15:01:15,311 Line:408 ************上述语句执行时间：1
 [DEBUG] 2017-12-18 15:01:15,311 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS RepeatStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? GROUP BY StockCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably  having count(0) > 1
 [DEBUG] 2017-12-18 15:01:15,311 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,311 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,312 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,312 Line:921 自定义执行的语句显示： tblGoods_Add :SELECT COUNT(StockCode) AS InvalidStockCount FROM tblGoodsStockLimit tgsl WHERE tgsl.f_ref=? AND tgsl.LowerLimit > tgsl.UpperLimit AND tgsl.UpperLimit <> 0 AND tgsl.LowerLimit <> 0
 [DEBUG] 2017-12-18 15:01:15,312 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:01:15,312 Line:988 1值：dc4b4f2e_1712181501152590028
 [DEBUG] 2017-12-18 15:01:15,313 Line:1025 query condition columnName:InvalidStockCount----value:0
 [DEBUG] 2017-12-18 15:01:15,313 Line:1043 ---上述语句时间---1
 [DEBUG] 2017-12-18 15:01:15,313 Line:313 exeCondition:tblGoods_Add :'null'!='0' && 'null'!='null'
 [DEBUG] 2017-12-18 15:01:15,314 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:15,314 Line:313 exeCondition:tblGoods_Add :'0'!='0' && '0'!='null'
 [DEBUG] 2017-12-18 15:01:15,314 Line:321 flag:false
 [DEBUG] 2017-12-18 15:01:16,766 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&operation=5&keyId=dc4b4f2e_1712181501152590028&parentCode=0000400002&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=1&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:01:16,768 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];operation=[5,];keyId=[dc4b4f2e_1712181501152590028,];parentCode=[0000400002,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[1,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:01:16,770 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181501152590028' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 15:01:16,795 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:16,795 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:16,796 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181501152590028' order by detOrderNo
 [DEBUG] 2017-12-18 15:01:16,797 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181501152590028' order by detOrderNo
 [DEBUG] 2017-12-18 15:01:21,880 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 15:01:21,881 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblGoods,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[1,];parentTableName=[,];reportName=[商品管理列表,];moduleName=[商品,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];dataDefineName=[Goods_dataMove,];selectName=[SelectGoodsClassCode,];statusId=[0,];GoodsNumberQ=[,];GoodsFullNameQ=[,];GoodsSpecQ=[,];selectType=[normal,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 15:01:21,908 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:01:21,909 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 15:01:21,921 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 15:01:21,922 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:01:23,867 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblGoods&keyId=dc4b4f2e_1712181500403760024&parentCode=00004&operation=4&moduleType=&winCurIndex=1&parentTableName=&checkTab=Y&selectType=normal
 [DEBUG] 2017-12-18 15:01:23,867 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];keyId=[dc4b4f2e_1712181500403760024,];parentCode=[00004,];operation=[4,];moduleType=[,];winCurIndex=[1,];parentTableName=[,];checkTab=[Y,];selectType=[normal,];
 [DEBUG] 2017-12-18 15:01:23,878 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,GoodsNumberQ,GoodsFullNameQ,GoodsSpecQ,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,ProSalesPrice,statusId,PreBuyPrice,Pricefixing,CostMethod,upperQty,lowerQty,Validity,ComFullName,StockTerm,HueGroup,YearNoGroup,FacePrice,ProSalesPrice2,ProSalesPrice3,ProSalesPrice4,ProjectPrice,ProSalesPrice5,ProSalesPrice6,ProSalesPrice7,ProSalesPrice8,ProSalesPrice9 from ( select tblGoods.classCode as classCode,tblGoods.isCatalog as childCount, tblGoods.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblGoods.GoodsNumber as GoodsNumberQ,     tblGoods.GoodsFullName as GoodsFullNameQ,     tblGoods.GoodsSpec as GoodsSpecQ,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblGoods.ProSalesPrice as ProSalesPrice,     tblGoods.statusId as statusId,     tblGoods.PreBuyPrice as PreBuyPrice,     tblGoods.Pricefixing as Pricefixing,     tblGoodsAccProp.GoodsAccName as CostMethod,     tblGoods.upperQty as upperQty,     tblGoods.lowerQty as lowerQty,     tblGoods.Validity as Validity,     tblCompany.ComFullName as ComFullName,     tblGoods.StockTerm as StockTerm,     tblGoods.HueGroup as HueGroup,     tblGoods.YearNoGroup as YearNoGroup,     tblGoods.FacePrice as FacePrice,     tblGoods.ProSalesPrice2 as ProSalesPrice2,     tblGoods.ProSalesPrice3 as ProSalesPrice3,     tblGoods.ProSalesPrice4 as ProSalesPrice4,     tblGoods.ProjectPrice as ProjectPrice,     tblGoods.ProSalesPrice5 as ProSalesPrice5,     tblGoods.ProSalesPrice6 as ProSalesPrice6,     tblGoods.ProSalesPrice7 as ProSalesPrice7,     tblGoods.ProSalesPrice8 as ProSalesPrice8,     tblGoods.ProSalesPrice9 as ProSalesPrice9   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber ,    tblGoods.GoodsNumber) as row_id  from tblGoods   left join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  left join tblCompany on tblCompany.classCode=tblGoods.CompanyCode left join tblStock on tblGoods.StockCode=tblStock.classCode where 1=1 and tblGoods.classCode like '00004_____'                             and (tblGoods.statusId =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:01:23,879 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 15:01:23,889 Line:689 通过SQL读原始数据：10
 [DEBUG] 2017-12-18 15:01:23,890 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:01:25,412 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblGoods&keyId=dc4b4f2e_1712181501152590028&moduleType=&f_brother=&operation=5&winCurIndex=1&pageNo=&parentCode=0000400002&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:01:25,413 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];keyId=[dc4b4f2e_1712181501152590028,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[1,];pageNo=[,];parentCode=[0000400002,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:01:25,414 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181501152590028' and  a.tableName='tblGoods'
 [DEBUG] 2017-12-18 15:01:25,422 Line:2014 DynDBManager.getRefSql:弹出窗GoodsAccPropSelect: select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:25,422 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblGoods;字段=CostMethod;弹出窗=GoodsAccPropSelect;sql= select tblGoodsAccProp.GoodsAccName from tblGoodsAccProp
      where 1=1 and tblGoodsAccProp.id = 'b1ee7ce9_0904291155294532523' and tblGoodsAccProp.AccCode = '1405'   and tblGoodsAccProp.statusId!='-1'
 [DEBUG] 2017-12-18 15:01:25,427 Line:1525  select * from  tblGoodsStockLimit where f_ref = 'dc4b4f2e_1712181501152590028' order by detOrderNo
 [DEBUG] 2017-12-18 15:01:25,429 Line:1525  select * from  tblGoodsUnit where f_ref = 'dc4b4f2e_1712181501152590028' order by detOrderNo
 [DEBUG] 2017-12-18 15:04:26,827 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ViewStoreDetail&src=menu&winCurIndex=2
 [DEBUG] 2017-12-18 15:04:26,827 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ViewStoreDetail,];src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-18 15:04:26,828 Line:215 ---------->SET Page 2 DEFAULT URL = /ReportDataAction.do?reportNumber=ViewStoreDetail
 [DEBUG] 2017-12-18 15:04:33,567 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 15:04:33,568 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[2,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:0@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];lastQty=[0,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:04:33,583 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockFullName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BatchNo,Inch,Hue,yearNO,ProDate,Availably,TotalQty,lastPrice,TotalAmt,lastQty,SecName,UnitIntQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblStocks.BatchNo as BatchNo,     tblStocks.Inch as Inch,     tblStocks.Hue as Hue,     tblStocks.yearNO as yearNO,     tblStocks.ProDate as ProDate,     tblStocks.Availably as Availably,     tblStocks.lastQty as TotalQty,     tblStocks.lastPrice as lastPrice,     tblStocks.lastAmount as TotalAmt,     tblStocks.lastQty as lastQty,     tblGoodsUnit.SecUnit as SecName,     (case when cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int)>0 then cast(cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int) AS  varchar(100))+tblGoodsUnit.SecUnit else '' end)+case when tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD=0 then '' else (case when tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD)>0 then dbo.throwZero(cast(tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD) AS varchar(100)))+tblGoods.BaseUnit else '' end) end as UnitIntQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-12-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                                                                and (tblStocks.lastQty <>?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:04:33,584 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 15:04:33,626 Line:689 通过SQL读原始数据：42
 [DEBUG] 2017-12-18 15:04:33,627 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:04:59,289 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=3
 [DEBUG] 2017-12-18 15:04:59,290 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[3,];
 [DEBUG] 2017-12-18 15:04:59,290 Line:215 ---------->SET Page 3 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 15:04:59,328 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-18 15:04:59,329 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:04:59,329 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 15:04:59,331 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=3&checkTab=Y
 [DEBUG] 2017-12-18 15:04:59,331 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[3,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:04:59,332 Line:215 ---------->SET Page 3 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 15:05:29,255 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&src=menu&winCurIndex=4
 [DEBUG] 2017-12-18 15:05:29,255 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];src=[menu,];winCurIndex=[4,];
 [DEBUG] 2017-12-18 15:05:29,256 Line:215 ---------->SET Page 4 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblBuyInStock
 [DEBUG] 2017-12-18 15:05:29,287 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullNamen,ComFullName,ComNumber,InVoiceType,TotalTaxAmount,freightAmount,CurTotalTaxAmount,AlreadyPayAmt,BackAmount,CertificateNo,EmpFullName,DeptFullName,BuyOrderNo,EmpFullName2,id,Kid,Remark,lastUpdateBy,lastUpdateTime,NeedPayAmt2,AlreadyPayAmt2,AfterChangeAmt2,ChangeAmt2,DiscountAmount2,TotalTaxAmount2,workFlowNodeName from ( select tblBuyInStock.id as keyId,tblBuyInStock.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblBuyInStock.createBy) as deptCodeR,tblBuyInStock.employeeId as employeeId,tblBuyInStock.departmentCode as deptCodeRE, tblBuyInStock.workFlowNodeName as workFlowNodeName,       tblBuyInStock.BillDate as BillDate,     tblBuyInStock.BillNo as BillNo,     tblCompany.ComFullName as ComFullNamen,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblBuyInStock.InVoiceType as InVoiceType,     tblBuyInStock.TotalTaxAmount as TotalTaxAmount,     tblBuyInStock.freightAmount as freightAmount,     tblBuyInStock.CurTotalAmount as CurTotalTaxAmount,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt,     tblBuyInStock.BackAmount as BackAmount,     case when len(tblBuyInStock.CertificateNo)>0 then 1 else 0 end as CertificateNo,     tblEmployee1.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblBuyOrder.BillNo as BuyOrderNo,     tblEmployee2.EmpFullName as EmpFullName2,     tblBuyInStock.id as id,     tblBuyOrder.id as Kid,     tblBuyInStock.Remark as Remark,     emp2.EmpFullName as lastUpdateBy,     tblBuyInStock.lastUpdateTime as lastUpdateTime,     tblBuyInStock.NeedPayAmt as NeedPayAmt2,     tblBuyInStock.AlreadyPayAmt as AlreadyPayAmt2,     tblBuyInStock.AfterChangeAmt as AfterChangeAmt2,     tblBuyInStock.ChangeAmt as ChangeAmt2,     tblBuyInStock.DiscountAmount as DiscountAmount2,     tblBuyInStock.TotalAmount as TotalTaxAmount2   ,ROW_NUMBER() over(order by     tblBuyInStock.BillDate desc,    tblBuyInStock.BillNo desc) as row_id  from tblBuyInStock   left join tblCompany on tblCompany.classCode=tblBuyInStock.CompanyCode  left join tblBuyInStockDet on (tblBuyInStock.id=tblBuyInStockDet.f_ref and tblBuyInStockDet.id=(select top 1 a.id from tblBuyInStockDet a where a.f_ref=tblBuyInStock.id))  left join tblDepartment on tblDepartment.classCode=tblBuyInStock.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblBuyInStock.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblBuyInStock.createBy  left join tblBuyOrder on tblBuyOrder.id=tblBuyInStockDet.BuyOrderID  left join tblemployee emp2 on emp2.id=tblBuyInStock.lastUpdateBy where 1=1 and isNull(tblBuyInStock.workFlowNodeName,'')!='print'        and (tblBuyInStock.BillDate >= ?)                                                                    )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:05:29,287 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 15:05:29,345 Line:689 通过SQL读原始数据：58
 [DEBUG] 2017-12-18 15:05:29,345 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:05:29,406 Line:5227 GlobalsTool.js 生成js 时间26:/js/gen/defineList.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-18 15:05:32,875 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblBuyInStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=4&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:05:32,876 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[4,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:05:32,997 Line:5227 GlobalsTool.js 生成js 时间109:/js/gen/define.vjstblBuyInStock_zh_CN.js
 [DEBUG] 2017-12-18 15:05:37,120 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblCompany&moduleType=1&ClientFlag=1&src=menu&winCurIndex=5
 [DEBUG] 2017-12-18 15:05:37,121 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[1,];ClientFlag=[1,];src=[menu,];winCurIndex=[5,];
 [DEBUG] 2017-12-18 15:05:37,121 Line:215 ---------->SET Page 5 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblCompany&moduleType=1&ClientFlag=1
 [DEBUG] 2017-12-18 15:05:37,149 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=1&SysType=&MOID=6c9829c9_1003091602553280018&editable=true&subSql=
 [DEBUG] 2017-12-18 15:05:37,149 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblCompany&moduleType=1&ClientFlag=1&src=menu&winCurIndex=5&checkTab=Y
 [DEBUG] 2017-12-18 15:05:37,149 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[1,];SysType=[,];MOID=[6c9829c9_1003091602553280018,];editable=[true,];subSql=[,];
 [DEBUG] 2017-12-18 15:05:37,149 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[1,];ClientFlag=[1,];src=[menu,];winCurIndex=[5,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:05:37,150 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType='1' order by ComNumber
 [DEBUG] 2017-12-18 15:05:37,150 Line:215 ---------->SET Page 5 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblCompany&moduleType=1&ClientFlag=1
 [DEBUG] 2017-12-18 15:05:37,166 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,ComNumber,ComFullName,ComTel,ComFax,ComEmail,ComWebsite,ComAddress,statusId,id,moduleType,ComFullNamePYM,ComName,ComContactor,ComContactorTel,ComContactorMobile,Credit,EmpFullName,DeptFullName,SettleCys,ShippingAddress,Account1,Account2,Account3 from ( select tblCompany.classCode as classCode,tblCompany.isCatalog as childCount, tblCompany.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblCompany.ComNumber as ComNumber,     tblCompany.ComFullName as ComFullName,     tblCompany.ComTel as ComTel,     tblCompany.ComFax as ComFax,     tblCompany.ComEmail as ComEmail,     tblCompany.ComWebsite as ComWebsite,     tblCompany.ComAddress as ComAddress,     tblCompany.statusId as statusId,     tblCompany.id as id,     tblCompany.moduleType as moduleType,     tblCompany.ComFullNamePYM as ComFullNamePYM,     tblCompany.ComName as ComName,     tblCompany.ComContactor as ComContactor,     tblCompany.ComContactorTel as ComContactorTel,     tblCompany.ComContactorMobile as ComContactorMobile,     tblCompany.Credit as Credit,     tblEmployee.EmpFullName as EmpFullName,     tblDepartment.DeptFullName as DeptFullName,     tblCompany.SettleCys as SettleCys,     tblCompany.ShippingAddress as ShippingAddress,     tblCompany.Account1 as Account1,     tblCompany.Account2 as Account2,     tblCompany.Account3 as Account3   ,ROW_NUMBER() over(order by     tblCompany.ComNumber) as row_id  from tblCompany left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode where 1=1 and tblCompany.classCode like '_____'                             and (tblCompany.moduleType =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:05:37,167 Line:582 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 15:05:37,186 Line:689 通过SQL读原始数据：19
 [DEBUG] 2017-12-18 15:05:37,187 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:05:38,885 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblCompany&parentCode=&operation=6&moduleType=1&f_brother=&parentTableName=&winCurIndex=5&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:05:38,886 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];parentCode=[,];operation=[6,];moduleType=[1,];f_brother=[,];parentTableName=[,];winCurIndex=[5,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:06:13,254 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E9%BA%A6%E7%94%B0%E9%A3%9F%E5%93%81&time=1513580773250
 [DEBUG] 2017-12-18 15:06:13,255 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[é????°é?????,];time=[1513580773250,];
 [DEBUG] 2017-12-18 15:06:21,094 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:06:21,095 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblCompany,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[1,];parentTableName=[,];winCurIndex=[5,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];checkPersons=[,];ComFullName=[麦田食品,];SCompanyID=[,];ComNumber=[00001,];ComFullNamePYM=[mtsp,];ClientFlag=[1,];ComName=[,];ComTel=[,];ComFax=[,];ComAccountNo=[,];ComAccountName=[,];ComContactor=[,];ComContactorTel=[,];ComContactorMobile=[,];CustomerFlag=[,];AreaID=[,];TradeID=[,];Credit=[0,];ComSalesType=[ProSalesPrice,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];SettleCys=[,];InVoiceType=[3,];isCatalog=[0,];lastUpdateBy=[,];lastUpdateTime=[2017-12-18 15:05:38,];level=[,];OldclassCode=[,];payCredit=[0,];payDebit=[0,];payYear=[0,];prePayCredit=[0,];prePayDebit=[0,];prePayYear=[0,];preReceiveCredit=[0,];preReceiveDebit=[0,];Discount=[100,];DefaultSettleType=[,];DefaultTradeType=[,];IniPay=[0,];IniPrePay=[0,];IniPreReceive=[0,];IniReceive=[0,];currency=[,];ComWebsite=[,];createBy=[,];createTime=[2017-12-18 15:05:38,];ShippingAddress=[,];SonComNum=[,];statusId=[0,];TopCredit=[,];TotalPay=[0,];TotalReceive=[0,];finishTime=[,];receiveYear=[0,];preReceiveYear=[0,];printCount=[0,];receiveCredit=[0,];receiveDebit=[0,];workFlowNode=[,];workFlowNodeName=[,];CheckPersont=[,];classCode=[,];ComAddress=[,];ComEmail=[,];PrePayTotalRemain=[,];PayRemain=[,];PayTotalRemain=[,];PreReceiveTotalRemain=[,];Account1=[,];Account2=[,];Account3=[,];ReceiveRemain=[,];ReceiveTotalRemain=[,];tblCompanyEmployeeDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblCompanyEmployeeDet_ContactMan=[,];tblCompanyEmployeeDet_Role=[,];tblCompanyEmployeeDet_Gender=[-100000,];tblCompanyEmployeeDet_BirthDay=[,];tblCompanyEmployeeDet_Mobile=[,];tblCompanyEmployeeDet_Telephone=[,];tblCompanyEmployeeDet_ClientEmail=[,];tblCompanyEmployeeDet_Remark=[,];tblCompanyEmployeeDet_contactCode=[,];tblCompanyEmployeeDet_MSN=[,];tblCompanyEmployeeDet_QQ=[,];tblCompanyEmployeeDet_Hobby=[,];tblCompanyEmployeeDet_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-18 15:06:21,096 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0510271549157810034
 [DEBUG] 2017-12-18 15:06:21,113 Line:5847  INSERT INTO  tblCompany(checkPersons,ComFullName,id,SCompanyID,ComNumber,ComFullNamePYM,ClientFlag,ComName,ComTel,ComFax,ComAccountNo,ComAccountName,ComContactor,ComContactorTel,ComContactorMobile,Remark,CustomerFlag,AreaID,TradeID,Credit,ComSalesType,DepartmentCode,EmployeeID,SettleCys,InVoiceType,isCatalog,lastUpdateBy,lastUpdateTime,level,moduleType,OldclassCode,payCredit,payDebit,payYear,prePayCredit,prePayDebit,prePayYear,preReceiveCredit,preReceiveDebit,Discount,DefaultSettleType,DefaultTradeType,IniPay,IniPrePay,IniPreReceive,IniReceive,currency,ComWebsite,createBy,createTime,ShippingAddress,SonComNum,statusId,TopCredit,TotalPay,TotalReceive,finishTime,receiveYear,preReceiveYear,printCount,receiveCredit,receiveDebit,workFlowNode,workFlowNodeName,CheckPersont,classCode,ComAddress,ComEmail,Attachment,PrePayTotalRemain,PayRemain,PayTotalRemain,PreReceiveTotalRemain,Account1,Account2,Account3,ReceiveRemain,ReceiveTotalRemain) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:06:21,113 Line:5853 1:
 [DEBUG] 2017-12-18 15:06:21,113 Line:5853 2:麦田食品
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 3:dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 4:00001
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 5:00001
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 6:mtsp
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 7:1
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 8:
 [DEBUG] 2017-12-18 15:06:21,114 Line:5853 9:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 10:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 11:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 12:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 13:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 14:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 15:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 16:
 [DEBUG] 2017-12-18 15:06:21,115 Line:5853 17:0
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 18:
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 19:
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 20:0.0
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 21:ProSalesPrice
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 22:00101
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 23:1
 [DEBUG] 2017-12-18 15:06:21,116 Line:5853 24:0
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 25:3
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 26:0
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 27:1
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 28:2017-12-18 15:05:38
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 29:0
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 30:1
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 31:
 [DEBUG] 2017-12-18 15:06:21,117 Line:5853 32:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 36:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 37:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 38:0.0
 [DEBUG] 2017-12-18 15:06:21,118 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 40:100.0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 41:0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 42:0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 43:0.0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 44:0.0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 45:0.0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 46:0.0
 [DEBUG] 2017-12-18 15:06:21,119 Line:5853 47:0
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 48:
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 49:1
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 50:2017-12-18 15:05:38
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 51:
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 52:0
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 53:0
 [DEBUG] 2017-12-18 15:06:21,120 Line:5853 54:0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 55:0.0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 56:0.0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 57:2017-12-18 15:06:21
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 58:0.0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 59:0.0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 60:0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 61:0.0
 [DEBUG] 2017-12-18 15:06:21,121 Line:5853 62:0.0
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 63:-1
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 64:finish
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 65:
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 66:00003
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 67:
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 68:
 [DEBUG] 2017-12-18 15:06:21,122 Line:5853 69:
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 70:0.0
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 71:0.0
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 72:0.0
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 73:0.0
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 74:
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 75:
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 76:
 [DEBUG] 2017-12-18 15:06:21,123 Line:5853 77:0.0
 [DEBUG] 2017-12-18 15:06:21,124 Line:5853 78:0.0
 [DEBUG] 2017-12-18 15:06:21,140 Line:921 自定义执行的语句显示： Company_Add :select classCode oldclassCode,ComNumber as Number,ComFullName as FullName from tblCompany where ?='add' and classCode=subString(?,1,len(?)-5) and (select count(0) from tblCompany where classCode like subString(?,1,len(?)-5)+'_____')=1
 [DEBUG] 2017-12-18 15:06:21,140 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,140 Line:988 1值：add
 [DEBUG] 2017-12-18 15:06:21,141 Line:988 2值：00003
 [DEBUG] 2017-12-18 15:06:21,141 Line:988 3值：00003
 [DEBUG] 2017-12-18 15:06:21,141 Line:988 4值：00003
 [DEBUG] 2017-12-18 15:06:21,141 Line:988 5值：00003
 [DEBUG] 2017-12-18 15:06:21,145 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 15:06:21,145 Line:313 exeCondition:Company_Add :'null'!='null'&&'null'.length>0
 [DEBUG] 2017-12-18 15:06:21,149 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,149 Line:313 exeCondition:Company_Add :''=='-2222'
 [DEBUG] 2017-12-18 15:06:21,150 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,150 Line:921 自定义执行的语句显示： Company_Add :select ComNumber as SComNumber,isNull(ClientFlag,0) as SClientFlagA from tblCompany where ComNumber=? and ClientFlag=1 and id!=?
 [DEBUG] 2017-12-18 15:06:21,150 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,151 Line:988 1值：00001
 [DEBUG] 2017-12-18 15:06:21,151 Line:988 2值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,154 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:06:21,154 Line:921 自定义执行的语句显示： Company_Add :select ComFullName as SComFullName,isNull(ClientFlag,0) as SClientFlagB from tblCompany where ComFullName=? and ClientFlag=1 and id!=?
 [DEBUG] 2017-12-18 15:06:21,154 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,154 Line:988 1值：麦田食品
 [DEBUG] 2017-12-18 15:06:21,155 Line:988 2值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,157 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:06:21,157 Line:921 自定义执行的语句显示： Company_Add :select ComNumber as CComNumber,isNull(ClientFlag,0) as CClientFlagA from tblCompany where ComNumber=? and ClientFlag=2 and id!=?
 [DEBUG] 2017-12-18 15:06:21,157 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,157 Line:988 1值：00001
 [DEBUG] 2017-12-18 15:06:21,158 Line:988 2值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,160 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:06:21,160 Line:921 自定义执行的语句显示： Company_Add :select ComFullName as CComFullName,isNull(ClientFlag,0) as CClientFlagB from tblCompany where ComFullName=? and ClientFlag=2 and id!=?
 [DEBUG] 2017-12-18 15:06:21,160 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,161 Line:988 1值：麦田食品
 [DEBUG] 2017-12-18 15:06:21,161 Line:988 2值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,164 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:06:21,164 Line:921 自定义执行的语句显示： Company_Add :select ComNumber as SCComNumber,isNull(ClientFlag,0) as SCClientFlagA from tblCompany where ComNumber=? and ClientFlag=3 and id!=?
 [DEBUG] 2017-12-18 15:06:21,164 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,165 Line:988 1值：00001
 [DEBUG] 2017-12-18 15:06:21,165 Line:988 2值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,167 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:06:21,167 Line:921 自定义执行的语句显示： Company_Add :select ComFullName as SCComFullName,isNull(ClientFlag,0) as SCClientFlagB from tblCompany where ComFullName=? and ClientFlag=3 and id!=?
 [DEBUG] 2017-12-18 15:06:21,167 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,168 Line:988 1值：麦田食品
 [DEBUG] 2017-12-18 15:06:21,168 Line:988 2值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,170 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:06:21,170 Line:313 exeCondition:Company_Add :'null'!='null'&&null==1 && ''=='true'
 [DEBUG] 2017-12-18 15:06:21,171 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,171 Line:313 exeCondition:Company_Add :'null'!='null'&&null==1 && ''=='true'
 [DEBUG] 2017-12-18 15:06:21,172 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,172 Line:313 exeCondition:Company_Add :'null'!='null'&&null==1 && ''=='true'
 [DEBUG] 2017-12-18 15:06:21,173 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,173 Line:313 exeCondition:Company_Add :'null'!='null'&&null==1 && ''=='true'
 [DEBUG] 2017-12-18 15:06:21,173 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,173 Line:313 exeCondition:Company_Add :'null'!='null'&&null==1 && ''=='true'
 [DEBUG] 2017-12-18 15:06:21,174 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,174 Line:313 exeCondition:Company_Add :'null'!='null'&&null==1 && ''=='true'
 [DEBUG] 2017-12-18 15:06:21,175 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,175 Line:313 exeCondition:Company_Add :0 <0
 [DEBUG] 2017-12-18 15:06:21,176 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,176 Line:921 自定义执行的语句显示： Company_Add :select SettleCys from tblCompany where id=? and len(SettleCys)>0
 [DEBUG] 2017-12-18 15:06:21,176 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:06:21,177 Line:988 1值：dc4b4f2e_1712181506211080030
 [DEBUG] 2017-12-18 15:06:21,179 Line:1025 query condition columnName:SettleCys----value:0
 [DEBUG] 2017-12-18 15:06:21,179 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:06:21,179 Line:313 exeCondition:Company_Add :'add'=='update'&&'0' !=null
 [DEBUG] 2017-12-18 15:06:21,180 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:21,180 Line:313 exeCondition:Company_Add : 'add'=='update'
 [DEBUG] 2017-12-18 15:06:21,181 Line:321 flag:false
 [DEBUG] 2017-12-18 15:06:22,685 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblCompany&operation=5&keyId=dc4b4f2e_1712181506211080030&parentCode=00003&f_brother=&checkTab=Y&parentTableName=&moduleType=1&winCurIndex=5&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:06:22,686 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];operation=[5,];keyId=[dc4b4f2e_1712181506211080030,];parentCode=[00003,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[1,];winCurIndex=[5,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:06:22,687 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181506211080030' and  a.tableName='tblCompany'
 [DEBUG] 2017-12-18 15:06:22,738 Line:2014 DynDBManager.getRefSql:弹出窗Department: select tblDepartment.DeptFullName from tblDepartment
      where 1=1 and tblDepartment.classCode = '00101'
 [DEBUG] 2017-12-18 15:06:22,739 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblCompany;字段=DepartmentCode;弹出窗=Department;sql= select tblDepartment.DeptFullName from tblDepartment
      where 1=1 and tblDepartment.classCode = '00101'
 [DEBUG] 2017-12-18 15:06:22,752 Line:2014 DynDBManager.getRefSql:弹出窗Employee: select tblEmployee.EmpFullName,tblDepartment.DeptFullName from tblEmployee left join tblDepartment on tblEmployee.DepartmentCode=tblDepartment.classCode
      where 1=1  and ((tblEmployee.SCompanyID='00001' and (tblEmployee.statusId!='-1' or tblEmployee.id='1') and tblEmployee.workFlowNodeName='finish') and tblEmployee.workFlowNodeName='finish' and tblDepartment.workFlowNodeName='finish')
		 and tblEmployee.id = '1' and tblEmployee.DepartmentCode = '00101'
 [DEBUG] 2017-12-18 15:06:22,753 Line:1441 DynDBManager.detail 查询详情时，查询关联表数据：表=tblCompany;字段=EmployeeID;弹出窗=Employee;sql= select tblEmployee.EmpFullName,tblDepartment.DeptFullName from tblEmployee left join tblDepartment on tblEmployee.DepartmentCode=tblDepartment.classCode
      where 1=1  and ((tblEmployee.SCompanyID='00001' and (tblEmployee.statusId!='-1' or tblEmployee.id='1') and tblEmployee.workFlowNodeName='finish') and tblEmployee.workFlowNodeName='finish' and tblDepartment.workFlowNodeName='finish')
		 and tblEmployee.id = '1' and tblEmployee.DepartmentCode = '00101'
 [DEBUG] 2017-12-18 15:06:22,763 Line:1525  select * from  tblCompanyEmployeeDet where f_ref = 'dc4b4f2e_1712181506211080030' order by detOrderNo
 [DEBUG] 2017-12-18 15:06:25,737 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-18&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-18 15:06:25,737 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-18,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-18 15:06:25,770 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-18 15:06:25,770 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:06:25,771 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-18 15:06:25,772 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-18&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-18 15:06:25,773 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-18,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:06:25,781 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-18'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 15:06:30,352 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-18 15:06:30,352 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-18 15:06:30,380 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-18 15:06:30,381 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:06:30,381 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-18 15:06:30,384 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-18 15:06:30,385 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:06:30,387 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 15:06:37,234 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblStock&src=menu&winCurIndex=6
 [DEBUG] 2017-12-18 15:06:37,235 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];src=[menu,];winCurIndex=[6,];
 [DEBUG] 2017-12-18 15:06:37,235 Line:215 ---------->SET Page 6 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblStock
 [DEBUG] 2017-12-18 15:06:37,253 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=47&editable=true&subSql=
 [DEBUG] 2017-12-18 15:06:37,254 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[47,];editable=[true,];subSql=[,];
 [DEBUG] 2017-12-18 15:06:37,254 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-18 15:06:37,255 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblStock&src=menu&winCurIndex=6&checkTab=Y
 [DEBUG] 2017-12-18 15:06:37,256 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];src=[menu,];winCurIndex=[6,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:06:37,257 Line:215 ---------->SET Page 6 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblStock
 [DEBUG] 2017-12-18 15:06:37,290 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,StockNumber,StockFullName,StockType,StockAddress,StockFullNamePYM,StockName,StockContactor,StockTel,statusId from ( select tblStock.classCode as classCode,tblStock.isCatalog as childCount, tblStock.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblStock.StockNumber as StockNumber,     tblStock.StockFullName as StockFullName,     tblStock.StockType as StockType,     tblStock.StockAddress as StockAddress,     tblStock.StockFullNamePYM as StockFullNamePYM,     tblStock.StockName as StockName,     tblStock.StockContactor as StockContactor,     tblStock.StockTel as StockTel,     tblStock.statusId as statusId   ,ROW_NUMBER() over(order by     tblStock.StockNumber) as row_id  from tblStock where 1=1 and tblStock.classCode like '_____'                                )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:06:37,300 Line:689 通过SQL读原始数据：10
 [DEBUG] 2017-12-18 15:06:37,301 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:06:37,337 Line:5227 GlobalsTool.js 生成js 时间21:/js/gen/defineList.vjstblStock_zh_CN.js
 [DEBUG] 2017-12-18 15:06:44,552 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=6&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:06:44,553 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[6,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:06:44,630 Line:5227 GlobalsTool.js 生成js 时间65:/js/gen/define.vjstblStock_zh_CN.js
 [DEBUG] 2017-12-18 15:07:24,586 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E6%80%BB%E4%BB%931&time=1513580844577
 [DEBUG] 2017-12-18 15:07:24,588 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[??????1,];time=[1513580844577,];
 [DEBUG] 2017-12-18 15:11:48,586 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:11:48,587 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[6,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];SCompanyID=[,];checkPersons=[,];StockNumber=[00001,];StockFullName=[总仓1,];StockFullNamePYM=[zc1,];StockName=[,];StockType=[,];StockContactor=[,];StockTel=[,];StockAddress=[,];SonStockNum=[,];level=[,];CheckPersont=[,];classCode=[,];createBy=[,];createTime=[2017-12-18 15:06:44,];finishTime=[,];isCatalog=[0,];lastUpdateBy=[,];lastUpdateTime=[2017-12-18 15:06:44,];printCount=[0,];statusId=[,];workFlowNode=[,];workFlowNodeName=[,];Remark=[,];
 [DEBUG] 2017-12-18 15:11:48,587 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0110271549157810034
 [DEBUG] 2017-12-18 15:11:48,608 Line:5847  INSERT INTO  tblStock(SCompanyID,checkPersons,id,StockNumber,StockFullName,StockFullNamePYM,StockName,StockType,StockContactor,StockTel,Remark,StockAddress,SonStockNum,level,CheckPersont,Attachment,classCode,createBy,createTime,finishTime,isCatalog,lastUpdateBy,lastUpdateTime,printCount,statusId,workFlowNode,workFlowNodeName) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:11:48,609 Line:5853 1:00001
 [DEBUG] 2017-12-18 15:11:48,609 Line:5853 2:
 [DEBUG] 2017-12-18 15:11:48,609 Line:5853 3:dc4b4f2e_1712181511486040032
 [DEBUG] 2017-12-18 15:11:48,609 Line:5853 4:00001
 [DEBUG] 2017-12-18 15:11:48,609 Line:5853 5:总仓1
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 6:zc1
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 7:
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 8:0
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 9:
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 10:
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 11:
 [DEBUG] 2017-12-18 15:11:48,610 Line:5853 12:
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 13:0.0
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 14:0
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 15:
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 16:
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 17:00001
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 18:1
 [DEBUG] 2017-12-18 15:11:48,611 Line:5853 19:2017-12-18 15:06:44
 [DEBUG] 2017-12-18 15:11:48,612 Line:5853 20:2017-12-18 15:11:48
 [DEBUG] 2017-12-18 15:11:48,612 Line:5853 21:0
 [DEBUG] 2017-12-18 15:11:48,612 Line:5853 22:1
 [DEBUG] 2017-12-18 15:11:48,612 Line:5853 23:2017-12-18 15:06:44
 [DEBUG] 2017-12-18 15:11:48,612 Line:5853 24:0
 [DEBUG] 2017-12-18 15:11:48,612 Line:5853 25:0
 [DEBUG] 2017-12-18 15:11:48,613 Line:5853 26:-1
 [DEBUG] 2017-12-18 15:11:48,613 Line:5853 27:finish
 [DEBUG] 2017-12-18 15:11:48,621 Line:921 自定义执行的语句显示： Stock_add :select classCode,StockNumber as Number,StockFullName as FullName from tblStock where ?='add' and classCode=subString(?,1,len(?)-5) and (select count(0) from tblStock where classCode like subString(?,1,len(?)-5)+'_____')=1
 [DEBUG] 2017-12-18 15:11:48,621 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:11:48,622 Line:988 1值：add
 [DEBUG] 2017-12-18 15:11:48,622 Line:988 2值：00001
 [DEBUG] 2017-12-18 15:11:48,622 Line:988 3值：00001
 [DEBUG] 2017-12-18 15:11:48,622 Line:988 4值：00001
 [DEBUG] 2017-12-18 15:11:48,622 Line:988 5值：00001
 [DEBUG] 2017-12-18 15:11:48,625 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:11:48,626 Line:313 exeCondition:Stock_add :'null'!='null'&&'null'.length>0
 [DEBUG] 2017-12-18 15:11:48,630 Line:321 flag:false
 [DEBUG] 2017-12-18 15:11:48,630 Line:313 exeCondition:Stock_add :''=='-2222'
 [DEBUG] 2017-12-18 15:11:48,631 Line:321 flag:false
 [DEBUG] 2017-12-18 15:11:50,125 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblStock&operation=5&keyId=dc4b4f2e_1712181511486040032&parentCode=00001&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=6&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:11:50,126 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];operation=[5,];keyId=[dc4b4f2e_1712181511486040032,];parentCode=[00001,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[6,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:11:50,127 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181511486040032' and  a.tableName='tblStock'
 [DEBUG] 2017-12-18 15:11:54,246 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblStock&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=6&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:11:54,248 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[6,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:12:01,652 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=ajaxPYM&type=updatePYM&chinese=%E6%80%BB%E4%BB%932&time=1513581121648
 [DEBUG] 2017-12-18 15:12:01,653 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[ajaxPYM,];type=[updatePYM,];chinese=[??????2,];time=[1513581121648,];
 [DEBUG] 2017-12-18 15:12:01,739 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:12:01,740 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[6,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];SCompanyID=[,];checkPersons=[,];StockNumber=[00002,];StockFullName=[总仓2,];StockFullNamePYM=[zc2,];StockName=[,];StockType=[,];StockContactor=[,];StockTel=[,];StockAddress=[,];SonStockNum=[,];level=[,];CheckPersont=[,];classCode=[,];createBy=[,];createTime=[2017-12-18 15:11:54,];finishTime=[,];isCatalog=[0,];lastUpdateBy=[,];lastUpdateTime=[2017-12-18 15:11:54,];printCount=[0,];statusId=[,];workFlowNode=[,];workFlowNodeName=[,];Remark=[,];
 [DEBUG] 2017-12-18 15:12:01,741 Line:3843 添加单据desingId=null工作流designId=fc525f5f_0110271549157810034
 [DEBUG] 2017-12-18 15:12:01,756 Line:5847  INSERT INTO  tblStock(SCompanyID,checkPersons,id,StockNumber,StockFullName,StockFullNamePYM,StockName,StockType,StockContactor,StockTel,Remark,StockAddress,SonStockNum,level,CheckPersont,Attachment,classCode,createBy,createTime,finishTime,isCatalog,lastUpdateBy,lastUpdateTime,printCount,statusId,workFlowNode,workFlowNodeName) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:12:01,756 Line:5853 1:00001
 [DEBUG] 2017-12-18 15:12:01,756 Line:5853 2:
 [DEBUG] 2017-12-18 15:12:01,757 Line:5853 3:dc4b4f2e_1712181512017510034
 [DEBUG] 2017-12-18 15:12:01,757 Line:5853 4:00002
 [DEBUG] 2017-12-18 15:12:01,757 Line:5853 5:总仓2
 [DEBUG] 2017-12-18 15:12:01,757 Line:5853 6:zc2
 [DEBUG] 2017-12-18 15:12:01,757 Line:5853 7:
 [DEBUG] 2017-12-18 15:12:01,758 Line:5853 8:0
 [DEBUG] 2017-12-18 15:12:01,758 Line:5853 9:
 [DEBUG] 2017-12-18 15:12:01,758 Line:5853 10:
 [DEBUG] 2017-12-18 15:12:01,758 Line:5853 11:
 [DEBUG] 2017-12-18 15:12:01,759 Line:5853 12:
 [DEBUG] 2017-12-18 15:12:01,759 Line:5853 13:0.0
 [DEBUG] 2017-12-18 15:12:01,759 Line:5853 14:0
 [DEBUG] 2017-12-18 15:12:01,760 Line:5853 15:
 [DEBUG] 2017-12-18 15:12:01,760 Line:5853 16:
 [DEBUG] 2017-12-18 15:12:01,760 Line:5853 17:00002
 [DEBUG] 2017-12-18 15:12:01,761 Line:5853 18:1
 [DEBUG] 2017-12-18 15:12:01,761 Line:5853 19:2017-12-18 15:11:54
 [DEBUG] 2017-12-18 15:12:01,761 Line:5853 20:2017-12-18 15:12:01
 [DEBUG] 2017-12-18 15:12:01,762 Line:5853 21:0
 [DEBUG] 2017-12-18 15:12:01,762 Line:5853 22:1
 [DEBUG] 2017-12-18 15:12:01,762 Line:5853 23:2017-12-18 15:11:54
 [DEBUG] 2017-12-18 15:12:01,763 Line:5853 24:0
 [DEBUG] 2017-12-18 15:12:01,765 Line:5853 25:0
 [DEBUG] 2017-12-18 15:12:01,766 Line:5853 26:-1
 [DEBUG] 2017-12-18 15:12:01,766 Line:5853 27:finish
 [DEBUG] 2017-12-18 15:12:01,769 Line:921 自定义执行的语句显示： Stock_add :select classCode,StockNumber as Number,StockFullName as FullName from tblStock where ?='add' and classCode=subString(?,1,len(?)-5) and (select count(0) from tblStock where classCode like subString(?,1,len(?)-5)+'_____')=1
 [DEBUG] 2017-12-18 15:12:01,769 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:12:01,769 Line:988 1值：add
 [DEBUG] 2017-12-18 15:12:01,769 Line:988 2值：00002
 [DEBUG] 2017-12-18 15:12:01,770 Line:988 3值：00002
 [DEBUG] 2017-12-18 15:12:01,770 Line:988 4值：00002
 [DEBUG] 2017-12-18 15:12:01,770 Line:988 5值：00002
 [DEBUG] 2017-12-18 15:12:01,773 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:12:01,774 Line:313 exeCondition:Stock_add :'null'!='null'&&'null'.length>0
 [DEBUG] 2017-12-18 15:12:01,777 Line:321 flag:false
 [DEBUG] 2017-12-18 15:12:01,777 Line:313 exeCondition:Stock_add :''=='-2222'
 [DEBUG] 2017-12-18 15:12:01,778 Line:321 flag:false
 [DEBUG] 2017-12-18 15:12:03,246 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblStock&operation=5&keyId=dc4b4f2e_1712181512017510034&parentCode=00002&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=6&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:12:03,247 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];operation=[5,];keyId=[dc4b4f2e_1712181512017510034,];parentCode=[00002,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[6,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:12:03,249 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181512017510034' and  a.tableName='tblStock'
 [DEBUG] 2017-12-18 15:12:09,016 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do
 [DEBUG] 2017-12-18 15:12:09,017 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblStock,];optionType=[,];parentCode=[,];f_brother=[,];defineName=[,];winCurIndex=[6,];parentTableName=[,];reportName=[仓库,];moduleName=[仓库,];isAllListQuery=[,];parentCodeList=[,];src=[,];queryChannel=[normal,];newCreateBy=[,];wakeUp=[,];sendMessage=[,];classCode=[,];SQLSave=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,StockNumber,StockFullName,StockType,StockAddress,StockFullNamePYM,StockName,StockContactor,StockTel,statusId from ( select tblStock.classCode as classCode,tblStock.isCatalog as childCount, tblStock.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblStock.StockNumber as StockNumber,     tblStock.StockFullName as StockFullName,     tblStock.StockType as StockType,     tblStock.StockAddress as StockAddress,     tblStock.StockFullNamePYM as StockFullNamePYM,     tblStock.StockName as StockName,     tblStock.StockContactor as StockContactor,     tblStock.StockTel as StockTel,     tblStock.statusId as statusId   ,ROW_NUMBER() over(order by     tblStock.StockNumber) as row_id  from tblStock where 1=1 and tblStock.classCode like '_____'                                )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];right=[@SQL:select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,StockNumber,StockFullName,StockType,StockAddress,StockFullNamePYM,StockName,StockContactor,StockTel,statusId from ( select tblStock.classCode as classCode,tblStock.isCatalog as childCount, tblStock.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblStock.StockNumber as StockNumber,     tblStock.StockFullName as StockFullName,     tblStock.StockType as StockType,     tblStock.StockAddress as StockAddress,     tblStock.StockFullNamePYM as StockFullNamePYM,     tblStock.StockName as StockName,     tblStock.StockContactor as StockContactor,     tblStock.StockTel as StockTel,     tblStock.statusId as statusId   ,ROW_NUMBER() over(order by     tblStock.StockNumber) as row_id  from tblStock where 1=1 and tblStock.classCode like '_____'                                )  a  where row_id between 1 and 101 order by row_id@ParamList:@end:,];draftQuery=[,];export=[,];query=[true,];defineInfo=[,];isTab=[,];ButtonType=[,billExport,];ButtonTypeName=[,];varKeyIds=[,];brotherEnter=[,];hasFrame=[,];detTable_list=[,];checkTab=[Y,];popReturnVal=[,];defineOrderBy=[,];statusId=[,];StockNumber=[,];StockFullName=[,];StockAddress=[,];selectType=[endClass,];pageSize=[100,];pageNo=[1,];moduleType=[,];
 [DEBUG] 2017-12-18 15:12:09,051 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,StockNumber,StockFullName,StockType,StockAddress,StockFullNamePYM,StockName,StockContactor,StockTel,statusId from ( select tblStock.classCode as classCode,tblStock.isCatalog as childCount, tblStock.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      tblStock.StockNumber as StockNumber,     tblStock.StockFullName as StockFullName,     tblStock.StockType as StockType,     tblStock.StockAddress as StockAddress,     tblStock.StockFullNamePYM as StockFullNamePYM,     tblStock.StockName as StockName,     tblStock.StockContactor as StockContactor,     tblStock.StockTel as StockTel,     tblStock.statusId as statusId   ,ROW_NUMBER() over(order by     tblStock.StockNumber) as row_id  from tblStock where 1=1 and tblStock.isCatalog=0                                 )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:12:09,056 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 15:12:09,057 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:15:28,825 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:15:28,825 Line:3003 MobileAjax 操作人:;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:15:28,825 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:15:28,826 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 15:15:30,145 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 15:15:30,146 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 15:15:30,146 Line:243 AIOApi op=LOGIN&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:15:30,170 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 15:15:30,190 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 15:15:30,203 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 15:15:30,242 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 15:15:30,679 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:15:30,680 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:15:30,681 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:15:30,682 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 15:15:30,709 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 15:15:30,710 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 15:15:30,711 Line:243 AIOApi op=getEnum&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:15:30,712 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 15:16:04,653 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-18&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-18 15:16:04,653 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-18,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-18 15:16:04,684 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Supplier&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-18 15:16:04,684 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Supplier,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:16:04,685 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('1','3') order by ComNumber
 [DEBUG] 2017-12-18 15:16:04,687 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=CompanyCode&operation=22&BillDate=2017-12-18&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-18 15:16:04,688 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[CompanyCode,];operation=[22,];BillDate=[2017-12-18,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:16:04,691 Line:3434 DynDBManager.popSelect selectName=ProviderInVoiceWithPayDate; sql=select * from (select tblCompany.classCode f1 ,(case when isnull(tblCompany.Discount,0)=0 then 100 else isnull(tblCompany.Discount,0) end) f2 ,case when len(tblCompany.DepartmentCode)>0 then tblCompany.DepartmentCode else '00101' end f3 ,case when len(tblCompany.DepartmentCode)>0 then tblDepartment.DeptFullName else '默认部门' end f4 ,case when len(tblCompany.EmployeeID)>0 then tblCompany.EmployeeID else '1' end f5 ,case when len(tblCompany.EmployeeID)>0 then tblEmployee.EmpFullName else 'admin' end f6 ,CONVERT(varchar(10),dateadd(Day,case tblCompany.SettleCys when 0 then null else tblCompany.SettleCys end,'2017-12-18'),121) f7 ,case tblCompany.InVoiceType when 1 then '0' when 2 then '0' else '0' end f8 ,tblCompany.ComFullName f9 ,tblCompany.ComNumber f10 ,tblCompany.ComFullNamePYM f11 
,tblCompany.isCatalog as childCount,ROW_NUMBER() over( order by tblCompany.ComNumber,tblCompany.ComFullName) as row_id from tblCompany
  left join tblEmployee on tblCompany.EmployeeID=tblEmployee.id
  left join tblDepartment on tblCompany.DepartmentCode=tblDepartment.classCode
      where 1=1  and (tblCompany.ClientFlag=1 or tblCompany.ClientFlag=3)   and (tblCompany.statusId!='-1')) a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 15:16:07,684 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup
 [DEBUG] 2017-12-18 15:16:07,684 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];
 [DEBUG] 2017-12-18 15:16:07,709 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-18 15:16:07,709 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStock&fieldName=StockCode&operation=22&isMain=true&url=@URL:&src=menu&MOID=41&MOOP=add&popupWin=MainPopup&checkTab=Y
 [DEBUG] 2017-12-18 15:16:07,709 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:16:07,710 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStock,];fieldName=[StockCode,];operation=[22,];isMain=[true,];url=[@URL:,];src=[menu,];MOID=[41,];MOOP=[add,];popupWin=[MainPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:16:07,711 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-18 15:16:07,713 Line:3434 DynDBManager.popSelect selectName=Stock; sql=select * from (select tblStock.classCode f1 ,tblStock.StockNumber f2 ,tblStock.StockFullName f3 ,tblStock.StockFullNamePYM f4 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock where 1=1 and tblStock.statusid!='-1' and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 15:16:12,900 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-18 15:16:12,900 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-18 15:16:12,937 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-18 15:16:12,937 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:16:12,938 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-18 15:16:12,938 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 15:16:12,938 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:16:12,943 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 15:16:28,499 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup
 [DEBUG] 2017-12-18 15:16:28,499 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];
 [DEBUG] 2017-12-18 15:16:28,538 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=41&editable=&subSql=
 [DEBUG] 2017-12-18 15:16:28,539 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?keyId=&tableName=tblBuyInStockDet&fieldName=GoodsCode&operation=22&CompanyCode=00003&tblBuyInStockDet_BuyOrderID=&tblBuyInStockDet_BuyAskPriceID=&isMain=false&src=menu&MOID=41&MOOP=add&url=@URL:&popupWin=ChildPopup&checkTab=Y
 [DEBUG] 2017-12-18 15:16:28,539 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[41,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 15:16:28,540 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[,];tableName=[tblBuyInStockDet,];fieldName=[GoodsCode,];operation=[22,];CompanyCode=[00003,];tblBuyInStockDet_BuyOrderID=[,];tblBuyInStockDet_BuyAskPriceID=[,];isMain=[false,];src=[menu,];MOID=[41,];MOOP=[add,];url=[@URL:,];popupWin=[ChildPopup,];checkTab=[Y,];
 [DEBUG] 2017-12-18 15:16:28,541 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 15:16:28,547 Line:3434 DynDBManager.popSelect selectName=GoodsBuy; sql=select * from (select (case when 'PriceNo'='Price' and isnull(tblCustomerPriceDet.BuyPrice,0)!=0 then tblCustomerPriceDet.BuyPrice else tblGoods.PreBuyPrice end) f1 ,tblGoods.classCode f2 ,tblGoodsUnit.UnitD f3 ,tblGoodsUnit.SecUnitD f4 ,tblGoods.GoodsNumber f5 ,tblGoods.GoodsFullName f6 ,tblGoods.GoodsSpec f7 ,tblGoods.BaseUnit f8 ,tblGoods.GoodsFullNamePYM f9 
,tblGoods.isCatalog as childCount,ROW_NUMBER() over( order by tblGoods.GoodsNumber,tblGoods.GoodsFullName) as row_id from tblGoods left join tblGoodsUnit with(index(IX_tblGoodsUnit_refdefault)) on tblGoodsUnit.f_ref=tblGoods.id and tblGoodsUnit.DefaultAssit=1
  left join tblCustomerPriceDet on tblGoods.classcode = tblCustomerPriceDet.GoodsCode and tblCustomerPriceDet.f_ref=(select id from tblCustomerPrice where companyCode='00003') where 1=1 and 1=1  and tblGoods.workFlowNodeName='finish' and tblGoods.statusid!='-1') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 15:16:44,174 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2017-12-18 15:16:44,176 Line:146 BaseAction.execute 操作人:admin;请求数据：conver=[,];operation=[1,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblBuyInStock,];parentCode=[,];button=[,];noback=[false,];fresh=[,];detLineNo=[,];logicValidate=[,];defineInfo=[,];moduleType=[,];parentTableName=[,];winCurIndex=[4,];popWinName=[PopMainOpdiv,];defineName=[,];checkFieldName=[,];isTab=[,];deliverTo=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];OAWorkFlow=[false,];ChangeAmt=[0,];checkPersons=[,];workFlowNode=[,];workFlowNodeName=[,];CurNeedPayAmt=[0,];InvoiceStatus=[0,];NeedPayAmt=[0,];BillNo=[BI1712180001,];BillDate=[2017-12-18,];CompanyCode=[00003,];tblCompany_ComFullName=[麦田食品,];DepartmentCode=[00101,];EmployeeID=[1,];tblEmployee_EmpFullName=[admin,];tblDepartment_DeptFullName=[默认部门,];StockCode=[00001,];tblStock_StockFullName=[总仓1,];InVoiceType=[3,];PayAmount=[0,];ProceDureExp=[0,];AccAmt=[0,];FactOutcome=[0,];freightAcc=[,];freightAmount=[0,];AlreadyPayAmt=[0,];DiscountAmount=[0,];Currency=[,];CurAlrPayAmt=[0,];CurDiscountAmount=[0,];CurProceDureExp=[0,];ProjectCode=[,];Period=[,];PeriodMonth=[,];PeriodYear=[,];InvoiceAmount=[0,];NoInvoiceAmount=[0,];CurBackAmount=[0,];BuyAskPriceID=[,];BuyOrderID=[,];BuyOrderNo=[,];CurAlreadyPayAmt=[0,];BackAmount=[0,];CheckPersont=[,];TrackNo=[,];Discount=[100,];DisAmount=[0,];Tax=[0,];PayDate=[,];CurrencyRate=[1,];TotalAmount=[30,];TotalTaxAmount=[30,];TotalCoTaxAmt=[0,];CurTotalAmount=[30,];CertificateNo=[,];AfterChangeAmt=[,];CurAfterChangeAmt=[,];CurChangeAmt=[,];printCount=[0,];SCompanyID=[,];statusId=[0,];finishTime=[,];lastUpdateBy=[,];lastUpdateTime=[,];createBy=[,];createTime=[,];tblBuyInStockDetPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyPayAccountPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblBuyInStockDet_tblGoods_GoodsNumber=[bl0001,bl0002,];tblBuyInStockDet_tblGoods_GoodsFullName=[叉烧包,流沙包,];tblBuyInStockDet_tblGoods_GoodsSpec=[,,];tblBuyInStockDet_tblGoods_BaseUnit=[,,];tblBuyInStockDet_Qty=[10,10,];tblBuyInStockDet_Price=[1,2,];tblBuyInStockDet_Amount=[10,20,];tblBuyInStockDet_Remark=[,,];tblBuyInStockDet_StockCode=[,,];tblBuyInStockDet_BuyOrderID=[,,];tblBuyInStockDet_BuyAskPriceID=[,,];tblBuyInStockDet_SalesOutID=[,,];tblBuyInStockDet_GoodsCode=[0000300001,0000300002,];tblBuyInStockDet_BatchNo=[,,];tblBuyInStockDet_Inch=[,,];tblBuyInStockDet_Hue=[,,];tblBuyInStockDet_yearNO=[,,];tblBuyInStockDet_ProDate=[,,];tblBuyInStockDet_Availably=[,,];tblBuyInStockDet_Seq=[,,];tblBuyInStockDet_Discount=[100,100,];tblBuyInStockDet_DisPrice=[1,2,];tblBuyInStockDet_DisBackAmt=[10,20,];tblBuyInStockDet_DisAmount=[0,0,];tblBuyInStockDet_TaxPrice=[1,2,];tblBuyInStockDet_TaxAmount=[10,20,];tblBuyInStockDet_CoTaxAmt=[0,0,];tblBuyInStockDet_CurPrice=[1,2,];tblBuyInStockDet_CurAmount=[10,20,];tblBuyInStockDet_ApportionAmt=[,,];tblBuyInStockDet_SourceID=[,,];tblBuyInStockDet_InvoiceAmount=[0,0,];tblBuyInStockDet_PresentSampleType=[,,];tblBuyInStockDet_NotPayQty=[,,];tblBuyInStockDet_PayQty=[,,];tblBuyInStockDet_SecQty=[0,0,];tblBuyInStockDet_BaseQty=[0,0,];tblBuyInStockDet_CheckBarCode=[,,];tblBuyInStockDet_BackPayQty=[,,];tblBuyInStockDet_PreferAmount=[,,];tblBuyInStockDet_detsId=[,,];tblBuyPayAccount_Paytype=[1,];tblBuyPayAccount_tblAccTypeInfo_AccName=[,];tblBuyPayAccount_Amount=[0,];tblBuyPayAccount_Remark=[,];tblBuyPayAccount_Account=[,];tblBuyPayAccount_ExeBalFcAmt=[,];tblBuyPayAccount_detsId=[,];Remark=[,];
 [DEBUG] 2017-12-18 15:16:44,177 Line:3843 添加单据desingId=null工作流designId=eae3edac_0906121936579370110
 [DEBUG] 2017-12-18 15:16:44,198 Line:5847  INSERT INTO  tblBuyInStock(ChangeAmt,checkPersons,id,workFlowNode,workFlowNodeName,CurNeedPayAmt,InvoiceStatus,NeedPayAmt,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,StockCode,InVoiceType,PayAmount,ProceDureExp,AccAmt,FactOutcome,freightAcc,freightAmount,AlreadyPayAmt,DiscountAmount,Currency,CurAlrPayAmt,CurDiscountAmount,CurProceDureExp,ProjectCode,Period,PeriodMonth,PeriodYear,Remark,InvoiceAmount,NoInvoiceAmount,CurBackAmount,BuyAskPriceID,BuyOrderID,BuyOrderNo,CurAlreadyPayAmt,BackAmount,CheckPersont,TrackNo,Discount,DisAmount,Tax,PayDate,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,CurTotalAmount,Attachment,CertificateNo,AfterChangeAmt,CurAfterChangeAmt,CurChangeAmt,printCount,SCompanyID,statusId,finishTime,lastUpdateBy,lastUpdateTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:16:44,199 Line:5853 1:0.0
 [DEBUG] 2017-12-18 15:16:44,199 Line:5853 2:
 [DEBUG] 2017-12-18 15:16:44,199 Line:5853 3:dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,199 Line:5853 4:-1
 [DEBUG] 2017-12-18 15:16:44,199 Line:5853 5:finish
 [DEBUG] 2017-12-18 15:16:44,199 Line:5853 6:0.0
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 7:0
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 8:0.0
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 9:BI1712180001
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 10:2017-12-18
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 11:00003
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 12:00101
 [DEBUG] 2017-12-18 15:16:44,200 Line:5853 13:1
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 14:00001
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 15:3
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 16:0.0
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 17:0.0
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 18:0.0
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 19:0.0
 [DEBUG] 2017-12-18 15:16:44,201 Line:5853 20:
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 21:0.0
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 22:0.0
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 23:0.0
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 24:
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 25:0.0
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 26:0.0
 [DEBUG] 2017-12-18 15:16:44,202 Line:5853 27:0.0
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 28:
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 29:12
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 30:12
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 31:2017
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 32:
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:16:44,203 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 36:
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 37:
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 38:
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 40:0.0
 [DEBUG] 2017-12-18 15:16:44,204 Line:5853 41:
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 42:
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 43:100.0
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 44:0.0
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 45:0.0
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 46:
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 47:1.0
 [DEBUG] 2017-12-18 15:16:44,205 Line:5853 48:30.0
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 49:30.0
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 50:0.0
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 51:30.0
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 52:
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 53:
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 54:0.0
 [DEBUG] 2017-12-18 15:16:44,206 Line:5853 55:0.0
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 56:0.0
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 57:0
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 58:00001
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 59:0
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 60:2017-12-18 15:16:44
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 61:1
 [DEBUG] 2017-12-18 15:16:44,207 Line:5853 62:2017-12-18 15:16:44
 [DEBUG] 2017-12-18 15:16:44,208 Line:5853 63:1
 [DEBUG] 2017-12-18 15:16:44,208 Line:5853 64:2017-12-18 15:16:44
 [DEBUG] 2017-12-18 15:16:44,213 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:16:44,214 Line:5853 1:dc4b4f2e_1712181516442130038
 [DEBUG] 2017-12-18 15:16:44,214 Line:5853 2:dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,214 Line:5853 3:
 [DEBUG] 2017-12-18 15:16:44,214 Line:5853 4:
 [DEBUG] 2017-12-18 15:16:44,214 Line:5853 5:
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 6:
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 7:0000300001
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 8:
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 9:
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 10:
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 11:
 [DEBUG] 2017-12-18 15:16:44,215 Line:5853 12:
 [DEBUG] 2017-12-18 15:16:44,216 Line:5853 13:
 [DEBUG] 2017-12-18 15:16:44,216 Line:5853 14:
 [DEBUG] 2017-12-18 15:16:44,216 Line:5853 15:10.0
 [DEBUG] 2017-12-18 15:16:44,216 Line:5853 16:1.0
 [DEBUG] 2017-12-18 15:16:44,216 Line:5853 17:10.0
 [DEBUG] 2017-12-18 15:16:44,216 Line:5853 18:0.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 19:0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 20:0.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 21:0.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 22:0.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 23:100.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 24:1.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 25:10.0
 [DEBUG] 2017-12-18 15:16:44,217 Line:5853 26:0.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 27:1.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 28:10.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 29:0.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 30:1.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 31:10.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 32:0.0
 [DEBUG] 2017-12-18 15:16:44,218 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 36:0.0
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 37:
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 38:0.0
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:16:44,219 Line:5853 40:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 41:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 42:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 43:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 44:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 45:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 46:0.0
 [DEBUG] 2017-12-18 15:16:44,220 Line:5853 47:0
 [DEBUG] 2017-12-18 15:16:44,221 Line:5853 48:0.0
 [DEBUG] 2017-12-18 15:16:44,221 Line:5853 49:0.0
 [DEBUG] 2017-12-18 15:16:44,221 Line:5853 50:0
 [DEBUG] 2017-12-18 15:16:44,221 Line:5853 51:
 [DEBUG] 2017-12-18 15:16:44,221 Line:5853 52:0.0
 [DEBUG] 2017-12-18 15:16:44,221 Line:5853 53:0.0
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 54:0.0
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 55:0
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 56:0
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 57:
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 58:0.0
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 59:0.0
 [DEBUG] 2017-12-18 15:16:44,222 Line:5853 60:
 [DEBUG] 2017-12-18 15:16:44,223 Line:5853 61:0.0
 [DEBUG] 2017-12-18 15:16:44,223 Line:5853 62:00001
 [DEBUG] 2017-12-18 15:16:44,237 Line:5847  INSERT INTO  tblBuyInStockDet(id,f_ref,StockCode,BuyOrderID,BuyAskPriceID,SalesOutID,GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,Seq,Qty,Price,Amount,freightAmount,UnitIntQty,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,PreferBackAmount,BackAmt,ApportionAmt,PrePayAmt,PayAmt,SourceID,TotalPayAmt,CurPayAmt,CurPrePayAmt,CurTotalPayAmt,BackQty,FactInQty,NoInvoiceAmount,NotInvoiceQty,InQty,InStatus,InvoiceAmount,InvoiceQty,InvoiceStatus,PresentSampleType,NeedPayAmt,NotPayQty,PayQty,SecQty,BaseQty,CheckBarCode,BackPayQty,PreferAmount,Remark,CurNeedPayAmt,SCompanyID) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2017-12-18 15:16:44,237 Line:5853 1:dc4b4f2e_1712181516442370039
 [DEBUG] 2017-12-18 15:16:44,237 Line:5853 2:dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,237 Line:5853 3:
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 4:
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 5:
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 6:
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 7:0000300002
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 8:
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 9:
 [DEBUG] 2017-12-18 15:16:44,238 Line:5853 10:
 [DEBUG] 2017-12-18 15:16:44,239 Line:5853 11:
 [DEBUG] 2017-12-18 15:16:44,239 Line:5853 12:
 [DEBUG] 2017-12-18 15:16:44,239 Line:5853 13:
 [DEBUG] 2017-12-18 15:16:44,239 Line:5853 14:
 [DEBUG] 2017-12-18 15:16:44,239 Line:5853 15:10.0
 [DEBUG] 2017-12-18 15:16:44,239 Line:5853 16:2.0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 17:20.0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 18:0.0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 19:0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 20:0.0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 21:0.0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 22:0.0
 [DEBUG] 2017-12-18 15:16:44,240 Line:5853 23:100.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 24:2.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 25:20.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 26:0.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 27:2.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 28:20.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 29:0.0
 [DEBUG] 2017-12-18 15:16:44,241 Line:5853 30:2.0
 [DEBUG] 2017-12-18 15:16:44,242 Line:5853 31:20.0
 [DEBUG] 2017-12-18 15:16:44,242 Line:5853 32:0.0
 [DEBUG] 2017-12-18 15:16:44,242 Line:5853 33:0.0
 [DEBUG] 2017-12-18 15:16:44,242 Line:5853 34:0.0
 [DEBUG] 2017-12-18 15:16:44,242 Line:5853 35:0.0
 [DEBUG] 2017-12-18 15:16:44,243 Line:5853 36:0.0
 [DEBUG] 2017-12-18 15:16:44,243 Line:5853 37:
 [DEBUG] 2017-12-18 15:16:44,243 Line:5853 38:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 39:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 40:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 41:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 42:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 43:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 44:0.0
 [DEBUG] 2017-12-18 15:16:44,244 Line:5853 45:0.0
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 46:0.0
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 47:0
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 48:0.0
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 49:0.0
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 50:0
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 51:
 [DEBUG] 2017-12-18 15:16:44,245 Line:5853 52:0.0
 [DEBUG] 2017-12-18 15:16:44,246 Line:5853 53:0.0
 [DEBUG] 2017-12-18 15:16:44,246 Line:5853 54:0.0
 [DEBUG] 2017-12-18 15:16:44,246 Line:5853 55:0
 [DEBUG] 2017-12-18 15:16:44,246 Line:5853 56:0
 [DEBUG] 2017-12-18 15:16:44,246 Line:5853 57:
 [DEBUG] 2017-12-18 15:16:44,246 Line:5853 58:0.0
 [DEBUG] 2017-12-18 15:16:44,247 Line:5853 59:0.0
 [DEBUG] 2017-12-18 15:16:44,247 Line:5853 60:
 [DEBUG] 2017-12-18 15:16:44,247 Line:5853 61:0.0
 [DEBUG] 2017-12-18 15:16:44,247 Line:5853 62:00001
 [DEBUG] 2017-12-18 15:16:44,249 Line:313 exeCondition:tblBuyInStock_Add :30 < 0
 [DEBUG] 2017-12-18 15:16:44,250 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,250 Line:313 exeCondition:tblBuyInStock_Add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2017-12-18 15:16:44,251 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,251 Line:313 exeCondition:tblBuyInStock_Add :0 < 0
 [DEBUG] 2017-12-18 15:16:44,252 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,252 Line:313 exeCondition:tblBuyInStock_Add :0>0&&''.length==0
 [DEBUG] 2017-12-18 15:16:44,253 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,253 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-18 15:16:44,254 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,254 Line:313 exeCondition:tblBuyInStock_Add :''.length>0
 [DEBUG] 2017-12-18 15:16:44,255 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,255 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-18 15:16:44,255 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:44,256 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,billDate as BuyInDate from tblBuyOrder a,tblBuyInStockDet b where b.f_ref=? and b.BuyOrderID=a.id and a.BillDate>?
 [DEBUG] 2017-12-18 15:16:44,256 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,256 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,257 Line:988 2值：2017-12-18
 [DEBUG] 2017-12-18 15:16:44,266 Line:1043 ---上述语句时间---10
 [DEBUG] 2017-12-18 15:16:44,267 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-18 15:16:44,268 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,268 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyOrder a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyOrderID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-18 15:16:44,268 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,269 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,269 Line:988 2值：00003
 [DEBUG] 2017-12-18 15:16:44,279 Line:1043 ---上述语句时间---11
 [DEBUG] 2017-12-18 15:16:44,279 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-18 15:16:44,280 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,280 Line:921 自定义执行的语句显示： tblBuyInStock_Add_QuoteOrder_Validate :select a.BillNo,c.ComFullName from tblBuyAskPrice a,tblBuyInStockDet b,tblCompany c where b.f_ref=? and b.BuyAskPriceID=a.id and a.CompanyCode=c.classCode and a.CompanyCode!=?
 [DEBUG] 2017-12-18 15:16:44,280 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,280 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,280 Line:988 2值：00003
 [DEBUG] 2017-12-18 15:16:44,288 Line:1043 ---上述语句时间---8
 [DEBUG] 2017-12-18 15:16:44,288 Line:313 exeCondition:tblBuyInStock_Add_QuoteOrder_Validate :'null'!='null'
 [DEBUG] 2017-12-18 15:16:44,289 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,290 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select count(0) NoQuote from tblBuyInStockDet a left join tblBuyOrderDet b on isnull(a.BuyOrderID,'')=b.f_ref and a.GoodsCode=b.GoodsCode and (a.BatchNo=b.BatchNo or b.BatchNo='') and (a.Inch=b.Inch or b.Inch='') and (a.Hue=b.Hue or b.Hue='') and (a.yearNo=b.yearNo or b.yearNo='') and (a.ProDate=b.ProDate or b.ProDate='') and (a.Availably=b.Availably or b.Availably='') where ? ='true' and a.f_ref=? and b.id is null
 [DEBUG] 2017-12-18 15:16:44,290 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,291 Line:988 1值：false
 [DEBUG] 2017-12-18 15:16:44,291 Line:988 2值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,302 Line:1025 query condition columnName:NoQuote----value:0
 [DEBUG] 2017-12-18 15:16:44,302 Line:1043 ---上述语句时间---13
 [DEBUG] 2017-12-18 15:16:44,302 Line:313 exeCondition:tblBuyInStock_Add :0>0
 [DEBUG] 2017-12-18 15:16:44,303 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,303 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblBuyOrder.BillNo as BuyOrderID from tblBuyInStock left join tblBuyInStockDet on tblBuyInStock.id=tblBuyInStockDet.f_ref left join tblBuyOrderDet on tblBuyOrderDet.id=tblBuyInStockDet.SourceID inner join tblBuyOrder on tblBuyOrder.id=tblBuyOrderDet.f_ref where tblBuyInStockDet.f_ref=? and tblBuyInStock.InVoiceType!=tblBuyOrder.InVoiceType
 [DEBUG] 2017-12-18 15:16:44,303 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,304 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,309 Line:1043 ---上述语句时间---6
 [DEBUG] 2017-12-18 15:16:44,309 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,310 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,310 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-18 15:16:44,310 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,310 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,313 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:44,313 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,315 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,315 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsQ from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Qty,0)<=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=?
 [DEBUG] 2017-12-18 15:16:44,315 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,315 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,317 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:16:44,317 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,318 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,318 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select b.GoodsFullName as GoodsP,b.garniture from tblBuyInStockDet a,tblGoods b where (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0)) and b.classCode=a.GoodsCode and a.f_ref=? and a.PresentSampleType not in ('1','2')
 [DEBUG] 2017-12-18 15:16:44,318 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,319 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,323 Line:1043 ---上述语句时间---5
 [DEBUG] 2017-12-18 15:16:44,323 Line:313 exeCondition:tblBuyInStock_Add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,324 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,324 Line:313 exeCondition:tblBuyInStock_Add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,325 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,325 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select tblGoods.GoodsFullName as GoodsSample from tblBuyInStockDet,tblGoods where isnull(tblBuyInStockDet.Price,0)!=0 and tblGoods.classCode=tblBuyInStockDet.GoodsCode and f_ref=? and tblBuyInStockDet.PresentSampleType in ('1','2')
 [DEBUG] 2017-12-18 15:16:44,325 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,325 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,328 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:44,329 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,329 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,330 Line:313 exeCondition:tblBuyInStock_Add :false==true
 [DEBUG] 2017-12-18 15:16:44,330 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,330 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select 'disCountError' as disCountError from tblBuyInStockDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2017-12-18 15:16:44,330 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,331 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,333 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:44,333 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,334 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,334 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select dbo.getDigits('tblBuyInStockDet','TaxAmount',sum(tblBuyInStockDet.TaxAmount)) as SumDetAmt,dbo.getDigits('tblBuyInStockDet','TaxAmount',(cast(? as numeric(18,8))+cast(? as numeric(18,8)))) as sumMainAmt from tblBuyInStockDet where  tblBuyInStockDet.f_ref=?
 [DEBUG] 2017-12-18 15:16:44,334 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,334 Line:988 1值：30
 [DEBUG] 2017-12-18 15:16:44,335 Line:988 2值：0
 [DEBUG] 2017-12-18 15:16:44,335 Line:988 3值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,369 Line:1025 query condition columnName:SumDetAmt----value:30.0
 [DEBUG] 2017-12-18 15:16:44,369 Line:1025 query condition columnName:sumMainAmt----value:30.0
 [DEBUG] 2017-12-18 15:16:44,370 Line:1043 ---上述语句时间---36
 [DEBUG] 2017-12-18 15:16:44,370 Line:313 exeCondition:tblBuyInStock_Add :30.0!=30.0
 [DEBUG] 2017-12-18 15:16:44,370 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,371 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select GoodsFullName as GoodsSeq from tblBuyInStockDet a left join tblgoods c on c.classCode=a.GoodsCode where c.seqIsUsed=0 and len(isnull(a.seq,''))=0 and (select isUsed from tblGoodsAttribute where propName='Seq')=1 and a.f_ref=?
 [DEBUG] 2017-12-18 15:16:44,371 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,371 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,385 Line:1043 ---上述语句时间---14
 [DEBUG] 2017-12-18 15:16:44,385 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,386 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,387 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'exisAccErr' as exisAccErr from tblBuyPayAccount where tblBuyPayAccount.f_ref=? and (len(isnull(tblBuyPayAccount.Account,''))>0 and isnull(tblBuyPayAccount.Amount,0)=0)
 [DEBUG] 2017-12-18 15:16:44,387 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,387 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,390 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:44,390 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'!='null'
 [DEBUG] 2017-12-18 15:16:44,391 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,391 Line:921 自定义执行的语句显示： tblBuyInStock_Add_ManyAccount_Validate :select 'sameAcc' as sameAcc from tblBuyPayAccount where f_ref=? group by Account having count(Account)>1
 [DEBUG] 2017-12-18 15:16:44,391 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,391 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,394 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:44,394 Line:313 exeCondition:tblBuyInStock_Add_ManyAccount_Validate :'null'=='sameAcc'
 [DEBUG] 2017-12-18 15:16:44,395 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,395 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2017-12-18 15:16:44,396 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,396 Line:988 1值：
 [DEBUG] 2017-12-18 15:16:44,396 Line:988 2值：00001
 [DEBUG] 2017-12-18 15:16:44,404 Line:1043 ---上述语句时间---9
 [DEBUG] 2017-12-18 15:16:44,404 Line:921 自定义执行的语句显示： tblBuyInStock_Add :select Account as AnyAccount from tblBuyPayAccount left join tblAccTypeinfo on tblAccTypeinfo.Accnumber=tblBuyPayAccount.Account where f_ref=? and ((len(?) > 0 and tblAccTypeInfo.Currency!=?) or (len(?)=0 and len(tblAccTypeInfo.Currency)!=0))
 [DEBUG] 2017-12-18 15:16:44,405 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:44,405 Line:988 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,405 Line:988 2值：
 [DEBUG] 2017-12-18 15:16:44,405 Line:988 3值：
 [DEBUG] 2017-12-18 15:16:44,405 Line:988 4值：
 [DEBUG] 2017-12-18 15:16:44,408 Line:1043 ---上述语句时间---4
 [DEBUG] 2017-12-18 15:16:44,409 Line:313 exeCondition:tblBuyInStock_Add :''.length>0 && 1 <= 0
 [DEBUG] 2017-12-18 15:16:44,867 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,867 Line:313 exeCondition:tblBuyInStock_Add :'null' != 'null'
 [DEBUG] 2017-12-18 15:16:44,868 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,868 Line:313 exeCondition:tblBuyInStock_Add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2017-12-18 15:16:44,869 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,869 Line:313 exeCondition:tblBuyInStock_Add :'false'=='true'
 [DEBUG] 2017-12-18 15:16:44,870 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,870 Line:313 exeCondition:tblBuyInStock_Add :true
 [DEBUG] 2017-12-18 15:16:44,870 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:44,871 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStock set AfterChangeAmt=TotalTaxAmount,CurAfterChangeAmt=CurTotalAmount,NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0,NeedPayAmt=TotalTaxAmount-PayAmount+(case when freightAcc like '2202%' then freightAmount else 0 end),CurNeedPayAmt=round(CurTotalAmount-CurAlrPayAmt+(case when freightAcc like '2202%' then freightAmount/CurrencyRate else 0 end),?),AlreadyPayAmt=PayAmount,CurAlreadyPayAmt=CurAlrPayAmt,BackAmount=0,CurBackAmount=0,CertificateNo='' where id=?
 [DEBUG] 2017-12-18 15:16:44,871 Line:1154 1整数 值：2
 [DEBUG] 2017-12-18 15:16:44,872 Line:1157 2值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,876 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=1
 [DEBUG] 2017-12-18 15:16:44,876 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-18 15:16:44,877 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set PreferBackAmount=case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount=0 then 0 else round(tblBuyInStock.TotalTaxAmount*tblBuyInStockDet.TaxAmount/(tblBuyInStock.TotalTaxAmount+tblBuyInStock.DiscountAmount),?) end  FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-18 15:16:44,877 Line:1154 1整数 值：2
 [DEBUG] 2017-12-18 15:16:44,877 Line:1157 2值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,877 Line:1157 3值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,888 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=2
 [DEBUG] 2017-12-18 15:16:44,888 Line:229 ************上述语句执行时间：11
 [DEBUG] 2017-12-18 15:16:44,889 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set tblBuyInStockDet.PreferAmount=tblBuyInStockDet.TaxAmount-tblBuyInStockDet.PreferBackAmount FROM tblBuyInStock where tblBuyInStockDet.f_ref=? and tblBuyInstock.id=?
 [DEBUG] 2017-12-18 15:16:44,890 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,890 Line:1157 2值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,897 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=2
 [DEBUG] 2017-12-18 15:16:44,897 Line:229 ************上述语句执行时间：8
 [DEBUG] 2017-12-18 15:16:44,897 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set NoInvoiceAmount=PreferBackAmount,InvoiceAmount=0,InvoiceStatus=0,FactInQty=Qty,BackQty=0,InvoiceQty=0,NotInvoiceQty=Qty where f_ref=?
 [DEBUG] 2017-12-18 15:16:44,898 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,900 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=2
 [DEBUG] 2017-12-18 15:16:44,900 Line:229 ************上述语句执行时间：3
 [DEBUG] 2017-12-18 15:16:44,900 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set freightAmount=case when (tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)=0 then 0 else TaxAmount/(tblBuyInstock.TotalTaxAmount+tblBuyInstock.DiscountAmount)*tblBuyInstock.freightAmount end from tblBuyInstock where tblBuyInstock.id=? and f_ref=tblBuyInstock.id
 [DEBUG] 2017-12-18 15:16:44,901 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,905 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=2
 [DEBUG] 2017-12-18 15:16:44,905 Line:229 ************上述语句执行时间：5
 [DEBUG] 2017-12-18 15:16:44,906 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'false'=='false'
 [DEBUG] 2017-12-18 15:16:44,906 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:44,907 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set StockCode=(select StockCode from tblBuyInStock where id=?) where f_ref=?
 [DEBUG] 2017-12-18 15:16:44,907 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,907 Line:1157 2值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,910 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=2
 [DEBUG] 2017-12-18 15:16:44,911 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-12-18 15:16:44,911 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :''.length>0
 [DEBUG] 2017-12-18 15:16:44,912 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:44,912 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :true
 [DEBUG] 2017-12-18 15:16:44,913 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:44,913 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:{call proc_BuyUpdateOrderQty(?,?,?,?)}
 [DEBUG] 2017-12-18 15:16:44,913 Line:1270 dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,913 Line:1270 add
 [DEBUG] 2017-12-18 15:16:44,982 Line:425 ************上述语句执行时间：69
 [DEBUG] 2017-12-18 15:16:44,982 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'true'=='true'
 [DEBUG] 2017-12-18 15:16:44,983 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:44,983 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-18 15:16:44,983 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:44,992 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-18 15:16:44,992 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-12-18 15:16:44,992 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_AccBefore:update tblBuyInStockDet set ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblBuyInStock  a join tblBuyInStockDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblBuyInStockDet.id=a.id
 [DEBUG] 2017-12-18 15:16:44,993 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:45,001 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_AccBefore,  影响行数=0
 [DEBUG] 2017-12-18 15:16:45,001 Line:408 ************上述语句执行时间：9
 [DEBUG] 2017-12-18 15:16:45,001 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-18 15:16:45,002 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,002 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' != '0'
 [DEBUG] 2017-12-18 15:16:45,003 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,003 Line:313 exeCondition:tblBuyInStock_Add_AccBefore :'0' == '0' && false==false
 [DEBUG] 2017-12-18 15:16:45,004 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,037 Line:313 exeCondition:tblBuyInStock_Add_One :'PriceNo'!='PriceNo'||'false'=='true'
 [DEBUG] 2017-12-18 15:16:45,038 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,039 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-18 15:16:45,040 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,040 Line:313 exeCondition:tblBuyInStock_Add_One :'0' != '0'
 [DEBUG] 2017-12-18 15:16:45,042 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,042 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-18 15:16:45,043 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,044 Line:313 exeCondition:tblBuyInStock_Add_One :""!=""
 [DEBUG] 2017-12-18 15:16:45,045 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,045 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-18 15:16:45,046 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,047 Line:1081 自定义执行的语句显示： tblBuyInStock_Add_One:update tblBuyInStockDet set NotPayQty=Qty,PayQty=0 where f_ref=?
 [DEBUG] 2017-12-18 15:16:45,047 Line:1157 1值：dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:45,050 Line:1163 DefineSQLBean.execSql  define=tblBuyInStock_Add_One,  影响行数=2
 [DEBUG] 2017-12-18 15:16:45,051 Line:408 ************上述语句执行时间：4
 [DEBUG] 2017-12-18 15:16:45,051 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-18 15:16:45,052 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,052 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInPayAmort(?,?,?,?)}
 [DEBUG] 2017-12-18 15:16:45,052 Line:1270 dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:45,052 Line:1270 add
 [DEBUG] 2017-12-18 15:16:45,103 Line:425 ************上述语句执行时间：51
 [DEBUG] 2017-12-18 15:16:45,104 Line:313 exeCondition:tblBuyInStock_Add_One :3!=2
 [DEBUG] 2017-12-18 15:16:45,105 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,105 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertStockDetGM(@Period=?,@PeriodYear=?,@PeriodMonth=?,@GoodsCode=?,@StockCode=?,@BillID=?,@BillType=?,@BillDate=?,@BillNo=?,@InstoreQty=?,@InstorePrice=?,@InstoreAmount=?,@createBy=?,@lastUpdateBy=?,@createTime=?,@lastUpdateTime=?,@SCompanyID=?,@MRemark=?,@DRemark=?,@SourceID=?,@CompanyCode=?,@EmployeeID=?,@DepartmentCode=?,@SalesPrice=?,@SalesAmount=?,@SalesQty=?,@Amount=?,@Price=?,@DiscountAmount=?,@TrackNo=?,@PresentSampleType=?,@from=?,@where=?,@retCode=?,@retVal=?)}
 [DEBUG] 2017-12-18 15:16:45,105 Line:1270 12
 [DEBUG] 2017-12-18 15:16:45,105 Line:1270 2017
 [DEBUG] 2017-12-18 15:16:45,105 Line:1270 12
 [DEBUG] 2017-12-18 15:16:45,106 Line:1270 tblBuyInStockDet.GoodsCode
 [DEBUG] 2017-12-18 15:16:45,106 Line:1270 tblBuyInStockDet.StockCode
 [DEBUG] 2017-12-18 15:16:45,106 Line:1270 dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:45,106 Line:1270 tblBuyInStock
 [DEBUG] 2017-12-18 15:16:45,106 Line:1270 2017-12-18
 [DEBUG] 2017-12-18 15:16:45,106 Line:1270 BI1712180001
 [DEBUG] 2017-12-18 15:16:45,107 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-18 15:16:45,107 Line:1270 (tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty
 [DEBUG] 2017-12-18 15:16:45,107 Line:1270 tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount
 [DEBUG] 2017-12-18 15:16:45,107 Line:1270 1
 [DEBUG] 2017-12-18 15:16:45,107 Line:1270 1
 [DEBUG] 2017-12-18 15:16:45,107 Line:1270 2017-12-18 15:16:44
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 2017-12-18 15:16:44
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 00001
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 tblBuyInStockDet.Remark
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 tblBuyInStockDet.id
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 00003
 [DEBUG] 2017-12-18 15:16:45,108 Line:1270 1
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 00101
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 tblBuyInStockDet.TaxPrice
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 tblBuyInStockDet.TaxAmount
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 tblBuyInStockDet.Qty
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 tblBuyInStockDet.DisAmount
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 tblBuyInStockDet.DisPrice
 [DEBUG] 2017-12-18 15:16:45,109 Line:1270 0
 [DEBUG] 2017-12-18 15:16:45,110 Line:1270 tblBuyInStockDet.TrackNo
 [DEBUG] 2017-12-18 15:16:45,110 Line:1270 tblBuyInStockDet.PresentSampleType
 [DEBUG] 2017-12-18 15:16:45,110 Line:1270 tblBuyInStockDet
 [DEBUG] 2017-12-18 15:16:45,110 Line:1270 f_ref='dc4b4f2e_1712181516441780037'
 [DEBUG] 2017-12-18 15:16:45,309 Line:1292 存储过程内部信息： select ROW_NUMBER() over(order by tblBuyInStockDet.id),'dc4b4f2e_1712181516441780037','2017-12-18','BI1712180001','tblBuyInStock',12,2017,12,'00003','1','00101','',tblBuyInStockDet.id,tblBuyInStockDet.TrackNo,tblBuyInStockDet.Remark,tblBuyInStockDet.GoodsCode,tblBuyInStockDet.StockCode,LTRIM(RTRIM(BatchNo)),LTRIM(RTRIM(Inch)),LTRIM(RTRIM(Hue)),LTRIM(RTRIM(yearNO)),LTRIM(RTRIM(ProDate)),LTRIM(RTRIM(Availably)),Seq,0,tblBuyInStockDet.Qty,(tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount)/tblBuyInStockDet.Qty,tblBuyInStockDet.TaxAmount+tblBuyInStockDet.freightAmount,0,0,0,0,0,0,tblBuyInStockDet.Qty,tblBuyInStockDet.TaxPrice,tblBuyInStockDet.TaxAmount,tblBuyInStockDet.DisPrice,tblBuyInStockDet.DisAmount,0,0,tblBuyInStockDet.PresentSampleType,'',0,'1','1','2017-12-18 15:16:44','2017-12-18 15:16:44','00001' from tblBuyInStockDet where f_ref='dc4b4f2e_1712181516441780037' order by tblBuyInStockDet.id
 [DEBUG] 2017-12-18 15:16:45,309 Line:1292 存储过程内部信息： 2
 [DEBUG] 2017-12-18 15:16:45,309 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-18 15:16:45,310 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-18 15:16:45,310 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-18 15:16:45,310 Line:1292 存储过程内部信息： ************
 [DEBUG] 2017-12-18 15:16:45,310 Line:425 ************上述语句执行时间：205
 [DEBUG] 2017-12-18 15:16:45,310 Line:313 exeCondition:tblBuyInStock_Add_One :3==2
 [DEBUG] 2017-12-18 15:16:45,311 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,311 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-18 15:16:45,312 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,314 Line:921 自定义执行的语句显示： validateSameSeq :select 'isUsed' as isUseSeq from tblGoodsAttribute where propName='Seq' and isUsed=1
 [DEBUG] 2017-12-18 15:16:45,315 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:45,316 Line:1043 ---上述语句时间---2
 [DEBUG] 2017-12-18 15:16:45,317 Line:313 exeCondition:validateSameSeq :'null'!='null'
 [DEBUG] 2017-12-18 15:16:45,317 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,318 Line:313 exeCondition:validateSameSeq :''!=''
 [DEBUG] 2017-12-18 15:16:45,318 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,318 Line:313 exeCondition:tblBuyInStock_Add_One :'add' == 'update'
 [DEBUG] 2017-12-18 15:16:45,319 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,319 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(cast(? as numeric(18,8))-cast(? as numeric(18,8))) as CRNeedPayAmt,cast(? as numeric(18,8))*cast(? as numeric(18,8)) as freightAmountCur
 [DEBUG] 2017-12-18 15:16:45,320 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:45,320 Line:988 1值：30
 [DEBUG] 2017-12-18 15:16:45,320 Line:988 2值：0
 [DEBUG] 2017-12-18 15:16:45,320 Line:988 3值：30
 [DEBUG] 2017-12-18 15:16:45,320 Line:988 4值：0
 [DEBUG] 2017-12-18 15:16:45,320 Line:988 5值：0
 [DEBUG] 2017-12-18 15:16:45,321 Line:988 6值：1
 [DEBUG] 2017-12-18 15:16:45,321 Line:1023 query condition columnName:RNeedPayAmt----value:30.00000000
 [DEBUG] 2017-12-18 15:16:45,322 Line:1023 query condition columnName:CRNeedPayAmt----value:30.00000000
 [DEBUG] 2017-12-18 15:16:45,322 Line:1023 query condition columnName:freightAmountCur----value:0E-16
 [DEBUG] 2017-12-18 15:16:45,322 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:45,322 Line:313 exeCondition:tblBuyInStock_Add_One :'true'=='true'
 [DEBUG] 2017-12-18 15:16:45,323 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,374 Line:1361 自定义执行的语句显示： tblBuyInStock_Add_One:凭证模块--tblBuyInStock
 [DEBUG] 2017-12-18 15:16:45,380 Line:6876  DynDBManager. genCertificate 取表相关数据sql=select PeriodYear  as PeriodYear,Period  as Period, PeriodMonth as PeriodMonth,a.workFlowNodeName,CertificateNo,a.billNo,a.BillDate,a.createBy,a.createTime,a.lastUpdateBy,a.lastUpdateTime,a.SCompanyID,b.id EmployeeID,b.empFullName,a.DepartmentCode as DepartmentCode ,c.deptFullName as deptFullName, d.ComFullName as ComFullName from tblBuyInStock a left join tblEmployee b on  a.EmployeeId=b.id left join tblDepartment c on a.departmentCode=c.classCode left join tblCompany d on a.CompanyCode=d.classCode  where a.id=?
 [DEBUG] 2017-12-18 15:16:45,390 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'22210101' AccCode,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt else 0 end DebitAmount,case when (tblBuyInStock.InVoiceType=2 and tblBuyInStock.TotalCoTaxAmt>0) then tblBuyInStock.TotalCoTaxAmt/tblBuyInStock.CurrencyRate else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,396 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount else 0 end LendAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount>0 then tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,402 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'660303' AccCode,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.ProceDureExp else 0 end DebitAmount,case when tblBuyInStock.ProceDureExp>0 then tblBuyInStock.CurProceDureExp else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,408 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblBuyPayAccount.Account AccCode,0 DebitAmount,0 DebitCurrencyAmount,tblBuyPayAccount.Amount LendAmount,tblBuyPayAccount.ExeBalFcAmt LendCurrencyAmount from   tblBuyInStock join tblBuyPayAccount  on tblBuyInStock.id=tblBuyPayAccount.f_ref  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,414 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'630106' AccCode,0 DebitAmount,0 DebitCurrencyAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.DiscountAmount else 0 end LendAmount,case when tblBuyInStock.DiscountAmount!=0 then tblBuyInStock.CurDiscountAmount else 0 end LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,420 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStockDet.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,tblGoodsAccProp.AccCode AccCode,(case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt else tblBuyInStockDet.TaxAmount end)+tblBuyInStockDet.freightAmount DebitAmount,case when tblBuyInStock.InVoiceType=2 then tblBuyInStockDet.DisBackAmt/tblBuyInStock.CurrencyRate else tblBuyInStockDet.TaxAmount/tblBuyInStock.CurrencyRate end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join tblBuyInStockDet  on tblBuyInStock.id=tblBuyInStockDet.f_ref  join tblGoods on tblBuyInStockDet.GoodsCode=tblGoods.classCode  join tblGoodsAccProp on tblGoods.CostMethod=tblGoodsAccProp.id  join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,433 Line:7058  DynDBManager. genCertificate 取凭证明细数据sql=select Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate,sum(DebitAmount) DebitAmount,sum(DebitCurrencyAmount) DebitCurrencyAmount,sum(LendAmount) LendAmount,sum(LendCurrencyAmount) LendCurrencyAmount  from ( select isnull('采购入库  等 '+tblCompanyCC.ComFullName,'') Comment,isnull(tblBuyInStock.CompanyCode,'') CompanyCode,isnull(tblBuyInStock.DepartmentCode,'') DepartmentCode,isnull(tblBuyInStock.EmployeeID,'') EmployeeID,isnull(tblBuyInStock.ProjectCode,'') ProjectCode, isnull(tblBuyInStock.StockCode,'') StockCode, isnull(tblBuyInStock.Currency,'') Currency,tblBuyInStock.CurrencyRate CurrencyRate,'2202' AccCode,case when tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.TotalTaxAmount+tblBuyInStock.freightAmount-tblBuyInStock.PayAmount) else 0 end DebitAmount,case when tblBuyInStock.TotalTaxAmount-tblBuyInStock.PayAmount<0 then abs(tblBuyInStock.CurTotalAmount-tblBuyInStock.CurAlrPayAmt) else 0 end DebitCurrencyAmount,0 LendAmount,0 LendCurrencyAmount from   tblBuyInStock join  tblCompany tblCompanyCC  on tblBuyInStock.CompanyCode=tblCompanyCC.classCode   where tblBuyInStock.id=? ) detail  group by Comment,CompanyCode,DepartmentCode,EmployeeID,AccCode,ProjectCode,StockCode,Currency,CurrencyRate
 [DEBUG] 2017-12-18 15:16:45,443 Line:7182  DynDBManager. genCertificate 采购入库:tblBuyInStock取凭证明细 返回总行数=6合并后：2
 [DEBUG] 2017-12-18 15:16:45,689 Line:434 ************上述语句执行时间：366
 [DEBUG] 2017-12-18 15:16:45,689 Line:313 exeCondition:tblBuyInStock_Add_One :30>0
 [DEBUG] 2017-12-18 15:16:45,690 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,690 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_insertComIni(?,?,?,?,?,?,?)}
 [DEBUG] 2017-12-18 15:16:45,690 Line:1270 1dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:45,690 Line:1270 00003
 [DEBUG] 2017-12-18 15:16:45,691 Line:1270 1
 [DEBUG] 2017-12-18 15:16:45,691 Line:1270 2017-12-18
 [DEBUG] 2017-12-18 15:16:45,691 Line:1270 Period=12@SPFieldLink:PeriodYear=2017@SPFieldLink:PeriodMonth=12@SPFieldLink:PayTotalDebit=0@SPFieldLink:PayTotalLend=30@SPFieldLink:RelationDocID=dc4b4f2e_1712181516441780037@SPFieldLink:Currency=@SPFieldLink:CurrencyRate=1@SPFieldLink:FcPayTotalDebit=0@SPFieldLink:FcPayTotalCredit=30@SPFieldLink:createBy=1@SPFieldLink:createTime=2017-12-18 15:16:44@SPFieldLink:lastUpdateBy=1@SPFieldLink:lastUpdateTime=2017-12-18 15:16:44@SPFieldLink:SCompanyID=00001@SPFieldLink:BillType=tblBuyInStock@SPFieldLink:BillNo=BI1712180001@SPFieldLink:EmployeeID=1@SPFieldLink:DepartmentCode=00101@SPFieldLink:DiscountAmount=0@SPFieldLink:Remark=
 [DEBUG] 2017-12-18 15:16:45,749 Line:1292 存储过程内部信息： insert into tblCompanyIni (id,ItemNo,CompanyCode,BillDate,Period,PeriodYear,PeriodMonth,PayTotalDebit,PayTotalLend,RelationDocID,Currency,CurrencyRate,FcPayTotalDebit,FcPayTotalCredit,createBy,createTime,lastUpdateBy,lastUpdateTime,SCompanyID,BillType,BillNo,EmployeeID,DepartmentCode,DiscountAmount,Remark) values('1dc4b4f2e_1712181516441780037',1,'00003','2017-12-18','12','2017','12','0','30','dc4b4f2e_1712181516441780037','','1','0','30','1','2017-12-18 15:16:44','1','2017-12-18 15:16:44','00001','tblBuyInStock','BI1712180001','1','00101','0','')
 [DEBUG] 2017-12-18 15:16:45,749 Line:425 ************上述语句执行时间：59
 [DEBUG] 2017-12-18 15:16:45,749 Line:313 exeCondition:tblBuyInStock_Add_One :30.00000000<0 && 30>0 && 'true'=='false'
 [DEBUG] 2017-12-18 15:16:45,750 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,750 Line:313 exeCondition:tblBuyInStock_Add_One :30.00000000<0 && 'true'=='false'
 [DEBUG] 2017-12-18 15:16:45,751 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,751 Line:313 exeCondition:tblBuyInStock_Add_One :30.00000000<0 && 'true'=='true'
 [DEBUG] 2017-12-18 15:16:45,752 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,752 Line:313 exeCondition:tblBuyInStock_Add_One :0>0&&30.00000000>=0
 [DEBUG] 2017-12-18 15:16:45,753 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,753 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('2202')>=0
 [DEBUG] 2017-12-18 15:16:45,754 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,754 Line:313 exeCondition:tblBuyInStock_Add_One :''.indexOf('1123')>=0
 [DEBUG] 2017-12-18 15:16:45,755 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,755 Line:921 自定义执行的语句显示： tblBuyInStock_Add_One :select (cast(? as numeric(18,8))-cast(? as numeric(18,8))) as RNeedPayAmt,(case when (cast(? as numeric(18,8))-cast(? as numeric(18,8)))>=0.0 then 'Pay' else 'PrePay' end) as rePayType,(cast(? as numeric(18,8))+cast(? as numeric(18,8))) as factAmt 
 [DEBUG] 2017-12-18 15:16:45,755 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2017-12-18 15:16:45,755 Line:988 1值：30
 [DEBUG] 2017-12-18 15:16:45,755 Line:988 2值：0
 [DEBUG] 2017-12-18 15:16:45,756 Line:988 3值：30
 [DEBUG] 2017-12-18 15:16:45,756 Line:988 4值：0
 [DEBUG] 2017-12-18 15:16:45,756 Line:988 5值：0
 [DEBUG] 2017-12-18 15:16:45,756 Line:988 6值：0
 [DEBUG] 2017-12-18 15:16:45,757 Line:1023 query condition columnName:RNeedPayAmt----value:30.00000000
 [DEBUG] 2017-12-18 15:16:45,757 Line:1025 query condition columnName:rePayType----value:Pay
 [DEBUG] 2017-12-18 15:16:45,758 Line:1023 query condition columnName:factAmt----value:0E-8
 [DEBUG] 2017-12-18 15:16:45,758 Line:1043 ---上述语句时间---3
 [DEBUG] 2017-12-18 15:16:45,758 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-18 15:16:45,759 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,759 Line:313 exeCondition:tblBuyInStock_Add_One :0>0
 [DEBUG] 2017-12-18 15:16:45,759 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,760 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-18 15:16:45,760 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,760 Line:313 exeCondition:tblBuyInStock_Add_One :'false'=='true'
 [DEBUG] 2017-12-18 15:16:45,761 Line:321 flag:false
 [DEBUG] 2017-12-18 15:16:45,761 Line:313 exeCondition:tblBuyInStock_Add_One :true
 [DEBUG] 2017-12-18 15:16:45,762 Line:321 flag:true
 [DEBUG] 2017-12-18 15:16:45,762 Line:1264 自定义执行的语句显示： tblBuyInStock_Add_One:{call proc_BuyInUpdateSales(?,?,?,?)}
 [DEBUG] 2017-12-18 15:16:45,762 Line:1270 dc4b4f2e_1712181516441780037
 [DEBUG] 2017-12-18 15:16:45,762 Line:1270 add
 [DEBUG] 2017-12-18 15:16:45,779 Line:425 ************上述语句执行时间：17
 [DEBUG] 2017-12-18 15:16:47,270 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblBuyInStock&operation=5&keyId=dc4b4f2e_1712181516441780037&parentCode=null&f_brother=&checkTab=Y&parentTableName=&moduleType=&winCurIndex=4&fresh=&popWinName=PopMainOpdiv
 [DEBUG] 2017-12-18 15:16:47,271 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblBuyInStock,];operation=[5,];keyId=[dc4b4f2e_1712181516441780037,];parentCode=[null,];f_brother=[,];checkTab=[Y,];parentTableName=[,];moduleType=[,];winCurIndex=[4,];fresh=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2017-12-18 15:16:47,272 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='dc4b4f2e_1712181516441780037' and  a.tableName='tblBuyInStock'
 [DEBUG] 2017-12-18 15:16:47,366 Line:1525  select * from  tblBuyInStockDet where f_ref = 'dc4b4f2e_1712181516441780037' order by detOrderNo
 [DEBUG] 2017-12-18 15:16:47,373 Line:1525  select * from  tblBuyPayAccount where f_ref = 'dc4b4f2e_1712181516441780037' order by detOrderNo
 [DEBUG] 2017-12-18 15:16:53,640 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 15:16:53,641 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:16:53,677 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 15:16:53,677 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 15:16:53,677 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 15:16:53,677 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 15:16:53,678 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 15:16:53,678 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 15:16:53,678 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 15:16:53,678 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 15:16:53,678 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 15:16:53,678 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 15:16:53,679 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 15:16:53,680 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 15:16:53,731 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 15:16:53,732 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 15:16:53,732 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:16:53,732 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:16:53,732 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 15:16:53,732 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:16:53,732 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 15:16:53,733 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 15:16:53,733 Line:689 通过SQL读原始数据：56
 [DEBUG] 2017-12-18 15:16:53,734 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 15:17:09,965 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 15:17:09,967 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[00003,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[true,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:17:09,979 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 15:17:09,979 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 15:17:09,980 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 15:17:09,980 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 15:17:09,980 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 15:17:09,980 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 15:17:09,980 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 15:17:09,981 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 15:17:09,981 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 15:17:09,981 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 15:17:09,981 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 15:17:09,981 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 15:17:09,981 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 15:17:09,982 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 15:17:09,982 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 15:17:09,982 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 15:17:09,982 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 15:17:09,982 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 15:17:09,999 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 15:17:09,999 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 15:17:09,999 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:17:09,999 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:17:10,000 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 15:17:10,000 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:17:10,000 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 15:17:10,000 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 15:17:10,000 Line:689 通过SQL读原始数据：21
 [DEBUG] 2017-12-18 15:17:10,001 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:17:12,562 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 15:17:12,563 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:00003@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[true,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:17:12,576 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 15:17:12,577 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 15:17:12,578 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 15:17:12,578 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 15:17:12,578 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 15:17:12,578 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 15:17:12,578 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 15:17:12,578 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 15:17:12,579 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 15:17:12,579 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 15:17:12,579 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 15:17:12,579 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 15:17:12,579 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 15:17:12,579 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 15:17:12,580 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 15:17:12,580 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 15:17:12,580 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 15:17:12,580 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 15:17:12,582 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 15:17:12,582 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 15:17:12,582 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:17:12,583 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:17:12,583 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 15:17:12,583 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:17:12,583 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 15:17:12,583 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 15:17:12,584 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 15:17:12,584 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:17:33,450 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 15:17:33,451 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[2,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:select StockCode,GoodsCode,StockFullName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BatchNo,Inch,Hue,yearNO,ProDate,Availably,TotalQty,lastPrice,TotalAmt,lastQty,SecName,UnitIntQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblStocks.BatchNo as BatchNo,     tblStocks.Inch as Inch,     tblStocks.Hue as Hue,     tblStocks.yearNO as yearNO,     tblStocks.ProDate as ProDate,     tblStocks.Availably as Availably,     tblStocks.lastQty as TotalQty,     tblStocks.lastPrice as lastPrice,     tblStocks.lastAmount as TotalAmt,     tblStocks.lastQty as lastQty,     tblGoodsUnit.SecUnit as SecName,     (case when cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int)>0 then cast(cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int) AS  varchar(100))@AddSign:tblGoodsUnit.SecUnit else '' end)@AddSign:case when tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD=0 then '' else (case when tblStocks.lastQty@CentSign:(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD)>0 then dbo.throwZero(cast(tblStocks.lastQty@CentSign:(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD) AS varchar(100)))@AddSign:tblGoods.BaseUnit else '' end) end as UnitIntQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-12-01' as QueryBillDate,     tblGoods.classCode@AddSign:'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode@AddSign:'#;#0#;##;#' as hideStockCode   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                                                                and (tblStocks.lastQty <>?)   )  a  where row_id between 1 and 101 order by row_id@ParamList:0@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];lastQty=[0,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:17:33,504 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockFullName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BatchNo,Inch,Hue,yearNO,ProDate,Availably,TotalQty,lastPrice,TotalAmt,lastQty,SecName,UnitIntQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblStocks.BatchNo as BatchNo,     tblStocks.Inch as Inch,     tblStocks.Hue as Hue,     tblStocks.yearNO as yearNO,     tblStocks.ProDate as ProDate,     tblStocks.Availably as Availably,     tblStocks.lastQty as TotalQty,     tblStocks.lastPrice as lastPrice,     tblStocks.lastAmount as TotalAmt,     tblStocks.lastQty as lastQty,     tblGoodsUnit.SecUnit as SecName,     (case when cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int)>0 then cast(cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int) AS  varchar(100))+tblGoodsUnit.SecUnit else '' end)+case when tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD=0 then '' else (case when tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD)>0 then dbo.throwZero(cast(tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD) AS varchar(100)))+tblGoods.BaseUnit else '' end) end as UnitIntQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-12-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                                                                and (tblStocks.lastQty <>?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 15:17:33,505 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 15:17:33,541 Line:689 通过SQL读原始数据：36
 [DEBUG] 2017-12-18 15:17:33,542 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 15:18:13,315 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 15:18:13,316 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[00003,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[true,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:18:13,332 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 15:18:13,332 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 15:18:13,333 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 15:18:13,333 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 15:18:13,333 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 15:18:13,333 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 15:18:13,333 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 15:18:13,333 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 15:18:13,334 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 15:18:13,335 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 15:18:13,335 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 15:18:13,335 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 15:18:13,415 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 15:18:13,416 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 15:18:13,416 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:18:13,416 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:18:13,416 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 15:18:13,417 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 15:18:13,417 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 15:18:13,417 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 15:18:13,417 Line:689 通过SQL读原始数据：85
 [DEBUG] 2017-12-18 15:18:13,418 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 15:19:11,968 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=7
 [DEBUG] 2017-12-18 15:19:11,969 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[7,];
 [DEBUG] 2017-12-18 15:19:11,969 Line:215 ---------->SET Page 7 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-12-18 15:19:13,203 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-12-18 15:19:13,204 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-12-18 15:19:14,161 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=8
 [DEBUG] 2017-12-18 15:19:14,161 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[8,];
 [DEBUG] 2017-12-18 15:19:14,162 Line:215 ---------->SET Page 8 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2017-12-18 15:19:18,124 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do?src=menu&winCurIndex=9
 [DEBUG] 2017-12-18 15:19:18,125 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[9,];
 [DEBUG] 2017-12-18 15:19:18,125 Line:215 ---------->SET Page 9 DEFAULT URL = /ReportSetQueryAction.do
 [DEBUG] 2017-12-18 15:19:26,081 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do
 [DEBUG] 2017-12-18 15:19:26,082 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[9,9,];styleType=[,];reportNames=[虚拟库存查询,];statusIds=[0,];reportType=[,];reportModule=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 15:27:00,417 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 15:28:06,807 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:28:06,807 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:28:06,807 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:28:06,808 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 15:28:06,826 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 15:28:06,826 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 15:28:06,826 Line:243 AIOApi op=getEnum&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:28:06,827 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 15:28:37,930 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:28:37,930 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:28:37,930 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:28:37,931 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 15:28:37,950 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 15:28:37,950 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 15:28:37,950 Line:243 AIOApi op=getEnum&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:28:37,951 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 15:29:21,162 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:29:21,163 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:29:21,164 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:29:21,165 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 15:29:21,177 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 15:29:21,177 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 15:29:21,177 Line:243 AIOApi op=getEnum&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:29:21,178 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 15:30:08,095 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:30:08,095 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:30:08,095 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:30:08,096 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 15:30:08,114 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 15:30:08,115 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 15:30:08,116 Line:243 AIOApi op=getEnum&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:30:08,117 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 15:30:20,929 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 15:30:20,929 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 15:30:20,929 Line:243 AIOApi op=getSessEmp&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:30:20,930 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 15:30:20,948 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 15:30:20,948 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 15:30:20,949 Line:243 AIOApi op=getEnum&sessionid=930155FBC6AAE544718CC425D4587B0D
 [DEBUG] 2017-12-18 15:30:20,950 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 15:52:26,737 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2017-12-18 15:52:26,738 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2017-12-18 15:52:26,741 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 15:52:27,007 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2017-12-18 15:52:27,007 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2017-12-18 15:52:27,020 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2017-12-18 15:52:27,020 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2017-12-18 15:52:27,020 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 15:52:27,029 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2017-12-18 15:52:27,029 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2017-12-18 15:52:27,030 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 15:52:27,037 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2017-12-18 15:52:27,038 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2017-12-18 15:52:27,038 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 15:52:27,043 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2017-12-18 15:52:27,043 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2017-12-18 15:52:27,044 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 15:57:19,790 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 16:01:48,540 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=1
 [DEBUG] 2017-12-18 16:01:48,540 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[1,];
 [DEBUG] 2017-12-18 16:01:48,541 Line:215 ---------->SET Page 1 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2017-12-18 16:01:49,322 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2017-12-18 16:01:49,322 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2017-12-18 16:01:50,455 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do?src=menu&winCurIndex=2
 [DEBUG] 2017-12-18 16:01:50,456 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2017-12-18 16:01:50,456 Line:215 ---------->SET Page 2 DEFAULT URL = /ReportSetQueryAction.do
 [DEBUG] 2017-12-18 16:01:56,695 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do
 [DEBUG] 2017-12-18 16:01:56,695 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[2,2,];styleType=[,];reportNames=[虚拟库存查询,];statusIds=[0,];reportType=[,];reportModule=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:04:12,816 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblVirtualStock
 [DEBUG] 2017-12-18 16:04:12,816 Line:3003 MobileAjax 操作人:;请求数据：op=[report,];tableName=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];
 [DEBUG] 2017-12-18 16:04:12,817 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:04:12,818 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 16:04:17,987 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 16:04:17,988 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 16:04:17,988 Line:243 AIOApi op=LOGIN&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:04:18,026 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 16:04:18,056 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 16:04:18,068 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 16:04:18,106 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 16:04:18,606 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 16:04:18,607 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 16:04:18,608 Line:243 AIOApi op=getSessEmp&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:04:18,609 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 16:04:18,637 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 16:04:18,637 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 16:04:18,638 Line:243 AIOApi op=getEnum&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:04:18,638 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 16:04:21,535 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblVirtualStock
 [DEBUG] 2017-12-18 16:04:21,536 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];
 [DEBUG] 2017-12-18 16:04:21,536 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:04:21,541 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"ERROR","msg":"没有权限"}
 [DEBUG] 2017-12-18 16:05:57,492 Line:135 BaseAction.execute 请求地址：/ReportSetAction.do?operation=7&keyId=fc26a1c0_0911091911043430204&winCurIndex=2&reportNames=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2
 [DEBUG] 2017-12-18 16:05:57,493 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[fc26a1c0_0911091911043430204,];winCurIndex=[2,];reportNames=[è??????????????è??,];
 [DEBUG] 2017-12-18 16:09:29,685 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblVirtualStock
 [DEBUG] 2017-12-18 16:09:29,685 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];
 [DEBUG] 2017-12-18 16:09:29,686 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:17:04,308 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:17:04,310 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];
 [DEBUG] 2017-12-18 16:17:04,311 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:17:10,397 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:17:10,399 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];
 [DEBUG] 2017-12-18 16:17:10,399 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:17:22,887 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"ERROR","msg":"没有权限"}
 [DEBUG] 2017-12-18 16:17:38,061 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:17:38,880 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:20:51,644 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=3
 [DEBUG] 2017-12-18 16:20:51,645 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[3,];
 [DEBUG] 2017-12-18 16:20:51,645 Line:215 ---------->SET Page 3 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:20:51,718 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-18 16:20:51,719 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 16:20:51,720 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 16:20:51,721 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=3&checkTab=Y
 [DEBUG] 2017-12-18 16:20:51,724 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[3,];checkTab=[Y,];
 [DEBUG] 2017-12-18 16:20:51,725 Line:215 ---------->SET Page 3 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:20:58,865 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:20:58,866 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:20:58,878 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:20:58,879 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:20:58,879 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:20:58,879 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:20:58,879 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:20:58,879 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:20:58,880 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:20:58,880 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:20:58,880 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:20:58,880 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:20:58,880 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:20:58,880 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:20:58,881 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:20:58,881 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:20:58,881 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:20:58,881 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:20:58,881 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:20:58,881 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:20:58,969 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:20:58,970 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:20:58,970 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:20:58,970 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:20:58,970 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:20:58,970 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:20:58,971 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:20:58,971 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:20:58,971 Line:689 通过SQL读原始数据：92
 [DEBUG] 2017-12-18 16:20:58,972 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 16:21:16,443 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:21:16,444 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:21:16,459 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:21:16,459 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:21:16,459 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:21:16,461 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:21:16,461 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:21:16,461 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:21:16,461 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:21:16,461 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:21:16,461 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:21:16,461 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:21:16,462 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:21:16,462 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:21:16,462 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:21:16,462 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:21:16,462 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:21:16,462 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:21:16,463 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:21:16,463 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:21:16,466 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:21:16,467 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:21:16,467 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:21:16,467 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:21:16,468 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:21:16,468 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:21:16,468 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:21:16,468 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:21:16,469 Line:689 通过SQL读原始数据：10
 [DEBUG] 2017-12-18 16:21:16,469 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:23:00,413 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:23:00,413 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];
 [DEBUG] 2017-12-18 16:23:00,413 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:23:07,386 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:23:45,850 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:23:45,851 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];
 [DEBUG] 2017-12-18 16:23:45,852 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:23:45,904 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:25:31,824 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:25:31,824 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 16:25:31,825 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:25:31,878 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:25:31,879 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:25:31,879 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:25:31,880 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:25:31,880 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:25:31,881 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:25:31,881 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:25:31,881 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:25:31,882 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:25:31,882 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:25:31,883 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:25:31,883 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:25:31,883 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:25:31,884 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:25:31,884 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:25:31,885 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:25:31,885 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:25:31,885 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:25:32,061 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:25:32,061 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:25:32,062 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:25:32,062 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:25:32,062 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:25:32,062 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:25:32,063 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:25:32,063 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:25:32,063 Line:689 通过SQL读原始数据：184
 [DEBUG] 2017-12-18 16:25:32,064 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:25:32,071 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:25:41,117 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:25:41,118 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 16:25:41,118 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:25:41,130 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:25:41,131 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:25:41,132 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:25:41,132 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:25:41,132 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:25:41,132 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:25:41,133 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:25:41,133 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:25:41,133 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:25:41,133 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:25:41,134 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:25:41,134 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:25:41,134 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:25:41,134 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:25:41,134 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:25:41,135 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:25:41,135 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:25:41,135 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:25:41,137 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:25:41,137 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:25:41,137 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:25:41,137 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:25:41,138 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:25:41,138 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:25:41,138 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:25:41,138 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:25:41,138 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 16:25:41,139 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:25:41,144 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:27:26,423 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ReportStockDistributingProc&ZeroQtyNoDisplayQ=all&BatchNo=&Inch=&Hue=&yearNO=&ProDate=&Availably=&hide_GoodsCode=00003%23%3B%231%23%3B%23%23%3B%23&GoodsCode=00003&tblGoods.GoodsNumber=bs0003&tblGoods.GoodsFullName=%E5%8C%85%E7%B1%BB&tblGoods.GoodsSpec=&tblGoods.BaseUnit=&mainNumber=tblVirtualStock&queryChannel=normal&LinkType=@URL:&reportCond=tblVirtualStock&src=menu&noback=true&popWinName=openLinkUrl1513585646398
 [DEBUG] 2017-12-18 16:27:26,425 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ReportStockDistributingProc,];ZeroQtyNoDisplayQ=[all,];BatchNo=[,];Inch=[,];Hue=[,];yearNO=[,];ProDate=[,];Availably=[,];hide_GoodsCode=[00003#;#1#;##;#,];GoodsCode=[00003,];tblGoods.GoodsNumber=[bs0003,];tblGoods.GoodsFullName=[????±?,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];mainNumber=[tblVirtualStock,];queryChannel=[normal,];LinkType=[@URL:,];reportCond=[tblVirtualStock,];src=[menu,];noback=[true,];popWinName=[openLinkUrl1513585646398,];
 [DEBUG] 2017-12-18 16:27:26,426 Line:220 ---------->SET DEFAULT URL = /ReportDataAction.do?reportNumber=ReportStockDistributingProc&ZeroQtyNoDisplayQ=all&BatchNo=&Inch=&Hue=&yearNO=&ProDate=&Availably=&hide_GoodsCode=00003#;#1#;##;#&GoodsCode=00003&tblGoods.GoodsNumber=bs0003&tblGoods.GoodsFullName=包类&tblGoods.GoodsSpec=&tblGoods.BaseUnit=&mainNumber=tblVirtualStock&queryChannel=normal&LinkType=@URL:&reportCond=tblVirtualStock
 [DEBUG] 2017-12-18 16:27:26,519 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-18 16:27:26,519 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 16:27:26,519 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2017-12-18 16:27:26,520 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ReportStockDistributingProc&ZeroQtyNoDisplayQ=all&BatchNo=&Inch=&Hue=&yearNO=&ProDate=&Availably=&hide_GoodsCode=00003%23%3B%231%23%3B%23%23%3B%23&GoodsCode=00003&tblGoods.GoodsNumber=bs0003&tblGoods.GoodsFullName=%E5%8C%85%E7%B1%BB&tblGoods.GoodsSpec=&tblGoods.BaseUnit=&mainNumber=tblVirtualStock&queryChannel=normal&LinkType=@URL:&reportCond=tblVirtualStock&src=menu&noback=true&popWinName=openLinkUrl1513585646398&checkTab=Y
 [DEBUG] 2017-12-18 16:27:26,523 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ReportStockDistributingProc,];ZeroQtyNoDisplayQ=[all,];BatchNo=[,];Inch=[,];Hue=[,];yearNO=[,];ProDate=[,];Availably=[,];hide_GoodsCode=[00003#;#1#;##;#,];GoodsCode=[00003,];tblGoods.GoodsNumber=[bs0003,];tblGoods.GoodsFullName=[????±?,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];mainNumber=[tblVirtualStock,];queryChannel=[normal,];LinkType=[@URL:,];reportCond=[tblVirtualStock,];src=[menu,];noback=[true,];popWinName=[openLinkUrl1513585646398,];checkTab=[Y,];
 [DEBUG] 2017-12-18 16:27:26,525 Line:220 ---------->SET DEFAULT URL = /ReportDataAction.do?reportNumber=ReportStockDistributingProc&ZeroQtyNoDisplayQ=all&BatchNo=&Inch=&Hue=&yearNO=&ProDate=&Availably=&hide_GoodsCode=00003#;#1#;##;#&GoodsCode=00003&tblGoods.GoodsNumber=bs0003&tblGoods.GoodsFullName=包类&tblGoods.GoodsSpec=&tblGoods.BaseUnit=&mainNumber=tblVirtualStock&queryChannel=normal&LinkType=@URL:&reportCond=tblVirtualStock
 [DEBUG] 2017-12-18 16:27:26,541 Line:549 ReportDataMgt.getReportData SQL={call report_StockDistributingProc (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@ZeroQtyNoDisplayQ=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNo=?,@ProDate=?,@Availably=?,@DataType=?)}
 [DEBUG] 2017-12-18 16:27:26,541 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:27:26,542 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:27:26,542 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:27:26,542 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:27:26,542 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:27:26,542 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:27:26,543 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:27:26,543 Line:582 ReportDataMgt.getReportData 参数8:00003;1
 [DEBUG] 2017-12-18 16:27:26,543 Line:582 ReportDataMgt.getReportData 参数9:all
 [DEBUG] 2017-12-18 16:27:26,543 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:27:26,543 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:27:26,544 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:27:26,544 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:27:26,544 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:27:26,544 Line:582 ReportDataMgt.getReportData 参数15:
 [DEBUG] 2017-12-18 16:27:26,544 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:27:26,669 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:27:26,669 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:27:26,669 Line:587 ReportDataMgt.getReportData warn  and ( tblGoods.classCode in ('00003'))
 [DEBUG] 2017-12-18 16:27:26,669 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:27:26,670 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:27:26,670 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:27:26,670 Line:587 ReportDataMgt.getReportData warn 取开始行号：select sum(co) from (SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber,isnull(Total.BatchNo,''),isnull(Total.Inch,''),isnull(Total.Hue,''),isnull(Total.yearNO,''),isnull(Total.ProDate,''),isnull(Total.Availably,'')) AS rowid,count(0) as co FROM(select GoodsNumber,classCode,isCatalog from tblGoods where workFlowNodeName= 'finish' and ( tblGoods.classCode in ('00003')) and (tblGoods.classCode like '_%')) as tblGoods join tblStock on 1=1 and tblStock.isCatalog='0' LEFT JOIN (SELECT tblGoods.classCode AS GoodsCode,b.StockCode,
				case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
				case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
				case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably
				,SUM(LastQty) AS LastQty,SUM(LastAmount) AS LastAmount,
                (CASE WHEN SUM(LastQty) = 0 THEN 0 ELSE SUM(LastAmount)/SUM(LastQty) END) AS LastPrice
                FROM (select GoodsNumber,classCode,isCatalog from tblGoods where workFlowNodeName= 'finish' and ( tblGoods.classCode in ('00003')) and (tblGoods.classCode like '_%')) as tblGoods,tblStocks b WHERE tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) AND (b.lastQty!= 0 OR b.lastAmount != 0) GROUP BY tblGoods.classCode,b.StockCode,
				case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end) Total ON Total.GoodsCode = tblGoods.classCode and tblStock.classCode = Total.StockCode where 1=1  group by tblGoods.classCode,tblGoods.GoodsNumber,isnull(Total.BatchNo,''),isnull(Total.Inch,''),isnull(Total.Hue,''),isnull(Total.yearNO,''),isnull(Total.ProDate,''),isnull(Total.Availably,'')) as a where a.rowId between -99 and 0
 [DEBUG] 2017-12-18 16:27:26,670 Line:587 ReportDataMgt.getReportData warn 取结束行号：select sum(co) from (SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber,isnull(Total.BatchNo,''),isnull(Total.Inch,''),isnull(Total.Hue,''),isnull(Total.yearNO,''),isnull(Total.ProDate,''),isnull(Total.Availably,'')) AS rowid,count(0) as co FROM(select GoodsNumber,classCode,isCatalog from tblGoods where workFlowNodeName= 'finish' and ( tblGoods.classCode in ('00003')) and (tblGoods.classCode like '_%')) as tblGoods join tblStock on 1=1 and tblStock.isCatalog='0' LEFT JOIN (SELECT tblGoods.classCode AS GoodsCode,b.StockCode,
				case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
				case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
				case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably
				,SUM(LastQty) AS LastQty,SUM(LastAmount) AS LastAmount,
                (CASE WHEN SUM(LastQty) = 0 THEN 0 ELSE SUM(LastAmount)/SUM(LastQty) END) AS LastPrice
                FROM (select GoodsNumber,classCode,isCatalog from tblGoods where workFlowNodeName= 'finish' and ( tblGoods.classCode in ('00003')) and (tblGoods.classCode like '_%')) as tblGoods,tblStocks b WHERE tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) AND (b.lastQty!= 0 OR b.lastAmount != 0) GROUP BY tblGoods.classCode,b.StockCode,
				case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end) Total ON Total.GoodsCode = tblGoods.classCode and tblStock.classCode = Total.StockCode where 1=1  group by tblGoods.classCode,tblGoods.GoodsNumber,isnull(Total.BatchNo,''),isnull(Total.Inch,''),isnull(Total.Hue,''),isnull(Total.yearNO,''),isnull(Total.ProDate,''),isnull(Total.Availably,'')) as a where a.rowId between 1 and 100
 [DEBUG] 2017-12-18 16:27:26,670 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:27:26,671 Line:587 ReportDataMgt.getReportData warn select * from (
        SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber,tblStock.StockFullName) AS rowid,
            tblGoods.GoodsNumber AS GoodsNumber,
			isnull(Total.BatchNo,'') AS BatchNo,
			isnull(Total.Inch,'') AS Inch,
			isnull(Total.Hue,'') AS Hue,
			isnull(Total.yearNO,'') AS yearNO,
			isnull(Total.ProDate,'') AS ProDate,
			isnull(Total.Availably,'') AS Availably,
			tblStock.StockFullName AS StockFullName,			
			Total.lastQty AS lastQty,
			Total.lastQty AS lastQty1,
			Total.lastAmount AS lastAmount1,
			Total.lastPrice AS lastPrice,
			Total.lastAmount AS lastAmount,
			'序列号' as Seq,
			case when tblGoods.isCatalog=1 then '' else '出入库明细' end as StockDet,
            tblGoods.classCode AS classCode,
            tblGoods.isCatalog AS isCatalog,
			tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode
           FROM (select GoodsNumber,classCode,isCatalog from tblGoods where workFlowNodeName= 'finish' and ( tblGoods.classCode in ('00003')) and (tblGoods.classCode like '_%')) as tblGoods join tblStock on 1=1 and tblStock.isCatalog='0' LEFT JOIN (SELECT tblGoods.classCode AS GoodsCode,b.StockCode,
				case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
				case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
				case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably
				,SUM(LastQty) AS LastQty,SUM(LastAmount) AS LastAmount,
                (CASE WHEN SUM(LastQty) = 0 THEN 0 ELSE SUM(LastAmount)/SUM(LastQty) END) AS LastPrice
                FROM (select GoodsNumber,classCode,isCatalog from tblGoods where workFlowNodeName= 'finish' and ( tblGoods.classCode in ('00003')) and (tblGoods.classCode like '_%')) as tblGoods,tblStocks b WHERE tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) AND (b.lastQty!= 0 OR b.lastAmount != 0) GROUP BY tblGoods.classCode,b.StockCode,
				case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
				case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end) Total ON Total.GoodsCode = tblGoods.classCode and tblStock.classCode = Total.StockCode where 1=1 ) as a where a.rowid between 1 and 3
 [DEBUG] 2017-12-18 16:27:26,671 Line:587 ReportDataMgt.getReportData warn 警告: 聚合或其他 SET 操作消除了 Null 值。
 [DEBUG] 2017-12-18 16:27:26,671 Line:689 通过SQL读原始数据：130
 [DEBUG] 2017-12-18 16:27:26,672 Line:1219 交叉报表整理数据：0
 [DEBUG] 2017-12-18 16:27:26,672 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:27:38,356 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 16:27:40,489 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:27:40,490 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[00003,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[true,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:27:40,504 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:27:40,505 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:27:40,506 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:27:40,506 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:27:40,507 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:27:40,507 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:27:40,507 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 16:27:40,507 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:27:40,507 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:27:40,508 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:27:40,509 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:27:40,509 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:27:40,562 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:27:40,563 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:27:40,563 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:27:40,563 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:27:40,563 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:27:40,563 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:27:40,563 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:27:40,564 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:27:40,564 Line:689 通过SQL读原始数据：59
 [DEBUG] 2017-12-18 16:27:40,564 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:28:41,455 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:28:41,457 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[00003,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:00003@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:28:41,499 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:28:41,500 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:28:41,500 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:28:41,500 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:28:41,500 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:28:41,500 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:28:41,501 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:28:41,502 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:28:41,502 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:28:41,502 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:28:41,502 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:28:41,502 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:28:41,577 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:28:41,577 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:28:41,577 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:41,577 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:41,578 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:28:41,578 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:41,578 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:28:41,578 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:28:41,578 Line:689 通过SQL读原始数据：78
 [DEBUG] 2017-12-18 16:28:41,579 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:28:49,241 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:28:49,242 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:00003@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[true,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:28:49,260 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:28:49,260 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:28:49,260 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:28:49,261 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:28:49,261 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:28:49,261 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:28:49,261 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:28:49,261 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:28:49,261 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:28:49,262 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:28:49,262 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:28:49,262 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:28:49,262 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:28:49,262 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:28:49,263 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:28:49,263 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:28:49,263 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:28:49,263 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:28:49,282 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:28:49,283 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:28:49,283 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:49,283 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:49,283 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:28:49,283 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:49,283 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:28:49,284 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:28:49,284 Line:689 通过SQL读原始数据：24
 [DEBUG] 2017-12-18 16:28:49,286 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:28:58,292 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:28:58,293 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:28:58,309 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:28:58,309 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:28:58,310 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:28:58,310 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:28:58,310 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:28:58,310 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:28:58,310 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 16:28:58,310 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:28:58,310 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:28:58,311 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:28:58,311 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:28:58,311 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:28:58,311 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:28:58,311 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:28:58,312 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:28:58,312 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:28:58,312 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:28:58,312 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:28:58,314 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:28:58,314 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:28:58,314 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:58,314 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:58,314 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:28:58,314 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:28:58,315 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:28:58,315 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:28:58,317 Line:689 通过SQL读原始数据：8
 [DEBUG] 2017-12-18 16:28:58,318 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 16:29:58,192 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:29:58,193 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 16:29:58,193 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:29:58,215 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:29:58,215 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:29:58,215 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:29:58,215 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:29:58,216 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:29:58,216 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:29:58,216 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 16:29:58,216 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:29:58,216 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:29:58,216 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:29:58,217 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:29:58,217 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:29:58,217 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:29:58,217 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:29:58,218 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:29:58,218 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:29:58,218 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:29:58,218 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:29:58,292 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:29:58,293 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:29:58,293 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:29:58,293 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:29:58,293 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:29:58,293 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:29:58,293 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:29:58,294 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:29:58,294 Line:689 通过SQL读原始数据：79
 [DEBUG] 2017-12-18 16:29:58,294 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:29:58,299 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:30:02,972 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:30:02,973 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 16:30:02,973 Line:243 AIOApi op=report&sessionid=017CF88F511651BE28E8482B9346FA08
 [DEBUG] 2017-12-18 16:30:02,987 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 16:30:02,988 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 16:30:02,988 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 16:30:02,988 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 16:30:02,989 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 16:30:02,989 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 16:30:02,989 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 16:30:02,990 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 16:30:02,990 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 16:30:02,991 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 16:30:02,992 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 16:30:02,993 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 16:30:02,993 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 16:30:02,994 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 16:30:02,994 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 16:30:02,994 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 16:30:02,995 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 16:30:02,995 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 16:30:02,996 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 16:30:02,998 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 16:30:02,998 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:30:02,998 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:30:02,998 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 16:30:02,998 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 16:30:02,998 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 16:30:02,999 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 16:30:02,999 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 16:30:02,999 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:30:03,004 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 16:33:02,434 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ViewStoreDetail&src=menu&winCurIndex=4
 [DEBUG] 2017-12-18 16:33:02,435 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ViewStoreDetail,];src=[menu,];winCurIndex=[4,];
 [DEBUG] 2017-12-18 16:33:02,435 Line:215 ---------->SET Page 4 DEFAULT URL = /ReportDataAction.do?reportNumber=ViewStoreDetail
 [DEBUG] 2017-12-18 16:33:53,040 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 16:33:53,041 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[ViewStoreDetail,];reportName=[库存查询,库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[4,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:0@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];lastQty=[0,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 16:33:53,072 Line:549 ReportDataMgt.getReportData SQL=select StockCode,GoodsCode,StockFullName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BatchNo,Inch,Hue,yearNO,ProDate,Availably,TotalQty,lastPrice,TotalAmt,lastQty,SecName,UnitIntQty,Seq,QueryBillDate,hideGoodsCode,hideStockCode from ( select      tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblStocks.BatchNo as BatchNo,     tblStocks.Inch as Inch,     tblStocks.Hue as Hue,     tblStocks.yearNO as yearNO,     tblStocks.ProDate as ProDate,     tblStocks.Availably as Availably,     tblStocks.lastQty as TotalQty,     tblStocks.lastPrice as lastPrice,     tblStocks.lastAmount as TotalAmt,     tblStocks.lastQty as lastQty,     tblGoodsUnit.SecUnit as SecName,     (case when cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int)>0 then cast(cast(tblStocks.lastQty*tblGoodsUnit.SecUnitD/tblGoodsUnit.UnitD AS int) AS  varchar(100))+tblGoodsUnit.SecUnit else '' end)+case when tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD=0 then '' else (case when tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD)>0 then dbo.throwZero(cast(tblStocks.lastQty%(tblGoodsUnit.UnitD/tblGoodsUnit.SecUnitD) AS varchar(100)))+tblGoods.BaseUnit else '' end) end as UnitIntQty,     (select top 1 languageId from tblDBEnumerationItem where enumValue='seq') as Seq,     '2017-12-01' as QueryBillDate,     tblGoods.classCode+'#;#0#;##;#' as hideGoodsCode,     tblStock.classCode+'#;#0#;##;#' as hideStockCode   ,ROW_NUMBER() over(order by     tblGoods.GoodsNumber) as row_id  from (select * from tblGoods where isCatalog=0) as tblGoods left join (select * from tblStock where isCatalog=0) as tblStock on 1=1 left join tblStocks on tblGoods.classCode=tblStocks.GoodsCode and tblStock.classCode=tblStocks.StockCode left join tblGoodsUnit on tblGoods.id=tblGoodsUnit.f_ref  where 1=1                                                                and (tblStocks.lastQty <>?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 16:33:53,072 Line:582 ReportDataMgt.getReportData 参数1:0
 [DEBUG] 2017-12-18 16:33:53,122 Line:689 通过SQL读原始数据：50
 [DEBUG] 2017-12-18 16:33:53,122 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:48:21,091 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=ReportSalesOrderDet&detTable_list=tblSalesOrder&startDate=2017-12-01&BatchNo=&Inch=&Hue=&yearNO=&ProDate=&Availably=&hide_GoodsCode=00001%23%3B%230%23%3B%23%23%3B%23&GoodsCode=00001&tblGoods.GoodsNumber=bs0001&tblGoods.GoodsFullName=%E5%B9%B2%E8%92%B8%E9%A6%85&tblGoods.GoodsSpec=&tblGoods.BaseUnit=&FinishStatus=0&mainNumber=tblVirtualStock&queryChannel=normal&LinkType=@URL:&reportCond=tblVirtualStock&src=menu&noback=true&popWinName=openLinkUrl1513586901073
 [DEBUG] 2017-12-18 16:48:21,093 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[ReportSalesOrderDet,];detTable_list=[tblSalesOrder,];startDate=[2017-12-01,];BatchNo=[,];Inch=[,];Hue=[,];yearNO=[,];ProDate=[,];Availably=[,];hide_GoodsCode=[00001#;#0#;##;#,];GoodsCode=[00001,];tblGoods.GoodsNumber=[bs0001,];tblGoods.GoodsFullName=[???è??é??,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];FinishStatus=[0,];mainNumber=[tblVirtualStock,];queryChannel=[normal,];LinkType=[@URL:,];reportCond=[tblVirtualStock,];src=[menu,];noback=[true,];popWinName=[openLinkUrl1513586901073,];
 [DEBUG] 2017-12-18 16:48:21,093 Line:220 ---------->SET DEFAULT URL = /ReportDataAction.do?reportNumber=ReportSalesOrderDet&detTable_list=tblSalesOrder&startDate=2017-12-01&BatchNo=&Inch=&Hue=&yearNO=&ProDate=&Availably=&hide_GoodsCode=00001#;#0#;##;#&GoodsCode=00001&tblGoods.GoodsNumber=bs0001&tblGoods.GoodsFullName=干蒸馅&tblGoods.GoodsSpec=&tblGoods.BaseUnit=&FinishStatus=0&mainNumber=tblVirtualStock&queryChannel=normal&LinkType=@URL:&reportCond=tblVirtualStock
 [DEBUG] 2017-12-18 16:48:21,134 Line:549 ReportDataMgt.getReportData SQL=select startDate,endDate,BillNo,BillDate,ProjectName,StockCode,GoodsCode,ComFullName,ComNumber,DeptFullName,EmpFullName,createBy,StockFullName,GoodsNumber,GoodsFullName,GoodsSpec,BaseUnit,BatchNo,Inch,Hue,yearNO,ProDate,Availably,SendDate,Qty,Price,Amount,SecName,SecUnitQty,SecBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,Tax,TaxPrice,TaxAmount,CoTaxAmt,CurrencyName,CurrencyRate,CurPrice,CurAmount,AccountingPrice,hasBuyOrder,inQty,OutQty,BackQty,NotOutQty,id,SCompanyID,FinishStatus,PresentSampleType,Remark,ReRemark,OverOutQty,ComFullName1,profitPrice,profitAmt,hideCode,workFlowNodeName from ( select      tblSalesOrder.BillDate as startDate,     tblSalesOrder.BillDate as endDate,     tblSalesOrder.BillNo as BillNo,     tblSalesOrder.BillDate as BillDate,     tblProject.ProjectName as ProjectName,     tblStock.classCode as StockCode,     tblGoods.classCode as GoodsCode,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee.EmpFullName as EmpFullName,     tblEmployee2.EmpFullName as createBy,     tblStock.StockFullName as StockFullName,     tblGoods.GoodsNumber as GoodsNumber,     tblGoods.GoodsFullName as GoodsFullName,     tblGoods.GoodsSpec as GoodsSpec,     tblGoods.BaseUnit as BaseUnit,     tblSalesOrderDet.BatchNo as BatchNo,     tblSalesOrderDet.Inch as Inch,     tblSalesOrderDet.Hue as Hue,     tblSalesOrderDet.yearNO as yearNO,     tblSalesOrderDet.ProDate as ProDate,     tblSalesOrderDet.Availably as Availably,     tblSalesOrderDet.SendDate as SendDate,     tblSalesOrderDet.Qty as Qty,     tblSalesOrderDet.Price as Price,     tblSalesOrderDet.Amount as Amount,     tblSalesOrderDet.SecUnit as SecName,     tblSalesOrderDet.UnitIntQty as SecUnitQty,     tblSalesOrderDet.UnitBaseQty as SecBaseQty,     tblSalesOrderDet.UnitQty as UnitQty,     tblSalesOrderDet.UnitPrice as UnitPrice,     tblSalesOrderDet.Discount as Discount,     tblSalesOrderDet.DisPrice as DisPrice,     tblSalesOrderDet.DisBackAmt as DisBackAmt,     tblSalesOrderDet.DisAmount as DisAmount,     tblSalesOrder.Tax as Tax,     tblSalesOrderDet.TaxPrice as TaxPrice,     tblSalesOrderDet.TaxAmount as TaxAmount,     tblSalesOrderDet.CoTaxAmt as CoTaxAmt,     tblCurrency.CurrencyName as CurrencyName,     tblSalesOrder.CurrencyRate as CurrencyRate,     tblSalesOrderDet.CurPrice as CurPrice,     tblSalesOrderDet.CurAmount as CurAmount,     tblSalesOrderDet.AccountingPrice as AccountingPrice,     tblSalesOrder.hasBuyOrder as hasBuyOrder,     (select sum(isnull(k.InQty,0)) from tblBuyOrderDet k where k.SourceID=tblSalesOrderDet.id) as inQty,     tblSalesOrderDet.OutQty as OutQty,     tblSalesOrderDet.BackQty as BackQty,     case when tblSalesOrderDet.NotOutQty <=0 or tblSalesOrder.statusId!=0 then 0 else tblSalesOrderDet.NotOutQty end as NotOutQty,     tblSalesOrder.id as id,     tblSalesOrderDet.SCompanyID as SCompanyID,     tblSalesOrderDet.FinishStatus as FinishStatus,     tblSalesOrderDet.PresentSampleType as PresentSampleType,     tblSalesOrder.Remark as Remark,     tblSalesOrderDet.Remark as ReRemark,     case when (tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) <0 then (-1)*(tblSalesOrderDet.Qty-tblSalesOrderDet.OutQty) else 0 end as OverOutQty,     viewcompanytotal.ComFullName as ComFullName1,     tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice as profitPrice,     tblSalesOrderDet.Qty*(tblSalesOrderDet.taxPrice-tblGoods.PreBuyPrice) as profitAmt,     tblGoods.classCode+'#;#0#;##;#' as hideCode,     tblSalesOrder.workFlowNodeName as workFlowNodeName   ,ROW_NUMBER() over(order by     tblSalesOrder.BillNo desc,    tblSalesOrder.BillDate desc) as row_id  from tblSalesOrderDet    left join tblGoods on tblGoods.ClassCode=tblSalesOrderDet.GoodsCode   left join viewcompanytotal on tblGoods.CompanyCode=viewcompanytotal.classCode   left join tblSalesOrder on tblSalesOrderDet.f_ref=tblSalesOrder.id   left join tblStock on tblStock.classCode=tblSalesOrderDet.StockCode   left join tblCurrency on tblCurrency.id=tblSalesOrder.Currency   left join tblEmployee on tblEmployee.id = tblSalesOrder.EmployeeID   left join tblEmployee as tblEmployee2 on tblEmployee2.id = tblSalesOrder.createBy   left join tblCompany on tblCompany.classCode = tblSalesOrder.CompanyCode   left join tblDepartment on tblDepartment.classCode = tblSalesOrder.DepartmentCode left join tblProject on tblSalesOrder.ProjectCode=tblProject.id  where 1=1        and (tblSalesOrder.BillDate >= ?)                                                                and (tblGoods.classCode in ('00001'))                                                                       and (tblSalesOrderDet.FinishStatus =?)                                          and (tblSalesOrder.workFlowNodeName =?)   )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2017-12-18 16:48:21,134 Line:582 ReportDataMgt.getReportData 参数1:2017-12-01
 [DEBUG] 2017-12-18 16:48:21,135 Line:582 ReportDataMgt.getReportData 参数2:0
 [DEBUG] 2017-12-18 16:48:21,135 Line:582 ReportDataMgt.getReportData 参数3:finish
 [DEBUG] 2017-12-18 16:48:21,294 Line:689 通过SQL读原始数据：160
 [DEBUG] 2017-12-18 16:48:21,294 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 16:57:57,529 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 16:58:57,918 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 16:58:57,919 Line:3003 MobileAjax 操作人:;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 16:58:57,919 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 16:58:57,919 Line:2961 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2017-12-18 17:02:35,490 Line:2992 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2017-12-18 17:02:35,490 Line:3003 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2017-12-18 17:02:35,490 Line:243 AIOApi op=LOGIN&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:02:35,527 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2017-12-18 17:02:35,560 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2017-12-18 17:02:35,571 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2017-12-18 17:02:35,610 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2017-12-18 17:02:36,081 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 17:02:36,082 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 17:02:36,083 Line:243 AIOApi op=getSessEmp&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:02:36,085 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 17:02:36,131 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 17:02:36,132 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 17:02:36,132 Line:243 AIOApi op=getEnum&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:02:36,133 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 17:02:50,269 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:02:50,270 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:02:50,270 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:02:50,297 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:02:50,298 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:02:50,298 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:02:50,298 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:02:50,298 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:02:50,298 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:02:50,298 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:02:50,298 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:02:50,299 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:02:50,300 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:02:50,300 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:02:50,300 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:02:50,371 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:02:50,371 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:02:50,371 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:02:50,371 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:02:50,371 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:02:50,371 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:02:50,372 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:02:50,372 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:02:50,372 Line:689 通过SQL读原始数据：75
 [DEBUG] 2017-12-18 17:02:50,372 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:02:50,379 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:05:16,762 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query&popupWin=Popdiv
 [DEBUG] 2017-12-18 17:05:16,763 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[tblVirtualStock,tblVirtualStock,];reportName=[è??????????????è??,è??????????????è??,];displayName=[??????,??????,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectStock_v2,ReportSelectStock_v2,];MOID=[fc26a1c0_0911091930102960206,fc26a1c0_0911091930102960206,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];
 [DEBUG] 2017-12-18 17:05:16,788 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-18 17:05:16,788 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 17:05:16,788 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-18 17:05:16,789 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query&popupWin=Popdiv&checkTab=Y
 [DEBUG] 2017-12-18 17:05:16,790 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[tblVirtualStock,tblVirtualStock,];reportName=[è??????????????è??,è??????????????è??,];displayName=[??????,??????,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectStock_v2,ReportSelectStock_v2,];MOID=[fc26a1c0_0911091930102960206,fc26a1c0_0911091930102960206,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];checkTab=[Y,];
 [DEBUG] 2017-12-18 17:05:16,801 Line:3434 DynDBManager.popSelect selectName=ReportSelectStock_v2; sql=select * from (select tblStock.classCode f1 ,tblStock.isCatalog f2 ,tblStock.StockNumber f3 ,tblStock.StockFullName f4 ,tblStock.StockFullNamePYM f5 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock
      where 1=1  and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 17:05:19,670 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 17:05:19,671 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[00001,];hide_StockCode=[00001#;#0#;#总仓1#;#,];tblStock.StockFullName=[总仓1,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 17:05:19,702 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:05:19,702 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:05:19,702 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:05:19,703 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:05:19,703 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:05:19,703 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:05:19,703 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:05:19,703 Line:582 ReportDataMgt.getReportData 参数7:00001;0
 [DEBUG] 2017-12-18 17:05:19,703 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:05:19,704 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:05:19,705 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:05:19,705 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:05:19,773 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:05:19,773 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:05:19,773 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:19,774 Line:587 ReportDataMgt.getReportData warn  and ( b.StockCode in ('00001'))
 [DEBUG] 2017-12-18 17:05:19,774 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:05:19,774 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:19,774 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:05:19,774 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and ( b.StockCode in ('00001')) union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and ( b.StockCode in ('00001')) union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and ( b.StockCode in ('00001'))) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:05:19,775 Line:689 通过SQL读原始数据：73
 [DEBUG] 2017-12-18 17:05:19,775 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:05:23,786 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query&popupWin=Popdiv
 [DEBUG] 2017-12-18 17:05:23,787 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[tblVirtualStock,tblVirtualStock,];reportName=[è??????????????è??,è??????????????è??,];displayName=[??????,??????,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectStock_v2,ReportSelectStock_v2,];MOID=[fc26a1c0_0911091930102960206,fc26a1c0_0911091930102960206,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];
 [DEBUG] 2017-12-18 17:05:23,820 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-18 17:05:23,821 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 17:05:23,821 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-18 17:05:23,822 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query&popupWin=Popdiv&checkTab=Y
 [DEBUG] 2017-12-18 17:05:23,823 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[tblVirtualStock,tblVirtualStock,];reportName=[è??????????????è??,è??????????????è??,];displayName=[??????,??????,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectStock_v2,ReportSelectStock_v2,];MOID=[fc26a1c0_0911091930102960206,fc26a1c0_0911091930102960206,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];checkTab=[Y,];
 [DEBUG] 2017-12-18 17:05:23,826 Line:3434 DynDBManager.popSelect selectName=ReportSelectStock_v2; sql=select * from (select tblStock.classCode f1 ,tblStock.isCatalog f2 ,tblStock.StockNumber f3 ,tblStock.StockFullName f4 ,tblStock.StockFullNamePYM f5 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock
      where 1=1  and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 17:05:25,991 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 17:05:25,991 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:00001;0@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[00002,];hide_StockCode=[00002#;#0#;#总仓2#;#,];tblStock.StockFullName=[总仓2,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 17:05:26,003 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:05:26,003 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:05:26,003 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:05:26,004 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:05:26,004 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:05:26,004 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:05:26,004 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:05:26,004 Line:582 ReportDataMgt.getReportData 参数7:00002;0
 [DEBUG] 2017-12-18 17:05:26,004 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:05:26,004 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:05:26,005 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:05:26,006 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:05:26,022 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:05:26,022 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:05:26,023 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:26,023 Line:587 ReportDataMgt.getReportData warn  and ( b.StockCode in ('00002'))
 [DEBUG] 2017-12-18 17:05:26,023 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:05:26,023 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:26,023 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:05:26,023 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and ( b.StockCode in ('00002')) union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and ( b.StockCode in ('00002')) union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and ( b.StockCode in ('00002'))) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:05:26,024 Line:689 通过SQL读原始数据：21
 [DEBUG] 2017-12-18 17:05:26,024 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:05:34,628 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query&popupWin=Popdiv
 [DEBUG] 2017-12-18 17:05:34,629 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[tblVirtualStock,tblVirtualStock,];reportName=[è??????????????è??,è??????????????è??,];displayName=[??????,??????,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectStock_v2,ReportSelectStock_v2,];MOID=[fc26a1c0_0911091930102960206,fc26a1c0_0911091930102960206,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];
 [DEBUG] 2017-12-18 17:05:34,651 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblStock&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2017-12-18 17:05:34,652 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[tblStock,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2017-12-18 17:05:34,652 Line:229 TreeMgt.getTree sql= select classCode,StockFullName,StockNumber,id from tblStock where statusId =0   and isCatalog=1 order by StockNumber
 [DEBUG] 2017-12-18 17:05:34,653 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query/UserFunctionAction.do?operation=22&src=menu&reportNumber=tblVirtualStock&reportName=%E8%99%9A%E6%8B%9F%E5%BA%93%E5%AD%98%E6%9F%A5%E8%AF%A2&displayName=%E4%BB%93%E5%BA%93&LinkType=@URL:&selectName=ReportSelectStock_v2&MOID=fc26a1c0_0911091930102960206&MOOP=query&popupWin=Popdiv&checkTab=Y
 [DEBUG] 2017-12-18 17:05:34,654 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[22,];src=[menu,menu,];reportNumber=[tblVirtualStock,tblVirtualStock,];reportName=[è??????????????è??,è??????????????è??,];displayName=[??????,??????,];LinkType=[@URL:,@URL:,];selectName=[ReportSelectStock_v2,ReportSelectStock_v2,];MOID=[fc26a1c0_0911091930102960206,fc26a1c0_0911091930102960206,];MOOP=[query/UserFunctionAction.do?operation=22,query,];popupWin=[Popdiv,];checkTab=[Y,];
 [DEBUG] 2017-12-18 17:05:34,658 Line:3434 DynDBManager.popSelect selectName=ReportSelectStock_v2; sql=select * from (select tblStock.classCode f1 ,tblStock.isCatalog f2 ,tblStock.StockNumber f3 ,tblStock.StockFullName f4 ,tblStock.StockFullNamePYM f5 
,tblStock.isCatalog as childCount,ROW_NUMBER() over( order by tblStock.StockNumber,tblStock.StockFullName) as row_id from tblStock
      where 1=1  and tblStock.workFlowNodeName='finish' and tblStock.classCode like '_____') a where  row_id between 1 and 100 order by row_id 
 [DEBUG] 2017-12-18 17:05:37,301 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2017-12-18 17:05:37,302 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[3,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:{call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}@ParamList:@Param:00002;0@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[false,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2017-12-18 17:05:37,316 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:05:37,316 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:05:37,316 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:05:37,316 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:05:37,316 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:05:37,317 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:05:37,317 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:05:37,317 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:05:37,317 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:05:37,317 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:05:37,317 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:05:37,318 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:05:37,318 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:05:37,318 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:05:37,318 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:05:37,318 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:05:37,318 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:05:37,319 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:05:37,338 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:05:37,339 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:05:37,339 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:37,339 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:37,339 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:05:37,339 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:05:37,340 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:05:37,340 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:05:37,340 Line:689 通过SQL读原始数据：24
 [DEBUG] 2017-12-18 17:05:37,341 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:06:39,223 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 17:06:39,226 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 17:06:39,227 Line:243 AIOApi op=getSessEmp&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:06:39,228 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 17:06:39,283 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 17:06:39,284 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 17:06:39,284 Line:243 AIOApi op=getEnum&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:06:39,286 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 17:06:41,085 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:06:41,086 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:06:41,086 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:06:41,086 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:06:41,107 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:06:42,602 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:06:42,603 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:06:42,604 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:06:42,663 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 17:06:42,664 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:06:42,664 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:06:42,820 Line:689 通过SQL读原始数据：156
 [DEBUG] 2017-12-18 17:06:42,820 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:06:42,823 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:06:44,345 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:06:44,348 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:06:44,348 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:06:44,374 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 17:06:44,374 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:06:44,375 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:06:44,413 Line:689 通过SQL读原始数据：39
 [DEBUG] 2017-12-18 17:06:44,429 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 17:06:44,431 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:12:56,635 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:12:56,636 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:12:56,636 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:12:56,637 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:12:56,662 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:12:58,152 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:12:58,155 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:12:58,156 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:12:58,210 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 17:12:58,211 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:12:58,211 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:12:58,322 Line:689 通过SQL读原始数据：111
 [DEBUG] 2017-12-18 17:12:58,323 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:12:58,325 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:12:59,822 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 17:12:59,823 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 17:12:59,823 Line:243 AIOApi op=getSessEmp&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:12:59,823 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 17:12:59,850 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 17:12:59,850 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 17:12:59,851 Line:243 AIOApi op=getEnum&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:12:59,851 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 17:12:59,852 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:12:59,852 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:12:59,853 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:12:59,865 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 17:12:59,865 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:12:59,865 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:12:59,891 Line:689 通过SQL读原始数据：26
 [DEBUG] 2017-12-18 17:12:59,907 Line:1391 整理数据：15
 [DEBUG] 2017-12-18 17:12:59,909 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:13:01,552 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:13:01,553 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:13:01,553 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:13:01,554 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:13:01,555 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:13:03,066 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:13:03,068 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:13:03,069 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:13:03,103 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 17:13:03,105 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:13:03,106 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:13:03,111 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:13:03,113 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:13:03,122 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:13:04,663 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:13:04,664 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:13:04,665 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:13:04,698 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 17:13:04,700 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:13:04,700 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:13:04,703 Line:689 通过SQL读原始数据：4
 [DEBUG] 2017-12-18 17:13:04,707 Line:1391 整理数据：3
 [DEBUG] 2017-12-18 17:13:04,713 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:14:34,704 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:14:34,705 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:14:34,705 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:14:34,706 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:14:34,723 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:14:36,223 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:14:36,225 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:14:36,226 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:14:36,257 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 17:14:36,257 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:14:36,257 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:14:36,406 Line:689 通过SQL读原始数据：149
 [DEBUG] 2017-12-18 17:14:36,407 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:14:36,411 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:14:37,942 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:14:37,944 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:14:37,944 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:14:37,968 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 17:14:37,969 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:14:37,969 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:14:38,000 Line:689 通过SQL读原始数据：31
 [DEBUG] 2017-12-18 17:14:38,017 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 17:14:38,019 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:20:46,611 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:20:46,611 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:20:46,612 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:20:46,612 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:20:46,629 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:20:47,575 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:20:47,576 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:20:47,577 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:20:47,641 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 17:20:47,642 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:20:47,643 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:20:47,785 Line:689 通过SQL读原始数据：143
 [DEBUG] 2017-12-18 17:20:47,786 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:20:47,791 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:20:49,326 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:20:49,328 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:20:49,329 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:20:49,354 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 17:20:49,356 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:20:49,356 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:20:49,409 Line:689 通过SQL读原始数据：54
 [DEBUG] 2017-12-18 17:20:49,427 Line:1391 整理数据：17
 [DEBUG] 2017-12-18 17:20:49,428 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:28:16,707 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 17:30:13,127 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:30:13,128 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:30:13,129 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:30:13,129 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:30:13,129 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:30:13,130 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:30:13,131 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:30:13,158 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:30:13,167 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:30:13,168 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:30:13,169 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:30:13,169 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:30:13,170 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:30:13,170 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:30:13,170 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:30:13,170 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:30:13,171 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:30:13,171 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:30:13,171 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:30:13,171 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:30:13,172 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:30:13,172 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:30:13,172 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:30:13,172 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:30:13,172 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:30:13,173 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:30:13,284 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:30:13,284 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:30:13,285 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:30:13,285 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:30:13,285 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:30:13,285 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:30:13,285 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:30:13,286 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:30:13,286 Line:689 通过SQL读原始数据：118
 [DEBUG] 2017-12-18 17:30:13,286 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:30:13,291 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:30:14,631 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:30:14,633 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:30:14,634 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:30:14,666 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2017-12-18 17:30:14,667 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:30:14,667 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:30:14,788 Line:689 通过SQL读原始数据：121
 [DEBUG] 2017-12-18 17:30:14,789 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:30:14,790 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:30:16,315 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2017-12-18 17:30:16,317 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2017-12-18T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2017-12-18 17:30:16,318 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:30:16,347 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '1' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder   left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 and isNull(tblSalesOrder.workFlowNodeName,'')!='print'        and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2017-12-18 17:30:16,347 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2017-12-18 17:30:16,348 Line:582 ReportDataMgt.getReportData 参数2:2017-12-18T16:00:00.000Z
 [DEBUG] 2017-12-18 17:30:16,391 Line:689 通过SQL读原始数据：44
 [DEBUG] 2017-12-18 17:30:16,407 Line:1391 整理数据：16
 [DEBUG] 2017-12-18 17:30:16,409 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2017-12-18T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2017-12-18 17:45:39,956 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:45:39,959 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:45:39,959 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:45:39,959 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:45:39,960 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:45:39,961 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:45:39,961 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:45:39,989 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:45:39,996 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:45:39,997 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:45:39,997 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:45:39,998 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:45:39,998 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:45:39,998 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:45:39,998 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:45:39,998 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:45:39,999 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:45:39,999 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:45:39,999 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:45:39,999 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:45:40,000 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:45:40,000 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:45:40,000 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:45:40,000 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:45:40,001 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:45:40,001 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:45:40,121 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:45:40,121 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:45:40,121 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:40,121 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:40,121 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:45:40,122 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:40,122 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:45:40,122 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:45:40,122 Line:689 通过SQL读原始数据：125
 [DEBUG] 2017-12-18 17:45:40,123 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:45:40,129 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:45:41,458 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:45:41,460 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:45:41,461 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:45:41,490 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:45:41,491 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:45:41,492 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:45:41,492 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:45:41,493 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:45:41,493 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:45:41,493 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:45:41,494 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:45:41,494 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:45:41,494 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:45:41,495 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:45:41,495 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:45:41,495 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:45:41,496 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:45:41,496 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:45:41,497 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:45:41,497 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:45:41,497 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:45:41,501 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:45:41,501 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:45:41,502 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:41,503 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:41,503 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:45:41,504 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:41,504 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:45:41,506 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:45:41,508 Line:689 通过SQL读原始数据：17
 [DEBUG] 2017-12-18 17:45:41,509 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:45:41,521 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:45:43,041 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:45:43,043 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:45:43,044 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:45:43,073 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:45:43,074 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:45:43,074 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:45:43,075 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:45:43,075 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:45:43,076 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:45:43,076 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:45:43,077 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:45:43,077 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:45:43,077 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:45:43,078 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:45:43,078 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:45:43,079 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:45:43,079 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:45:43,079 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:45:43,080 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:45:43,080 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:45:43,080 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:45:43,084 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:45:43,084 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:45:43,085 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:43,085 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:43,085 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:45:43,086 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:45:43,086 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:45:43,087 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:45:43,087 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:45:43,088 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:45:43,099 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:47:47,523 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:47:47,523 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:47:47,523 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:47:47,524 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:47:47,524 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:47:47,524 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:47:47,525 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:47:47,548 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:47:47,552 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:47:47,553 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:47:47,553 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:47:47,553 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:47:47,554 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:47:47,554 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:47:47,554 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:47:47,554 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:47:47,555 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:47:47,555 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:47:47,555 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:47:47,555 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:47:47,555 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:47:47,556 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:47:47,556 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:47:47,556 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:47:47,556 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:47:47,557 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:47:47,697 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:47:47,697 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:47:47,697 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:47,697 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:47,697 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:47:47,698 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:47,698 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:47:47,698 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:47:47,698 Line:689 通过SQL读原始数据：145
 [DEBUG] 2017-12-18 17:47:47,698 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:47:47,702 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:47:49,042 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:47:49,044 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:47:49,045 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:47:49,119 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:47:49,120 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:47:49,120 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:47:49,121 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:47:49,121 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:47:49,122 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:47:49,122 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:47:49,122 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:47:49,127 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:47:49,129 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:47:49,129 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:47:49,130 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:47:49,130 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:47:49,131 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:47:49,131 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:47:49,131 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:47:49,131 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:47:49,131 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:47:49,170 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:47:49,170 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:47:49,171 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:49,171 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:49,171 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:47:49,171 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:49,171 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:47:49,171 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:47:49,172 Line:689 通过SQL读原始数据：52
 [DEBUG] 2017-12-18 17:47:49,172 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:47:49,176 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:47:50,696 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:47:50,696 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:47:50,696 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:47:50,717 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:47:50,717 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:47:50,718 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:47:50,718 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:47:50,718 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:47:50,718 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:47:50,718 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:47:50,718 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:47:50,718 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:47:50,718 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:47:50,719 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:47:50,720 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:47:50,763 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:47:50,764 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:47:50,764 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:50,764 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:50,764 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:47:50,764 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:47:50,764 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:47:50,765 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:47:50,765 Line:689 通过SQL读原始数据：48
 [DEBUG] 2017-12-18 17:47:50,765 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:47:50,769 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:48:25,839 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:48:25,839 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:48:25,840 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:48:25,840 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:48:25,840 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:48:25,841 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:48:25,842 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:48:25,850 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:48:25,869 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:48:25,870 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:48:25,870 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:48:25,871 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:48:25,872 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:48:25,873 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:48:25,874 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:48:25,874 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:48:25,874 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:48:25,874 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:48:25,875 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:48:25,875 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:48:25,875 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:48:25,875 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:48:25,876 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:48:25,876 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:48:25,876 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:48:25,877 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:48:25,880 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:48:25,881 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:48:25,881 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:25,882 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:25,882 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:48:25,883 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:25,883 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:48:25,883 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:48:25,884 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:48:25,885 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:48:25,892 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:48:27,358 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:48:27,360 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:48:27,360 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:48:27,386 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:48:27,386 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:48:27,387 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:48:27,387 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:48:27,388 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:48:27,388 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:48:27,389 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:48:27,389 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:48:27,389 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:48:27,390 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:48:27,390 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:48:27,391 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:48:27,391 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:48:27,391 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:48:27,392 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:48:27,393 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:48:27,394 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:48:27,394 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:48:27,397 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:48:27,398 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:48:27,399 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:27,399 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:27,399 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:48:27,400 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:27,400 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:48:27,400 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:48:27,401 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-18 17:48:27,402 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:48:27,412 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:48:28,937 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:48:28,939 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:48:28,940 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:48:28,973 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:48:28,975 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:48:28,975 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:48:28,976 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:48:28,977 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:48:28,977 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:48:28,978 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:48:28,978 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:48:28,979 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:48:28,980 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:48:28,980 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:48:28,981 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:48:28,982 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:48:28,982 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:48:28,983 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:48:28,984 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:48:28,985 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:48:28,985 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:48:28,991 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:48:28,992 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:48:28,992 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:28,993 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:28,994 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:48:28,994 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:48:28,995 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:48:28,996 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:48:28,997 Line:689 通过SQL读原始数据：23
 [DEBUG] 2017-12-18 17:48:28,998 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:48:29,010 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:49:06,128 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:49:06,130 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:49:06,130 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:49:06,130 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:49:06,131 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:49:06,131 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:49:06,133 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:49:06,147 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:49:06,160 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:49:06,160 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:49:06,161 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:49:06,161 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:49:06,161 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:49:06,161 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:49:06,161 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:49:06,161 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:49:06,161 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:49:06,162 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:49:06,162 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:49:06,162 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:49:06,162 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:49:06,162 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:49:06,162 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:49:06,163 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:49:06,163 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:49:06,163 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:49:06,251 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:49:06,252 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:49:06,252 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:06,252 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:06,252 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:49:06,252 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:06,252 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:49:06,253 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:49:06,253 Line:689 通过SQL读原始数据：93
 [DEBUG] 2017-12-18 17:49:06,254 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:49:06,261 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:49:07,645 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:49:07,647 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:49:07,647 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:49:07,829 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:49:07,830 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:49:07,830 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:49:07,831 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:49:07,831 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:49:07,831 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:49:07,831 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:49:07,832 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:49:07,832 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:49:07,832 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:49:07,832 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:49:07,832 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:49:07,833 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:49:07,834 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:49:07,834 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:49:07,834 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:49:07,835 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:49:07,835 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:49:07,836 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:49:07,836 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:49:07,836 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:07,837 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:07,837 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:49:07,837 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:07,837 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:49:07,837 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:49:07,837 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 17:49:07,838 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:49:07,842 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:49:09,364 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:49:09,366 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:49:09,367 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:49:09,394 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:49:09,395 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:49:09,396 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:49:09,397 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:49:09,398 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:49:09,398 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:49:09,399 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:49:09,400 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:49:09,401 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:49:09,401 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:49:09,402 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:49:09,402 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:49:09,403 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:49:09,404 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:49:09,404 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:49:09,405 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:49:09,405 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:49:09,406 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:49:09,410 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:49:09,411 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:49:09,411 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:09,412 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:09,412 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:49:09,412 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:49:09,413 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:49:09,413 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:49:09,414 Line:689 通过SQL读原始数据：19
 [DEBUG] 2017-12-18 17:49:09,415 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:49:09,424 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:50:35,919 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:50:35,919 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:50:35,921 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:50:35,922 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:35,922 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:50:35,922 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:35,923 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:50:35,941 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:50:35,959 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:50:35,961 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:50:35,961 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:50:35,962 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:50:35,962 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:50:35,962 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:50:35,962 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:50:35,963 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:50:35,963 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:50:35,963 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:50:35,964 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:50:35,964 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:50:35,964 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:50:35,964 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:50:35,965 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:50:35,965 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:50:35,965 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:50:35,965 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:50:36,061 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:50:36,061 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:50:36,061 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:36,062 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:36,062 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:50:36,062 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:36,062 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:50:36,062 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:50:36,063 Line:689 通过SQL读原始数据：102
 [DEBUG] 2017-12-18 17:50:36,063 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:50:36,069 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:50:37,430 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:50:37,430 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:50:37,430 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:37,441 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:50:37,441 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:50:37,441 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:50:37,441 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:50:37,442 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:50:37,442 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:50:37,442 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:50:37,442 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:50:37,442 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:50:37,442 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:50:37,442 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:50:37,442 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:50:37,443 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:50:37,443 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:50:37,443 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:50:37,443 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:50:37,443 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:50:37,443 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:50:37,445 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:50:37,445 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:50:37,445 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:37,445 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:37,445 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:50:37,445 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:37,446 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:50:37,446 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:50:37,446 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:50:37,446 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:50:37,455 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:50:38,980 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:50:38,982 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:50:38,982 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:39,008 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:50:39,008 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:50:39,009 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:50:39,009 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:50:39,009 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:50:39,009 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:50:39,010 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:50:39,010 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:50:39,010 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:50:39,010 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:50:39,011 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:50:39,011 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:50:39,011 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:50:39,012 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:50:39,012 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:50:39,012 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:50:39,012 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:50:39,013 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:39,015 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:50:39,016 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:50:39,016 Line:689 通过SQL读原始数据：8
 [DEBUG] 2017-12-18 17:50:39,016 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:50:39,022 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:50:39,479 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 17:50:39,480 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 17:50:39,480 Line:243 AIOApi op=getSessEmp&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:39,480 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 17:50:39,501 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 17:50:39,502 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 17:50:39,502 Line:243 AIOApi op=getEnum&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:39,503 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 17:50:41,345 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2017-12-18 17:50:41,345 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2017-12-18 17:50:41,346 Line:243 AIOApi op=getSessEmp&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:41,346 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2017-12-18 17:50:41,365 Line:2992 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2017-12-18 17:50:41,365 Line:3003 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2017-12-18 17:50:41,365 Line:243 AIOApi op=getEnum&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:41,366 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"法人","value":"1"},{"name":"董事","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副经理","value":"5"},{"name":"部长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其他","value":"12"}]}
 [DEBUG] 2017-12-18 17:50:44,229 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:50:44,230 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:50:44,230 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:44,232 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:50:44,233 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:50:44,233 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:44,234 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:50:44,238 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:50:44,247 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:50:44,247 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:50:44,247 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:50:44,247 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:50:44,247 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:50:44,247 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:50:44,248 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:50:44,248 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:50:44,248 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:50:44,248 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:50:44,248 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:50:44,248 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:50:44,249 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:50:44,249 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:50:44,249 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:50:44,249 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:50:44,250 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:50:44,250 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:50:44,251 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:50:44,252 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:50:44,252 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:44,252 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:44,252 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:50:44,253 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:44,253 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:50:44,253 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:50:44,253 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:50:44,254 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:50:44,257 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:50:45,749 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:50:45,751 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:50:45,752 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:45,780 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:50:45,780 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:50:45,781 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:50:45,781 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:50:45,782 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:50:45,782 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:50:45,783 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:50:45,783 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:50:45,783 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:50:45,784 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:50:45,784 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:50:45,784 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:50:45,785 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:50:45,785 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:50:45,785 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:50:45,786 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:50:45,786 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:50:45,787 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:50:45,790 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:50:45,790 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:50:45,791 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:45,791 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:45,791 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:50:45,792 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:45,792 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:50:45,793 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:50:45,794 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:50:45,795 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:50:45,805 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:50:47,333 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:50:47,335 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:50:47,336 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:50:47,370 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:50:47,370 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:50:47,371 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:50:47,371 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:50:47,372 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:50:47,372 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:50:47,372 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:50:47,373 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:50:47,373 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:50:47,373 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:50:47,374 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:50:47,374 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:50:47,375 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:50:47,375 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:50:47,375 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:50:47,376 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:50:47,376 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:50:47,377 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:50:47,380 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:50:47,381 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:50:47,381 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:47,382 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:47,382 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:50:47,383 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:50:47,384 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:50:47,384 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:50:47,385 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-18 17:50:47,386 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:50:47,394 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:53:58,196 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:53:58,198 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:53:58,198 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:53:58,198 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:53:58,199 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:53:58,199 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:53:58,200 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:53:58,209 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:53:58,245 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:53:58,247 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:53:58,247 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:53:58,247 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:53:58,247 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:53:58,247 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:53:58,248 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:53:58,248 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:53:58,248 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:53:58,248 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:53:58,248 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:53:58,249 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:53:58,249 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:53:58,249 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:53:58,249 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:53:58,249 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:53:58,249 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:53:58,250 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:53:58,332 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:53:58,333 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:53:58,334 Line:689 通过SQL读原始数据：87
 [DEBUG] 2017-12-18 17:53:58,334 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:53:58,338 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:53:59,703 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:53:59,704 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:53:59,705 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:53:59,734 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:53:59,735 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:53:59,736 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:53:59,737 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:53:59,738 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:53:59,739 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:53:59,739 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:53:59,740 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:53:59,740 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:53:59,741 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:53:59,741 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:53:59,742 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:53:59,743 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:53:59,743 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:53:59,744 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:53:59,744 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:53:59,745 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:53:59,745 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:53:59,790 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:53:59,790 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:53:59,790 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:53:59,790 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:53:59,790 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:53:59,791 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:53:59,791 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:53:59,791 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:53:59,791 Line:689 通过SQL读原始数据：56
 [DEBUG] 2017-12-18 17:53:59,792 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:53:59,796 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:01,312 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:01,313 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:01,314 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:01,339 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:01,340 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2017-12-18 17:54:01,341 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:01,342 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:01,342 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:01,342 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:01,342 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:01,343 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:01,343 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:01,343 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:01,343 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:01,344 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:01,344 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:01,344 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:01,344 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:01,345 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:01,345 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:01,345 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:01,347 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:01,348 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:01,348 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:01,348 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:01,348 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:01,348 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:01,349 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:01,349 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:01,349 Line:689 通过SQL读原始数据：9
 [DEBUG] 2017-12-18 17:54:01,349 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:01,354 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:02,871 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:02,873 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[3,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:02,874 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:02,903 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:02,903 Line:567 ReportDataMgt.getReportData 参数1:3
 [DEBUG] 2017-12-18 17:54:02,904 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:02,904 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:02,905 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:02,905 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:02,905 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:02,906 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:02,906 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:02,906 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:02,907 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:02,907 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:02,907 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:02,908 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:02,908 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:02,908 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:02,909 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:02,909 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:02,912 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:02,913 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:02,913 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:02,914 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:02,914 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:02,914 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:02,915 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:02,915 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:02,916 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:54:02,917 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:02,930 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:04,449 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:04,450 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[4,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:04,451 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:04,462 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:04,463 Line:567 ReportDataMgt.getReportData 参数1:4
 [DEBUG] 2017-12-18 17:54:04,463 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:04,463 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:04,463 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:04,463 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:04,464 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:04,464 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:04,464 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:04,464 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:04,464 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:04,464 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:04,465 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:04,465 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:04,465 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:04,465 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:04,466 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:04,466 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:04,468 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:04,468 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:04,468 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:04,468 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:04,469 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:04,469 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:04,469 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:04,469 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:04,470 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 17:54:04,470 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:04,475 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:05,990 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:05,991 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[5,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:05,992 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:06,007 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:06,008 Line:567 ReportDataMgt.getReportData 参数1:5
 [DEBUG] 2017-12-18 17:54:06,008 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:06,009 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:06,009 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:06,009 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:06,010 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:06,010 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:06,010 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:06,010 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:06,011 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:06,011 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:06,012 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:06,013 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:06,013 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:06,013 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:06,013 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:06,014 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:06,016 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:06,017 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:06,017 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:06,018 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:06,018 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:06,019 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:06,019 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:06,020 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:06,022 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:54:06,022 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:06,029 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:07,545 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:07,546 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[6,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:07,546 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:07,556 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:07,557 Line:567 ReportDataMgt.getReportData 参数1:6
 [DEBUG] 2017-12-18 17:54:07,557 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:07,557 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:07,557 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:07,557 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:07,558 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:07,558 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:07,558 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:07,558 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:07,558 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:07,558 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:07,559 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:07,559 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:07,559 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:07,559 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:07,559 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:07,559 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:07,561 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:07,562 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:07,562 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:07,562 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:07,562 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:07,562 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:07,562 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:07,563 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:07,563 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:54:07,563 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:07,572 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:09,085 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:09,086 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[7,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:09,086 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:09,099 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:09,099 Line:567 ReportDataMgt.getReportData 参数1:7
 [DEBUG] 2017-12-18 17:54:09,099 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:09,100 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:09,100 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:09,100 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:09,100 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:09,100 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:09,100 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:09,101 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:09,101 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:09,101 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:09,101 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:09,101 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:09,101 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:09,102 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:09,102 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:09,102 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:09,104 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:09,104 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:09,104 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:09,104 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:09,104 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:09,105 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:09,105 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:09,105 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:09,105 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:54:09,106 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:09,111 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:10,636 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:10,638 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[8,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:10,639 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:10,671 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:10,672 Line:567 ReportDataMgt.getReportData 参数1:8
 [DEBUG] 2017-12-18 17:54:10,672 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:10,673 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:10,673 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:10,673 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:10,674 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:10,674 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:10,674 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:10,675 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:10,675 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:10,675 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:10,676 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:10,676 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:10,676 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:10,677 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:10,677 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:10,677 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:10,681 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:10,681 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:10,682 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:10,682 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:10,684 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:10,684 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:10,684 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:10,685 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:10,686 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:54:10,686 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:10,699 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:12,216 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:12,217 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[9,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:12,218 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:12,227 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:12,227 Line:567 ReportDataMgt.getReportData 参数1:9
 [DEBUG] 2017-12-18 17:54:12,227 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:12,228 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:12,228 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:12,228 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:12,228 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:12,228 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:12,228 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:12,228 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:12,229 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:12,232 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:12,232 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:12,233 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:12,233 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:12,233 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:12,233 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:12,234 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:12,234 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:12,234 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 17:54:12,235 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:12,239 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:13,760 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:13,762 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[10,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:13,762 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:13,781 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:13,782 Line:567 ReportDataMgt.getReportData 参数1:10
 [DEBUG] 2017-12-18 17:54:13,782 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:13,783 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:13,783 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:13,783 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:13,784 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:13,784 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:13,785 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:13,785 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:13,785 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:13,786 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:13,786 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:13,786 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:13,787 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:13,787 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:13,788 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:13,788 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:13,791 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:13,792 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:13,792 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:13,793 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:13,793 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:13,793 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:13,794 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:13,794 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:13,795 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:54:13,796 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:13,814 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:15,340 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:15,341 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[11,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:15,342 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:15,376 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:15,377 Line:567 ReportDataMgt.getReportData 参数1:11
 [DEBUG] 2017-12-18 17:54:15,378 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:15,380 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:15,381 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:15,381 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:15,382 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:15,382 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:15,383 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:15,383 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:15,383 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:15,383 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:15,384 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:15,384 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:15,384 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:15,385 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:15,385 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:15,385 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:15,387 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:15,388 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:15,388 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:15,388 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:15,388 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:15,389 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:15,389 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:15,389 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:15,389 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 17:54:15,390 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:15,396 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:16,917 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:16,918 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[12,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:16,918 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:16,946 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:16,947 Line:567 ReportDataMgt.getReportData 参数1:12
 [DEBUG] 2017-12-18 17:54:16,947 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:16,948 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:16,948 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:16,949 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:16,949 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:16,949 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:16,950 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:16,950 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:16,950 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:16,950 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:16,951 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:16,951 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:16,952 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:16,952 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:16,952 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:16,953 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:16,956 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:16,956 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:16,957 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:16,957 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:16,957 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:16,958 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:16,958 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:16,958 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:16,959 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 17:54:16,960 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:16,973 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:18,501 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:18,502 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[13,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:18,503 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:18,535 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:18,537 Line:567 ReportDataMgt.getReportData 参数1:13
 [DEBUG] 2017-12-18 17:54:18,537 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:18,538 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:18,539 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:18,539 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:18,540 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:18,541 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:18,542 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:18,542 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:18,543 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:18,544 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:18,545 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:18,546 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:18,547 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:18,548 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:18,549 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:18,550 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:18,556 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:18,557 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:18,558 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:18,559 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:18,559 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:18,560 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:18,560 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:18,560 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:18,561 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-18 17:54:18,561 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:18,567 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:20,091 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:20,092 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[14,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:20,093 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:20,124 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:20,124 Line:567 ReportDataMgt.getReportData 参数1:14
 [DEBUG] 2017-12-18 17:54:20,125 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:20,125 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:20,125 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:20,126 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:20,126 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:20,126 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:20,127 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:20,127 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:20,128 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:20,128 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:20,129 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:20,130 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:20,130 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:20,131 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:20,131 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:20,132 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:20,136 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:20,136 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:20,137 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:20,137 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:20,137 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:20,138 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:20,138 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:20,138 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:20,139 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-18 17:54:20,140 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:20,150 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:21,660 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:21,660 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[15,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:21,660 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:21,669 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:21,669 Line:567 ReportDataMgt.getReportData 参数1:15
 [DEBUG] 2017-12-18 17:54:21,670 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:21,670 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:21,670 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:21,670 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:21,670 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:21,670 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:21,670 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:21,671 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:21,672 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:21,673 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:21,673 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:21,673 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:21,673 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:21,674 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:21,674 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:21,674 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:21,674 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:21,674 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:54:21,675 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:21,679 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:23,199 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:23,200 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[16,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:23,200 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:23,262 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:23,262 Line:567 ReportDataMgt.getReportData 参数1:16
 [DEBUG] 2017-12-18 17:54:23,262 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:23,262 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:23,263 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:23,263 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:23,263 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:23,263 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:23,263 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:23,263 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:23,263 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:23,263 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:23,264 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:23,264 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:23,264 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:23,264 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:23,264 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:23,264 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:23,349 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:23,350 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:23,350 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:23,350 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:23,350 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:23,350 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:23,350 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:23,351 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:23,351 Line:689 通过SQL读原始数据：89
 [DEBUG] 2017-12-18 17:54:23,351 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:23,356 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:24,878 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:24,879 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[17,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:24,881 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:24,926 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:24,926 Line:567 ReportDataMgt.getReportData 参数1:17
 [DEBUG] 2017-12-18 17:54:24,926 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:24,926 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:24,927 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:24,927 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:24,927 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:24,927 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:24,928 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:24,928 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:24,928 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:24,929 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:24,929 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:24,930 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:24,930 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:24,930 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:24,930 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:24,930 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:24,976 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:24,977 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:24,977 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:24,978 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:24,979 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:24,979 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:24,979 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:24,979 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:24,980 Line:689 通过SQL读原始数据：54
 [DEBUG] 2017-12-18 17:54:24,980 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:24,985 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:26,513 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:26,515 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[18,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:26,515 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:26,582 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:26,583 Line:567 ReportDataMgt.getReportData 参数1:18
 [DEBUG] 2017-12-18 17:54:26,583 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:26,583 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:26,584 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:26,584 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:26,584 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:26,585 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:26,585 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:26,585 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:26,585 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:26,586 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:26,586 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:26,586 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:26,587 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:26,587 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:26,587 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:26,587 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:26,678 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:26,679 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:26,679 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:26,680 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:26,680 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:26,680 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:26,680 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:26,681 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:26,681 Line:689 通过SQL读原始数据：98
 [DEBUG] 2017-12-18 17:54:26,682 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:26,693 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:28,218 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:28,219 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[19,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:28,220 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:28,291 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:28,292 Line:567 ReportDataMgt.getReportData 参数1:19
 [DEBUG] 2017-12-18 17:54:28,293 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:28,305 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:28,305 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:28,306 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:28,306 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:28,306 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:28,307 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:28,307 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:28,307 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:28,307 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:28,308 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:28,308 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:28,309 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:28,309 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:28,310 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:28,310 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:28,375 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:28,375 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:28,376 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:28,376 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:28,376 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:28,376 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:28,377 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:28,377 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:28,378 Line:689 通过SQL读原始数据：86
 [DEBUG] 2017-12-18 17:54:28,379 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:28,384 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:29,908 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:29,908 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[20,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:29,909 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:29,938 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:29,939 Line:567 ReportDataMgt.getReportData 参数1:20
 [DEBUG] 2017-12-18 17:54:29,940 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:29,940 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:29,940 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:29,941 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:29,941 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:29,941 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:29,942 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:29,942 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:29,942 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:29,943 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:29,943 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:29,944 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:29,945 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:29,945 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:29,946 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:29,946 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:29,949 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:29,950 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:29,950 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:29,950 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:29,951 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:29,951 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:29,952 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:29,952 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:29,953 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:54:29,953 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:29,963 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:31,483 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:31,483 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[21,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:31,484 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:31,508 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:31,509 Line:567 ReportDataMgt.getReportData 参数1:21
 [DEBUG] 2017-12-18 17:54:31,509 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:31,510 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:31,511 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:31,511 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:31,511 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:31,512 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:31,512 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:31,512 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:31,513 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:31,513 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:31,514 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:31,514 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:31,514 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:31,515 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:31,515 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:31,515 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:31,523 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:31,524 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:31,524 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:31,525 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:31,525 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:31,525 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:31,526 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:31,526 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:31,528 Line:689 通过SQL读原始数据：19
 [DEBUG] 2017-12-18 17:54:31,529 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:31,546 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:33,070 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:33,071 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[22,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:33,072 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:33,094 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:33,096 Line:567 ReportDataMgt.getReportData 参数1:22
 [DEBUG] 2017-12-18 17:54:33,096 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:33,097 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:33,097 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:33,097 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:33,098 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:33,098 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:33,098 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:33,099 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:33,099 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:33,099 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:33,099 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:33,100 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:33,100 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:33,101 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:33,101 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:33,101 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:33,104 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:33,105 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:33,106 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:33,106 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:33,107 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:33,107 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:33,108 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:33,108 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:33,109 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:54:33,110 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:33,117 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:34,628 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:34,629 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[23,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:34,629 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:34,637 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:34,637 Line:567 ReportDataMgt.getReportData 参数1:23
 [DEBUG] 2017-12-18 17:54:34,637 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:34,637 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:34,637 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:34,638 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:34,638 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:34,638 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:34,638 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:34,638 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:34,638 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:34,638 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:34,639 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:34,639 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:34,639 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:34,639 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:34,639 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:34,639 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:34,641 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:34,641 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:34,641 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:34,641 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:34,641 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:34,642 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:34,642 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:34,642 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:34,643 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:54:34,643 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:34,648 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:36,173 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:36,174 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[24,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:36,175 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:36,203 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:36,204 Line:567 ReportDataMgt.getReportData 参数1:24
 [DEBUG] 2017-12-18 17:54:36,204 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:36,205 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:36,205 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:36,205 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:36,205 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:36,206 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:36,206 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:36,207 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:36,207 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:36,207 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:36,207 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:36,208 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:36,208 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:36,208 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:36,209 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:36,209 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:36,212 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:36,213 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:36,213 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:36,213 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:36,214 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:36,214 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:36,215 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:36,215 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:36,216 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 17:54:36,216 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:36,222 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:37,745 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:37,746 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[25,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:37,747 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:37,772 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:37,773 Line:567 ReportDataMgt.getReportData 参数1:25
 [DEBUG] 2017-12-18 17:54:37,773 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:37,774 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:37,775 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:37,775 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:37,777 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:37,777 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:37,778 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:37,779 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:37,779 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:37,780 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:37,780 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:37,780 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:37,781 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:37,781 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:37,781 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:37,782 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:37,785 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:37,786 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:37,786 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:37,787 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:37,787 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:37,787 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:37,788 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:37,788 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:37,790 Line:689 通过SQL读原始数据：17
 [DEBUG] 2017-12-18 17:54:37,791 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:37,796 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:39,362 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:39,363 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[26,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:39,363 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:39,373 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:39,373 Line:567 ReportDataMgt.getReportData 参数1:26
 [DEBUG] 2017-12-18 17:54:39,374 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:39,374 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:39,374 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:39,374 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:39,374 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:39,374 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:39,375 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:39,376 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:39,376 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:39,377 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:39,377 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:39,377 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:39,378 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:39,378 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:39,378 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:39,378 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:39,378 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:39,378 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:54:39,379 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:39,383 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:40,904 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:40,906 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[27,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:40,907 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:40,939 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:40,940 Line:567 ReportDataMgt.getReportData 参数1:27
 [DEBUG] 2017-12-18 17:54:40,941 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:40,941 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:40,942 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:40,942 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:40,942 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:40,943 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:40,943 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:40,944 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:40,945 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:40,945 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:40,946 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:40,946 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:40,947 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:40,948 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:40,948 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:40,949 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:40,952 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:40,953 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:40,953 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:40,954 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:40,954 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:40,954 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:40,955 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:40,955 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:40,956 Line:689 通过SQL读原始数据：16
 [DEBUG] 2017-12-18 17:54:40,957 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:40,968 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:42,492 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:42,493 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[28,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:42,494 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:42,516 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:42,517 Line:567 ReportDataMgt.getReportData 参数1:28
 [DEBUG] 2017-12-18 17:54:42,517 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:42,518 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:42,518 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:42,518 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:42,519 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:42,519 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:42,519 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:42,520 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:42,520 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:42,521 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:42,521 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:42,521 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:42,522 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:42,522 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:42,522 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:42,523 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:42,527 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:42,527 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:42,528 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:42,528 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:42,528 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:42,529 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:42,529 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:42,529 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:42,530 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:54:42,531 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:42,544 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:44,072 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:44,073 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[29,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:44,074 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:44,100 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:44,101 Line:567 ReportDataMgt.getReportData 参数1:29
 [DEBUG] 2017-12-18 17:54:44,101 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:44,102 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:44,102 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:44,103 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:44,103 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:44,103 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:44,104 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:44,104 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:44,104 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:44,105 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:44,105 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:44,105 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:44,106 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:44,106 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:44,107 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:44,107 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:44,110 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:44,111 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:44,111 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:44,111 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:44,112 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:44,112 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:44,112 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:44,113 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:44,114 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:54:44,114 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:44,126 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:45,700 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:45,700 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[30,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:45,700 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:45,711 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:45,711 Line:567 ReportDataMgt.getReportData 参数1:30
 [DEBUG] 2017-12-18 17:54:45,711 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:45,712 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:45,712 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:45,712 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:45,712 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:45,712 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:45,712 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:45,712 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:45,712 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:45,713 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:45,715 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:45,715 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:45,715 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:45,715 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:45,715 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:45,715 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:45,716 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:45,716 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:45,716 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:54:45,716 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:45,721 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:47,240 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:47,241 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[31,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:47,242 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:47,274 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:47,275 Line:567 ReportDataMgt.getReportData 参数1:31
 [DEBUG] 2017-12-18 17:54:47,276 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:47,276 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:47,277 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:47,278 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:47,278 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:47,280 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:47,281 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:47,281 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:47,282 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:47,282 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:47,283 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:47,283 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:47,284 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:47,285 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:47,285 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:47,286 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:47,291 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:47,292 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:47,294 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:47,295 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:47,296 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:47,297 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:47,297 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:47,298 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:47,300 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-18 17:54:47,301 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:47,308 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:48,828 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:48,829 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[32,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:48,830 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:48,862 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:48,863 Line:567 ReportDataMgt.getReportData 参数1:32
 [DEBUG] 2017-12-18 17:54:48,863 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:48,864 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:48,864 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:48,864 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:48,865 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:48,865 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:48,865 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:48,865 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:48,866 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:48,866 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:48,866 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:48,867 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:48,867 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:48,867 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:48,868 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:48,868 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:48,871 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:48,871 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:48,872 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:48,872 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:48,873 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:48,873 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:48,873 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:48,874 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:48,874 Line:689 通过SQL读原始数据：11
 [DEBUG] 2017-12-18 17:54:48,875 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:48,885 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:50,414 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:50,415 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[33,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:50,416 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:50,447 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:50,449 Line:567 ReportDataMgt.getReportData 参数1:33
 [DEBUG] 2017-12-18 17:54:50,449 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:50,450 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:50,451 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:50,451 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:50,451 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:50,452 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:50,452 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:50,452 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:50,453 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:50,453 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:50,453 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:50,454 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:50,454 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:50,455 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:50,455 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:50,456 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:50,461 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:50,461 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:50,462 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:50,462 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:50,463 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:50,464 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:50,465 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:50,465 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:50,466 Line:689 通过SQL读原始数据：18
 [DEBUG] 2017-12-18 17:54:50,467 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:50,479 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:52,071 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:52,072 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[34,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:52,072 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:52,081 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:52,081 Line:567 ReportDataMgt.getReportData 参数1:34
 [DEBUG] 2017-12-18 17:54:52,081 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:52,081 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:52,081 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:52,081 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:52,082 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:52,083 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:52,083 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:52,083 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:52,083 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:52,084 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:52,085 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:52,085 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:52,085 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:52,085 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:52,085 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:52,085 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:52,086 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:52,086 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:54:52,086 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:52,093 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:53,615 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:53,617 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[35,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:53,618 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:53,641 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:53,641 Line:567 ReportDataMgt.getReportData 参数1:35
 [DEBUG] 2017-12-18 17:54:53,642 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:53,642 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:53,642 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:53,642 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:53,642 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:53,643 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:53,644 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:53,644 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:53,644 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:53,645 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:53,645 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:53,646 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:53,646 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:53,646 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:53,646 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:53,646 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:53,646 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:53,647 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:54:53,647 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:53,654 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:55,176 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:55,178 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[36,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:55,179 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:55,202 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:55,203 Line:567 ReportDataMgt.getReportData 参数1:36
 [DEBUG] 2017-12-18 17:54:55,204 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:55,204 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:55,205 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:55,205 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:55,205 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:55,206 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:55,206 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:55,206 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:55,207 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:55,207 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:55,207 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:55,208 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:55,208 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:55,209 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:55,209 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:55,209 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:55,214 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:55,215 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:55,216 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:55,216 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:55,216 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:55,217 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:55,217 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:55,217 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:55,218 Line:689 通过SQL读原始数据：15
 [DEBUG] 2017-12-18 17:54:55,219 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:54:55,225 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:56,747 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:56,748 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[37,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:56,748 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:56,767 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:56,767 Line:567 ReportDataMgt.getReportData 参数1:37
 [DEBUG] 2017-12-18 17:54:56,768 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:56,768 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:56,768 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:56,769 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:56,769 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:56,770 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:56,770 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:56,771 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:56,771 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:56,771 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:56,772 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:56,772 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:56,773 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:56,773 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:56,774 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:56,775 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:56,779 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:56,780 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:56,780 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:56,780 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:56,781 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:56,781 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:56,782 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:56,782 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:56,783 Line:689 通过SQL读原始数据：16
 [DEBUG] 2017-12-18 17:54:56,783 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:56,800 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:58,380 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:58,380 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[38,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:58,380 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:58,388 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:58,388 Line:567 ReportDataMgt.getReportData 参数1:38
 [DEBUG] 2017-12-18 17:54:58,389 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:58,389 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:58,389 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:58,389 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:58,389 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:58,389 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:58,389 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:58,389 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:58,390 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:58,392 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:58,392 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:58,392 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:58,392 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:58,392 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:58,393 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:58,393 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:58,393 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:58,393 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:54:58,393 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:58,398 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:54:59,921 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:54:59,922 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[39,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:54:59,923 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:54:59,946 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:54:59,947 Line:567 ReportDataMgt.getReportData 参数1:39
 [DEBUG] 2017-12-18 17:54:59,947 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:54:59,948 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:54:59,948 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:54:59,948 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:54:59,949 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:54:59,949 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:54:59,949 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:54:59,950 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:54:59,950 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:54:59,950 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:54:59,951 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:54:59,951 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:54:59,951 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:54:59,952 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:54:59,952 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:54:59,953 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:54:59,956 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:54:59,957 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:54:59,957 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:59,957 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:59,958 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:54:59,958 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:54:59,958 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:54:59,959 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:54:59,959 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 17:54:59,960 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:54:59,971 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:01,495 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:01,496 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[40,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:01,497 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:01,515 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:01,516 Line:567 ReportDataMgt.getReportData 参数1:40
 [DEBUG] 2017-12-18 17:55:01,516 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:01,517 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:01,517 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:01,517 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:01,518 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:01,519 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:01,519 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:01,519 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:01,520 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:01,520 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:01,521 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:01,521 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:01,521 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:01,522 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:01,522 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:01,523 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:01,525 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:01,525 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:01,525 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:01,525 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:01,526 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:01,526 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:01,526 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:01,526 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:01,527 Line:689 通过SQL读原始数据：11
 [DEBUG] 2017-12-18 17:55:01,527 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:01,533 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:03,056 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:03,057 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[41,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:03,058 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:03,086 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:03,088 Line:567 ReportDataMgt.getReportData 参数1:41
 [DEBUG] 2017-12-18 17:55:03,088 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:03,089 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:03,090 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:03,090 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:03,090 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:03,091 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:03,091 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:03,091 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:03,092 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:03,092 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:03,092 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:03,093 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:03,093 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:03,094 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:03,094 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:03,094 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:03,098 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:03,098 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:03,099 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:03,099 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:03,099 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:03,100 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:03,100 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:03,101 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:03,102 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:55:03,103 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:55:03,115 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:04,688 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:04,689 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[42,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:04,689 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:04,696 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:04,696 Line:567 ReportDataMgt.getReportData 参数1:42
 [DEBUG] 2017-12-18 17:55:04,697 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:04,697 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:04,697 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:04,697 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:04,697 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:04,697 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:04,697 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:04,697 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:04,698 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:04,700 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:04,700 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:04,700 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:04,700 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:04,700 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:04,701 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:04,701 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:04,702 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:04,702 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:55:04,703 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:04,715 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:06,238 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:06,238 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[43,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:06,238 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:06,258 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:06,259 Line:567 ReportDataMgt.getReportData 参数1:43
 [DEBUG] 2017-12-18 17:55:06,260 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:06,260 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:06,260 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:06,261 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:06,261 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:06,261 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:06,262 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:06,262 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:06,262 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:06,262 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:06,262 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:06,262 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:06,263 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:06,263 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:06,263 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:06,263 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:06,265 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:06,265 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:06,265 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:06,265 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:06,266 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:06,266 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:06,266 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:06,266 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:06,266 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 17:55:06,267 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:55:06,271 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:07,796 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:07,797 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[44,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:07,798 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:07,826 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:07,826 Line:567 ReportDataMgt.getReportData 参数1:44
 [DEBUG] 2017-12-18 17:55:07,826 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:07,827 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:07,827 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:07,827 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:07,828 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:07,828 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:07,828 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:07,828 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:07,828 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:07,829 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:07,829 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:07,829 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:07,829 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:07,829 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:07,829 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:07,830 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:07,831 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:07,832 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:07,833 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 17:55:07,833 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:07,844 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:09,363 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:09,364 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[45,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:09,365 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:09,397 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:09,398 Line:567 ReportDataMgt.getReportData 参数1:45
 [DEBUG] 2017-12-18 17:55:09,399 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:09,401 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:09,402 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:09,403 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:09,404 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:09,404 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:09,405 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:09,405 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:09,406 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:09,407 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:09,407 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:09,408 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:09,408 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:09,409 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:09,409 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:09,410 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:09,413 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:09,414 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:09,415 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:09,415 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:09,415 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:09,415 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:09,416 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:09,416 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:09,418 Line:689 通过SQL读原始数据：20
 [DEBUG] 2017-12-18 17:55:09,419 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:09,429 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:10,997 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:10,998 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[46,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:10,998 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:11,007 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:11,007 Line:567 ReportDataMgt.getReportData 参数1:46
 [DEBUG] 2017-12-18 17:55:11,007 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:11,008 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:11,008 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:11,008 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:11,008 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:11,008 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:11,008 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:11,008 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:11,008 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:11,009 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:11,009 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:11,009 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:11,009 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:11,009 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:11,009 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:11,010 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:11,011 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:11,011 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:11,011 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:11,011 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:11,012 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:11,012 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:11,012 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:11,012 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:11,012 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:55:11,013 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:55:11,017 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:12,545 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:12,546 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[47,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:12,547 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:12,572 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:12,573 Line:567 ReportDataMgt.getReportData 参数1:47
 [DEBUG] 2017-12-18 17:55:12,573 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:12,574 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:12,574 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:12,574 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:12,575 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:12,575 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:12,576 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:12,576 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:12,576 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:12,577 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:12,577 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:12,578 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:12,579 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:12,579 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:12,579 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:12,580 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:12,583 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:12,584 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:12,584 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:12,585 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:12,585 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:12,585 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:12,586 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:12,586 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:12,587 Line:689 通过SQL读原始数据：14
 [DEBUG] 2017-12-18 17:55:12,587 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:12,595 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:14,115 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:14,117 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[48,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:14,117 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:14,139 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:14,140 Line:567 ReportDataMgt.getReportData 参数1:48
 [DEBUG] 2017-12-18 17:55:14,140 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:14,141 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:14,141 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:14,141 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:14,142 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:14,142 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:14,143 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:14,143 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:14,143 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:14,144 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:14,144 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:14,144 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:14,145 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:14,145 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:14,145 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:14,146 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:14,149 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:14,150 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:14,151 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:14,151 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:14,151 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:14,151 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:14,151 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:14,151 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:14,152 Line:689 通过SQL读原始数据：12
 [DEBUG] 2017-12-18 17:55:14,152 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:14,156 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:15,678 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:15,678 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[49,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:15,679 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:15,711 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:15,712 Line:567 ReportDataMgt.getReportData 参数1:49
 [DEBUG] 2017-12-18 17:55:15,712 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:15,713 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:15,713 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:15,713 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:15,714 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:15,714 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:15,714 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:15,715 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:15,715 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:15,716 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:15,716 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:15,716 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:15,717 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:15,717 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:15,718 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:15,718 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:15,721 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:15,722 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:15,722 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:15,722 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:15,723 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:15,723 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:15,724 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:15,724 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:15,725 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:55:15,725 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:15,738 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:17,305 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:17,306 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[50,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:17,306 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:17,316 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:17,316 Line:567 ReportDataMgt.getReportData 参数1:50
 [DEBUG] 2017-12-18 17:55:17,317 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:17,317 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:17,317 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:17,317 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:17,317 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:17,318 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:17,319 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:17,319 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:17,319 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:17,319 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:17,321 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:17,321 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:17,321 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:17,321 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:17,321 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:17,321 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:17,322 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:17,322 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:17,322 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:55:17,322 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:17,327 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:18,848 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:18,849 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[51,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:18,850 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:18,874 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:18,875 Line:567 ReportDataMgt.getReportData 参数1:51
 [DEBUG] 2017-12-18 17:55:18,875 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:18,876 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:18,876 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:18,877 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:18,877 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:18,877 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:18,878 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:18,878 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:18,878 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:18,879 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:18,879 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:18,879 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:18,880 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:18,880 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:18,880 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:18,880 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:18,884 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:18,885 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:18,885 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:18,886 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:18,886 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:18,887 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:18,887 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:18,887 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:18,888 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:55:18,889 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:55:18,902 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:20,431 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:20,433 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[52,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:20,433 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:20,465 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:20,466 Line:567 ReportDataMgt.getReportData 参数1:52
 [DEBUG] 2017-12-18 17:55:20,466 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:20,466 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:20,467 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:20,467 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:20,467 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:20,468 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:20,468 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:20,468 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:20,469 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:20,469 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:20,469 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:20,469 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:20,469 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:20,470 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:20,470 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:20,470 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:20,472 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:20,472 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:20,472 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:20,473 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:20,473 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:20,473 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:20,473 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:20,473 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:20,473 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 17:55:20,474 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:20,478 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:22,004 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:22,005 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[53,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:22,005 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:22,038 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:22,040 Line:567 ReportDataMgt.getReportData 参数1:53
 [DEBUG] 2017-12-18 17:55:22,040 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:22,041 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:22,042 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:22,042 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:22,043 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:22,043 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:22,044 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:22,045 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:22,045 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:22,046 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:22,047 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:22,048 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:22,048 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:22,049 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:22,050 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:22,051 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:22,057 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:22,058 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:22,059 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:22,059 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:22,060 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:22,061 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:22,062 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:22,063 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:22,065 Line:689 通过SQL读原始数据：24
 [DEBUG] 2017-12-18 17:55:22,074 Line:1391 整理数据：9
 [DEBUG] 2017-12-18 17:55:22,085 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:23,616 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:23,617 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[54,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:23,618 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:23,636 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:23,636 Line:567 ReportDataMgt.getReportData 参数1:54
 [DEBUG] 2017-12-18 17:55:23,636 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:23,636 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:23,636 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:23,636 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:23,637 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:23,638 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:23,638 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:23,638 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:23,638 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:23,639 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:23,639 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:23,640 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:23,640 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:23,640 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:23,640 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:23,640 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:23,640 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:23,641 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:55:23,641 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:23,645 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:25,876 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:25,877 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[55,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:25,877 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:25,888 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:25,889 Line:567 ReportDataMgt.getReportData 参数1:55
 [DEBUG] 2017-12-18 17:55:25,890 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:25,890 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:25,890 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:25,890 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:25,891 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:25,891 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:25,891 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:25,892 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:25,892 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:25,893 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:25,893 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:25,893 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:25,894 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:25,894 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:25,894 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:25,895 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:25,900 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:25,900 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:25,900 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:25,901 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:25,901 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:25,901 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:25,901 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:25,902 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:25,902 Line:689 通过SQL读原始数据：13
 [DEBUG] 2017-12-18 17:55:25,903 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:25,911 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:27,137 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:27,137 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:55:27,138 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:27,138 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:55:27,139 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:55:27,139 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:27,139 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:55:27,148 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:27,148 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:55:27,148 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:55:27,148 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:27,149 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:27,149 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:27,149 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:55:27,149 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:27,149 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:27,149 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:27,150 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:27,150 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:27,150 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:27,150 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:27,150 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:27,150 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:27,151 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:27,151 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:27,151 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:55:27,179 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:27,180 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:27,180 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:27,180 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:27,180 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:27,181 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:27,181 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:27,181 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:27,181 Line:689 通过SQL读原始数据：33
 [DEBUG] 2017-12-18 17:55:27,182 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:27,186 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:28,659 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:28,661 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:28,661 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:28,714 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:28,715 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:55:28,716 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:28,716 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:28,716 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:28,717 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:28,717 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:28,717 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:28,718 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:28,718 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:28,718 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:28,719 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:28,719 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:28,719 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:28,720 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:28,720 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:28,720 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:28,721 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:28,822 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:28,822 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:28,823 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:28,823 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:28,823 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:28,823 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:28,823 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:28,823 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:28,824 Line:689 通过SQL读原始数据：109
 [DEBUG] 2017-12-18 17:55:28,824 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:28,829 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:50,959 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:50,960 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:55:50,960 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:55:50,961 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:50,961 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:55:50,962 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:50,962 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:55:50,969 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:55:50,997 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:50,998 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:55:50,998 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:55:50,998 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:50,998 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:50,998 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:50,998 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:50,999 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:51,000 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:51,000 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:51,000 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:51,000 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:51,059 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:51,060 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:51,060 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:51,060 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:51,060 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:51,060 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:51,060 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:51,061 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:51,061 Line:689 通过SQL读原始数据：63
 [DEBUG] 2017-12-18 17:55:51,061 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:55:51,066 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:55:52,475 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:55:52,476 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:55:52,478 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:55:52,503 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:55:52,503 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:55:52,504 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:55:52,504 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:55:52,505 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:55:52,505 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:55:52,505 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:55:52,505 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:55:52,506 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:55:52,506 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:55:52,506 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:55:52,507 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:55:52,507 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:55:52,508 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:55:52,508 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:55:52,508 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:55:52,509 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:55:52,509 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:55:52,545 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:55:52,546 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:55:52,547 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:52,547 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:52,548 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:55:52,549 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:55:52,549 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:55:52,549 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:55:52,550 Line:689 通过SQL读原始数据：47
 [DEBUG] 2017-12-18 17:55:52,551 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:55:52,555 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:56:20,843 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:56:20,843 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:56:20,844 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:56:20,845 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:56:20,846 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:56:20,846 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:56:20,847 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:56:20,848 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:56:20,859 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:56:20,860 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:56:20,860 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:56:20,860 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:56:20,860 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:56:20,861 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:56:20,861 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:56:20,861 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:56:20,861 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:56:20,861 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:56:20,861 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:56:20,861 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:56:20,862 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:56:20,862 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:56:20,862 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:56:20,862 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:56:20,862 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:56:20,862 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:56:20,864 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:56:20,864 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:56:20,864 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:56:20,864 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:56:20,865 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:56:20,865 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:56:20,865 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:56:20,865 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:56:20,866 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:56:20,867 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:56:20,873 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:56:22,349 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:56:22,350 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:56:22,350 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:56:22,358 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:56:22,358 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:56:22,358 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:56:22,359 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:56:22,359 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:56:22,359 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:56:22,359 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:56:22,359 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:56:22,359 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:56:22,359 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:56:22,360 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:56:22,361 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:56:22,362 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:56:22,363 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:56:22,363 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:56:22,363 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:56:22,363 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:56:22,363 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:56:22,363 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:56:22,364 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:56:22,364 Line:689 通过SQL读原始数据：6
 [DEBUG] 2017-12-18 17:56:22,364 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:56:22,369 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:57:34,262 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:57:34,262 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:57:34,265 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:57:34,266 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:57:34,267 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:57:34,267 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:57:34,268 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:57:34,275 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:57:34,293 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:57:34,293 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:57:34,293 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:57:34,294 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:57:34,294 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:57:34,294 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:57:34,294 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:57:34,294 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:57:34,294 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:57:34,294 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:57:34,295 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:57:34,296 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:57:34,351 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:57:34,351 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:57:34,351 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:57:34,351 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:57:34,351 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:57:34,351 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:57:34,352 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:57:34,352 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:57:34,352 Line:689 通过SQL读原始数据：59
 [DEBUG] 2017-12-18 17:57:34,352 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:57:34,356 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:57:35,776 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:57:35,777 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:57:35,777 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:57:35,810 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:57:35,811 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:57:35,811 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:57:35,812 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:57:35,813 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:57:35,813 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:57:35,814 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:57:35,815 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:57:35,816 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:57:35,816 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:57:35,817 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:57:35,818 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:57:35,819 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:57:35,820 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:57:35,820 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:57:35,821 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:57:35,822 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:57:35,822 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:57:35,888 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:57:35,889 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:57:35,889 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:57:35,890 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:57:35,890 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:57:35,890 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:57:35,904 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:57:35,905 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:57:35,906 Line:689 通过SQL读原始数据：95
 [DEBUG] 2017-12-18 17:57:35,906 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:57:35,913 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:58:37,701 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2017-12-18 17:59:01,005 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:59:01,005 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:59:01,005 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:59:01,005 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:59:01,005 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:59:01,005 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:59:01,006 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:59:01,012 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:59:01,049 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:59:01,050 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:59:01,050 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:59:01,050 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:59:01,050 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:59:01,051 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:59:01,051 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:59:01,051 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:59:01,051 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:59:01,051 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:59:01,051 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:59:01,051 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:59:01,052 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:59:01,052 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:59:01,052 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:59:01,052 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:59:01,052 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:59:01,052 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:01,140 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:59:01,141 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:59:01,141 Line:689 通过SQL读原始数据：91
 [DEBUG] 2017-12-18 17:59:01,141 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:59:01,146 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:59:02,522 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:59:02,523 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:59:02,524 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:59:02,556 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:59:02,557 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:59:02,558 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:59:02,559 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:59:02,560 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:59:02,560 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:59:02,575 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:59:02,576 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:59:02,576 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:59:02,576 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:59:02,577 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:59:02,577 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:59:02,578 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:59:02,578 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:59:02,578 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:59:02,578 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:59:02,579 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:59:02,579 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:59:02,596 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:59:02,596 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:59:02,596 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:02,596 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:02,596 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:59:02,596 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:02,597 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:59:02,597 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:59:02,597 Line:689 通过SQL读原始数据：40
 [DEBUG] 2017-12-18 17:59:02,597 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:59:02,602 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:59:32,196 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:59:32,197 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 17:59:32,197 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:59:32,198 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 17:59:32,198 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 17:59:32,198 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:59:32,199 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 17:59:32,200 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 17:59:32,208 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:59:32,209 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:59:32,209 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 17:59:32,209 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:59:32,209 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:59:32,209 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:59:32,210 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:59:32,211 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:59:32,211 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:59:32,211 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:59:32,211 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:59:32,211 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:59:32,213 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:59:32,213 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:59:32,213 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:32,213 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:32,214 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:59:32,214 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:32,214 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:59:32,214 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:59:32,214 Line:689 通过SQL读原始数据：5
 [DEBUG] 2017-12-18 17:59:32,215 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 17:59:32,219 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 17:59:33,717 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 17:59:33,718 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 17:59:33,719 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 17:59:33,746 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 17:59:33,746 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 17:59:33,747 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 17:59:33,747 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 17:59:33,748 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 17:59:33,748 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 17:59:33,748 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 17:59:33,749 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 17:59:33,749 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 17:59:33,750 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 17:59:33,750 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 17:59:33,751 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 17:59:33,751 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 17:59:33,752 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 17:59:33,752 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 17:59:33,753 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 17:59:33,753 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 17:59:33,754 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 17:59:33,759 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 17:59:33,759 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 17:59:33,760 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:33,760 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:33,760 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 17:59:33,761 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 17:59:33,761 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 17:59:33,761 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 17:59:33,762 Line:689 通过SQL读原始数据：16
 [DEBUG] 2017-12-18 17:59:33,763 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 17:59:33,772 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 18:04:38,999 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 18:04:38,999 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 18:04:39,000 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 18:04:39,000 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:04:39,000 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 18:04:39,000 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:04:39,001 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 18:04:39,008 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 18:04:39,036 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 18:04:39,036 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 18:04:39,037 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 18:04:39,037 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 18:04:39,037 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 18:04:39,037 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 18:04:39,038 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 18:04:39,038 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 18:04:39,038 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 18:04:39,038 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 18:04:39,038 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 18:04:39,038 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 18:04:39,039 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 18:04:39,039 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 18:04:39,039 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 18:04:39,039 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 18:04:39,039 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 18:04:39,039 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 18:04:39,121 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 18:04:39,121 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 18:04:39,121 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:39,122 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:39,122 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 18:04:39,122 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:39,123 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 18:04:39,123 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 18:04:39,123 Line:689 通过SQL读原始数据：87
 [DEBUG] 2017-12-18 18:04:39,124 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 18:04:39,130 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 18:04:40,505 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 18:04:40,505 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 18:04:40,505 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:04:40,514 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 18:04:40,514 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 18:04:40,514 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 18:04:40,515 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 18:04:40,515 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 18:04:40,515 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 18:04:40,515 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 18:04:40,515 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 18:04:40,515 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 18:04:40,515 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 18:04:40,515 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 18:04:40,516 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 18:04:40,533 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 18:04:40,533 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 18:04:40,534 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:40,534 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:40,534 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 18:04:40,534 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:40,534 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 18:04:40,534 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 18:04:40,535 Line:689 通过SQL读原始数据：21
 [DEBUG] 2017-12-18 18:04:40,535 Line:1391 整理数据：0
 [DEBUG] 2017-12-18 18:04:40,540 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 18:04:45,571 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 18:04:45,572 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 18:04:45,572 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:04:45,574 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 18:04:45,574 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 18:04:45,575 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:04:45,575 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 18:04:45,578 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 18:04:45,584 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 18:04:45,584 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 18:04:45,585 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 18:04:45,585 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 18:04:45,585 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 18:04:45,585 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 18:04:45,585 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 18:04:45,586 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 18:04:45,587 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 18:04:45,587 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 18:04:45,587 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 18:04:45,587 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 18:04:45,590 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 18:04:45,590 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 18:04:45,590 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:45,590 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:45,590 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 18:04:45,591 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:45,591 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 18:04:45,591 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 18:04:45,591 Line:689 通过SQL读原始数据：7
 [DEBUG] 2017-12-18 18:04:45,592 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 18:04:45,597 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 18:04:47,095 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 18:04:47,096 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2017-12-18 18:04:47,097 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:04:47,129 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 18:04:47,130 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 18:04:47,131 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2017-12-18 18:04:47,132 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 18:04:47,133 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 18:04:47,134 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 18:04:47,135 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2017-12-18 18:04:47,136 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 18:04:47,136 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 18:04:47,137 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 18:04:47,138 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 18:04:47,139 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 18:04:47,140 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 18:04:47,140 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 18:04:47,141 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 18:04:47,142 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 18:04:47,142 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 18:04:47,143 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 18:04:47,149 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 18:04:47,150 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 18:04:47,151 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:47,152 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:47,152 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 18:04:47,153 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:04:47,153 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 18:04:47,154 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 18:04:47,155 Line:689 通过SQL读原始数据：25
 [DEBUG] 2017-12-18 18:04:47,157 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 18:04:47,178 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 [DEBUG] 2017-12-18 18:06:06,844 Line:2992 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2017-12-18 18:06:06,845 Line:3003 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[100,];src=[menu,];DataType=[tblGoods,];parentCode=[00003,];
 [DEBUG] 2017-12-18 18:06:06,845 Line:243 AIOApi op=report&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:06:06,846 Line:2992 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2017-12-18 18:06:06,846 Line:3003 MobileAjax 操作人:admin;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2017-12-18 18:06:06,846 Line:243 AIOApi op=popup&sessionid=F01A2798CE27DC40FE4E8FEC2643FA62
 [DEBUG] 2017-12-18 18:06:06,847 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2017-12-18 18:06:06,857 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2017-12-18 18:06:06,878 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?)}
 [DEBUG] 2017-12-18 18:06:06,878 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2017-12-18 18:06:06,879 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2017-12-18 18:06:06,879 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2017-12-18 18:06:06,879 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2017-12-18 18:06:06,879 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2017-12-18 18:06:06,880 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2017-12-18 18:06:06,880 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2017-12-18 18:06:06,880 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2017-12-18 18:06:06,880 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2017-12-18 18:06:06,880 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2017-12-18 18:06:06,880 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2017-12-18 18:06:06,881 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2017-12-18 18:06:06,881 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2017-12-18 18:06:06,881 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2017-12-18 18:06:06,881 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2017-12-18 18:06:06,881 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2017-12-18 18:06:06,881 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2017-12-18 18:06:06,959 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2017-12-18 18:06:06,959 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2017-12-18 18:06:06,959 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:06:06,960 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:06:06,960 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2017-12-18 18:06:06,960 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2017-12-18 18:06:06,960 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2017-12-18 18:06:06,960 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2017-12-18 18:06:06,960 Line:689 通过SQL读原始数据：82
 [DEBUG] 2017-12-18 18:06:06,961 Line:1391 整理数据：1
 [DEBUG] 2017-12-18 18:06:06,965 Line:2961 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatcall","","lastQty"],["入库未过账"等等！
 