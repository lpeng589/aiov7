[INFO ] 2018-01-02 12:08:39,932 Line:206 系统开始启动，最大内存：1792;目前总内存：251;目前空闲内存：159
 [INFO ] 2018-01-02 12:08:40,055 Line:284 ===========Tomcat Port=8888
 [INFO ] 2018-01-02 12:08:44,446 Line:2660 ---------------------------------first read dog =======-----------
 [DEBUG] 2018-01-02 12:08:44,632 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canJxc=1 
 [DEBUG] 2018-01-02 12:08:44,652 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canOa=1 
 [DEBUG] 2018-01-02 12:08:44,657 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canCrm=1 
 [DEBUG] 2018-01-02 12:08:44,660 Line:3336  select count(*) from tblEmployee where openFlag = 1 and statusid=0 and id <> '1' and canHr=1 
 [DEBUG] 2018-01-02 12:08:44,672 Line:594 select AccPeriod,AccMonth,AccYear,scompanyId,statusId,isBegin from tblAccPeriod where statusId=1 or isBegin=1
 [DEBUG] 2018-01-02 12:08:44,683 Line:626 ------Init initAccPeriod record:1
 [DEBUG] 2018-01-02 12:08:45,814 Line:1061 ------Init Enumeration record:392
 [DEBUG] 2018-01-02 12:08:45,878 Line:1091 ------Init WorkProfession record:58
 [DEBUG] 2018-01-02 12:08:45,937 Line:1121 ------Init District record:3984
 [DEBUG] 2018-01-02 12:08:45,958 Line:1152 ------Init deptMap record:2
 [DEBUG] 2018-01-02 12:08:47,518 Line:1832 ------Init ModuleList record:
 [DEBUG] 2018-01-02 12:08:47,518 Line:2855 --------Init ModuleList Successful---------------
 [DEBUG] 2018-01-02 12:08:48,060 Line:297  select * from tblDBTableInfo order by TableName 
 [DEBUG] 2018-01-02 12:08:48,157 Line:370 select * from tblDBFieldInfo order by tableId,listOrder
 [DEBUG] 2018-01-02 12:08:49,152 Line:538 ------Init TableInfo record:639
 [DEBUG] 2018-01-02 12:08:49,195 Line:651  select cataName,disName,module,tableName,nameField,codeField from tblScopeCataData order by orderby 
 [DEBUG] 2018-01-02 12:08:49,207 Line:682 ------Init TableInfo record:4
 [DEBUG] 2018-01-02 12:08:49,226 Line:775 ------Init initModuleField record:0
 [DEBUG] 2018-01-02 12:08:49,250 Line:702  select tableName,sentence from tblPopDisSentence where statusId=0 order by tableName 
 [DEBUG] 2018-01-02 12:08:49,261 Line:721 ------Init TableInfo record:26
 [DEBUG] 2018-01-02 12:08:49,316 Line:891 ------Init PropInfo record:7
 [DEBUG] 2018-01-02 12:08:53,021 Line:2947 --------Init Config File ---------------
 [ERROR] 2018-01-02 12:08:53,293 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\12bbe4d0_1309251420149973794.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,295 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\16498250_1107301011023635761.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,297 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\1696218b_1303071432056211826.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,300 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\1e49ec73_1310141513554302768.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,302 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\2b637a85_1301151535291656265.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,304 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\2b637a85_1301161408119037671.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,306 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\3222e73f_1303110904036610349.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,308 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\33eaec0d_1301050950293021694.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,310 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\33eaec0d_1301061557287273935.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,312 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\33eaec0d_1301061608391253982.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,359 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\41c430d2_1208141805027402835.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,381 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\46a78652_1210151349025782027.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,408 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\4f7f6b1e_1303221111597339437.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,462 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\5fcf5f77_1304021554367043609.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,463 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\5fcf5f77_1304071406166069339.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,465 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\5fcf5f77_1304090927277926103.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,466 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\5fcf5f77_1304091008228756401.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,480 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\634bf574_1209071615094958205.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,481 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\634bf574_1209080902548768433.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,483 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\634bf574_1209121614089763945.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,484 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\6b602213_1205210942199878477.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,486 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\6b602213_1205221639204860973.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,487 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\6b602213_1205301613391641532.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,500 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\73eed876_1309241732076726431.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,517 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\8161d7ca_1312251105052885382.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,519 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\84e5c0c2_1203162038085610023.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,520 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\93da24a1_1205160946069131222.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,522 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\948d1bcf_1203241057415520350.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,524 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\978c0b22_1204191406175403275.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,526 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\978c0b22_1204251048517142444.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,549 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\a348895a_1306281020552880950.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,551 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\a348895a_1307010903526496874.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,553 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\a95dce41_1204281406032060703.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,586 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ad48c0ba_1204141758384922624.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,602 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\c60c0a1d_1305161604424726111.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,624 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\eae3edac_0906121936590150223.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,626 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\eb548c0f_1203161107216570078.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,628 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\eb548c0f_1203162014422750845.xml (系统找不到指定的文件。)
 [ERROR] 2018-01-02 12:08:53,637 Line:48 java.io.FileNotFoundException: D:\Project\aio\tomcat7\bin\..\..\fileServer_v7\wokeflow\ffd4bcdd_1701241708235230006.xml (系统找不到指定的文件。)
 [DEBUG] 2018-01-02 12:08:53,649 Line:1873 ------Init RefreshTime 
 [DEBUG] 2018-01-02 12:08:53,674 Line:2994 --------Init SMS Start ---------------
 [INFO ] 2018-01-02 12:08:53,873 Line:3011 -------System init Secussful Set Normal status--------------
 [DEBUG] 2018-01-02 12:08:53,874 Line:3855 --------Init Dog Successful---------------
 [INFO ] 2018-01-02 12:08:55,066 Line:89 SAFE 数据库第一个备份任务启动，时间2018-01-02 00:00:00
 [INFO ] 2018-01-02 12:08:55,066 Line:144 SAFE 备份任务开始执行，时间2018-01-02 12:08:55
 [INFO ] 2018-01-02 12:08:55,067 Line:137 SAFE 碎片任务启动，时间2018-01-07 00:00:00
 [INFO ] 2018-01-02 12:09:01,638 Line:148 SAFE 备份任务执行成功，时间2018-01-02 12:09:01
 [DEBUG] 2018-01-02 12:09:54,041 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 12:40:15,211 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 13:30:00,927 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 14:00:24,675 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 14:30:43,349 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 14:50:23,252 Line:2993 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2018-01-02 14:50:23,255 Line:3004 MobileAjax 操作人:;请求数据：op=[getSessEmp,];
 [DEBUG] 2018-01-02 14:50:23,255 Line:243 AIOApi op=getSessEmp&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:50:23,332 Line:2962 MobileAjax 操作人:;返回数据：{"code":"NOLOGIN","msg":"未登陆"}
 [DEBUG] 2018-01-02 14:50:36,609 Line:2993 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2018-01-02 14:50:36,610 Line:3004 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[c4ca4238a0b923820dcc509a6f75849b,];
 [DEBUG] 2018-01-02 14:50:36,610 Line:243 AIOApi op=LOGIN&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:50:36,736 Line:2962 MobileAjax 操作人:;返回数据：{"code":"ERROR","msg":"用户名或密码错误."}
 [DEBUG] 2018-01-02 14:50:40,897 Line:2993 MobileAjax 请求地址：/MobileAjax?op=LOGIN
 [DEBUG] 2018-01-02 14:50:40,898 Line:3004 MobileAjax 操作人:;请求数据：op=[LOGIN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2018-01-02 14:50:40,898 Line:243 AIOApi op=LOGIN&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:50:40,974 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 14:50:41,064 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2018-01-02 14:50:41,093 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2018-01-02 14:50:41,224 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"登陆成功"}
 [DEBUG] 2018-01-02 14:50:41,708 Line:2993 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2018-01-02 14:50:41,709 Line:3004 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2018-01-02 14:50:41,709 Line:243 AIOApi op=getSessEmp&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:50:41,716 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2018-01-02 14:50:41,739 Line:2993 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2018-01-02 14:50:41,739 Line:3004 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2018-01-02 14:50:41,740 Line:243 AIOApi op=getEnum&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:50:41,747 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"出纳","value":"16"},{"name":"会计","value":"17"},{"name":"法人","value":"1"},{"name":"代理商","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副总经理","value":"5"},{"name":"组长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其它","value":"12"},{"name":"老板","value":"5136"},{"name":"产品经理","value":"15"},{"name":"总监","value":"14"}]}
 [DEBUG] 2018-01-02 14:52:39,201 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:52:39,202 Line:3004 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:52:39,202 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:52:39,778 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:52:39,788 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:52:39,789 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:52:39,789 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:52:39,790 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2018-01-02 14:52:39,790 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:52:39,790 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:52:39,790 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:52:39,790 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:52:39,791 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:52:39,791 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:52:39,791 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:52:39,791 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:52:39,791 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:52:39,791 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:52:39,792 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:52:39,792 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:52:39,792 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:52:39,792 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:52:39,944 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:52:39,945 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:52:39,945 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:52:39,945 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:52:39,945 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:52:39,946 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:52:39,946 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:52:39,946 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:52:39,950 Line:689 通过SQL读原始数据：162
 [DEBUG] 2018-01-02 14:52:39,951 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:52:40,003 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:52:40,709 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:52:40,712 Line:3004 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2018-01-02 14:52:40,713 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:52:40,729 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:52:40,730 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2018-01-02 14:52:40,730 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:52:40,730 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:52:40,730 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2018-01-02 14:52:40,731 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:52:40,731 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:52:40,731 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:52:40,731 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:52:40,731 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:52:40,732 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:52:40,745 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:52:40,745 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:52:40,746 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:52:40,746 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:52:40,746 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:52:40,746 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:52:40,747 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:52:40,747 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:52:40,750 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:52:40,750 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:52:40,750 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:52:40,751 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:52:40,751 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:52:40,751 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:52:40,751 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:52:40,752 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:52:40,753 Line:689 通过SQL读原始数据：23
 [DEBUG] 2018-01-02 14:52:40,757 Line:1391 整理数据：2
 [DEBUG] 2018-01-02 14:52:40,781 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:53:05,611 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:53:05,612 Line:3004 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[00003,];StockCode=[,];
 [DEBUG] 2018-01-02 14:53:05,612 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:53:05,627 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:53:05,627 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:53:05,628 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:53:05,628 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:53:05,628 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2018-01-02 14:53:05,628 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:53:05,628 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2018-01-02 14:53:05,629 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:53:05,629 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:53:05,629 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:53:05,629 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:53:05,629 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:53:05,630 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:53:05,630 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:53:05,630 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:53:05,632 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:53:05,632 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:53:05,632 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:53:05,632 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:53:05,652 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:53:05,652 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:53:05,653 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:05,653 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:05,653 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:53:05,653 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:05,653 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:53:05,654 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:53:05,654 Line:689 通过SQL读原始数据：27
 [DEBUG] 2018-01-02 14:53:05,655 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:53:05,661 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:53:17,111 Line:2993 MobileAjax 请求地址：/MobileAjax?op=getSessEmp
 [DEBUG] 2018-01-02 14:53:17,113 Line:3004 MobileAjax 操作人:admin;请求数据：op=[getSessEmp,];
 [DEBUG] 2018-01-02 14:53:17,113 Line:243 AIOApi op=getSessEmp&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:53:17,114 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"departmentName":"默认部门","titleId":"12","name":"admin","id":"1"}}
 [DEBUG] 2018-01-02 14:53:17,143 Line:2993 MobileAjax 请求地址：/MobileAjax?op=getEnum&enum=duty
 [DEBUG] 2018-01-02 14:53:17,147 Line:3004 MobileAjax 操作人:admin;请求数据：op=[getEnum,];enum=[duty,];
 [DEBUG] 2018-01-02 14:53:17,148 Line:243 AIOApi op=getEnum&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:53:17,153 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":[{"name":"职员","value":"11"},{"name":"出纳","value":"16"},{"name":"会计","value":"17"},{"name":"法人","value":"1"},{"name":"代理商","value":"10"},{"name":"董事长","value":"9"},{"name":"总经理","value":"2"},{"name":"部门经理","value":"3"},{"name":"副总经理","value":"5"},{"name":"组长","value":"4"},{"name":"副部长","value":"6"},{"name":"主管","value":"7"},{"name":"副主管","value":"8"},{"name":"其它","value":"12"},{"name":"老板","value":"5136"},{"name":"产品经理","value":"15"},{"name":"总监","value":"14"}]}
 [DEBUG] 2018-01-02 14:53:18,663 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:53:18,663 Line:3004 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:53:18,664 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:53:18,686 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:53:18,688 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:53:18,688 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:53:18,689 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:53:18,689 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2018-01-02 14:53:18,690 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:53:18,690 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:53:18,690 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:53:18,691 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:53:18,691 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:53:18,691 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:53:18,692 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:53:18,692 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:53:18,692 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:53:18,692 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:53:18,693 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:53:18,693 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:53:18,693 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:53:18,694 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:53:18,698 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:53:18,699 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:53:18,699 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:18,700 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:18,700 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:53:18,701 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:18,702 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:53:18,702 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:53:18,703 Line:689 通过SQL读原始数据：16
 [DEBUG] 2018-01-02 14:53:18,704 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:53:18,720 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:53:20,174 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:53:20,177 Line:3004 MobileAjax 操作人:admin;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[2,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];
 [DEBUG] 2018-01-02 14:53:20,179 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:53:20,204 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:53:20,204 Line:567 ReportDataMgt.getReportData 参数1:2
 [DEBUG] 2018-01-02 14:53:20,204 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:53:20,205 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:53:20,205 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2018-01-02 14:53:20,205 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:53:20,205 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:53:20,205 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:53:20,206 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:53:20,206 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:53:20,206 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:53:20,206 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:53:20,207 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:53:20,207 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:53:20,207 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:53:20,207 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:53:20,208 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:53:20,208 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:53:20,208 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:53:20,212 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:53:20,213 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:53:20,214 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:20,215 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:20,215 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:53:20,215 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:53:20,215 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:53:20,215 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:53:20,216 Line:689 通过SQL读原始数据：12
 [DEBUG] 2018-01-02 14:53:20,217 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:53:20,235 Line:2962 MobileAjax 操作人:admin;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:54:57,376 Line:5227 GlobalsTool.js 生成js 时间45:/js/gen/login.vjs_zh_CN.js
 [DEBUG] 2018-01-02 14:54:57,443 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2018-01-02 14:54:57,445 Line:99 CommonServlet.service 操作人:admin;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2018-01-02 14:54:57,739 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514876097716
 [DEBUG] 2018-01-02 14:54:57,756 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[valpwd,];time=[1514876097716,];
 [DEBUG] 2018-01-02 14:54:57,814 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2018-01-02 14:54:57,814 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[15,];
 [DEBUG] 2018-01-02 14:55:00,445 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=Boos&time=1514876100443
 [DEBUG] 2018-01-02 14:55:00,445 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[getUserInfo,];name=[Boos,];time=[1514876100443,];
 [DEBUG] 2018-01-02 14:55:00,459 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=Boos&time=1514876100458
 [DEBUG] 2018-01-02 14:55:00,459 Line:163 UtilServlet.service 操作人:admin;请求数据：operation=[sunCompany,];name=[Boos,];time=[1514876100458,];
 [DEBUG] 2018-01-02 14:55:00,544 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2018-01-02 14:55:00,545 Line:146 BaseAction.execute 操作人:admin;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[Boos,];password=[c4ca4238a0b923820dcc509a6f75849b,];
 [DEBUG] 2018-01-02 14:55:00,646 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2018-01-02 14:55:00,654 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2018-01-02 14:55:00,727 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2018-01-02 14:55:00,727 Line:146 BaseAction.execute 操作人:Boos;请求数据：
 [DEBUG] 2018-01-02 14:55:00,775 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  and ((charIndex(',2cf86be0_1712291628149430079,',work.allowVisitor)>0 or charIndex(',00101,',work.allowVisitor)>0 or charIndex(',11,',work.allowVisitor)>0 ) or work.allowVisitor like '') order by work.flowOrder
 [DEBUG] 2018-01-02 14:55:00,977 Line:5227 GlobalsTool.js 生成js 时间21:/js/gen/body2.vjs_zh_CN.js
 [DEBUG] 2018-01-02 14:55:01,346 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2018-01-02 14:55:01,346 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2018-01-02 14:55:01,347 Line:146 BaseAction.execute 操作人:Boos;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2018-01-02 14:55:01,347 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2018-01-02 14:55:01,361 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2018-01-02 14:55:01,362 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2018-01-02 14:55:01,366 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2018-01-02 14:55:01,366 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2018-01-02 14:55:01,371 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2018-01-02 14:55:01,372 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2018-01-02 14:55:03,600 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=1
 [DEBUG] 2018-01-02 14:55:03,601 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2018-01-02 14:55:03,601 Line:215 ---------->SET Page 1 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:55:03,758 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=tblVirtualStock&src=menu&winCurIndex=1&checkTab=Y
 [DEBUG] 2018-01-02 14:55:03,758 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblGoods&moduleType=&SysType=&MOID=fc26a1c0_0911091930102960206&editable=&subSql=
 [DEBUG] 2018-01-02 14:55:03,758 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[tblVirtualStock,];src=[menu,];winCurIndex=[1,];checkTab=[Y,];
 [DEBUG] 2018-01-02 14:55:03,759 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblGoods,];moduleType=[,];SysType=[,];MOID=[fc26a1c0_0911091930102960206,];editable=[,];subSql=[,];
 [DEBUG] 2018-01-02 14:55:03,759 Line:215 ---------->SET Page 1 DEFAULT URL = /ReportDataAction.do?reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:55:03,760 Line:229 TreeMgt.getTree sql= select classCode,GoodsFullName,GoodsNumber,id from tblGoods where statusId =0   and isCatalog=1 order by GoodsNumber
 [DEBUG] 2018-01-02 14:55:03,991 Line:5227 GlobalsTool.js 生成js 时间67:/js/gen/validate.vjs_zh_CN.js
 [DEBUG] 2018-01-02 14:55:04,023 Line:5227 GlobalsTool.js 生成js 时间30:/js/gen/report.vjs_zh_CN.js
 [DEBUG] 2018-01-02 14:55:05,799 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do
 [DEBUG] 2018-01-02 14:55:05,799 Line:146 BaseAction.execute 操作人:Boos;请求数据：operation=[4,];reportNumber=[tblVirtualStock,];reportName=[虚拟库存查询,虚拟库存查询,];isClickQuery=[true,];isAllListQuery=[,];winCurIndex=[1,];src=[,];parentCode=[,];queryChannel=[normal,];SQLSave=[@SQL:@ParamList:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:@Param:0@Param:tblGoods@Param:@Param:@end:,];query=[,];NoButton=[,];backParent=[,];checkTab=[Y,];defineOrderBy=[,];export=[,];noback=[,];mainNumber=[,];detTable_list=[,];moduleType=[,];popWinName=[,];upperQtyQ=[,];StockCode=[,];hide_StockCode=[,];tblStock.StockFullName=[,];GoodsCode=[,];hide_GoodsCode=[,];tblGoods.GoodsNumber=[,];tblGoods.GoodsFullName=[,];tblGoods.GoodsSpec=[,];tblGoods.BaseUnit=[,];NumberType=[0,];DataType=[tblGoods,];mobileGoodsFullName=[,];pageSize=[100,];pageNo=[1,];
 [DEBUG] 2018-01-02 14:55:05,813 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:55:05,813 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:55:05,813 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2018-01-02 14:55:05,813 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:55:05,814 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:55:05,814 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:55:05,814 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:55:05,814 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:55:05,814 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:55:05,815 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:55:05,815 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:55:05,815 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:55:05,815 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:55:05,815 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:55:05,815 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:55:05,816 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:55:05,816 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:55:05,816 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:55:05,816 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:55:05,864 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:55:05,864 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:55:05,864 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:55:05,865 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:55:05,865 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:55:05,865 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:55:05,865 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:55:05,865 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:55:05,866 Line:689 通过SQL读原始数据：53
 [DEBUG] 2018-01-02 14:55:05,867 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:55:32,631 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=RptCompanyC&src=menu&winCurIndex=2
 [DEBUG] 2018-01-02 14:55:32,631 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[RptCompanyC,];src=[menu,];winCurIndex=[2,];
 [DEBUG] 2018-01-02 14:55:32,632 Line:215 ---------->SET Page 2 DEFAULT URL = /ReportDataAction.do?reportNumber=RptCompanyC
 [DEBUG] 2018-01-02 14:55:32,699 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblCompany&moduleType=&SysType=Customer&MOID=fb61c532_1007191736459210145&editable=&subSql=
 [DEBUG] 2018-01-02 14:55:32,699 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblCompany,];moduleType=[,];SysType=[Customer,];MOID=[fb61c532_1007191736459210145,];editable=[,];subSql=[,];
 [DEBUG] 2018-01-02 14:55:32,701 Line:229 TreeMgt.getTree sql= select classCode,ComFullName,ComNumber,id from tblCompany where statusId =0   and isCatalog=1  and moduleType in ('2','3') order by ComNumber
 [DEBUG] 2018-01-02 14:55:32,702 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=RptCompanyC&src=menu&winCurIndex=2&checkTab=Y
 [DEBUG] 2018-01-02 14:55:32,704 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[RptCompanyC,];src=[menu,];winCurIndex=[2,];checkTab=[Y,];
 [DEBUG] 2018-01-02 14:55:32,705 Line:215 ---------->SET Page 2 DEFAULT URL = /ReportDataAction.do?reportNumber=RptCompanyC
 [DEBUG] 2018-01-02 14:55:34,744 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=RptCompanyClist&mainNumber=RptCompanyC&LinkType=@URL:&src=menu&noback=true&popWinName=endPopDiv
 [DEBUG] 2018-01-02 14:55:34,745 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[RptCompanyClist,];mainNumber=[RptCompanyC,];LinkType=[@URL:,];src=[menu,];noback=[true,];popWinName=[endPopDiv,];
 [DEBUG] 2018-01-02 14:55:34,746 Line:220 ---------->SET DEFAULT URL = /ReportDataAction.do?reportNumber=RptCompanyClist&mainNumber=RptCompanyC&LinkType=@URL:
 [DEBUG] 2018-01-02 14:55:43,735 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=RptCompanyClist&mainNumber=RptCompanyC&LinkType=@URL:&src=menu&noback=true&popWinName=endPopDiv
 [DEBUG] 2018-01-02 14:55:43,736 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[RptCompanyClist,];mainNumber=[RptCompanyC,];LinkType=[@URL:,];src=[menu,];noback=[true,];popWinName=[endPopDiv,];
 [DEBUG] 2018-01-02 14:55:43,737 Line:220 ---------->SET DEFAULT URL = /ReportDataAction.do?reportNumber=RptCompanyClist&mainNumber=RptCompanyC&LinkType=@URL:
 [DEBUG] 2018-01-02 14:56:02,801 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:02,802 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[00003,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:02,802 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:02,838 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:02,839 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:02,839 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:02,839 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:02,839 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:02,840 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:02,840 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2018-01-02 14:56:02,840 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:02,841 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:02,841 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:02,841 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:02,841 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:02,841 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:02,841 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:02,842 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:02,842 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:02,842 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:02,842 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:02,842 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:56:02,915 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:02,915 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:02,915 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:02,916 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:02,916 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:02,916 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:02,916 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:02,916 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:02,917 Line:689 通过SQL读原始数据：79
 [DEBUG] 2018-01-02 14:56:02,917 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:02,925 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:56:10,103 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:10,106 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[g,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:10,107 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:10,131 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:10,131 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:10,132 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:10,132 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:10,133 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:10,133 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:10,133 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:10,134 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:10,135 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:10,136 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:10,137 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:10,138 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:10,138 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:10,139 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:10,140 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:10,140 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:10,140 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:10,141 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:10,141 Line:582 ReportDataMgt.getReportData 参数18:g
 [DEBUG] 2018-01-02 14:56:10,164 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:10,164 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:10,164 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,165 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,165 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:10,165 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,165 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:10,165 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:10,165 Line:689 通过SQL读原始数据：34
 [DEBUG] 2018-01-02 14:56:10,166 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:10,167 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","g"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","float等等！
 [DEBUG] 2018-01-02 14:56:10,195 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:10,197 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[ga,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:10,197 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:10,210 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:10,211 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:10,211 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:10,211 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:10,212 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:10,212 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:10,212 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:10,213 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:10,213 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:10,213 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:10,214 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:10,214 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:10,214 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:10,215 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:10,215 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:10,216 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:10,216 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:10,217 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:10,217 Line:582 ReportDataMgt.getReportData 参数18:ga
 [DEBUG] 2018-01-02 14:56:10,224 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:10,225 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:10,225 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,225 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,225 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:10,225 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,226 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:10,226 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:10,227 Line:689 通过SQL读原始数据：16
 [DEBUG] 2018-01-02 14:56:10,227 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:10,229 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","ga"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floa等等！
 [DEBUG] 2018-01-02 14:56:10,288 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:10,289 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[gan,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:10,289 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:10,299 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:10,300 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:10,300 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:10,300 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:10,300 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:10,300 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:10,301 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:10,301 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:10,301 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:10,301 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:10,301 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:10,303 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:10,304 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:10,304 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:10,304 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:10,304 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:10,305 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:10,305 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:10,305 Line:582 ReportDataMgt.getReportData 参数18:gan
 [DEBUG] 2018-01-02 14:56:10,310 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:10,311 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:10,311 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,311 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,311 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:10,311 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:10,312 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:10,312 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:10,312 Line:689 通过SQL读原始数据：12
 [DEBUG] 2018-01-02 14:56:10,312 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:10,314 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","gan"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","flo等等！
 [DEBUG] 2018-01-02 14:56:11,042 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:11,043 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[ga,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:11,044 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:11,059 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:11,059 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:11,059 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:11,060 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:11,060 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:11,060 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:11,060 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:11,060 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:11,060 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:11,060 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:11,061 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:11,062 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:11,062 Line:582 ReportDataMgt.getReportData 参数18:ga
 [DEBUG] 2018-01-02 14:56:11,065 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:11,066 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:11,066 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,066 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,066 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:11,066 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,067 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:11,067 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:11,067 Line:689 通过SQL读原始数据：8
 [DEBUG] 2018-01-02 14:56:11,067 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:11,070 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","ga"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floa等等！
 [DEBUG] 2018-01-02 14:56:11,163 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:11,164 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[g,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:11,164 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:11,176 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:11,176 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:11,177 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:11,177 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:11,177 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:11,177 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:11,177 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:11,177 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:11,178 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:11,179 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:11,179 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:11,179 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:11,179 Line:582 ReportDataMgt.getReportData 参数18:g
 [DEBUG] 2018-01-02 14:56:11,183 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:11,183 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:11,183 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,184 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,184 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:11,184 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,184 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:11,186 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:11,187 Line:689 通过SQL读原始数据：11
 [DEBUG] 2018-01-02 14:56:11,187 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:11,189 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","g"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","float等等！
 [DEBUG] 2018-01-02 14:56:11,331 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:11,333 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:11,334 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:11,354 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:11,355 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:11,355 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:11,355 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:11,355 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:11,356 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:11,356 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:11,357 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:11,357 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:11,357 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:11,357 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:11,358 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:11,359 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:56:11,363 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:11,363 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:11,364 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,364 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,364 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:11,364 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:11,364 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:11,364 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:11,365 Line:689 通过SQL读原始数据：11
 [DEBUG] 2018-01-02 14:56:11,365 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:11,382 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:56:28,167 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:28,168 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[00003,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:28,168 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:28,178 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:28,179 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:28,179 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:28,179 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:28,179 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:28,179 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:28,180 Line:582 ReportDataMgt.getReportData 参数6:00003
 [DEBUG] 2018-01-02 14:56:28,180 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:28,180 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:28,181 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:28,182 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:28,182 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:28,182 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:28,183 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:28,183 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:28,184 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:28,184 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:28,184 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:28,184 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:56:28,188 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:28,189 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:28,189 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:28,189 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:28,189 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:28,189 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:28,190 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:28,190 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '00003_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%') union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' and (b.GoodsCode like '00003%')) as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:28,190 Line:689 通过SQL读原始数据：11
 [DEBUG] 2018-01-02 14:56:28,191 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:56:28,195 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:56:31,823 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:31,824 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[1,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:31,824 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:31,835 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:31,836 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:31,837 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:31,837 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:31,837 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:31,837 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:31,838 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:31,838 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:31,838 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:31,838 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:31,838 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:31,838 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:31,839 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:31,839 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:31,839 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:31,839 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:31,839 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:31,839 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:31,840 Line:582 ReportDataMgt.getReportData 参数18:1
 [DEBUG] 2018-01-02 14:56:31,848 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:31,848 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:31,849 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:31,849 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:31,849 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:31,849 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:31,849 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:31,850 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:31,851 Line:689 通过SQL读原始数据：15
 [DEBUG] 2018-01-02 14:56:31,851 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:31,854 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","1"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","float等等！
 [DEBUG] 2018-01-02 14:56:31,928 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:31,928 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[12,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:31,928 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:31,940 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:31,940 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:31,940 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:31,940 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:31,940 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:31,941 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:31,941 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:31,941 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:31,941 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:31,941 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:31,941 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:31,942 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:31,943 Line:582 ReportDataMgt.getReportData 参数18:12
 [DEBUG] 2018-01-02 14:56:31,948 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:31,948 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:31,948 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:31,949 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:31,949 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:31,949 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:31,949 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:31,949 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:31,950 Line:689 通过SQL读原始数据：10
 [DEBUG] 2018-01-02 14:56:31,950 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:31,952 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","12"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floa等等！
 [DEBUG] 2018-01-02 14:56:32,015 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:32,016 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[123,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:32,016 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:32,027 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:32,027 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:32,027 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:32,027 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:32,028 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:32,028 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:32,028 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:32,028 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:32,028 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:32,028 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:32,028 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:32,029 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:32,030 Line:582 ReportDataMgt.getReportData 参数18:123
 [DEBUG] 2018-01-02 14:56:32,035 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:32,036 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:32,036 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:32,036 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:32,036 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:32,036 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:32,037 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:32,037 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:32,037 Line:689 通过SQL读原始数据：10
 [DEBUG] 2018-01-02 14:56:32,037 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:32,039 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","123"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","flo等等！
 [DEBUG] 2018-01-02 14:56:33,910 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:33,911 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[12,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:33,911 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:33,921 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:33,922 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:33,922 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:33,922 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:33,922 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:33,922 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:33,922 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:33,923 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:33,924 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:33,924 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:33,924 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:33,924 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:33,924 Line:582 ReportDataMgt.getReportData 参数18:12
 [DEBUG] 2018-01-02 14:56:33,928 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:33,928 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:33,928 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:33,928 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:33,929 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:33,929 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:33,929 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:33,929 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:33,929 Line:689 通过SQL读原始数据：7
 [DEBUG] 2018-01-02 14:56:33,930 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:33,932 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","12"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floa等等！
 [DEBUG] 2018-01-02 14:56:34,035 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:34,036 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[1,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:34,036 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:34,044 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:34,045 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:34,045 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:34,045 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:34,046 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:34,047 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:34,047 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:34,047 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:34,048 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:34,049 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:34,049 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:34,049 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:34,050 Line:582 ReportDataMgt.getReportData 参数18:1
 [DEBUG] 2018-01-02 14:56:34,054 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:34,054 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:34,054 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:34,054 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:34,054 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:34,055 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:34,055 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:34,055 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:34,055 Line:689 通过SQL读原始数据：10
 [DEBUG] 2018-01-02 14:56:34,056 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:34,058 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","1"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","float等等！
 [DEBUG] 2018-01-02 14:56:34,175 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:34,176 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:34,176 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:34,187 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:34,187 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:34,188 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:34,188 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:34,188 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:34,189 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:34,189 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:34,189 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:34,189 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:34,189 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:34,189 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:34,190 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:34,191 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:56:34,195 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:34,196 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:34,197 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:34,197 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:34,197 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:34,197 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:34,197 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:34,198 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:34,198 Line:689 通过SQL读原始数据：11
 [DEBUG] 2018-01-02 14:56:34,200 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:56:34,206 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:56:38,595 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:38,597 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[g,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:38,597 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:38,615 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:38,616 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:38,616 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:38,617 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:38,617 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:38,617 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:38,617 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:38,617 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:38,617 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:38,618 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:38,619 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:38,619 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:38,619 Line:582 ReportDataMgt.getReportData 参数18:g
 [DEBUG] 2018-01-02 14:56:38,623 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:38,623 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:38,624 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,624 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,624 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:38,624 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,624 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:38,624 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:38,625 Line:689 通过SQL读原始数据：10
 [DEBUG] 2018-01-02 14:56:38,625 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:38,626 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","g"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","float等等！
 [DEBUG] 2018-01-02 14:56:38,643 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:38,645 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[gf,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:38,646 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:38,658 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:38,658 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:38,658 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:38,658 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:38,659 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:38,659 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:38,659 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:38,659 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:38,659 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:38,660 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:38,660 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:38,660 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:38,661 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:38,661 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:38,661 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:38,662 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:38,663 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:38,663 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:38,663 Line:582 ReportDataMgt.getReportData 参数18:gf
 [DEBUG] 2018-01-02 14:56:38,668 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:38,669 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:38,669 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,669 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,669 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:38,669 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,670 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:38,670 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:38,670 Line:689 通过SQL读原始数据：12
 [DEBUG] 2018-01-02 14:56:38,670 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:38,672 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","gf"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floa等等！
 [DEBUG] 2018-01-02 14:56:38,786 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:38,787 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[gfg,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:38,788 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:38,800 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:38,801 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:38,801 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:38,801 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:38,801 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:38,801 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:38,801 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:38,802 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:38,803 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:38,803 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:38,803 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:38,803 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:38,803 Line:582 ReportDataMgt.getReportData 参数18:gfg
 [DEBUG] 2018-01-02 14:56:38,807 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:38,807 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:38,808 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,808 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,808 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:38,808 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:38,808 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:38,808 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:38,809 Line:689 通过SQL读原始数据：8
 [DEBUG] 2018-01-02 14:56:38,809 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:38,810 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName","gfg"]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","flo等等！
 [DEBUG] 2018-01-02 14:56:40,861 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:56:40,863 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:56:40,863 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:40,874 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:56:40,875 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:56:40,875 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:56:40,875 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:56:40,876 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:56:40,876 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:56:40,876 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:56:40,876 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:56:40,876 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:56:40,876 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:56:40,877 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:56:40,877 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:56:40,877 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:56:40,877 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:56:40,878 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:56:40,879 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:56:40,879 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:56:40,879 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:56:40,879 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:56:40,885 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:56:40,885 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:56:40,885 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:40,885 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:40,885 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:56:40,885 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:56:40,886 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:56:40,886 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:56:40,886 Line:689 通过SQL读原始数据：11
 [DEBUG] 2018-01-02 14:56:40,888 Line:1391 整理数据：2
 [DEBUG] 2018-01-02 14:56:40,893 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:56:50,522 Line:2993 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2018-01-02 14:56:50,523 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[popup,];tableName=[tblSalesOrder,];selectName=[model_getWorkNodeByTblName,];pageNo=[1,];pageSize=[10,];
 [DEBUG] 2018-01-02 14:56:50,523 Line:243 AIOApi op=popup&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:50,539 Line:3434 DynDBManager.popSelect selectName=model_getWorkNodeByTblName; sql=select *  from (select OAWorkFlowNode.keyId f1 ,OAWorkFlowNode.display f2 
,ROW_NUMBER() over( order by OAWorkFlowNode.keyId) as row_id from OAWorkFlowNode 
left join OAWorkFlowTemplate on OAWorkFlowNode.flowId = OAWorkFlowTemplate.id
where OAWorkFlowTemplate.templateFile = 'tblSalesOrder' and statusId = 0) a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2018-01-02 14:56:50,556 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"result":[{"label":"开始","value":"0"},{"label":"结束","value":"-1"},{"label":"主管审核","value":"1513322741341"},{"label":"财务审核","value":"1513322743692"}]}}
 [DEBUG] 2018-01-02 14:56:52,035 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2018-01-02 14:56:52,038 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2018-01-02T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2018-01-02 14:56:52,039 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:52,097 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '2cf86be0_1712291628149430079' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder     left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 AND ( (  (TBLSALESORDER.CREATEBY='2cf86be0_1712291628149430079' OR  LEN(ISNULL(TBLSALESORDER.CREATEBY,''))=0  OR TBLSALESORDER.EMPLOYEEID='2cf86be0_1712291628149430079' OR LEN(ISNULL(TBLSALESORDER.EMPLOYEEID,''))=0 ) ) OR (  (select count(0) from OAMyWorkFlowPerson where keyId=tblSalesOrder.id and tableName='tblSalesOrder' and checkPerson in('2cf86be0_1712291628149430079'))>0 ) )    and isNull(tblSalesOrder.workFlowNodeName,'')!='print'          and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2018-01-02 14:56:52,097 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2018-01-02 14:56:52,098 Line:582 ReportDataMgt.getReportData 参数2:2018-01-02T16:00:00.000Z
 [DEBUG] 2018-01-02 14:56:52,189 Line:689 通过SQL读原始数据：92
 [DEBUG] 2018-01-02 14:56:52,190 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:56:52,200 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2018-01-02T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2018-01-02 14:56:53,717 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2018-01-02 14:56:53,718 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[2,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2018-01-02T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2018-01-02 14:56:53,719 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:53,741 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '2cf86be0_1712291628149430079' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder     left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 AND ( (  (TBLSALESORDER.CREATEBY='2cf86be0_1712291628149430079' OR  LEN(ISNULL(TBLSALESORDER.CREATEBY,''))=0  OR TBLSALESORDER.EMPLOYEEID='2cf86be0_1712291628149430079' OR LEN(ISNULL(TBLSALESORDER.EMPLOYEEID,''))=0 ) ) OR (  (select count(0) from OAMyWorkFlowPerson where keyId=tblSalesOrder.id and tableName='tblSalesOrder' and checkPerson in('2cf86be0_1712291628149430079'))>0 ) )    and isNull(tblSalesOrder.workFlowNodeName,'')!='print'          and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 11 and 21 order by row_id
 [DEBUG] 2018-01-02 14:56:53,742 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2018-01-02 14:56:53,743 Line:582 ReportDataMgt.getReportData 参数2:2018-01-02T16:00:00.000Z
 [DEBUG] 2018-01-02 14:56:53,785 Line:689 通过SQL读原始数据：43
 [DEBUG] 2018-01-02 14:56:53,810 Line:1391 整理数据：25
 [DEBUG] 2018-01-02 14:56:53,813 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2018-01-02T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2018-01-02 14:56:55,350 Line:2993 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2018-01-02 14:56:55,351 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2018-01-02 14:56:55,351 Line:243 AIOApi op=addPrepare&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:56:55,835 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"Boos","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"2cf86be0_1712291628149430079","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_Stock等等！
 [DEBUG] 2018-01-02 14:57:00,496 Line:2993 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2018-01-02 14:57:00,496 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2018-01-02 14:57:00,497 Line:243 AIOApi op=addPrepare&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:00,693 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"Boos","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"2cf86be0_1712291628149430079","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_Stock等等！
 [DEBUG] 2018-01-02 14:57:08,400 Line:2993 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2018-01-02 14:57:08,401 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2018-01-02 14:57:08,401 Line:243 AIOApi op=addPrepare&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:08,543 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"Boos","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"2cf86be0_1712291628149430079","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_Stock等等！
 [DEBUG] 2018-01-02 14:57:10,455 Line:2993 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2018-01-02 14:57:10,455 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2018-01-02 14:57:10,456 Line:243 AIOApi op=addPrepare&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:10,599 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"Boos","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"2cf86be0_1712291628149430079","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_Stock等等！
 [DEBUG] 2018-01-02 14:57:14,781 Line:2993 MobileAjax 请求地址：/MobileAjax?op=addPrepare
 [DEBUG] 2018-01-02 14:57:14,782 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[addPrepare,];tableName=[tblSalesOrder,];
 [DEBUG] 2018-01-02 14:57:14,782 Line:243 AIOApi op=addPrepare&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:14,880 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":false,"hurryTrans":false,"hasCancel":false,"opType":"add","updateRight":false,"deleteRight":false,"values":{"DepartmentCode":"","Account":"","tblEmployee.EmpFullName":"Boos","tblSalesOrderDet_EmployeeID":"Sess_UserId","f_brother":"","tblSalesOrderDet_DepartmentCode":"Sess_DepartmentCode","EmployeeID":"2cf86be0_1712291628149430079","StockCode":"","tblAccTypeInfo.AccName":"","tblStock.StockFullName":"","tblSalesOrderDet_Stock等等！
 [DEBUG] 2018-01-02 14:57:19,490 Line:2993 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2018-01-02 14:57:19,491 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[popup,];selectName=[model_saleGoodList,];pageNo=[1,];pageSize=[15,];GoodsFullName=[,];
 [DEBUG] 2018-01-02 14:57:19,492 Line:243 AIOApi op=popup&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:19,495 Line:3434 DynDBManager.popSelect selectName=model_saleGoodList; sql=select *  from (select tblGoods.GoodsFullName f1 ,tblGoods.GoodsNumber f2 ,tblGoods.GoodsSpec f3 ,tblGoods.classCode f4 
,ROW_NUMBER() over( order by tblGoods.GoodsNumber) as row_id from tblGoods 
where tblGoods.isCatalog = 0 and tblGoods.statusId = 0) a where  row_id between 1 and 15 order by row_id 
 [DEBUG] 2018-01-02 14:57:19,520 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"result":[{"GoodsSpec":"","GoodsFullName":"叉烧包","GoodsCode":"0000300001","GoodsNumber":"bl0001"},{"GoodsSpec":"","GoodsFullName":"流沙包","GoodsCode":"0000300002","GoodsNumber":"bl0002"},{"GoodsSpec":"","GoodsFullName":"干蒸馅","GoodsCode":"00001","GoodsNumber":"bs0001"},{"GoodsSpec":"","GoodsFullName":"玉米馅","GoodsCode":"00002","GoodsNumber":"bs0002"},{"GoodsSpec":"","GoodsFullName":"芝麻糕","GoodsCode":"0000400001","GoodsNumber":"gl0001"},{"GoodsSpec":"","GoodsFullName":"五豆糕等等！
 [DEBUG] 2018-01-02 14:57:21,167 Line:2993 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2018-01-02 14:57:21,168 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[popup,];selectName=[model_queryGoodByCode,];pageNo=[1,];pageSize=[10,];GoodCode=[0000300002,];
 [DEBUG] 2018-01-02 14:57:21,168 Line:243 AIOApi op=popup&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:21,170 Line:3434 DynDBManager.popSelect selectName=model_queryGoodByCode; sql=select *  from (select tblGoods.GoodsNumber f1 ,tblGoods.GoodsFullName f2 ,tblGoods.GoodsSpec f3 
,ROW_NUMBER() over( order by tblGoods.GoodsNumber) as row_id from tblGoods as tblGoods
where tblGoods.isCatalog = 0 and tblGoods.statusId = 0 and tblGoods.classCode ='0000300002') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2018-01-02 14:57:21,181 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"result":[{"GoodsSpec":"","GoodsFullName":"流沙包","GoodsNumber":"bl0002"}]}}
 [DEBUG] 2018-01-02 14:57:26,921 Line:2993 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2018-01-02 14:57:26,921 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[popup,];selectName=[model_clientList,];pageNo=[1,];pageSize=[1000,];
 [DEBUG] 2018-01-02 14:57:26,921 Line:243 AIOApi op=popup&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:26,922 Line:3434 DynDBManager.popSelect selectName=model_clientList; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComNumber f2 ,tblCompany.ComFullName f3 ,tblCompany.ComFullNamePYM f4 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from tblCompany
where isCatalog = 0 and ClientFlag = 2) a where  row_id between 1 and 1000 order by row_id 
 [DEBUG] 2018-01-02 14:57:26,940 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","ComFullNamePYM":"bs","ComNumber":"0001","CompanyCode":"00001"},{"ComFullName":"顺誉","ComFullNamePYM":"sy","ComNumber":"0002","CompanyCode":"00002"}]}}
 [DEBUG] 2018-01-02 14:57:31,248 Line:2993 MobileAjax 请求地址：/MobileAjax?op=add
 [DEBUG] 2018-01-02 14:57:31,249 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[add,];tableName=[tblSalesOrder,];saveType=[,];values=[{"selected":"1","username":"","email":"","DetGoodsCodeStr":"0000300002,","BillNo":"SO1801020005","BillDate":"2018-01-02","CompanyCode":"00001","ComFullName":"包盛","EmployeeID":"1","subAccount":"01234","DepartmentCode":"","createBy":"","TotalAmount":12,"TotalTaxAmount":12,"Remark":"","TABLENAME_tblSalesOrderDet":[{"GoodsNumber":"bl0002","GoodsFullName":"流沙包","GoodsSpec":"","GoodsCode":"0000300002","Qty":1,"Price":"12","TaxPrice":0,"Amount":12,"TaxAmount":12}],"opType":"add"},];defineInfo=[,];
 [DEBUG] 2018-01-02 14:57:31,249 Line:243 AIOApi op=add&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:31,347 Line:5847  INSERT INTO  tblSalesOrder(checkPersons,id,SCompanyID,BillNo,BillDate,CompanyCode,DepartmentCode,EmployeeID,AccountAmount,CurAccountAmount,InVoiceType,InvoiceAmount,NoInvoiceAmount,Period,PeriodMonth,PeriodYear,NeedReturnAmt,Remark,AlrAccAmt,AutoBillMarker,BackAmount,CurAlrAccAmt,CurBackAmount,CurfreightAmount,CurNeedReturnAmt,Discount,DisAmount,Tax,DiscountAmount,CurrencyRate,TotalAmount,TotalTaxAmount,TotalCoTaxAmt,PayAmt,CurPayAmt,NotAmortDeposit,CurNotAmortDeposit,CurTotalAmount,lastUpdateBy,lastUpdateTime,printCount,statusId,workFlowNode,workFlowNodeName,finishTime,createBy,createTime) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2018-01-02 14:57:31,348 Line:5853 1:;2cf86be0_1712291628149430079;
 [DEBUG] 2018-01-02 14:57:31,349 Line:5853 2:ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,350 Line:5853 3:00001
 [DEBUG] 2018-01-02 14:57:31,350 Line:5853 4:SO1801020005
 [DEBUG] 2018-01-02 14:57:31,350 Line:5853 5:2018-01-02
 [DEBUG] 2018-01-02 14:57:31,351 Line:5853 6:00001
 [DEBUG] 2018-01-02 14:57:31,351 Line:5853 7:
 [DEBUG] 2018-01-02 14:57:31,351 Line:5853 8:1
 [DEBUG] 2018-01-02 14:57:31,351 Line:5853 9:0.0
 [DEBUG] 2018-01-02 14:57:31,351 Line:5853 10:0.0
 [DEBUG] 2018-01-02 14:57:31,352 Line:5853 11:3
 [DEBUG] 2018-01-02 14:57:31,352 Line:5853 12:0.0
 [DEBUG] 2018-01-02 14:57:31,352 Line:5853 13:0.0
 [DEBUG] 2018-01-02 14:57:31,352 Line:5853 14:1
 [DEBUG] 2018-01-02 14:57:31,353 Line:5853 15:1
 [DEBUG] 2018-01-02 14:57:31,353 Line:5853 16:2018
 [DEBUG] 2018-01-02 14:57:31,353 Line:5853 17:0.0
 [DEBUG] 2018-01-02 14:57:31,353 Line:5853 18:
 [DEBUG] 2018-01-02 14:57:31,353 Line:5853 19:0.0
 [DEBUG] 2018-01-02 14:57:31,353 Line:5853 20:0
 [DEBUG] 2018-01-02 14:57:31,354 Line:5853 21:0.0
 [DEBUG] 2018-01-02 14:57:31,354 Line:5853 22:0.0
 [DEBUG] 2018-01-02 14:57:31,354 Line:5853 23:0.0
 [DEBUG] 2018-01-02 14:57:31,354 Line:5853 24:0.0
 [DEBUG] 2018-01-02 14:57:31,355 Line:5853 25:0.0
 [DEBUG] 2018-01-02 14:57:31,355 Line:5853 26:100.0
 [DEBUG] 2018-01-02 14:57:31,355 Line:5853 27:0.0
 [DEBUG] 2018-01-02 14:57:31,356 Line:5853 28:0.0
 [DEBUG] 2018-01-02 14:57:31,356 Line:5853 29:0.0
 [DEBUG] 2018-01-02 14:57:31,356 Line:5853 30:1.0
 [DEBUG] 2018-01-02 14:57:31,357 Line:5853 31:12.0
 [DEBUG] 2018-01-02 14:57:31,358 Line:5853 32:12.0
 [DEBUG] 2018-01-02 14:57:31,358 Line:5853 33:0.0
 [DEBUG] 2018-01-02 14:57:31,358 Line:5853 34:0.0
 [DEBUG] 2018-01-02 14:57:31,359 Line:5853 35:0.0
 [DEBUG] 2018-01-02 14:57:31,359 Line:5853 36:0.0
 [DEBUG] 2018-01-02 14:57:31,359 Line:5853 37:0.0
 [DEBUG] 2018-01-02 14:57:31,359 Line:5853 38:0.0
 [DEBUG] 2018-01-02 14:57:31,359 Line:5853 39:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 40:2018-01-02 14:57:31
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 41:0
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 42:0
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 43:0
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 44:notApprove
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 45:
 [DEBUG] 2018-01-02 14:57:31,360 Line:5853 46:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:57:31,361 Line:5853 47:2018-01-02 14:57:31
 [DEBUG] 2018-01-02 14:57:31,464 Line:5847  INSERT INTO  tblSalesOrderDet(f_ref,id,StockCode,GoodsCode,Qty,Price,Amount,InvoiceAmount,UnitIntQty,NoInvoiceAmount,InvoiceStatus,UnitBaseQty,UnitQty,UnitPrice,Discount,DisPrice,DisBackAmt,DisAmount,TaxPrice,TaxAmount,CoTaxAmt,CurPrice,CurAmount,ViewTotalQty,NotPayQty,AccountingPrice,SecQty,BaseQty,OutPayQty,OutQty,InvoiceQty,NotOutQty,EmployeeID,FinishStatus,BackQty,CostAmount,CostPrice,DepartmentCode,UnitBackQty,UnitOutQty,BackAmount,TotalReceiveAmt,NeedReceiveAmt,CurNeedReceiveAmt,PlanQty) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) 
 [DEBUG] 2018-01-02 14:57:31,464 Line:5853 1:ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,464 Line:5853 2:ea9434ab_1801021457314640006
 [DEBUG] 2018-01-02 14:57:31,464 Line:5853 3:
 [DEBUG] 2018-01-02 14:57:31,464 Line:5853 4:0000300002
 [DEBUG] 2018-01-02 14:57:31,464 Line:5853 5:1.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 6:12.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 7:12.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 8:0.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 9:0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 10:0.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 11:0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 12:0.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 13:0.0
 [DEBUG] 2018-01-02 14:57:31,467 Line:5853 14:0.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 15:100.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 16:0.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 17:0.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 18:0.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 19:0.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 20:12.0
 [DEBUG] 2018-01-02 14:57:31,468 Line:5853 21:0.0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 22:0.0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 23:0.0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 24:0.0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 25:0.0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 26:0.0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 27:0
 [DEBUG] 2018-01-02 14:57:31,469 Line:5853 28:0
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 29:0.0
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 30:0.0
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 31:0.0
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 32:0.0
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 33:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 34:0
 [DEBUG] 2018-01-02 14:57:31,470 Line:5853 35:0.0
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 36:0.0
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 37:0.0
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 38:00101
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 39:0.0
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 40:0.0
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 41:0.0
 [DEBUG] 2018-01-02 14:57:31,471 Line:5853 42:0.0
 [DEBUG] 2018-01-02 14:57:31,473 Line:5853 43:0.0
 [DEBUG] 2018-01-02 14:57:31,473 Line:5853 44:0.0
 [DEBUG] 2018-01-02 14:57:31,473 Line:5853 45:0.0
 [DEBUG] 2018-01-02 14:57:31,698 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from tblSalseQuote where id=?
 [DEBUG] 2018-01-02 14:57:31,698 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,698 Line:988 1值：
 [DEBUG] 2018-01-02 14:57:31,701 Line:1043 ---上述语句时间---4
 [DEBUG] 2018-01-02 14:57:31,701 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2018-01-02' < 'null'
 [DEBUG] 2018-01-02 14:57:31,956 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,956 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMsalesQuot where id=?
 [DEBUG] 2018-01-02 14:57:31,956 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,956 Line:988 1值：
 [DEBUG] 2018-01-02 14:57:31,961 Line:1043 ---上述语句时间---5
 [DEBUG] 2018-01-02 14:57:31,961 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2018-01-02' < 'null'
 [DEBUG] 2018-01-02 14:57:31,963 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,963 Line:921 自定义执行的语句显示： tblSalesOrder_add :select billDate as QuoteDate from CRMSaleContract where id=?
 [DEBUG] 2018-01-02 14:57:31,963 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,963 Line:988 1值：
 [DEBUG] 2018-01-02 14:57:31,968 Line:1043 ---上述语句时间---5
 [DEBUG] 2018-01-02 14:57:31,968 Line:313 exeCondition:tblSalesOrder_add :''.length>0&&'2018-01-02' < 'null'
 [DEBUG] 2018-01-02 14:57:31,969 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,969 Line:313 exeCondition:tblSalesOrder_add :0!=0 && ''.length==0 
 [DEBUG] 2018-01-02 14:57:31,971 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,971 Line:313 exeCondition:tblSalesOrder_add :0<=0 && ''.length > 0 
 [DEBUG] 2018-01-02 14:57:31,972 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,972 Line:313 exeCondition:tblSalesOrder_add :('3'=='3'&&0!=0)||0<0
 [DEBUG] 2018-01-02 14:57:31,975 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,975 Line:921 自定义执行的语句显示： tblSalesOrder_add :select SendDate as SendDate from tblSalesOrderDet a where a.f_ref=? and len(a.SendDate)!=0 and a.SendDate < ? 
 [DEBUG] 2018-01-02 14:57:31,975 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,975 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,975 Line:988 2值：2018-01-02
 [DEBUG] 2018-01-02 14:57:31,977 Line:1043 ---上述语句时间---2
 [DEBUG] 2018-01-02 14:57:31,978 Line:313 exeCondition:tblSalesOrder_add :'null'!='null'
 [DEBUG] 2018-01-02 14:57:31,979 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,979 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ from tblSalesOrderDet a,tblGoods b where len(ProDate)>0 and len(Availably)>0 and ProDate>Availably and b.classCode=a.GoodsCode and a.f_ref=?
 [DEBUG] 2018-01-02 14:57:31,979 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,979 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,982 Line:1043 ---上述语句时间---3
 [DEBUG] 2018-01-02 14:57:31,983 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2018-01-02 14:57:31,984 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,984 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsQ,Qty from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and isnull(a.Qty,0)<=0
 [DEBUG] 2018-01-02 14:57:31,984 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,984 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,987 Line:1043 ---上述语句时间---3
 [DEBUG] 2018-01-02 14:57:31,987 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2018-01-02 14:57:31,988 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,988 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsP,b.garniture from tblSalesOrderDet a,tblGoods b where a.f_ref=? and a.PresentSampleType not in ('1','2') and b.classCode=a.GoodsCode and (isnull(a.Price,0)<0 or (b.garniture='2' and isnull(a.Price,0)=0))
 [DEBUG] 2018-01-02 14:57:31,989 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,989 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,993 Line:1043 ---上述语句时间---5
 [DEBUG] 2018-01-02 14:57:31,993 Line:313 exeCondition:tblSalesOrder_add :'null'=='2' && 'null' != 'null'
 [DEBUG] 2018-01-02 14:57:31,994 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,994 Line:313 exeCondition:tblSalesOrder_add :'null'=='1' && 'null' != 'null'
 [DEBUG] 2018-01-02 14:57:31,995 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,995 Line:921 自定义执行的语句显示： tblSalesOrder_add :select 'disCountError' as disCountError from tblSalesOrderDet a where a.f_ref=? and (Discount<=0 or Discount>100)
 [DEBUG] 2018-01-02 14:57:31,995 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:31,995 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:31,997 Line:1043 ---上述语句时间---2
 [DEBUG] 2018-01-02 14:57:31,998 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2018-01-02 14:57:31,999 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:31,999 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2018-01-02 14:57:32,000 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,000 Line:921 自定义执行的语句显示： tblSalesOrder_add :select b.GoodsFullName as GoodsSample from tblSalesOrderDet a,tblGoods b where a.f_ref=? and b.classCode=a.GoodsCode and a.PresentSampleType in ('1','2') and isnull(a.Price,0)!=0
 [DEBUG] 2018-01-02 14:57:32,001 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:32,001 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,004 Line:1043 ---上述语句时间---4
 [DEBUG] 2018-01-02 14:57:32,004 Line:313 exeCondition:tblSalesOrder_add :'null' != 'null'
 [DEBUG] 2018-01-02 14:57:32,005 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,006 Line:921 自定义执行的语句显示： tblSalesOrder_add :select dbo.getDigits('tblSalesOrderDet','TaxAmount',sum(tblSalesOrderDet.TaxAmount)) as SumDetAmt from tblSalesOrderDet where  f_ref=?
 [DEBUG] 2018-01-02 14:57:32,006 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:32,006 Line:988 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,041 Line:1025 query condition columnName:SumDetAmt----value:12.0
 [DEBUG] 2018-01-02 14:57:32,041 Line:1043 ---上述语句时间---35
 [DEBUG] 2018-01-02 14:57:32,042 Line:313 exeCondition:tblSalesOrder_add : 12.0 != 12.0
 [DEBUG] 2018-01-02 14:57:32,044 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,044 Line:921 自定义执行的语句显示： tblSalesOrder_add :select AccNumber,AccName,IsForCur,Currency as CURD from tblAccTypeInfo where AccNumber=? and SCompanyID=?
 [DEBUG] 2018-01-02 14:57:32,045 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 14:57:32,045 Line:988 1值：
 [DEBUG] 2018-01-02 14:57:32,045 Line:988 2值：00001
 [DEBUG] 2018-01-02 14:57:32,057 Line:1043 ---上述语句时间---13
 [DEBUG] 2018-01-02 14:57:32,058 Line:313 exeCondition:tblSalesOrder_add :''.length != 0 && ''.length != 0 && !( '' == 'null' || ('null' =='' && 'null'=='1'  )  ) 
 [DEBUG] 2018-01-02 14:57:32,061 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,062 Line:313 exeCondition:tblSalesOrder_add :''.length == 0 && ''.length != 0 && ( 'null'.length != 0 && 'null' !=' '  && 'null' != 'null' && 'null' != 'NULL')
 [DEBUG] 2018-01-02 14:57:32,064 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,064 Line:313 exeCondition:tblSalesOrder_add : (''.length == 0 && 1>0 &&1!=1)
 [DEBUG] 2018-01-02 14:57:32,066 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,067 Line:313 exeCondition:tblSalesOrder_add :false==true
 [DEBUG] 2018-01-02 14:57:32,068 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,069 Line:313 exeCondition:tblSalesOrder_add :true
 [DEBUG] 2018-01-02 14:57:32,070 Line:321 flag:true
 [DEBUG] 2018-01-02 14:57:32,071 Line:313 exeCondition:tblSalesOrder_Add_One1 :'false'=='false'
 [DEBUG] 2018-01-02 14:57:32,072 Line:321 flag:true
 [DEBUG] 2018-01-02 14:57:32,073 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set StockCode=? where f_ref=?
 [DEBUG] 2018-01-02 14:57:32,073 Line:1157 1值：
 [DEBUG] 2018-01-02 14:57:32,073 Line:1157 2值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,075 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2018-01-02 14:57:32,075 Line:408 ************上述语句执行时间：3
 [DEBUG] 2018-01-02 14:57:32,075 Line:313 exeCondition:tblSalesOrder_Add_One1 :true
 [DEBUG] 2018-01-02 14:57:32,076 Line:321 flag:true
 [DEBUG] 2018-01-02 14:57:32,076 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrderDet set OutQty=0,NotOutQty=Qty,FinishStatus=0,NeedReceiveAmt=TaxAmount,CurNeedReceiveAmt=CurAmount,NotPayQty=Qty,NoInvoiceAmount=TaxAmount,InvoiceAmount=0,InvoiceStatus=0 where f_ref=?
 [DEBUG] 2018-01-02 14:57:32,076 Line:1157 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,078 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2018-01-02 14:57:32,079 Line:408 ************上述语句执行时间：3
 [DEBUG] 2018-01-02 14:57:32,079 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:update tblSalesOrder set statusId=0,NeedReturnAmt=TotalTaxAmount-AccountAmount,CurNeedReturnAmt=CurTotalAmount-CurAccountAmount,AlrAccAmt=AccountAmount,NotAmortDeposit=AccountAmount,CurAlrAccAmt=CurAccountAmount,CurNotAmortDeposit=CurAccountAmount,PayAmt=0,CurPayAmt=0,CertificateNo='',NoInvoiceAmount=TotalTaxAmount,InvoiceAmount=0,InvoiceStatus=0 where id=?
 [DEBUG] 2018-01-02 14:57:32,079 Line:1157 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,082 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=1
 [DEBUG] 2018-01-02 14:57:32,082 Line:408 ************上述语句执行时间：3
 [DEBUG] 2018-01-02 14:57:32,082 Line:313 exeCondition:tblSalesOrder_Add_One1 :'true'=='true'
 [DEBUG] 2018-01-02 14:57:32,083 Line:321 flag:true
 [DEBUG] 2018-01-02 14:57:32,083 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.Availably=a.Availably from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,tblGoods.Validity,ProDate),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,tblGoods.Validity,ProDate),21) else '' end as Availably from tblSalesOrder  a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(Availably)=0 and len(ProDate)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			
 [DEBUG] 2018-01-02 14:57:32,083 Line:1157 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,092 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2018-01-02 14:57:32,093 Line:408 ************上述语句执行时间：10
 [DEBUG] 2018-01-02 14:57:32,093 Line:1081 自定义执行的语句显示： tblSalesOrder_Add_One1:
			update tblSalesOrderDet set tblSalesOrderDet.ProDate=a.ProDate from(select  b.id as id,case when tblGoods.AvailablyType='Day' then convert(varchar(10),dateadd(Day,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Month' then convert(varchar(10),dateadd(Month,(-1)*tblGoods.Validity,Availably),21) when tblGoods.AvailablyType='Year' then convert(varchar(10),dateadd(Year,(-1)*tblGoods.Validity,Availably),21) else '' end as ProDate from tblSalesOrder a join tblSalesOrderDet b on b.f_ref=a.id join tblGoods on tblGoods.classCode=b.GoodsCode where a.id=? and len(ProDate)=0 and len(Availably)!=0 and tblGoods.Validity!=0)a where tblSalesOrderDet.id=a.id
			 
 [DEBUG] 2018-01-02 14:57:32,093 Line:1157 1值：ea9434ab_1801021457313380005
 [DEBUG] 2018-01-02 14:57:32,102 Line:1163 DefineSQLBean.execSql  define=tblSalesOrder_Add_One1,  影响行数=0
 [DEBUG] 2018-01-02 14:57:32,103 Line:408 ************上述语句执行时间：10
 [DEBUG] 2018-01-02 14:57:32,103 Line:313 exeCondition:tblSalesOrder_Add_One1 :'1' == '0'&& false==false
 [DEBUG] 2018-01-02 14:57:32,104 Line:321 flag:false
 [DEBUG] 2018-01-02 14:57:32,143 Line:1064  select * from  tblSalesOrderDet where f_ref = 'ea9434ab_1801021457313380005' order by detOrderNo
 [DEBUG] 2018-01-02 14:57:32,147 Line:108 插入OAMyWorkFlow表开始 designId=eae3edac_0906121936571710021;tableName=tblSalesOrder;id=ea9434ab_1801021457313380005;loginBean=2cf86be0_1712291628149430079;locale=zh_CN
 [DEBUG] 2018-01-02 14:57:32,172 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"添加成功","obj":{"msg":"添加成功","keyId":"ea9434ab_1801021457313380005"}}
 [DEBUG] 2018-01-02 14:57:34,694 Line:2993 MobileAjax 请求地址：/MobileAjax?op=detail
 [DEBUG] 2018-01-02 14:57:34,695 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[detail,];tableName=[tblSalesOrder,];keyId=[ea9434ab_1801021457313380005,];
 [DEBUG] 2018-01-02 14:57:34,695 Line:243 AIOApi op=detail&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:34,728 Line:1525  select * from  tblSalesOrderDet where f_ref = 'ea9434ab_1801021457313380005' order by detOrderNo
 [DEBUG] 2018-01-02 14:57:34,740 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='ea9434ab_1801021457313380005' and  a.tableName='tblSalesOrder'
 [DEBUG] 2018-01-02 14:57:34,882 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"code":0,"retCheckRight":false,"checkRight":true,"hurryTrans":false,"hasCancel":false,"opType":"update","updateRight":true,"deleteRight":true,"values":{"PeriodYear":2018,"CurrencyRate":1.00000000,"tblDepartment.DeptFullName":"","Tax":0.0,"CurfreightAmount":0.0,"Remark":"","CurNotAmortDeposit":0.0,"TotalTaxAmount":12.00000000,"NoInvoiceAmount":12.00000000,"CurNeedReturnAmt":0.0,"id":"ea9434ab_1801021457313380005","tblCompany.ComFullName":"包盛","AlrAccAmt":0.0,"finishTi等等！
 [DEBUG] 2018-01-02 14:57:34,906 Line:2993 MobileAjax 请求地址：/MobileAjax?op=popup
 [DEBUG] 2018-01-02 14:57:34,906 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[popup,];selectName=[model_getClientInfo,];pageNo=[1,];pageSize=[10,];CompanyCode=[00001,];
 [DEBUG] 2018-01-02 14:57:34,907 Line:243 AIOApi op=popup&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:34,908 Line:3434 DynDBManager.popSelect selectName=model_getClientInfo; sql=select *  from (select tblCompany.classCode f1 ,tblCompany.ComFullName f2 
,ROW_NUMBER() over( order by tblCompany.classCode) as row_id from  tblCompany as  tblCompany 
where  tblCompany.classCode= '00001') a where  row_id between 1 and 10 order by row_id 
 [DEBUG] 2018-01-02 14:57:34,912 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"result":[{"ComFullName":"包盛","CompanyCode":"00001"}]}}
 [DEBUG] 2018-01-02 14:57:36,424 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:57:36,425 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:57:36,425 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:36,427 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&tableName=tblSalesOrder
 [DEBUG] 2018-01-02 14:57:36,428 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];tableName=[tblSalesOrder,];pageNo=[1,];pageSize=[10,];src=[menu,];statusId=[,];BillNo=[,];BillDate1=[2009-12-31T16:00:00.000Z,];BillDate2=[2018-01-02T16:00:00.000Z,];workFlowNodeName=[,];
 [DEBUG] 2018-01-02 14:57:36,428 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:36,485 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:57:36,485 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:57:36,487 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:57:36,488 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:57:36,488 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:57:36,489 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:57:36,489 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:57:36,489 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:57:36,490 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:57:36,489 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,BillDate,BillNo,ComFullName,ComNumber,DeptFullName,EmpFullName,ReceiveDate,TotalTaxAmount,CurTotalTaxAmount,SaleAmount,AccAmount,BackAmount,AccName,AlrAccAmt,sysName,id,statusId,Qty,OutQty,NotOut,Remark,CompanyCode,JAmount,JAmountz,InvoiceType,workFlowNodeName,workFlowNode,checkPersons,lastNodeID from ( select tblSalesOrder.id as keyId,tblSalesOrder.createBy as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id=tblSalesOrder.createBy) as deptCodeR,tblSalesOrder.employeeId as employeeId,tblSalesOrder.departmentCode as deptCodeRE, tblSalesOrder.workFlowNode as workFlowNode,tblSalesOrder.workFlowNodeName as workFlowNodeName,tblSalesOrder.checkPersons as checkPersons,(select lastNodeId from OAMyWorkFlow where OAMyWorkFlow.keyID=tblSalesOrder.id and OAMyWorkFlow.tableName='tblSalesOrder' and '2cf86be0_1712291628149430079' = OAMyWorkFlow.lastCheckPerson and tblSalesOrder.workFlowNode!='-1' ) as lastNodeID,       tblSalesOrder.BillDate as BillDate,     tblSalesOrder.BillNo as BillNo,     tblCompany.ComFullName as ComFullName,     tblCompany.ComNumber as ComNumber,     tblDepartment.DeptFullName as DeptFullName,     tblEmployee1.EmpFullName as EmpFullName,     tblSalesOrder.ReceiveDate as ReceiveDate,     tblSalesOrder.TotalTaxAmount as TotalTaxAmount,     tblSalesOrder.CurTotalAmount as CurTotalTaxAmount,     isnull((select SUM(a.AfterChangeAmt) from tblSalesOutStockDet a,tblSalesOutStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0)-isnull((select SUM(a.TaxAmount) from tblSalesReturnStockDet a,tblSalesReturnStock b where a.SalesOrderID=tblSalesOrder.id and a.f_ref=b.id and b.workFlowNodeName='finish'),0) as SaleAmount,     (select isnull(sum(a.TotalAlrAccAmt),0) from tblsalesoutstock a where a.SalesOrderID=tblSalesOrder.id and a.workFlowNodeName='finish') as AccAmount,     tblSalesOrder.BackAmount as BackAmount,     tblAccTypeInfo.AccName as AccName,     tblSalesOrder.AlrAccAmt as AlrAccAmt,     tblEmployee2.EmpFullName as sysName,     tblSalesOrder.id as id,     tblSalesOrder.statusId as statusId,     (select isnull(sum(Qty),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as Qty,     (select isnull(sum(isnull(case when OutQty<=0 then 0 else OutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as OutQty,     (select isnull(sum(isnull(case when NotOutQty<=0 then 0 else NotOutQty end,0)),0) from tblsalesOrderDet where tblsalesOrderDet.f_ref=tblSalesOrder.id) as NotOut,     tblSalesOrder.Remark as Remark,     tblSalesOrder.CompanyCode as CompanyCode,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmount,     abs(isnull(tblSalesOrder.TotalTaxAmount,0)-isnull(tblSalesOrder.BackAmount,0)) as JAmountz,     tblSalesOrder.InvoiceType as InvoiceType   ,ROW_NUMBER() over(order by     tblSalesOrder.BillDate desc,    tblSalesOrder.BillNo desc) as row_id  from tblSalesOrder     left join tblCompany on tblCompany.classCode=tblSalesOrder.CompanyCode  left join tblDepartment on tblDepartment.classCode=tblSalesOrder.DepartmentCode  left join tblEmployee tblEmployee1 on tblEmployee1.id=tblSalesOrder.EmployeeID   left join tblEmployee tblEmployee2 on tblEmployee2.id=tblSalesOrder.createBy   left join tblAccTypeInfo on tblAccTypeInfo.AccNumber=tblSalesOrder.Account where 1=1 AND ( (  (TBLSALESORDER.CREATEBY='2cf86be0_1712291628149430079' OR  LEN(ISNULL(TBLSALESORDER.CREATEBY,''))=0  OR TBLSALESORDER.EMPLOYEEID='2cf86be0_1712291628149430079' OR LEN(ISNULL(TBLSALESORDER.EMPLOYEEID,''))=0 ) ) OR (  (select count(0) from OAMyWorkFlowPerson where keyId=tblSalesOrder.id and tableName='tblSalesOrder' and checkPerson in('2cf86be0_1712291628149430079'))>0 ) )    and isNull(tblSalesOrder.workFlowNodeName,'')!='print'          and (tblSalesOrder.BillDate >= ?)       and (tblSalesOrder.BillDate <= ?)                                                                    )  a  where row_id between 1 and 11 order by row_id
 [DEBUG] 2018-01-02 14:57:36,490 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:57:36,491 Line:582 ReportDataMgt.getReportData 参数1:2009-12-31T16:00:00.000Z
 [DEBUG] 2018-01-02 14:57:36,491 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:57:36,491 Line:582 ReportDataMgt.getReportData 参数2:2018-01-02T16:00:00.000Z
 [DEBUG] 2018-01-02 14:57:36,491 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:57:36,492 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:57:36,492 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:57:36,492 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:57:36,492 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:57:36,493 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:57:36,493 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:57:36,493 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:57:36,567 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:57:36,567 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:57:36,568 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:57:36,568 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:57:36,569 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:57:36,569 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:57:36,570 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:57:36,570 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:57:36,570 Line:689 通过SQL读原始数据：85
 [DEBUG] 2018-01-02 14:57:36,571 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:57:36,572 Line:689 通过SQL读原始数据：81
 [DEBUG] 2018-01-02 14:57:36,572 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 14:57:36,574 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["BillDate1","2009-12-31T16:00:00.000Z"],["BillDate2","2018-01-02T16:00:00.000Z"],["BillNo",""],["ComFullNamen",""],["ComName",""],["DeptFullName",""],["EmpFullName",""],["sysName",""],["statusId",""],["JAmount",""],["workFlowNodeName",""]],"cols":[["单据日期","70","date","","BillDate"],["单据编号","100","stringcall","","BillNo"],["客户全称","200","string","","ComFullName"],["客户编号","100","string","","ComNumber"],["部门","75","string","","DeptFullName"],["经手人","50","s等等！
 [DEBUG] 2018-01-02 14:57:36,577 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 14:57:56,364 Line:2993 MobileAjax 请求地址：/MobileAjax?op=report&reportNumber=tblVirtualStock
 [DEBUG] 2018-01-02 14:57:56,366 Line:3004 MobileAjax 操作人:Boos;请求数据：op=[report,];reportNumber=[tblVirtualStock,];pageNo=[1,];pageSize=[10,];src=[menu,];DataType=[tblGoods,];mobileGoodsFullName=[,];parentCode=[,];StockCode=[,];
 [DEBUG] 2018-01-02 14:57:56,367 Line:243 AIOApi op=report&sessionid=75C8BF6A9DE69BAEFCEDB2E7056C09F2
 [DEBUG] 2018-01-02 14:57:56,386 Line:549 ReportDataMgt.getReportData SQL={call report_VirtualStock (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@classCode=?,@StockCode=?,@GoodsCode=?,@BatchNo=?,@Inch=?,@Hue=?,@yearNO=?,@ProDate=?,@Availably=?,@NumberType=?,@DataType=?,@upperQtyQ=?,@mobileGoodsFullName=?)}
 [DEBUG] 2018-01-02 14:57:56,387 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 14:57:56,387 Line:568 ReportDataMgt.getReportData 参数2:10
 [DEBUG] 2018-01-02 14:57:56,387 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 14:57:56,387 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 14:57:56,388 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 14:57:56,388 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 14:57:56,388 Line:582 ReportDataMgt.getReportData 参数7:
 [DEBUG] 2018-01-02 14:57:56,388 Line:582 ReportDataMgt.getReportData 参数8:
 [DEBUG] 2018-01-02 14:57:56,388 Line:582 ReportDataMgt.getReportData 参数9:
 [DEBUG] 2018-01-02 14:57:56,388 Line:582 ReportDataMgt.getReportData 参数10:
 [DEBUG] 2018-01-02 14:57:56,388 Line:582 ReportDataMgt.getReportData 参数11:
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数12:
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数13:
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数14:
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数15:0
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数16:tblGoods
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数17:
 [DEBUG] 2018-01-02 14:57:56,389 Line:582 ReportDataMgt.getReportData 参数18:
 [DEBUG] 2018-01-02 14:57:56,403 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 14:57:56,403 Line:587 ReportDataMgt.getReportData warn 商品，仓库权限语句
 [DEBUG] 2018-01-02 14:57:56,404 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:57:56,404 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:57:56,404 Line:587 ReportDataMgt.getReportData warn 解析出的查询条件
 [DEBUG] 2018-01-02 14:57:56,404 Line:587 ReportDataMgt.getReportData warn  
 [DEBUG] 2018-01-02 14:57:56,405 Line:587 ReportDataMgt.getReportData warn 最终显示数据的查询语句
 [DEBUG] 2018-01-02 14:57:56,405 Line:587 ReportDataMgt.getReportData warn SELECT ROW_NUMBER() OVER(ORDER BY tblGoods.GoodsNumber) AS rowid,
			tblGoods.classCode,
            tblGoods.isCatalog,
            tblGoods.classCode+ '#;#'+ CAST(tblGoods.isCatalog AS VARCHAR(10))+ '#;##;#' AS hide_GoodsCode,
            tblGoods.GoodsNumber AS GoodsNumber,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end as BatchNo,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end as Inch,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end as Hue,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end as yearNO,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end as ProDate,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end as Availably,sum(isnull(lastQty,0)),sum(isnull(inQtyNotAudit,0)),sum(isnull(SInQtyNotAudit,0)),sum(isnull(outQtyNotAudit,0)),sum(isnull(BOutQtyNotAudit,0)),sum(isnull(UseQty,0)),sum(isnull(buyOrderQty,0)),sum(isnull(salesOrderQty,0)),sum(isnull(UseQty,0))+sum(isnull(buyOrderQty,0))-sum(isnull(salesOrderQty,0)) as orderQty FROM (select GoodsNumber,classCode,isCatalog,upperQty,lowerQty from tblGoods where workFlowNodeName='finish' and (tblGoods.classCode like '_____')) as tblGoods  LEFT JOIN (SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,lastQty,inQtyNotAudit,SInQtyNotAudit,outQtyNotAudit,BOutQtyNotAudit,lastQty+inQtyNotAudit+SInQtyNotAudit-outQtyNotAudit-BOutQtyNotAudit as UseQty,0 as buyOrderQty,0 as salesOrderQty FROM tblStocks as b where 1=1 union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,NotInQty,0 FROM tblBuyOrder a,tblBuyOrderDet b WHERE a.id = b.f_ref AND b.NotInQty>0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish' union all SELECT GoodsCode,BatchNo,Inch,Hue,yearNO,ProDate,Availably,0,0,0,0,0,0,0,NotOutQty FROM tblSalesOrder a,tblSalesOrderDet b WHERE a.id = b.f_ref AND b.NotOutQty> 0 AND a.statusId = 0 AND a.workFlowNodeName = 'finish') as b on tblGoods.classCode = SUBSTRING(b.GoodsCode, 1, LEN(tblGoods.classCode)) group by tblGoods.classCode,tblGoods.GoodsNumber,tblGoods.isCatalog,tblGoods.upperQty,tblGoods.lowerQty,case when tblGoods.isCatalog=1 then '' else isnull(b.BatchNo,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Inch,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Hue,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.yearNO,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.ProDate,'') end,
						case when tblGoods.isCatalog=1 then '' else isnull(b.Availably,'') end  having 1=1 and abs(sum(isnull(lastQty,0)))+abs(sum(isnull(inQtyNotAudit,0)))+abs(sum(isnull(SInQtyNotAudit,0)))+abs(sum(isnull(outQtyNotAudit,0)))+abs(sum(isnull(BOutQtyNotAudit,0)))+abs(sum(isnull(buyOrderQty,0)))+abs(sum(isnull(salesOrderQty,0)))>0
 [DEBUG] 2018-01-02 14:57:56,406 Line:689 通过SQL读原始数据：19
 [DEBUG] 2018-01-02 14:57:56,407 Line:1391 整理数据：1
 [DEBUG] 2018-01-02 14:57:56,416 Line:2962 MobileAjax 操作人:Boos;返回数据：{"code":"OK","msg":"","obj":{"conditions":[["StockCode",""],["GoodsCode",""],["NumberType","0"],["DataType","tblGoods"],["upperQtyQ",""],["mobileGoodsFullName",""]],"cols":[["classCode","-1","string","","GoodsCode"],["","-1","string","","classCode"],["商品编号","100","string","","GoodsNumber"],["商品名称","150","string","","GoodsFullName"],["商品规格","200","string","","GoodsSpec"],["单位","30","string","","BaseUnit"],["库存上限","90","float","","upperQty"],["库存下限","90","float","","lowerQty"],["实际库存","90","floatc等等！
 [DEBUG] 2018-01-02 15:01:08,168 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 15:31:28,912 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 15:38:12,998 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2018-01-02 15:38:12,999 Line:146 BaseAction.execute 操作人:Boos;请求数据：
 [DEBUG] 2018-01-02 15:38:13,181 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2018-01-02 15:38:13,182 Line:146 BaseAction.execute 操作人:Boos;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2018-01-02 15:38:13,196 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2018-01-02 15:38:13,197 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2018-01-02 15:38:13,205 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2018-01-02 15:38:13,206 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2018-01-02 15:38:13,209 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2018-01-02 15:38:13,210 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2018-01-02 15:38:13,214 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2018-01-02 15:38:13,214 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2018-01-02 15:39:02,056 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=CRMClientModule&src=menu&winCurIndex=1
 [DEBUG] 2018-01-02 15:39:02,056 Line:146 BaseAction.execute 操作人:Boos;请求数据：reportNumber=[CRMClientModule,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2018-01-02 15:39:02,056 Line:215 ---------->SET Page 1 DEFAULT URL = /ReportDataAction.do?reportNumber=CRMClientModule
 [DEBUG] 2018-01-02 15:39:02,132 Line:549 ReportDataMgt.getReportData SQL={call proc_CRMModule (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@moduleName=?)}
 [DEBUG] 2018-01-02 15:39:02,133 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 15:39:02,133 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2018-01-02 15:39:02,133 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 15:39:02,133 Line:570 ReportDataMgt.getReportData 参数4:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 15:39:02,133 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 15:39:02,134 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 15:39:02,747 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 15:39:02,748 Line:689 通过SQL读原始数据：615
 [DEBUG] 2018-01-02 15:39:02,748 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 15:39:31,273 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempQueryAction.do?moduleType=sys&src=menu&winCurIndex=2
 [DEBUG] 2018-01-02 15:39:31,274 Line:146 BaseAction.execute 操作人:Boos;请求数据：moduleType=[sys,];src=[menu,];winCurIndex=[2,];
 [DEBUG] 2018-01-02 15:39:31,274 Line:215 ---------->SET Page 2 DEFAULT URL = /OAWorkFlowTempQueryAction.do?moduleType=sys
 [DEBUG] 2018-01-02 15:39:31,301 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempQueryAction.do?actionType=toTree&moduleType=sys
 [DEBUG] 2018-01-02 15:39:31,302 Line:146 BaseAction.execute 操作人:Boos;请求数据：actionType=[toTree,];moduleType=[sys,];
 [DEBUG] 2018-01-02 15:39:31,304 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempQueryAction.do?operation=4&selectType=status&val=1&moduleType=sys
 [DEBUG] 2018-01-02 15:39:31,304 Line:146 BaseAction.execute 操作人:Boos;请求数据：operation=[4,];selectType=[status,];val=[1,];moduleType=[sys,];
 [DEBUG] 2018-01-02 15:39:31,310 Line:388 OAWorkFlowTempMgt.query 查询工作流sql =select work.id,work.templateName,templateType,a.moduleName,templateStatus,work.templateClass,work.statusId,work.flowOrder,templateFile,work.designType,work.workflowFile,work.fileFinish from OAWorkFlowTemplate work left join  tblWorkFlowType a  on work.templateClass=a.classCode  where  work.statusId=0 and templateStatus = ?  and ( a.classCode like '00001%'   OR a.classCode like '00002%'   OR a.classCode like '00003%'  ) order by work.templateStatus desc
 [DEBUG] 2018-01-02 15:41:10,196 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=3
 [DEBUG] 2018-01-02 15:41:10,196 Line:146 BaseAction.execute 操作人:Boos;请求数据：src=[menu,];winCurIndex=[3,];
 [DEBUG] 2018-01-02 15:41:10,196 Line:215 ---------->SET Page 3 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2018-01-02 15:41:11,193 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2018-01-02 15:41:11,194 Line:146 BaseAction.execute 操作人:Boos;请求数据：optype=[index,];
 [DEBUG] 2018-01-02 15:41:12,189 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=4
 [DEBUG] 2018-01-02 15:41:12,189 Line:146 BaseAction.execute 操作人:Boos;请求数据：src=[menu,];winCurIndex=[4,];
 [DEBUG] 2018-01-02 15:41:12,189 Line:215 ---------->SET Page 4 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2018-01-02 15:41:23,092 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2018-01-02 15:41:23,092 Line:146 BaseAction.execute 操作人:Boos;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[4,];search=[客户资料,];
 [DEBUG] 2018-01-02 15:41:40,820 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&src=menu&winCurIndex=5
 [DEBUG] 2018-01-02 15:41:40,820 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];src=[menu,];winCurIndex=[5,];
 [DEBUG] 2018-01-02 15:41:40,820 Line:215 ---------->SET Page 5 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblModules
 [DEBUG] 2018-01-02 15:41:40,860 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblModules&moduleType=&SysType=&MOID=6d3441a2_1308081026952365241&editable=true&subSql=
 [DEBUG] 2018-01-02 15:41:40,861 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];moduleType=[,];SysType=[,];MOID=[6d3441a2_1308081026952365241,];editable=[true,];subSql=[,];
 [DEBUG] 2018-01-02 15:41:40,861 Line:229 TreeMgt.getTree sql=select classCode,zh_CN,'',tblModules.id from tblModules left join tblLanguage b  on tblModules.modelName=b.id where isCatalog=1  order by OrderBy 
 [DEBUG] 2018-01-02 15:41:40,863 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&src=menu&winCurIndex=5&checkTab=Y
 [DEBUG] 2018-01-02 15:41:40,863 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];src=[menu,];winCurIndex=[5,];checkTab=[Y,];
 [DEBUG] 2018-01-02 15:41:40,864 Line:215 ---------->SET Page 5 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblModules
 [DEBUG] 2018-01-02 15:41:40,918 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,modelName,MainModule,OrderBy,SystemParam,IsUsed,IsHidden,tblName,linkAddress from ( select tblModules.classCode as classCode,tblModules.isCatalog as childCount, tblModules.id as keyId,'2cf86be0_1712291628149430079' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='2cf86be0_1712291628149430079') as deptCodeR,'2cf86be0_1712291628149430079' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='2cf86be0_1712291628149430079') as deptCodeRE,      tblModules.modelName as modelName,     tblModules.MainModule as MainModule,     tblModules.OrderBy as OrderBy,     tblModules.SystemParam as SystemParam,     tblModules.IsUsed as IsUsed,     tblModules.IsHidden as IsHidden,     tblModules.tblName as tblName,     tblModules.linkAddress as linkAddress   ,ROW_NUMBER() over(order by     tblModules.OrderBy) as row_id  from tblModules  where 1=1 and tblModules.classCode like '_____'                                             and isDisplay=0          )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2018-01-02 15:41:40,938 Line:689 通过SQL读原始数据：19
 [DEBUG] 2018-01-02 15:41:40,941 Line:1391 整理数据：3
 [DEBUG] 2018-01-02 15:41:41,072 Line:5227 GlobalsTool.js 生成js 时间40:/js/gen/defineList.vjstblModules_zh_CN.js
 [DEBUG] 2018-01-02 15:41:42,847 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&keyId=b1cfacac_0902201355164210064&parentCode=00019&operation=4&moduleType=&winCurIndex=5&parentTableName=&checkTab=Y&selectType=endClass
 [DEBUG] 2018-01-02 15:41:42,847 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];keyId=[b1cfacac_0902201355164210064,];parentCode=[00019,];operation=[4,];moduleType=[,];winCurIndex=[5,];parentTableName=[,];checkTab=[Y,];selectType=[endClass,];
 [DEBUG] 2018-01-02 15:41:42,856 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,modelName,MainModule,OrderBy,SystemParam,IsUsed,IsHidden,tblName,linkAddress from ( select tblModules.classCode as classCode,tblModules.isCatalog as childCount, tblModules.id as keyId,'2cf86be0_1712291628149430079' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='2cf86be0_1712291628149430079') as deptCodeR,'2cf86be0_1712291628149430079' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='2cf86be0_1712291628149430079') as deptCodeRE,      tblModules.modelName as modelName,     tblModules.MainModule as MainModule,     tblModules.OrderBy as OrderBy,     tblModules.SystemParam as SystemParam,     tblModules.IsUsed as IsUsed,     tblModules.IsHidden as IsHidden,     tblModules.tblName as tblName,     tblModules.linkAddress as linkAddress   ,ROW_NUMBER() over(order by     tblModules.OrderBy) as row_id  from tblModules  where 1=1 and tblModules.classCode like '00019_____'                                             and isDisplay=0          )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2018-01-02 15:41:42,868 Line:689 通过SQL读原始数据：12
 [DEBUG] 2018-01-02 15:41:42,877 Line:1391 整理数据：8
 [DEBUG] 2018-01-02 15:41:45,261 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblModules&keyId=76ace148_1702140948100910003&moduleType=&f_brother=&operation=5&winCurIndex=5&pageNo=&parentCode=000190087Q&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2018-01-02 15:41:45,262 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];keyId=[76ace148_1702140948100910003,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[5,];pageNo=[,];parentCode=[000190087Q,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2018-01-02 15:41:45,263 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='76ace148_1702140948100910003' and  a.tableName='tblModules'
 [DEBUG] 2018-01-02 15:41:45,289 Line:1525  select * from  tblModelOperations where f_ref = '76ace148_1702140948100910003' order by id
 [DEBUG] 2018-01-02 15:41:45,470 Line:5227 GlobalsTool.js 生成js 时间22:/js/gen/Main.vjs_zh_CN.js
 [DEBUG] 2018-01-02 15:41:45,492 Line:5227 GlobalsTool.js 生成js 时间21:/js/gen/editPage.vjs_zh_CN.js
 [DEBUG] 2018-01-02 15:41:45,663 Line:5227 GlobalsTool.js 生成js 时间170:/js/gen/define.vjstblModules_zh_CN.js
 [DEBUG] 2018-01-02 15:41:59,333 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblModules&keyId=d7068534_1712271505115570027&moduleType=&f_brother=&operation=5&winCurIndex=5&pageNo=&parentCode=000190087N&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2018-01-02 15:41:59,334 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];keyId=[d7068534_1712271505115570027,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[5,];pageNo=[,];parentCode=[000190087N,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2018-01-02 15:41:59,335 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='d7068534_1712271505115570027' and  a.tableName='tblModules'
 [DEBUG] 2018-01-02 15:41:59,386 Line:1525  select * from  tblModelOperations where f_ref = 'd7068534_1712271505115570027' order by id
 [DEBUG] 2018-01-02 15:42:24,778 Line:135 BaseAction.execute 请求地址：/CRMBrotherAction.do?tableName=CRMSaleFollowUp&src=menu&winCurIndex=6
 [DEBUG] 2018-01-02 15:42:24,778 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[CRMSaleFollowUp,];src=[menu,];winCurIndex=[6,];
 [DEBUG] 2018-01-02 15:42:24,778 Line:215 ---------->SET Page 6 DEFAULT URL = /CRMBrotherAction.do?tableName=CRMSaleFollowUp
 [DEBUG] 2018-01-02 15:42:24,788 Line:137 SELECT  CRMClientInfo.clientName,CRMSaleFollowUp.checkPersons,CRMSaleFollowUp.createBy,CRMSaleFollowUp.workFlowNode,CRMSaleFollowUp.id,CRMSaleFollowUp.ClientId,CRMSaleFollowUp.EmployeeID,CRMSaleFollowUp.VisitTime,CRMSaleFollowUp.FollowPhase,CRMSaleFollowUp.Content,row_number() over(order by CRMSaleFollowUp.lastUpdateTime desc) row_id FROM CRMSaleFollowUp LEFT JOIN CRMClientInfo ON CRMSaleFollowUp.ClientId = CRMClientInfo.id  WHERE 1=1  and   (CRMSaleFollowUp.createBy = '2cf86be0_1712291628149430079' or CRMSaleFollowUp.employeeId  ='2cf86be0_1712291628149430079' )  and isnull(CRMClientInfo.clientName,'') !='' 
 [DEBUG] 2018-01-02 16:01:49,268 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 16:32:10,950 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 16:39:10,130 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2018-01-02 16:39:10,131 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2018-01-02 16:39:10,222 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2018-01-02 16:39:10,222 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2018-01-02 16:39:10,474 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514882350459
 [DEBUG] 2018-01-02 16:39:10,475 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514882350459,];
 [DEBUG] 2018-01-02 16:39:16,894 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=admin&time=1514882356892
 [DEBUG] 2018-01-02 16:39:16,894 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[admin,];time=[1514882356892,];
 [DEBUG] 2018-01-02 16:39:16,899 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=admin&time=1514882356898
 [DEBUG] 2018-01-02 16:39:16,899 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[admin,];time=[1514882356898,];
 [DEBUG] 2018-01-02 16:39:16,908 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2018-01-02 16:39:16,909 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[admin,];password=[21232f297a57a5a743894a0e4a801fc3,];
 [DEBUG] 2018-01-02 16:39:16,955 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2018-01-02 16:39:16,966 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2018-01-02 16:39:17,029 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2018-01-02 16:39:17,029 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2018-01-02 16:39:17,030 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 16:39:17,263 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2018-01-02 16:39:17,264 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2018-01-02 16:39:17,275 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2018-01-02 16:39:17,275 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2018-01-02 16:39:17,276 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 16:39:17,287 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2018-01-02 16:39:17,288 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2018-01-02 16:39:17,289 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 16:39:17,295 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2018-01-02 16:39:17,296 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2018-01-02 16:39:17,297 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 16:39:17,302 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2018-01-02 16:39:17,303 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2018-01-02 16:39:17,304 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 16:39:23,275 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempQueryAction.do?moduleType=sys&src=menu&winCurIndex=1
 [DEBUG] 2018-01-02 16:39:23,276 Line:146 BaseAction.execute 操作人:admin;请求数据：moduleType=[sys,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2018-01-02 16:39:23,276 Line:215 ---------->SET Page 1 DEFAULT URL = /OAWorkFlowTempQueryAction.do?moduleType=sys
 [DEBUG] 2018-01-02 16:39:23,301 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempQueryAction.do?actionType=toTree&moduleType=sys
 [DEBUG] 2018-01-02 16:39:23,302 Line:146 BaseAction.execute 操作人:admin;请求数据：actionType=[toTree,];moduleType=[sys,];
 [DEBUG] 2018-01-02 16:39:23,302 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempQueryAction.do?operation=4&selectType=status&val=1&moduleType=sys
 [DEBUG] 2018-01-02 16:39:23,303 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];selectType=[status,];val=[1,];moduleType=[sys,];
 [DEBUG] 2018-01-02 16:39:23,303 Line:388 OAWorkFlowTempMgt.query 查询工作流sql =select work.id,work.templateName,templateType,a.moduleName,templateStatus,work.templateClass,work.statusId,work.flowOrder,templateFile,work.designType,work.workflowFile,work.fileFinish from OAWorkFlowTemplate work left join  tblWorkFlowType a  on work.templateClass=a.classCode  where  work.statusId=0 and templateStatus = ?  and ( a.classCode like '00001%'   OR a.classCode like '00002%'   OR a.classCode like '00003%'  ) order by work.templateStatus desc
 [DEBUG] 2018-01-02 16:39:33,463 Line:135 BaseAction.execute 请求地址：/WorkFlowTableAction.do?operation=7&designId=991f3893_1601041454545821750&keyId=tblexpenseaccount&type=simple
 [DEBUG] 2018-01-02 16:39:33,464 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];designId=[991f3893_1601041454545821750,];keyId=[tblexpenseaccount,];type=[simple,];
 [DEBUG] 2018-01-02 16:39:36,547 Line:135 BaseAction.execute 请求地址：/CustomAction.do?OAWorkFlowId=$designId
 [DEBUG] 2018-01-02 16:39:36,549 Line:146 BaseAction.execute 操作人:admin;请求数据：OAWorkFlowId=[$designId,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[,];popWinName=[,];tableId=[16498250_1107300945503685461,];tableType=[0,];isSunCmpShare=[0,];needsCopy=[0,];hasNext=[0,];relationTable=[,];classCount=[6,];tableName=[tblexpenseaccount,];oldtableName=[tblexpenseaccount,];tableDisplay=[zh_CN:费用报销单;,];tableDisplayDis=[费用报销单,];MainModule=[0,];sysParameter=[CommonFunction,];tableSysType=[Normal,];tWidth=[0,];tHeight=[0,];isUsed=[1,];draftFlag=[1,];fieldCalculate=[,];extendButton=[<button type="copy" operation="list">,];tableDesc=[,];PopDisSentence=[,];fieldId=[16498250_1107300945503685467,16498250_1107300945503685469,16498250_1107300945503685471,16498250_1107301038124806020,fe9c7752_1712201033438551368,16498250_1107300945503685473,16498250_1107301058088856138,16498250_1107300945503695495,16498250_1108021942363562023,16498250_1108021942363562025,16498250_1107300945503695487,16498250_1107300945503695483,16498250_1107300945503695489,16498250_1107300945503695491,16498250_1107300945503695493,d37e18c8_1108041937079020024,016498250_1107300945503685461,];languageId=[d37e18c8_1108041937079010007,d37e18c8_1108041937079010008,d37e18c8_1108041937079010009,d37e18c8_1108041937079010010,fe9c7752_1712201033438551369,d37e18c8_1108041937079010011,d37e18c8_1108041937079010012,d37e18c8_1108041937079010013,d37e18c8_1108041937079010014,d37e18c8_1108041937079020015,702f761a_1109221159024491333,d37e18c8_1108041937079020016,d37e18c8_1108041937079020019,d37e18c8_1108041937079020020,d37e18c8_1108041937079020021,d37e18c8_1108041937079020025,016498250_1107300945503685461,];listOrder=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,];isStat=[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,];isNull=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,];isUnique=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];digits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];refEnumerationName=[,,,,,,,,,,,,,,,,,];inputValue=[,,Department:Department,Employee:Employee,Employee:Employee,,,,,,,,,,,,,];calculate=[,,,,,,,,{backBlance}=' ';if({originalBorrow}>=0.01){backBlance}=Number({originalBorrow})-Number(sum{tblexpenseaccountDet_Business});,,,,,,,,,];fieldSysType=[,,,,,,,,,,,,,,,,,];fieldIdentityStr=[BillNo,,,,,,,,,,,,,,,,,];copyType=[,,,,,,,,,,,,,,,,,];logicValidate=[,,,,,,,,,,,,,,,,,];popupType=[,,,,,,,,,,,,,,,,,];groupLanguageId=[,,,,,,,,,,,,,,,,,];groupName=[,,,,,,,,,,,,,,,,,];insertTable=[,,,,,,,,,,,,,,,,,];isCopy=[1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,];isReAudit=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];isLog=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];inputTypeOld=[0,0,2,2,2,0,0,0,0,8,0,100,100,100,100,100,0,];isMobile=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,];fieldName=[BillNo,oaTitle,DepartmentCode,EmployeeCode,EmployeeID,ApplyDate,appendixno,accessories,originalBorrow,backBlance,remark,AuditingAttitude,approve1,approve2,approve3,createtime,CheckPersont,];fieldDisplay=[zh_CN:单据编号;,zh_CN:主题;,zh_CN:报销部门;,zh_CN:报销人;,zh_CN:报销人;,zh_CN:申请日期;,zh_CN:附件数量;,zh_CN:附件;,zh_CN:原借款;,zh_CN:应退余款;,zh_CN:报销说明;,zh_CN:审核意见;,zh_CN:部门领导签批;,zh_CN:公司领导审批;,zh_CN:三级审核意见;,zh_CN:创建时间;,zh_CN:复核人;,];fieldDisplayDis=[单据编号,主题,报销部门,报销人,报销人,申请日期,附件数量,附件,原借款,应退余款,报销说明,审核意见,部门领导签批,公司领导审批,三级审核意见,创建时间,复核人,];fieldType=[2,18,2,2,2,5,2,14,1,1,18,3,3,3,3,6,2,];maxLength=[100,200,100,100,100,20,20,500,0,0,5000,500,30,30,30,19,500,];defaultValue=[,,@Sess:DepartmentCode;@Sess:DepartmentName,,@Sess:UserId;@Sess:UserName,2017-12-27,,,,,,,,,,,,];isNullId=[1,1,1,];isUniqueId=[1,];width=[200,200,200,200,200,200,200,500,200,200,200,500,200,200,200,200,0,];inputType=[0,100,3,3,2,0,0,0,0,8,0,100,100,100,100,100,100,];moreInputId=[Department,Employee,Employee,];zhWidth=[200,];inputTypeOldId=[,];fieldSysTypeId=[,];fieldIdentityStrId=[,];groupNameId=[,];logicValidateId=[,];copyTypeId=[,];
 [DEBUG] 2018-01-02 16:39:36,575 Line:1235  update tblDBTableInfo set lastUpdateTime='2018-01-02 16:39:36' where tableName='tblexpenseaccount'
 [DEBUG] 2018-01-02 16:39:36,577 Line:1643 update tblInitTime set lastTime = ? where initName=?
 [DEBUG] 2018-01-02 16:39:37,166 Line:297  select * from tblDBTableInfo where tableName = 'tblexpenseaccount'
 [DEBUG] 2018-01-02 16:39:37,173 Line:370 select * from tblDBFieldInfo where tableId = (select id from tblDBTableInfo where tableName='tblexpenseaccount') order by tableId,listOrder
 [DEBUG] 2018-01-02 16:39:37,182 Line:538 ------Init TableInfo record:1
 [DEBUG] 2018-01-02 16:39:39,058 Line:135 BaseAction.execute 请求地址：/CustomAction.do?operation=7&keyId=tblexpenseaccount&popWinName=&winCurIndex=
 [DEBUG] 2018-01-02 16:39:39,058 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];keyId=[tblexpenseaccount,];popWinName=[,];winCurIndex=[,];
 [DEBUG] 2018-01-02 17:00:19,763 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempAction.do?operation=6&windCurIndex=&selectClass=1&moduleType=sys
 [DEBUG] 2018-01-02 17:00:19,763 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[6,];windCurIndex=[,];selectClass=[1,];moduleType=[sys,];
 [DEBUG] 2018-01-02 17:01:38,447 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempAction.do?operation=6&windCurIndex=&selectClass=1&moduleType=sys
 [DEBUG] 2018-01-02 17:01:38,448 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[6,];windCurIndex=[,];selectClass=[1,];moduleType=[sys,];
 [DEBUG] 2018-01-02 17:02:32,112 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 17:02:36,042 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempAction.do
 [DEBUG] 2018-01-02 17:02:36,042 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[1,];type=[addTable,];templateFile=[tblexpenseac,];designType=[2,];tempClass=[0000200001,];moduleType=[sys,];fromTemplate=[tblexpenseaccount,];
 [DEBUG] 2018-01-02 17:02:37,618 Line:135 BaseAction.execute 请求地址：/OAWorkFlowTempAction.do?operation=7&type=updateNew&keyId=ea9434ab_1801021702360420028&moduleType=sys
 [DEBUG] 2018-01-02 17:02:37,619 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[7,];type=[updateNew,];keyId=[ea9434ab_1801021702360420028,];moduleType=[sys,];
 [DEBUG] 2018-01-02 17:03:28,277 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=2
 [DEBUG] 2018-01-02 17:03:28,277 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2018-01-02 17:03:28,278 Line:215 ---------->SET Page 2 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2018-01-02 17:03:29,534 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2018-01-02 17:03:29,534 Line:146 BaseAction.execute 操作人:admin;请求数据：optype=[index,];
 [DEBUG] 2018-01-02 17:03:30,486 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=3
 [DEBUG] 2018-01-02 17:03:30,487 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[3,];
 [DEBUG] 2018-01-02 17:03:30,488 Line:215 ---------->SET Page 3 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2018-01-02 17:03:44,180 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2018-01-02 17:03:44,181 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[3,];search=[客户列表,];
 [DEBUG] 2018-01-02 17:07:26,353 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do?src=menu&winCurIndex=4
 [DEBUG] 2018-01-02 17:07:26,353 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[4,];
 [DEBUG] 2018-01-02 17:07:26,354 Line:215 ---------->SET Page 4 DEFAULT URL = /CustomQueryAction.do
 [DEBUG] 2018-01-02 17:07:28,860 Line:135 BaseAction.execute 请求地址：/CustomQueryAction.do
 [DEBUG] 2018-01-02 17:07:28,860 Line:146 BaseAction.execute 操作人:admin;请求数据：operation=[4,];org.apache.struts.taglib.html.TOKEN=[,];winCurIndex=[4,];search=[CRMClientModule,];
 [DEBUG] 2018-01-02 17:11:45,420 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2018-01-02 17:11:45,421 Line:146 BaseAction.execute 操作人:admin;请求数据：
 [DEBUG] 2018-01-02 17:11:45,422 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 17:11:45,584 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2018-01-02 17:11:45,585 Line:146 BaseAction.execute 操作人:admin;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2018-01-02 17:11:45,600 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2018-01-02 17:11:45,601 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:11:45,601 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 17:11:45,612 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2018-01-02 17:11:45,613 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:11:45,614 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 17:11:45,621 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2018-01-02 17:11:45,621 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:11:45,622 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 17:11:45,626 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2018-01-02 17:11:45,627 Line:146 BaseAction.execute 操作人:admin;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:11:45,627 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  order by work.flowOrder
 [DEBUG] 2018-01-02 17:11:49,100 Line:135 BaseAction.execute 请求地址：/ReportDataAction.do?reportNumber=CRMClientModule&src=menu&winCurIndex=1
 [DEBUG] 2018-01-02 17:11:49,100 Line:146 BaseAction.execute 操作人:admin;请求数据：reportNumber=[CRMClientModule,];src=[menu,];winCurIndex=[1,];
 [DEBUG] 2018-01-02 17:11:49,100 Line:215 ---------->SET Page 1 DEFAULT URL = /ReportDataAction.do?reportNumber=CRMClientModule
 [DEBUG] 2018-01-02 17:11:49,144 Line:549 ReportDataMgt.getReportData SQL={call proc_CRMModule (@pageNo=?,@pageSize=?,@locale=?,@userId=?,@sunCompany=?,@moduleName=?)}
 [DEBUG] 2018-01-02 17:11:49,144 Line:567 ReportDataMgt.getReportData 参数1:1
 [DEBUG] 2018-01-02 17:11:49,145 Line:568 ReportDataMgt.getReportData 参数2:100
 [DEBUG] 2018-01-02 17:11:49,145 Line:569 ReportDataMgt.getReportData 参数3:zh_CN
 [DEBUG] 2018-01-02 17:11:49,145 Line:570 ReportDataMgt.getReportData 参数4:1
 [DEBUG] 2018-01-02 17:11:49,145 Line:571 ReportDataMgt.getReportData 参数5:00001
 [DEBUG] 2018-01-02 17:11:49,145 Line:582 ReportDataMgt.getReportData 参数6:
 [DEBUG] 2018-01-02 17:11:49,842 Line:587 ReportDataMgt.getReportData warn 正在直接执行 SQL；无游标。
 [DEBUG] 2018-01-02 17:11:49,843 Line:689 通过SQL读原始数据：699
 [DEBUG] 2018-01-02 17:11:49,844 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 17:12:03,036 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=CRMClientInfo&src=menu&winCurIndex=2
 [DEBUG] 2018-01-02 17:12:03,036 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[CRMClientInfo,];src=[menu,];winCurIndex=[2,];
 [DEBUG] 2018-01-02 17:12:03,036 Line:215 ---------->SET Page 2 DEFAULT URL = /UserFunctionQueryAction.do?tableName=CRMClientInfo
 [DEBUG] 2018-01-02 17:12:03,053 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,ClientNo,ClientName,ClientLabel,ClientType,BusinessDistrict,Scale,Property,Trade,BriefContent from ( select CRMClientInfo.id as keyId,'1' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='1') as deptCodeR,'1' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='1') as deptCodeRE,      CRMClientInfo.ClientNo as ClientNo,     CRMClientInfo.ClientName as ClientName,     CRMClientInfo.ClientLabel as ClientLabel,     CRMClientInfo.ClientType as ClientType,     CRMBusinessDistrict.BusinessDistrict as BusinessDistrict,     CRMClientInfo.Scale as Scale,     CRMClientInfo.Property as Property,     CRMClientInfo.Trade as Trade,     CRMClientInfo.BriefContent as BriefContent   ,ROW_NUMBER() over(order by CRMClientInfo.ClientNo) as row_id  from CRMClientInfo left join CRMBusinessDistrict on CRMBusinessDistrict.id=CRMClientInfo.BusinessDistrict where 1=1                                                                        )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2018-01-02 17:12:03,069 Line:689 通过SQL读原始数据：16
 [DEBUG] 2018-01-02 17:12:03,069 Line:1391 整理数据：0
 [DEBUG] 2018-01-02 17:12:03,271 Line:5227 GlobalsTool.js 生成js 时间32:/js/gen/defineList.vjsCRMClientInfo_zh_CN.js
 [DEBUG] 2018-01-02 17:12:06,857 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=CRMClientInfo&parentCode=&operation=6&moduleType=&f_brother=&parentTableName=&winCurIndex=2&popWinName=PopMainOpdiv
 [DEBUG] 2018-01-02 17:12:06,858 Line:146 BaseAction.execute 操作人:admin;请求数据：tableName=[CRMClientInfo,];parentCode=[,];operation=[6,];moduleType=[,];f_brother=[,];parentTableName=[,];winCurIndex=[2,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2018-01-02 17:12:07,040 Line:5227 GlobalsTool.js 生成js 时间130:/js/gen/define.vjsCRMClientInfo_zh_CN.js
 [DEBUG] 2018-01-02 17:12:11,264 Line:135 BaseAction.execute 请求地址：/CRMClientAction.do?src=menu&winCurIndex=3
 [DEBUG] 2018-01-02 17:12:11,264 Line:146 BaseAction.execute 操作人:admin;请求数据：src=[menu,];winCurIndex=[3,];
 [DEBUG] 2018-01-02 17:12:11,265 Line:215 ---------->SET Page 3 DEFAULT URL = /CRMClientAction.do
 [DEBUG] 2018-01-02 17:12:11,317 Line:773 query client sql:select CRMClientInfo.id,labelId,CRMClientInfo.workFlowNode,CRMClientInfo.checkPersons,CRMClientInfo.workFlowNodeName,WorkFlowStatus,tblCompany.classCode as CompanyCode,ClientName,Keywords,createTime,Status,ClientType,SourceInfo,createBy,owner,LastContractTime,NextFollowTime,Address,URL,BriefContent,Level,ClientLabel,Emergency,EstimateTime, row_number() over(order by  lastContractTime desc) row_id from CRMClientInfo left join (select id as cid,classCode from tblCompany) as tblCompany on CRMClientInfo.id=tblCompany.cid  where 1=1  and moduleId='1'  and status != '1' 
 [DEBUG] 2018-01-02 17:12:11,336 Line:2314 query client cast time:19
 [DEBUG] 2018-01-02 17:12:11,417 Line:2328 contactMap cast time : 81
 [DEBUG] 2018-01-02 17:12:11,444 Line:2336 all cast time : 179
 [DEBUG] 2018-01-02 17:19:38,581 Line:88 CommonServlet.service 请求地址：/CommonServlet?operation=qrcodeDownload
 [DEBUG] 2018-01-02 17:19:38,584 Line:99 CommonServlet.service 操作人:;请求数据：operation=[qrcodeDownload,];
 [DEBUG] 2018-01-02 17:19:38,659 Line:135 BaseAction.execute 请求地址：/loginAction.do?operation=15
 [DEBUG] 2018-01-02 17:19:38,660 Line:146 BaseAction.execute 操作人:;请求数据：operation=[15,];
 [DEBUG] 2018-01-02 17:19:38,881 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=valpwd&time=1514884778872
 [DEBUG] 2018-01-02 17:19:38,882 Line:163 UtilServlet.service 操作人:;请求数据：operation=[valpwd,];time=[1514884778872,];
 [DEBUG] 2018-01-02 17:19:40,876 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=getUserInfo&name=Boos&time=1514884780874
 [DEBUG] 2018-01-02 17:19:40,876 Line:163 UtilServlet.service 操作人:;请求数据：operation=[getUserInfo,];name=[Boos,];time=[1514884780874,];
 [DEBUG] 2018-01-02 17:19:40,884 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=sunCompany&name=Boos&time=1514884780879
 [DEBUG] 2018-01-02 17:19:40,884 Line:163 UtilServlet.service 操作人:;请求数据：operation=[sunCompany,];name=[Boos,];time=[1514884780879,];
 [DEBUG] 2018-01-02 17:19:40,893 Line:135 BaseAction.execute 请求地址：/loginAction.do
 [DEBUG] 2018-01-02 17:19:40,893 Line:146 BaseAction.execute 操作人:;请求数据：org.apache.struts.taglib.html.TOKEN=[,];NOTTOKEN=[true,];operation=[10,];ukId=[,];strM1=[,];strM2=[,];clientKey=[,];random=[,];screenWidth=[1263,];sunCompany=[1,];style=[style1,];system=[new,];loc=[zh_CN,];name=[Boos,];password=[c4ca4238a0b923820dcc509a6f75849b,];
 [DEBUG] 2018-01-02 17:19:40,965 Line:2987 select count(*) from tblSunCompanys a where a.classCode like '00001_____%'
 [DEBUG] 2018-01-02 17:19:40,974 Line:530 select AccYear,AccOverYear from  tblAccPeriod group by Accyear,AccOverYear
 [DEBUG] 2018-01-02 17:19:41,025 Line:135 BaseAction.execute 请求地址：/AIO.do
 [DEBUG] 2018-01-02 17:19:41,025 Line:146 BaseAction.execute 操作人:Boos;请求数据：
 [DEBUG] 2018-01-02 17:19:41,033 Line:404 PublicMgt.queryClass 查询可新建工作流sql=select work.id,work.templateName,work.templateType,a.ModuleName,work.templateStatus,work.templateClass,work.statusId,work.flowOrder,work.templateFile,work.allowAdd,work.timeType,work.timeVal,work.designType  from OAWorkFlowTemplate work, tblWorkFlowType a where work.templateClass=a.classCode and a.classCode like '00002%'  and work.fileFinish='1' and work.templateStatus=1 and work.statusId=0  and ((charIndex(',2cf86be0_1712291628149430079,',work.allowVisitor)>0 or charIndex(',00101,',work.allowVisitor)>0 or charIndex(',11,',work.allowVisitor)>0 ) or work.allowVisitor like '') order by work.flowOrder
 [DEBUG] 2018-01-02 17:19:41,251 Line:135 BaseAction.execute 请求地址：/newMenu.do?keyId=28141812_0811271603291400086&name=%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0&operation=0&winCurIndex=0
 [DEBUG] 2018-01-02 17:19:41,252 Line:146 BaseAction.execute 操作人:Boos;请求数据：keyId=[28141812_0811271603291400086,];name=[???????・??????°,];operation=[0,];winCurIndex=[0,];
 [DEBUG] 2018-01-02 17:19:41,266 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=1&loadMenu=true
 [DEBUG] 2018-01-02 17:19:41,267 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[1,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:19:41,275 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=2&loadMenu=true
 [DEBUG] 2018-01-02 17:19:41,275 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[2,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:19:41,281 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=3&loadMenu=true
 [DEBUG] 2018-01-02 17:19:41,282 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[3,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:19:41,286 Line:135 BaseAction.execute 请求地址：/MenuQueryAction.do?sysType=0&loadMenu=true
 [DEBUG] 2018-01-02 17:19:41,286 Line:146 BaseAction.execute 操作人:Boos;请求数据：sysType=[0,];loadMenu=[true,];
 [DEBUG] 2018-01-02 17:19:45,158 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?src=menu&winCurIndex=1
 [DEBUG] 2018-01-02 17:19:45,159 Line:146 BaseAction.execute 操作人:Boos;请求数据：src=[menu,];winCurIndex=[1,];
 [DEBUG] 2018-01-02 17:19:45,159 Line:215 ---------->SET Page 1 DEFAULT URL = /AdvanceAction.do
 [DEBUG] 2018-01-02 17:19:45,927 Line:135 BaseAction.execute 请求地址：/AdvanceAction.do?optype=index
 [DEBUG] 2018-01-02 17:19:45,928 Line:146 BaseAction.execute 操作人:Boos;请求数据：optype=[index,];
 [DEBUG] 2018-01-02 17:19:46,566 Line:135 BaseAction.execute 请求地址：/ReportSetQueryAction.do?src=menu&winCurIndex=2
 [DEBUG] 2018-01-02 17:19:46,567 Line:146 BaseAction.execute 操作人:Boos;请求数据：src=[menu,];winCurIndex=[2,];
 [DEBUG] 2018-01-02 17:19:46,568 Line:215 ---------->SET Page 2 DEFAULT URL = /ReportSetQueryAction.do
 [DEBUG] 2018-01-02 17:19:50,442 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&src=menu&winCurIndex=3
 [DEBUG] 2018-01-02 17:19:50,442 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];src=[menu,];winCurIndex=[3,];
 [DEBUG] 2018-01-02 17:19:50,442 Line:215 ---------->SET Page 3 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblModules
 [DEBUG] 2018-01-02 17:19:50,479 Line:135 BaseAction.execute 请求地址：/TreeAction.do?tableName=tblModules&moduleType=&SysType=&MOID=6d3441a2_1308081026952365241&editable=true&subSql=
 [DEBUG] 2018-01-02 17:19:50,480 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&src=menu&winCurIndex=3&checkTab=Y
 [DEBUG] 2018-01-02 17:19:50,481 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];moduleType=[,];SysType=[,];MOID=[6d3441a2_1308081026952365241,];editable=[true,];subSql=[,];
 [DEBUG] 2018-01-02 17:19:50,481 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];src=[menu,];winCurIndex=[3,];checkTab=[Y,];
 [DEBUG] 2018-01-02 17:19:50,482 Line:215 ---------->SET Page 3 DEFAULT URL = /UserFunctionQueryAction.do?tableName=tblModules
 [DEBUG] 2018-01-02 17:19:50,482 Line:229 TreeMgt.getTree sql=select classCode,zh_CN,'',tblModules.id from tblModules left join tblLanguage b  on tblModules.modelName=b.id where isCatalog=1  order by OrderBy 
 [DEBUG] 2018-01-02 17:19:50,517 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,modelName,MainModule,OrderBy,SystemParam,IsUsed,IsHidden,tblName,linkAddress from ( select tblModules.classCode as classCode,tblModules.isCatalog as childCount, tblModules.id as keyId,'2cf86be0_1712291628149430079' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='2cf86be0_1712291628149430079') as deptCodeR,'2cf86be0_1712291628149430079' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='2cf86be0_1712291628149430079') as deptCodeRE,      tblModules.modelName as modelName,     tblModules.MainModule as MainModule,     tblModules.OrderBy as OrderBy,     tblModules.SystemParam as SystemParam,     tblModules.IsUsed as IsUsed,     tblModules.IsHidden as IsHidden,     tblModules.tblName as tblName,     tblModules.linkAddress as linkAddress   ,ROW_NUMBER() over(order by     tblModules.OrderBy) as row_id  from tblModules  where 1=1 and tblModules.classCode like '_____'                                             and isDisplay=0          )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2018-01-02 17:19:50,525 Line:689 通过SQL读原始数据：7
 [DEBUG] 2018-01-02 17:19:50,531 Line:1391 整理数据：5
 [DEBUG] 2018-01-02 17:19:52,959 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&keyId=b1cfacac_0902201355164210064&parentCode=00019&operation=4&moduleType=&winCurIndex=3&parentTableName=&checkTab=Y&selectType=endClass
 [DEBUG] 2018-01-02 17:19:52,960 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];keyId=[b1cfacac_0902201355164210064,];parentCode=[00019,];operation=[4,];moduleType=[,];winCurIndex=[3,];parentTableName=[,];checkTab=[Y,];selectType=[endClass,];
 [DEBUG] 2018-01-02 17:19:52,986 Line:549 ReportDataMgt.getReportData SQL=select keyId,createBy,deptCodeR,employeeId,deptCodeRE,classCode,childCount,modelName,MainModule,OrderBy,SystemParam,IsUsed,IsHidden,tblName,linkAddress from ( select tblModules.classCode as classCode,tblModules.isCatalog as childCount, tblModules.id as keyId,'2cf86be0_1712291628149430079' as createBy,(select isnull(DepartmentCode,'') from tblEmployee where tblEmployee.id='2cf86be0_1712291628149430079') as deptCodeR,'2cf86be0_1712291628149430079' as employeeId,(select isnull(DepartmentCode,'') from tblEmployee as e where e.id='2cf86be0_1712291628149430079') as deptCodeRE,      tblModules.modelName as modelName,     tblModules.MainModule as MainModule,     tblModules.OrderBy as OrderBy,     tblModules.SystemParam as SystemParam,     tblModules.IsUsed as IsUsed,     tblModules.IsHidden as IsHidden,     tblModules.tblName as tblName,     tblModules.linkAddress as linkAddress   ,ROW_NUMBER() over(order by     tblModules.OrderBy) as row_id  from tblModules  where 1=1 and tblModules.classCode like '00019_____'                                             and isDisplay=0          )  a  where row_id between 1 and 101 order by row_id
 [DEBUG] 2018-01-02 17:19:53,001 Line:689 通过SQL读原始数据：15
 [DEBUG] 2018-01-02 17:19:53,009 Line:1391 整理数据：8
 [DEBUG] 2018-01-02 17:19:56,649 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do?tableName=tblModules&keyId=d7068534_1712271505115570027&moduleType=&f_brother=&operation=5&winCurIndex=3&pageNo=&parentCode=000190087N&parentTableName=&saveDraft=&popWinName=PopMainOpdiv
 [DEBUG] 2018-01-02 17:19:56,649 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];keyId=[d7068534_1712271505115570027,];moduleType=[,];f_brother=[,];operation=[5,];winCurIndex=[3,];pageNo=[,];parentCode=[000190087N,];parentTableName=[,];saveDraft=[,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2018-01-02 17:19:56,652 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='d7068534_1712271505115570027' and  a.tableName='tblModules'
 [DEBUG] 2018-01-02 17:19:56,675 Line:1525  select * from  tblModelOperations where f_ref = 'd7068534_1712271505115570027' order by id
 [DEBUG] 2018-01-02 17:20:26,226 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2018-01-02 17:20:26,227 Line:146 BaseAction.execute 操作人:Boos;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblModules,];button=[,];frameName=[$fName,];winCurIndex=[3,];popWinName=[PopMainOpdiv,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[导出列表,];varKeyIds=[d7068534_1712271505115570027,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[false,];designId=[,];approveStatus=[transing,];id=[d7068534_1712271505115570027,];parentCode=[,];checkPersons=[,];classCode=[000190087N,];modelName_lan=[客户列表移动端,];modelName=[en:;zh_CN:客户列表移动端;,];SCompanyID=[00001,];MainModule=[3,];SystemParam=[Normal,];tblName=[CRMClientInfo,];IsUsed=[1,];IsHidden=[2,];OrderBy=[0,];parentClass=[,];tblModules_modelName=[,];printCount=[0,];linkAddress=[/UserFunctionQueryAction.do?tableName=CRMClientInfo1,];CheckPersont=[,];IsMobile=[,];lastUpdateBy=[1,];lastUpdateTime=[2017-12-27 15:04:09,];workFlowNode=[-1,];workFlowNodeName=[finish,];statusId=[0,];isCatalog=[0,];createBy=[1,];createTime=[2017-12-27 15:04:09,];finishTime=[2017-12-27 15:05:11,];tblModelOperationsPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblModelOperations_OperationID=[1,2,3,4,6,];tblModelOperations_moduleOpId=[3692,3693,3694,3695,3696,];tblModelOperations_detsId=[3692,3693,3694,3695,3696,];
 [DEBUG] 2018-01-02 17:20:26,244 Line:1525  select * from  tblModelOperations where f_ref = 'd7068534_1712271505115570027' order by id
 [DEBUG] 2018-01-02 17:20:26,264 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblModules where id= ? id= d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,266 Line:5984  UPDATE tblModules SET modelName=?,MainModule=?,SystemParam=?,tblName=?,IsUsed=?,IsHidden=?,OrderBy=?,parentClass=?,linkAddress=?,IsMobile=?,Icon=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2018-01-02 17:20:26,273 Line:5993 1:ea9434ab_1801021720262280030
 [DEBUG] 2018-01-02 17:20:26,274 Line:5993 2:3
 [DEBUG] 2018-01-02 17:20:26,274 Line:5993 3:Normal
 [DEBUG] 2018-01-02 17:20:26,274 Line:5993 4:CRMClientInfo
 [DEBUG] 2018-01-02 17:20:26,274 Line:5993 5:1
 [DEBUG] 2018-01-02 17:20:26,275 Line:5993 6:2
 [DEBUG] 2018-01-02 17:20:26,275 Line:5993 7:0
 [DEBUG] 2018-01-02 17:20:26,275 Line:5993 8:
 [DEBUG] 2018-01-02 17:20:26,275 Line:5993 9:/UserFunctionQueryAction.do?tableName=CRMClientInfo1
 [DEBUG] 2018-01-02 17:20:26,275 Line:5993 10:0
 [DEBUG] 2018-01-02 17:20:26,275 Line:5993 11:
 [DEBUG] 2018-01-02 17:20:26,276 Line:5993 12:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 17:20:26,276 Line:5993 13:2018-01-02 17:20:26
 [DEBUG] 2018-01-02 17:20:26,289 Line:5894  DELETE FROM  tblModelOperations  WHERE f_ref = ? 
 [DEBUG] 2018-01-02 17:20:26,293 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:26,294 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,295 Line:5853 2:3692
 [DEBUG] 2018-01-02 17:20:26,295 Line:5853 3:1
 [DEBUG] 2018-01-02 17:20:26,295 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:26,297 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:26,298 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,298 Line:5853 2:3693
 [DEBUG] 2018-01-02 17:20:26,298 Line:5853 3:2
 [DEBUG] 2018-01-02 17:20:26,298 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:26,299 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:26,299 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,299 Line:5853 2:3694
 [DEBUG] 2018-01-02 17:20:26,309 Line:5853 3:3
 [DEBUG] 2018-01-02 17:20:26,309 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:26,310 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:26,310 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,311 Line:5853 2:3695
 [DEBUG] 2018-01-02 17:20:26,311 Line:5853 3:4
 [DEBUG] 2018-01-02 17:20:26,311 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:26,312 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:26,312 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,312 Line:5853 2:3696
 [DEBUG] 2018-01-02 17:20:26,312 Line:5853 3:6
 [DEBUG] 2018-01-02 17:20:26,312 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:26,317 Line:921 自定义执行的语句显示： tblModules_update :select isCatalog,tblName,modelName,linkAddress,isUsed from tblModules where id=?
 [DEBUG] 2018-01-02 17:20:26,317 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 17:20:26,318 Line:988 1值：d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,319 Line:1025 query condition columnName:isCatalog----value:0
 [DEBUG] 2018-01-02 17:20:26,319 Line:1025 query condition columnName:tblName----value:CRMClientInfo
 [DEBUG] 2018-01-02 17:20:26,319 Line:1025 query condition columnName:modelName----value:ea9434ab_1801021720262280030
 [DEBUG] 2018-01-02 17:20:26,320 Line:1025 query condition columnName:linkAddress----value:/UserFunctionQueryAction.do?tableName=CRMClientInfo1
 [DEBUG] 2018-01-02 17:20:26,320 Line:1025 query condition columnName:isUsed----value:1
 [DEBUG] 2018-01-02 17:20:26,320 Line:1043 ---上述语句时间---3
 [DEBUG] 2018-01-02 17:20:26,320 Line:313 exeCondition:tblModules_update :true
 [DEBUG] 2018-01-02 17:20:26,325 Line:321 flag:true
 [DEBUG] 2018-01-02 17:20:26,325 Line:1081 自定义执行的语句显示： tblModules_update:update tblModelOperations set moduleOpId= id where f_ref=? and (moduleOpId is null or moduleOpId=0)
 [DEBUG] 2018-01-02 17:20:26,326 Line:1157 1值：d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:26,328 Line:1163 DefineSQLBean.execSql  define=tblModules_update,  影响行数=0
 [DEBUG] 2018-01-02 17:20:26,328 Line:408 ************上述语句执行时间：3
 [DEBUG] 2018-01-02 17:20:26,329 Line:313 exeCondition:tblModules_update :0==0&&'CRMClientInfo'.length==0&&'/UserFunctionQueryAction.do?tableName=CRMClientInfo1'.length!=0
 [DEBUG] 2018-01-02 17:20:26,330 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:26,330 Line:313 exeCondition:tblModules_update :0==0&&'1'=='1'&&'/UserFunctionQueryAction.do?tableName=CRMClientInfo1'=='/UserFunctionQueryAction.do?parentTableName=CRMClientInfo&tableName=CRMPeriodicExamine'
 [DEBUG] 2018-01-02 17:20:26,331 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:26,331 Line:313 exeCondition:tblModules_update :0==0&&'1'=='2'&&'/UserFunctionQueryAction.do?tableName=CRMClientInfo1'=='/UserFunctionQueryAction.do?parentTableName=CRMClientInfo&tableName=CRMPeriodicExamine'
 [DEBUG] 2018-01-02 17:20:26,332 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:26,332 Line:313 exeCondition:tblModules_update : '' !='' 
 [DEBUG] 2018-01-02 17:20:26,332 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:27,825 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&operation=5&keyId=d7068534_1712271505115570027&parentCode=000190087N&f_brother=&draftQuery=&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=3&popWinName=PopMainOpdiv
 [DEBUG] 2018-01-02 17:20:27,826 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];operation=[5,];keyId=[d7068534_1712271505115570027,];parentCode=[000190087N,];f_brother=[,];draftQuery=[,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[3,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2018-01-02 17:20:27,827 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='d7068534_1712271505115570027' and  a.tableName='tblModules'
 [DEBUG] 2018-01-02 17:20:27,839 Line:1525  select * from  tblModelOperations where f_ref = 'd7068534_1712271505115570027' order by id
 [DEBUG] 2018-01-02 17:20:47,988 Line:135 BaseAction.execute 请求地址：/UserFunctionAction.do
 [DEBUG] 2018-01-02 17:20:47,989 Line:146 BaseAction.execute 操作人:Boos;请求数据：conver=[,];operation=[2,];org.apache.struts.taglib.html.TOKEN=[,];tableName=[tblModules,];button=[,];frameName=[$fName,];winCurIndex=[3,];popWinName=[PopMainOpdiv,];pageNo=[1,];parentTableName=[,];defineInfo=[,];moduleType=[,];detLineNo=[,];saveDraft=[finish,];noback=[false,];logicValidate=[,];defineName=[,];popReturnVal=[,];checkFieldName=[,];fromCRM=[,];fromPage=[,];checkTab=[,];pageType=[update,];LinkType=[,];pframeName=[导出列表,];varKeyIds=[d7068534_1712271505115570027,];fresh=[,];hasFrame=[,];ButtonType=[,];ButtonTypeName=[,];deliverTo=[,];OAWorkFlow=[false,];designId=[,];approveStatus=[transing,];id=[d7068534_1712271505115570027,];parentCode=[,];checkPersons=[,];classCode=[000190087N,];modelName_lan=[客户列表移动端,];modelName=[en:;zh_CN:客户列表移动端;,];SCompanyID=[00001,];MainModule=[3,];SystemParam=[Normal,];tblName=[CRMClientInfo,];IsUsed=[1,];IsHidden=[2,];OrderBy=[0,];parentClass=[,];tblModules_modelName=[,];printCount=[0,];linkAddress=[/UserFunctionQueryAction.do?tableName=CRMClientInfo,];CheckPersont=[,];IsMobile=[,];lastUpdateBy=[2cf86be0_1712291628149430079,];lastUpdateTime=[2018-01-02 17:20:26,];workFlowNode=[-1,];workFlowNodeName=[finish,];statusId=[0,];isCatalog=[0,];createBy=[1,];createTime=[2017-12-27 15:04:09,];finishTime=[2017-12-27 15:05:11,];tblModelOperationsPopupType=[$globals.getTableInfoBean(${rowlist.tableName}).popupType,];tblModelOperations_OperationID=[1,2,3,4,6,];tblModelOperations_moduleOpId=[3692,3693,3694,3695,3696,];tblModelOperations_detsId=[4321,4322,4323,4324,4325,];
 [DEBUG] 2018-01-02 17:20:47,993 Line:1525  select * from  tblModelOperations where f_ref = 'd7068534_1712271505115570027' order by id
 [DEBUG] 2018-01-02 17:20:48,002 Line:5104 DynDBManager.update 检查原单据状态 sql =select workflowNodeName from tblModules where id= ? id= d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,003 Line:5984  UPDATE tblModules SET modelName=?,MainModule=?,SystemParam=?,tblName=?,IsUsed=?,IsHidden=?,OrderBy=?,parentClass=?,linkAddress=?,IsMobile=?,Icon=?,lastUpdateBy=?,lastUpdateTime=? WHERE ID = ? 
 [DEBUG] 2018-01-02 17:20:48,003 Line:5993 1:ea9434ab_1801021720479890037
 [DEBUG] 2018-01-02 17:20:48,003 Line:5993 2:3
 [DEBUG] 2018-01-02 17:20:48,004 Line:5993 3:Normal
 [DEBUG] 2018-01-02 17:20:48,004 Line:5993 4:CRMClientInfo
 [DEBUG] 2018-01-02 17:20:48,004 Line:5993 5:1
 [DEBUG] 2018-01-02 17:20:48,004 Line:5993 6:2
 [DEBUG] 2018-01-02 17:20:48,004 Line:5993 7:0
 [DEBUG] 2018-01-02 17:20:48,004 Line:5993 8:
 [DEBUG] 2018-01-02 17:20:48,005 Line:5993 9:/UserFunctionQueryAction.do?tableName=CRMClientInfo
 [DEBUG] 2018-01-02 17:20:48,005 Line:5993 10:0
 [DEBUG] 2018-01-02 17:20:48,005 Line:5993 11:
 [DEBUG] 2018-01-02 17:20:48,005 Line:5993 12:2cf86be0_1712291628149430079
 [DEBUG] 2018-01-02 17:20:48,005 Line:5993 13:2018-01-02 17:20:48
 [DEBUG] 2018-01-02 17:20:48,007 Line:5894  DELETE FROM  tblModelOperations  WHERE f_ref = ? 
 [DEBUG] 2018-01-02 17:20:48,008 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:48,008 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,008 Line:5853 2:3692
 [DEBUG] 2018-01-02 17:20:48,008 Line:5853 3:1
 [DEBUG] 2018-01-02 17:20:48,008 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:48,009 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:48,009 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,009 Line:5853 2:3693
 [DEBUG] 2018-01-02 17:20:48,009 Line:5853 3:2
 [DEBUG] 2018-01-02 17:20:48,009 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:48,010 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:48,010 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,010 Line:5853 2:3694
 [DEBUG] 2018-01-02 17:20:48,010 Line:5853 3:3
 [DEBUG] 2018-01-02 17:20:48,011 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:48,011 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:48,011 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,011 Line:5853 2:3695
 [DEBUG] 2018-01-02 17:20:48,012 Line:5853 3:4
 [DEBUG] 2018-01-02 17:20:48,012 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:48,012 Line:5847  INSERT INTO  tblModelOperations(f_ref,moduleOpId,OperationID,SCompanyID) values(?,?,?,?) 
 [DEBUG] 2018-01-02 17:20:48,012 Line:5853 1:d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,013 Line:5853 2:3696
 [DEBUG] 2018-01-02 17:20:48,013 Line:5853 3:6
 [DEBUG] 2018-01-02 17:20:48,013 Line:5853 4:00001
 [DEBUG] 2018-01-02 17:20:48,015 Line:921 自定义执行的语句显示： tblModules_update :select isCatalog,tblName,modelName,linkAddress,isUsed from tblModules where id=?
 [DEBUG] 2018-01-02 17:20:48,015 Line:922 上述自定义执行的语句参数显示： 
 [DEBUG] 2018-01-02 17:20:48,016 Line:988 1值：d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,016 Line:1025 query condition columnName:isCatalog----value:0
 [DEBUG] 2018-01-02 17:20:48,016 Line:1025 query condition columnName:tblName----value:CRMClientInfo
 [DEBUG] 2018-01-02 17:20:48,017 Line:1025 query condition columnName:modelName----value:ea9434ab_1801021720479890037
 [DEBUG] 2018-01-02 17:20:48,017 Line:1025 query condition columnName:linkAddress----value:/UserFunctionQueryAction.do?tableName=CRMClientInfo
 [DEBUG] 2018-01-02 17:20:48,017 Line:1025 query condition columnName:isUsed----value:1
 [DEBUG] 2018-01-02 17:20:48,017 Line:1043 ---上述语句时间---2
 [DEBUG] 2018-01-02 17:20:48,017 Line:313 exeCondition:tblModules_update :true
 [DEBUG] 2018-01-02 17:20:48,021 Line:321 flag:true
 [DEBUG] 2018-01-02 17:20:48,021 Line:1081 自定义执行的语句显示： tblModules_update:update tblModelOperations set moduleOpId= id where f_ref=? and (moduleOpId is null or moduleOpId=0)
 [DEBUG] 2018-01-02 17:20:48,021 Line:1157 1值：d7068534_1712271505115570027
 [DEBUG] 2018-01-02 17:20:48,022 Line:1163 DefineSQLBean.execSql  define=tblModules_update,  影响行数=0
 [DEBUG] 2018-01-02 17:20:48,022 Line:408 ************上述语句执行时间：1
 [DEBUG] 2018-01-02 17:20:48,022 Line:313 exeCondition:tblModules_update :0==0&&'CRMClientInfo'.length==0&&'/UserFunctionQueryAction.do?tableName=CRMClientInfo'.length!=0
 [DEBUG] 2018-01-02 17:20:48,023 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:48,023 Line:313 exeCondition:tblModules_update :0==0&&'1'=='1'&&'/UserFunctionQueryAction.do?tableName=CRMClientInfo'=='/UserFunctionQueryAction.do?parentTableName=CRMClientInfo&tableName=CRMPeriodicExamine'
 [DEBUG] 2018-01-02 17:20:48,024 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:48,024 Line:313 exeCondition:tblModules_update :0==0&&'1'=='2'&&'/UserFunctionQueryAction.do?tableName=CRMClientInfo'=='/UserFunctionQueryAction.do?parentTableName=CRMClientInfo&tableName=CRMPeriodicExamine'
 [DEBUG] 2018-01-02 17:20:48,025 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:48,025 Line:313 exeCondition:tblModules_update : '' !='' 
 [DEBUG] 2018-01-02 17:20:48,026 Line:321 flag:false
 [DEBUG] 2018-01-02 17:20:49,495 Line:135 BaseAction.execute 请求地址：/UserFunctionQueryAction.do?tableName=tblModules&operation=5&keyId=d7068534_1712271505115570027&parentCode=000190087N&f_brother=&draftQuery=&moduleType=&checkTab=Y&parentTableName=&pageNo=1&winCurIndex=3&popWinName=PopMainOpdiv
 [DEBUG] 2018-01-02 17:20:49,496 Line:146 BaseAction.execute 操作人:Boos;请求数据：tableName=[tblModules,];operation=[5,];keyId=[d7068534_1712271505115570027,];parentCode=[000190087N,];f_brother=[,];draftQuery=[,];moduleType=[,];checkTab=[Y,];parentTableName=[,];pageNo=[1,];winCurIndex=[3,];popWinName=[PopMainOpdiv,];
 [DEBUG] 2018-01-02 17:20:49,498 Line:5010 OAMyWorkFLowMgt.getOAMyWorkFlowInfo 取流程详情 sql=select a.createBy,applyType,a.checkPerson,nextNodeIds,currentNode,b.oaTimeLimitUnit,b.benchmarkTime,a.applyContent,a.departmentCode,a.tableName,a.keyId,a.id,a.lastNodeId,a.lastCheckPerson,a.applyContent,display as currentNodeName from OAMyWorkFlow a  left join OAMyWorkFlowDet b on a.id=b.f_ref left join OAWorkFlowNode c on c.flowId=a.applyType and c.keyId=a.currentNode  where a.keyId='d7068534_1712271505115570027' and  a.tableName='tblModules'
 [DEBUG] 2018-01-02 17:20:49,507 Line:1525  select * from  tblModelOperations where f_ref = 'd7068534_1712271505115570027' order by id
 [DEBUG] 2018-01-02 17:32:52,438 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 17:57:00,689 Line:152 UtilServlet.service 请求地址：/UtilServlet?operation=adviceData&time=1514887020680
 [DEBUG] 2018-01-02 17:57:00,696 Line:163 UtilServlet.service 操作人:Boos;请求数据：operation=[adviceData,];time=[1514887020680,];
 [DEBUG] 2018-01-02 18:03:11,884 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 18:33:32,220 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 [DEBUG] 2018-01-02 19:03:39,600 Line:56 ConfigRefresh.getLastInfo -- and refresh ip
 